'use strict';

var obsidian = require('obsidian');

/******************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
/* global Reflect, Promise, SuppressedError, Symbol, Iterator */


function __awaiter(thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
}

typeof SuppressedError === "function" ? SuppressedError : function (error, suppressed, message) {
    var e = new Error(message);
    return e.name = "SuppressedError", e.error = error, e.suppressed = suppressed, e;
};

/**
 * Sisyphus UI Effects â€” Toast notifications, floating rewards, and visual feedback.
 */
function showToast(opts) {
    var _a, _b;
    const toast = document.createElement('div');
    toast.className = `sisy-toast sisy-toast-${(_a = opts.variant) !== null && _a !== void 0 ? _a : 'success'}`;
    if (opts.icon) {
        const icon = document.createElement('span');
        icon.className = 'sisy-toast-icon';
        icon.textContent = opts.icon;
        toast.appendChild(icon);
    }
    const body = document.createElement('div');
    body.className = 'sisy-toast-body';
    const title = document.createElement('div');
    title.className = 'sisy-toast-title';
    title.textContent = opts.title;
    body.appendChild(title);
    if (opts.message) {
        const msg = document.createElement('div');
        msg.className = 'sisy-toast-msg';
        msg.textContent = opts.message;
        body.appendChild(msg);
    }
    toast.appendChild(body);
    if (opts.action) {
        const btn = document.createElement('button');
        btn.className = 'sisy-toast-action';
        btn.textContent = opts.action.label;
        btn.onclick = () => {
            opts.action.callback();
            removeToast(toast);
        };
        toast.appendChild(btn);
    }
    document.body.appendChild(toast);
    const duration = (_b = opts.duration) !== null && _b !== void 0 ? _b : 4000;
    setTimeout(() => removeToast(toast), duration);
}
function removeToast(toast) {
    if (!toast.parentNode)
        return;
    toast.classList.add('sisy-toast-exit');
    setTimeout(() => toast.remove(), 300);
}
/* === FLOATING REWARD ANIMATION === */
function floatReward(text, type = 'xp') {
    const el = document.createElement('div');
    el.className = `sisy-float-reward sisy-float-${type}`;
    el.textContent = text;
    // Position near the center-top of the viewport
    el.style.left = `${50 + (Math.random() * 10 - 5)}%`;
    el.style.top = `40%`;
    el.style.transform = 'translateX(-50%)';
    document.body.appendChild(el);
    setTimeout(() => el.remove(), 1600);
}
/* === CONTEXT-AWARE EMPTY STATES === */
const EMPTY_MESSAGES = {
    quests: [
        { icon: 'ðŸ›¡ï¸', text: 'All quiet on the front.', hint: 'Deploy a quest to break the silence.' },
        { icon: 'âš”ï¸', text: 'The battlefield awaits.', hint: 'No active threats detected.' },
        { icon: 'ðŸŽ¯', text: 'Target acquired: nothing.', hint: 'Time to create some chaos.' },
    ],
    missions: [
        { icon: 'ðŸ“‹', text: 'No missions briefed.', hint: 'Missions refresh daily at dawn.' },
    ],
    research: [
        { icon: 'ðŸ”¬', text: 'The lab is empty.', hint: 'Start a research quest to fill it.' },
    ],
};
function getEmptyMessage(category) {
    var _a;
    const messages = (_a = EMPTY_MESSAGES[category]) !== null && _a !== void 0 ? _a : EMPTY_MESSAGES['quests'];
    return messages[Math.floor(Math.random() * messages.length)];
}
/** Render a styled empty state element */
function renderEmptyState(parent, category, ctaText, ctaCb) {
    const msg = getEmptyMessage(category);
    const el = parent.createDiv({ cls: 'sisy-empty-state' });
    const icon = el.createDiv({ cls: 'sisy-empty-icon' });
    icon.textContent = msg.icon;
    el.createDiv({ text: msg.text });
    el.createDiv({ text: msg.hint, cls: 'sisy-empty-hint' });
    if (ctaText && ctaCb) {
        const btn = el.createEl('button', { text: ctaText, cls: 'sisy-btn mod-cta' });
        btn.style.marginTop = '10px';
        btn.onclick = ctaCb;
    }
    return el;
}

// EVENT BUS SYSTEM
class TinyEmitter {
    constructor() {
        this.listeners = {};
    }
    on(event, fn) {
        (this.listeners[event] = this.listeners[event] || []).push(fn);
    }
    off(event, fn) {
        if (!this.listeners[event])
            return;
        this.listeners[event] = this.listeners[event].filter(f => f !== fn);
    }
    trigger(event, data) {
        (this.listeners[event] || []).forEach(fn => fn(data));
    }
}
class AudioController {
    constructor(muted) {
        this.audioCtx = null;
        this.brownNoiseNode = null;
        this.muted = false;
        this.muted = muted;
    }
    setMuted(muted) { this.muted = muted; }
    initAudio() { if (!this.audioCtx)
        this.audioCtx = new (window.AudioContext || window.webkitAudioContext)(); }
    playTone(freq, type, duration, vol = 0.1) {
        if (this.muted)
            return;
        this.initAudio();
        const osc = this.audioCtx.createOscillator();
        const gain = this.audioCtx.createGain();
        osc.type = type;
        osc.frequency.value = freq;
        osc.connect(gain);
        gain.connect(this.audioCtx.destination);
        osc.start();
        gain.gain.setValueAtTime(vol, this.audioCtx.currentTime);
        gain.gain.exponentialRampToValueAtTime(0.00001, this.audioCtx.currentTime + duration);
        osc.stop(this.audioCtx.currentTime + duration);
    }
    playSound(type) {
        if (type === "success") {
            this.playTone(600, "sine", 0.1);
            setTimeout(() => this.playTone(800, "sine", 0.2), 100);
        }
        else if (type === "fail") {
            this.playTone(150, "sawtooth", 0.4);
            setTimeout(() => this.playTone(100, "sawtooth", 0.4), 150);
        }
        else if (type === "death") {
            this.playTone(50, "square", 1.0);
        }
        else if (type === "click") {
            this.playTone(800, "sine", 0.05);
        }
        else if (type === "heartbeat") {
            this.playTone(60, "sine", 0.1, 0.5);
            setTimeout(() => this.playTone(50, "sine", 0.1, 0.4), 150);
        }
        else if (type === "meditate") {
            this.playTone(432, "sine", 2.0, 0.05);
        }
    }
    toggleBrownNoise() {
        this.initAudio();
        if (this.brownNoiseNode) {
            this.brownNoiseNode.disconnect();
            this.brownNoiseNode = null;
            new obsidian.Notice("Focus Audio: OFF");
        }
        else {
            const bufferSize = 4096;
            this.brownNoiseNode = this.audioCtx.createScriptProcessor(bufferSize, 1, 1);
            let lastOut = 0;
            this.brownNoiseNode.onaudioprocess = (e) => {
                const output = e.outputBuffer.getChannelData(0);
                for (let i = 0; i < bufferSize; i++) {
                    const white = Math.random() * 2 - 1;
                    output[i] = (lastOut + (0.02 * white)) / 1.02;
                    lastOut = output[i];
                    output[i] *= 0.1;
                }
            };
            this.brownNoiseNode.connect(this.audioCtx.destination);
            new obsidian.Notice("Focus Audio: ON (Brown Noise)");
        }
    }
}

class ChaosModal extends obsidian.Modal {
    constructor(app, m) { super(app); this.modifier = m; }
    onOpen() {
        const c = this.contentEl;
        const h1 = c.createEl("h1", { text: "THE OMEN" });
        h1.setAttribute("style", "text-align:center; color:#f55;");
        const ic = c.createEl("div", { text: this.modifier.icon });
        ic.setAttribute("style", "font-size:80px; text-align:center;");
        const h2 = c.createEl("h2", { text: this.modifier.name });
        h2.setAttribute("style", "text-align:center;");
        const p = c.createEl("p", { text: this.modifier.desc });
        p.setAttribute("style", "text-align:center");
        const b = c.createEl("button", { text: "Acknowledge" });
        b.addClass("mod-cta");
        b.style.display = "block";
        b.style.margin = "20px auto";
        b.onclick = () => this.close();
    }
    onClose() { this.contentEl.empty(); }
}
class ShopModal extends obsidian.Modal {
    constructor(app, plugin) { super(app); this.plugin = plugin; }
    onOpen() {
        const { contentEl } = this;
        contentEl.createEl("h2", { text: "ðŸ›’ BLACK MARKET" });
        contentEl.createEl("p", { text: `Purse: ðŸª™ ${this.plugin.settings.gold}` });
        // 1. Standard Items
        this.item(contentEl, "ðŸ’‰ Stimpack", "Heal 20 HP", 50, () => __awaiter(this, void 0, void 0, function* () {
            this.plugin.settings.hp = Math.min(this.plugin.settings.maxHp, this.plugin.settings.hp + 20);
        }));
        this.item(contentEl, "ðŸ’£ Sabotage", "-5 Rival Dmg", 200, () => __awaiter(this, void 0, void 0, function* () {
            this.plugin.settings.rivalDmg = Math.max(5, this.plugin.settings.rivalDmg - 5);
        }));
        this.item(contentEl, "ðŸ›¡ï¸ Shield", "24h Protection", 150, () => __awaiter(this, void 0, void 0, function* () {
            this.plugin.settings.shieldedUntil = obsidian.moment().add(24, 'hours').toISOString();
        }));
        this.item(contentEl, "ðŸ˜´ Rest Day", "Safe for 24h", 100, () => __awaiter(this, void 0, void 0, function* () {
            this.plugin.settings.restDayUntil = obsidian.moment().add(24, 'hours').toISOString();
        }));
        // 2. Power-Ups
        contentEl.createEl("h3", { text: "ðŸ§ª ALCHEMY" });
        const buffs = [
            { id: "focus_potion", name: "Focus Potion", icon: "ðŸ§ª", desc: "2x XP (1h)", cost: 100, duration: 60, effect: { xpMult: 2 } },
            { id: "midas_touch", name: "Midas Touch", icon: "âœ¨", desc: "3x Gold (30m)", cost: 150, duration: 30, effect: { goldMult: 3 } },
            { id: "iron_will", name: "Iron Will", icon: "ðŸ›¡ï¸", desc: "50% Dmg Reduct (2h)", cost: 200, duration: 120, effect: { damageMult: 0.5 } }
        ];
        buffs.forEach(buff => {
            this.item(contentEl, `${buff.icon} ${buff.name}`, buff.desc, buff.cost, () => __awaiter(this, void 0, void 0, function* () {
                this.plugin.engine.activateBuff(buff);
            }));
        });
    }
    item(el, name, desc, baseCost, effect) {
        // [FIX] Apply Inflation Multiplier
        const mult = this.plugin.settings.dailyModifier.priceMult || 1;
        const realCost = Math.ceil(baseCost * mult);
        const c = el.createDiv();
        c.setAttribute("style", "display:flex; justify-content:space-between; padding:10px 0; border-bottom:1px solid #333;");
        const i = c.createDiv();
        i.createEl("b", { text: name });
        // Show inflated price warning if applicable
        if (mult > 1) {
            i.createEl("span", { text: ` (ðŸ“ˆ Inf: ${mult}x)`, attr: { style: "color: red; font-size: 0.8em;" } });
        }
        i.createEl("div", { text: desc });
        const b = c.createEl("button", { text: `${realCost} G` });
        if (this.plugin.settings.gold < realCost) {
            b.setAttribute("disabled", "true");
            b.style.opacity = "0.5";
        }
        else {
            b.addClass("mod-cta");
            b.onclick = () => __awaiter(this, void 0, void 0, function* () {
                this.plugin.settings.gold -= realCost;
                yield effect();
                yield this.plugin.engine.save();
                new obsidian.Notice(`Bought ${name} for ${realCost}g`);
                this.close();
                new ShopModal(this.app, this.plugin).open();
            });
        }
    }
    onClose() { this.contentEl.empty(); }
}
class QuestModal extends obsidian.Modal {
    constructor(app, plugin) {
        super(app);
        this.difficulty = 3;
        this.skill = "None";
        this.secSkill = "None";
        this.deadline = "";
        this.highStakes = false;
        this.isBoss = false;
        this.plugin = plugin;
    }
    onOpen() {
        const { contentEl } = this;
        contentEl.createEl("h2", { text: "âš”ï¸ DEPLOYMENT" });
        new obsidian.Setting(contentEl).setName("Objective").addText(t => { t.onChange(v => this.name = v); setTimeout(() => t.inputEl.focus(), 50); });
        new obsidian.Setting(contentEl).setName("Difficulty").addDropdown(d => d.addOption("1", "Trivial").addOption("2", "Easy").addOption("3", "Medium").addOption("4", "Hard").addOption("5", "SUICIDE").setValue("3").onChange(v => this.difficulty = parseInt(v)));
        const skills = { "None": "None" };
        this.plugin.settings.skills.forEach(s => skills[s.name] = s.name);
        skills["+ New"] = "+ New";
        new obsidian.Setting(contentEl).setName("Primary Node").addDropdown(d => d.addOptions(skills).onChange(v => { if (v === "+ New") {
            this.close();
            new SkillManagerModal(this.app, this.plugin).open();
        }
        else
            this.skill = v; }));
        new obsidian.Setting(contentEl).setName("Synergy Node").addDropdown(d => d.addOptions(skills).setValue("None").onChange(v => this.secSkill = v));
        new obsidian.Setting(contentEl).setName("Deadline").addText(t => { t.inputEl.type = "datetime-local"; t.onChange(v => this.deadline = v); });
        new obsidian.Setting(contentEl).setName("High Stakes").setDesc("Double Gold / Double Damage").addToggle(t => t.setValue(false).onChange(v => this.highStakes = v));
        new obsidian.Setting(contentEl).addButton(b => b.setButtonText("Deploy").setCta().onClick(() => { if (this.name) {
            this.plugin.engine.createQuest(this.name, this.difficulty, this.skill, this.secSkill, this.deadline, this.highStakes, "Normal", this.isBoss);
            this.close();
        } }));
    }
    onClose() { this.contentEl.empty(); }
}
class SkillManagerModal extends obsidian.Modal {
    constructor(app, plugin) { super(app); this.plugin = plugin; }
    onOpen() {
        const { contentEl } = this;
        contentEl.createEl("h2", { text: "Add New Node" });
        let n = "";
        new obsidian.Setting(contentEl).setName("Node Name").addText(t => t.onChange(v => n = v)).addButton(b => b.setButtonText("Create").setCta().onClick(() => __awaiter(this, void 0, void 0, function* () {
            if (n) {
                this.plugin.settings.skills.push({ name: n, level: 1, xp: 0, xpReq: 5, lastUsed: new Date().toISOString(), rust: 0, connections: [] });
                yield this.plugin.engine.save();
                this.close();
            }
        })));
    }
    onClose() { this.contentEl.empty(); }
}
class SkillDetailModal extends obsidian.Modal {
    constructor(app, plugin, index) { super(app); this.plugin = plugin; this.index = index; }
    onOpen() {
        const { contentEl } = this;
        const s = this.plugin.settings.skills[this.index];
        if (!s) {
            contentEl.createEl("p", { text: "Skill not found." });
            return;
        }
        contentEl.createEl("h2", { text: `Node: ${s.name}` });
        new obsidian.Setting(contentEl).setName("Name").addText(t => t.setValue(s.name).onChange(v => s.name = v));
        new obsidian.Setting(contentEl).setName("Rust Status").setDesc(`Stacks: ${s.rust}`).addButton(b => b.setButtonText("Manual Polish").onClick(() => __awaiter(this, void 0, void 0, function* () { s.rust = 0; s.xpReq = Math.floor(s.xpReq / 1.1); yield this.plugin.engine.save(); this.close(); new obsidian.Notice("Rust polished."); })));
        const div = contentEl.createDiv();
        div.setAttribute("style", "margin-top:20px; display:flex; justify-content:space-between;");
        const bSave = div.createEl("button", { text: "Save" });
        bSave.addClass("mod-cta");
        bSave.onclick = () => __awaiter(this, void 0, void 0, function* () { yield this.plugin.engine.save(); this.close(); });
        const bDel = div.createEl("button", { text: "Delete Node" });
        bDel.setAttribute("style", "color:red;");
        bDel.onclick = () => __awaiter(this, void 0, void 0, function* () { this.plugin.settings.skills.splice(this.index, 1); yield this.plugin.engine.save(); this.close(); });
    }
    onClose() { this.contentEl.empty(); }
}
class QuickCaptureModal extends obsidian.Modal {
    constructor(app, plugin) { super(app); this.plugin = plugin; }
    onOpen() {
        const { contentEl } = this;
        contentEl.createEl("h2", { text: "âš¡ Quick Capture" });
        const div = contentEl.createDiv();
        const input = div.createEl("input", { type: "text", attr: { placeholder: "What's on your mind?", style: "width: 100%; padding: 10px; font-size: 1.2em; background: #222; border: 1px solid #444; color: #e0e0e0;" } });
        input.focus();
        input.addEventListener("keypress", (e) => __awaiter(this, void 0, void 0, function* () { if (e.key === "Enter" && input.value.trim().length > 0) {
            yield this.plugin.engine.createScrap(input.value);
            this.close();
        } }));
        const btn = contentEl.createEl("button", { text: "Capture to Scraps" });
        btn.addClass("mod-cta");
        btn.setAttribute("style", "margin-top: 15px; width: 100%;");
        btn.onclick = () => __awaiter(this, void 0, void 0, function* () { if (input.value.trim().length > 0) {
            yield this.plugin.engine.createScrap(input.value);
            this.close();
        } });
    }
    onClose() { this.contentEl.empty(); }
}
class QuestTemplateModal extends obsidian.Modal {
    constructor(app, plugin) { super(app); this.plugin = plugin; }
    onOpen() {
        const { contentEl } = this;
        contentEl.createEl("h2", { text: "âš¡ Quick Deploy Templates" });
        const grid = contentEl.createDiv();
        grid.style.display = "grid";
        grid.style.gridTemplateColumns = "1fr 1fr";
        grid.style.gap = "10px";
        const templates = this.plugin.settings.questTemplates || [];
        if (templates.length === 0)
            grid.createDiv({ text: "No templates found. Create one in Settings." });
        templates.forEach(template => {
            const btn = grid.createEl("button", { text: template.name });
            btn.addClass("sisy-btn");
            btn.style.textAlign = "left";
            btn.style.padding = "15px";
            btn.createDiv({ text: `Diff: ${template.diff} | Skill: ${template.skill}`, attr: { style: "font-size: 0.8em; opacity: 0.7; margin-top: 5px;" } });
            btn.onclick = () => {
                let deadline = "";
                if (template.deadline.startsWith("+")) {
                    const raw = template.deadline.replace(/^\+\s*/, "").replace(/\s*h(our)?s?$/i, "");
                    const hours = parseInt(raw, 10);
                    deadline = isNaN(hours) || hours < 0
                        ? obsidian.moment().add(24, 'hours').toISOString()
                        : obsidian.moment().add(hours, 'hours').toISOString();
                }
                else if (template.deadline.includes(":")) {
                    const [h, m] = template.deadline.split(":");
                    const hour = parseInt(h, 10) || 0;
                    const minute = parseInt(m, 10) || 0;
                    deadline = obsidian.moment().set({ hour, minute }).toISOString();
                    if (obsidian.moment().isAfter(deadline))
                        deadline = obsidian.moment(deadline).add(1, 'day').toISOString();
                }
                else {
                    deadline = obsidian.moment().add(24, 'hours').toISOString();
                }
                this.plugin.engine.createQuest(template.name, template.diff, template.skill, "None", deadline, false, "Normal", false);
                new obsidian.Notice(`Deployed: ${template.name}`);
                this.close();
            };
        });
    }
    onClose() { this.contentEl.empty(); }
}
class ResearchQuestModal extends obsidian.Modal {
    constructor(app, plugin) {
        super(app);
        this.title = "";
        this.type = "survey";
        this.linkedSkill = "None";
        this.linkedCombatQuest = "None";
        this.plugin = plugin;
    }
    onOpen() {
        const { contentEl } = this;
        contentEl.createEl("h2", { text: "RESEARCH DEPLOYMENT" });
        new obsidian.Setting(contentEl).setName("Research Title").addText(t => { t.onChange(v => this.title = v); setTimeout(() => t.inputEl.focus(), 50); });
        new obsidian.Setting(contentEl).setName("Research Type").addDropdown(d => d.addOption("survey", "Survey (100-200 words)").addOption("deep_dive", "Deep Dive (200-400 words)").setValue("survey").onChange(v => this.type = v));
        const skills = { "None": "None" };
        this.plugin.settings.skills.forEach(s => skills[s.name] = s.name);
        new obsidian.Setting(contentEl).setName("Linked Skill").addDropdown(d => d.addOptions(skills).setValue("None").onChange(v => this.linkedSkill = v));
        const combatQuests = { "None": "None" };
        const questFolder = this.app.vault.getAbstractFileByPath("Active_Run/Quests");
        if (questFolder instanceof obsidian.TFolder) {
            questFolder.children.forEach(f => { if (f instanceof obsidian.TFile && f.extension === "md")
                combatQuests[f.basename] = f.basename; });
        }
        new obsidian.Setting(contentEl).setName("Link Combat Quest").addDropdown(d => d.addOptions(combatQuests).setValue("None").onChange(v => this.linkedCombatQuest = v));
        new obsidian.Setting(contentEl).addButton(b => b.setButtonText("CREATE RESEARCH").setCta().onClick(() => __awaiter(this, void 0, void 0, function* () {
            if (!this.title)
                return;
            const res = yield this.plugin.engine.createResearchQuest(this.title, this.type, this.linkedSkill, this.linkedCombatQuest);
            if (res.success)
                this.close();
        })));
    }
    onClose() { this.contentEl.empty(); }
}
class ResearchListModal extends obsidian.Modal {
    constructor(app, plugin) { super(app); this.plugin = plugin; }
    onOpen() {
        const { contentEl } = this;
        contentEl.createEl("h2", { text: "RESEARCH LIBRARY" });
        const stats = this.plugin.engine.getResearchRatio();
        const statsEl = contentEl.createDiv({ cls: "sisy-research-stats" });
        statsEl.createEl("p", { text: `Combat Quests: ${stats.combat}` });
        statsEl.createEl("p", { text: `Research Quests: ${stats.research}` });
        statsEl.createEl("p", { text: `Ratio: ${stats.ratio}:1` });
        if (!this.plugin.engine.canCreateResearchQuest()) {
            const warning = contentEl.createDiv();
            warning.setAttribute("style", "color: orange; font-weight: bold; margin: 10px 0;");
            warning.setText("RESEARCH BLOCKED: Need 2:1 combat to research ratio");
        }
        contentEl.createEl("h3", { text: "Active Research" });
        const quests = this.plugin.settings.researchQuests.filter(q => !q.completed);
        if (quests.length === 0)
            contentEl.createEl("p", { text: "No active research quests." });
        else
            quests.forEach((q) => {
                const card = contentEl.createDiv({ cls: "sisy-research-card" });
                card.setAttribute("style", "border: 1px solid #444; padding: 10px; margin: 5px 0; border-radius: 4px;");
                const header = card.createEl("h4", { text: q.title });
                header.setAttribute("style", "margin: 0 0 5px 0;");
                const info = card.createEl("div");
                const codeEl = info.createEl("code");
                codeEl.style.color = "#aa64ff";
                codeEl.setText(q.id);
                info.createEl("br");
                info.appendText(`Type: ${q.type === "survey" ? "Survey" : "Deep Dive"} | Words: ${q.wordCount}/${q.wordLimit}`);
                info.setAttribute("style", "font-size: 0.9em; opacity: 0.8;");
                const actions = card.createDiv();
                actions.setAttribute("style", "margin-top: 8px; display: flex; gap: 5px;");
                const completeBtn = actions.createEl("button", { text: "COMPLETE" });
                completeBtn.setAttribute("style", "flex: 1; padding: 5px; background: green; color: white; border: none; border-radius: 3px; cursor: pointer;");
                completeBtn.onclick = () => { this.plugin.engine.completeResearchQuest(q.id, q.wordCount); this.close(); };
                const deleteBtn = actions.createEl("button", { text: "DELETE" });
                deleteBtn.setAttribute("style", "flex: 1; padding: 5px; background: red; color: white; border: none; border-radius: 3px; cursor: pointer;");
                deleteBtn.onclick = () => __awaiter(this, void 0, void 0, function* () { yield this.plugin.engine.deleteResearchQuest(q.id); this.close(); });
            });
        contentEl.createEl("h3", { text: "Completed Research" });
        const completed = this.plugin.settings.researchQuests.filter(q => q.completed);
        if (completed.length === 0)
            contentEl.createEl("p", { text: "No completed research." });
        else
            completed.forEach((q) => { const item = contentEl.createEl("p"); item.setText(`+ ${q.title} (${q.type === "survey" ? "Survey" : "Deep Dive"})`); item.setAttribute("style", "opacity: 0.6; font-size: 0.9em;"); });
    }
    onClose() { this.contentEl.empty(); }
}
class ChainBuilderModal extends obsidian.Modal {
    constructor(app, plugin) {
        super(app);
        this.chainName = "";
        this.selectedQuests = [];
        this.plugin = plugin;
    }
    onOpen() {
        const { contentEl } = this;
        contentEl.createEl("h2", { text: "CHAIN BUILDER" });
        new obsidian.Setting(contentEl).setName("Chain Name").addText(t => { t.onChange(v => this.chainName = v); setTimeout(() => t.inputEl.focus(), 50); });
        contentEl.createEl("h3", { text: "Select Quests" });
        const questFolder = this.app.vault.getAbstractFileByPath("Active_Run/Quests");
        const quests = [];
        if (questFolder instanceof obsidian.TFolder) {
            questFolder.children.forEach(f => { if (f instanceof obsidian.TFile && f.extension === "md")
                quests.push(f.basename); });
        }
        quests.forEach((quest, idx) => { new obsidian.Setting(contentEl).setName(quest).addToggle(t => t.onChange(v => { if (v)
            this.selectedQuests.push(quest);
        else
            this.selectedQuests = this.selectedQuests.filter(q => q !== quest); })); });
        new obsidian.Setting(contentEl).addButton(b => b.setButtonText("CREATE CHAIN").setCta().onClick(() => __awaiter(this, void 0, void 0, function* () { if (this.chainName && this.selectedQuests.length >= 2) {
            yield this.plugin.engine.createQuestChain(this.chainName, this.selectedQuests);
            this.close();
        }
        else
            new obsidian.Notice("Chain needs a name and at least 2 quests"); })));
    }
    onClose() { this.contentEl.empty(); }
}
class VictoryModal extends obsidian.Modal {
    constructor(app, plugin) { super(app); this.plugin = plugin; }
    onOpen() {
        const { contentEl } = this;
        contentEl.addClass("sisy-victory-modal");
        contentEl.createEl("h1", { text: "ASCENSION ACHIEVED", cls: "sisy-victory-title" });
        contentEl.createEl("div", { text: "ðŸ†", attr: { style: "font-size: 60px; margin: 20px 0;" } });
        const stats = contentEl.createDiv();
        const legacy = this.plugin.settings.legacy;
        const metrics = this.plugin.engine.getGameStats();
        this.statLine(stats, "Final Level", "50");
        this.statLine(stats, "Total Quests", `${metrics.totalQuests}`);
        this.statLine(stats, "Deaths Endured", `${legacy.deathCount}`);
        this.statLine(stats, "Longest Streak", `${metrics.longestStreak} days`);
        contentEl.createEl("p", { text: "One must imagine Sisyphus happy. You have pushed the boulder to the peak.", attr: { style: "margin: 30px 0; font-style: italic; opacity: 0.8;" } });
        const btn = contentEl.createEl("button", { text: "BEGIN NEW GAME+" });
        btn.addClass("mod-cta");
        btn.style.width = "100%";
        btn.onclick = () => { this.close(); };
    }
    statLine(el, label, val) { const line = el.createDiv({ cls: "sisy-victory-stat" }); line.createSpan({ text: `${label}: ` }); const highlight = line.createSpan({ cls: "sisy-victory-highlight" }); highlight.setText(val); }
    onClose() { this.contentEl.empty(); }
}
class DeathModal extends obsidian.Modal {
    constructor(app, plugin) { super(app); this.plugin = plugin; }
    onOpen() {
        const { contentEl } = this;
        contentEl.addClass("sisy-death-modal");
        contentEl.createEl("h1", { text: "YOU DIED", cls: "sisy-death-title", attr: { style: "text-align:center; color:#f55;" } });
        contentEl.createEl("div", { text: "â˜ ï¸", attr: { style: "font-size: 60px; margin: 20px 0; text-align: center;" } });
        const legacy = this.plugin.settings.legacy || { deathCount: 0, souls: 0, perks: { startGold: 0, startSkillPoints: 0, rivalDelay: 0 }, relics: [] };
        const streak = this.plugin.settings.streak || { longest: 0, current: 0, lastDate: "" };
        const stats = contentEl.createDiv({ attr: { style: "margin: 20px 0;" } });
        this.statLine(stats, "Level Reached", `${this.plugin.settings.level}`);
        this.statLine(stats, "Deaths (after this)", `${legacy.deathCount + 1}`);
        this.statLine(stats, "Longest Streak", `${streak.longest || 0} days`);
        contentEl.createEl("p", { text: "One must imagine Sisyphus happy. The boulder rolls back. You keep only your Scars.", attr: { style: "margin: 20px 0; font-style: italic; opacity: 0.8; text-align: center;" } });
        const btn = contentEl.createEl("button", { text: "ACCEPT DEATH" });
        btn.addClass("mod-cta");
        btn.style.width = "100%";
        btn.onclick = () => __awaiter(this, void 0, void 0, function* () {
            yield this.plugin.engine.triggerDeath();
            this.close();
        });
        contentEl.appendChild(btn);
    }
    statLine(el, label, val) { const line = el.createDiv({ cls: "sisy-victory-stat" }); line.createSpan({ text: `${label}: ` }); const highlight = line.createSpan({ cls: "sisy-victory-highlight" }); highlight.setText(val); }
    onClose() { this.contentEl.empty(); }
}
class ScarsModal extends obsidian.Modal {
    constructor(app, plugin) { super(app); this.plugin = plugin; }
    onOpen() {
        const { contentEl } = this;
        contentEl.createEl("h2", { text: "ðŸ§¬ SCARS" });
        contentEl.createEl("p", { text: "What persists across deaths.", attr: { style: "opacity: 0.8; margin-bottom: 15px;" } });
        const scars = this.plugin.settings.scars || [];
        if (scars.length === 0) {
            contentEl.createEl("p", { text: "No scars yet. They accumulate when you die.", cls: "sisy-empty-state" });
        }
        else {
            const list = contentEl.createDiv();
            scars.slice().reverse().forEach((s) => {
                const row = list.createDiv({ attr: { style: "padding: 10px; border-bottom: 1px solid #333; display: flex; justify-content: space-between; align-items: center;" } });
                row.createSpan({ text: `${s.label}: ${s.value}` });
                if (s.earnedAt)
                    row.createSpan({ text: new Date(s.earnedAt).toLocaleDateString(), attr: { style: "font-size: 0.85em; opacity: 0.7;" } });
            });
        }
    }
    onClose() { this.contentEl.empty(); }
}
class TemplateManagerModal extends obsidian.Modal {
    constructor(app, plugin) {
        super(app);
        this.newName = "";
        this.newDiff = 1;
        this.newSkill = "None";
        this.newDeadline = "+2h";
        this.plugin = plugin;
    }
    onOpen() {
        this.display();
    }
    display() {
        const { contentEl } = this;
        contentEl.empty();
        contentEl.createEl("h2", { text: "Manage Templates" });
        // 1. List Existing Templates
        const listDiv = contentEl.createDiv();
        listDiv.style.marginBottom = "20px";
        listDiv.style.maxHeight = "300px";
        listDiv.style.overflowY = "auto";
        this.plugin.settings.questTemplates.forEach((t, idx) => {
            const row = listDiv.createDiv();
            row.style.display = "flex";
            row.style.justifyContent = "space-between";
            row.style.alignItems = "center";
            row.style.padding = "10px";
            row.style.borderBottom = "1px solid #333";
            row.createDiv({ text: `${t.name} (D${t.diff}, ${t.skill}, ${t.deadline})` });
            const delBtn = row.createEl("button", { text: "Delete" });
            delBtn.style.color = "red";
            delBtn.onclick = () => __awaiter(this, void 0, void 0, function* () {
                this.plugin.settings.questTemplates.splice(idx, 1);
                yield this.plugin.saveSettings();
                this.display(); // Refresh UI
            });
        });
        // 2. Add New Template Form
        contentEl.createEl("h3", { text: "Add New Template" });
        new obsidian.Setting(contentEl).setName("Name").addText(t => t.onChange(v => this.newName = v));
        new obsidian.Setting(contentEl).setName("Difficulty (1-5)").addText(t => t.setValue("1").onChange(v => { const n = parseInt(v, 10); this.newDiff = isNaN(n) ? 1 : Math.min(5, Math.max(1, n)); }));
        new obsidian.Setting(contentEl).setName("Skill").addText(t => t.setValue("None").onChange(v => this.newSkill = v));
        new obsidian.Setting(contentEl).setName("Deadline").setDesc("Format: '10:00' or '+2h'").addText(t => t.setValue("+2h").onChange(v => this.newDeadline = v));
        new obsidian.Setting(contentEl).addButton(b => b
            .setButtonText("Add Template")
            .setCta()
            .onClick(() => __awaiter(this, void 0, void 0, function* () {
            if (!this.newName)
                return;
            this.plugin.settings.questTemplates.push({
                name: this.newName,
                diff: Math.min(5, Math.max(1, this.newDiff || 1)),
                skill: this.newSkill || "None",
                deadline: this.newDeadline || "+2h"
            });
            yield this.plugin.saveSettings();
            this.display(); // Refresh UI to show new item
            new obsidian.Notice("Template added.");
            // Reset fields
            this.newName = "";
        })));
    }
    onClose() {
        this.contentEl.empty();
    }
}

/**
 * Weekly Review Modal â€” Shows a narrative summary of the past week's performance.
 */
class WeeklyReviewModal extends obsidian.Modal {
    constructor(app, plugin) {
        super(app);
        this.plugin = plugin;
    }
    onOpen() {
        var _a;
        const { contentEl } = this;
        contentEl.addClass('sisy-review');
        const now = obsidian.moment();
        const weekAgo = obsidian.moment().subtract(7, 'days');
        // Filter metrics for last 7 days
        const weekMetrics = (this.plugin.settings.dayMetrics || []).filter((d) => {
            const date = obsidian.moment(d.date);
            return date.isAfter(weekAgo) && date.isBefore(now.clone().add(1, 'day'));
        });
        // Aggregate stats
        const totalQuests = weekMetrics.reduce((s, d) => s + (d.questsCompleted || 0), 0);
        const totalFails = weekMetrics.reduce((s, d) => s + (d.questsFailed || 0), 0);
        const totalXp = weekMetrics.reduce((s, d) => s + (d.xpEarned || 0), 0);
        const totalGold = weekMetrics.reduce((s, d) => s + (d.goldEarned || 0), 0);
        const totalDmg = weekMetrics.reduce((s, d) => s + (d.damagesTaken || 0), 0);
        const daysActive = weekMetrics.length;
        const successRate = totalQuests + totalFails > 0
            ? Math.round((totalQuests / (totalQuests + totalFails)) * 100) : 0;
        // Find best day
        let bestDay = 'N/A';
        let bestDayQuests = 0;
        weekMetrics.forEach((d) => {
            if (d.questsCompleted > bestDayQuests) {
                bestDayQuests = d.questsCompleted;
                bestDay = obsidian.moment(d.date).format('dddd');
            }
        });
        // Collect unique skills leveled
        const skillsSet = new Set();
        weekMetrics.forEach((d) => {
            (d.skillsLeveled || []).forEach(s => skillsSet.add(s));
        });
        // --- RENDER ---
        const hero = contentEl.createDiv({ cls: 'sisy-review-hero' });
        hero.createEl('h2', { text: 'ðŸ“Š WEEKLY DEBRIEF' });
        hero.createEl('p', { text: `${weekAgo.format('MMM D')} â€” ${now.format('MMM D, YYYY')}`, cls: 'sisy-review-stat-label' });
        const stats = contentEl.createDiv({ cls: 'sisy-review-stats' });
        this.stat(stats, String(totalQuests), 'Quests Done');
        this.stat(stats, `${successRate}%`, 'Success Rate');
        this.stat(stats, `+${totalXp}`, 'XP Earned');
        this.stat(stats, `+${totalGold}`, 'Gold Earned');
        this.stat(stats, String(totalDmg), 'Damage Taken');
        this.stat(stats, `${daysActive}/7`, 'Days Active');
        this.stat(stats, bestDay, 'Best Day');
        this.stat(stats, String(((_a = this.plugin.settings.streak) === null || _a === void 0 ? void 0 : _a.current) || 0), 'Current Streak');
        // Narrative
        const narrative = contentEl.createDiv({ cls: 'sisy-review-narrative' });
        let text = '';
        if (totalQuests === 0) {
            text = 'The silence of inaction hangs heavy. Not a single quest was attempted this week. The Rival grows stronger.';
        }
        else if (successRate >= 80) {
            text = `Exceptional week. ${totalQuests} quests completed with an ${successRate}% success rate. ` +
                `${bestDay} was your most productive day. Keep this momentum.`;
        }
        else if (successRate >= 50) {
            text = `A battle-worn week.  ${totalQuests} quests completed, but ${totalFails} were lost. ` +
                `Sharpen your focus next week â€” the Rival shows no mercy.`;
        }
        else {
            text = `A brutal week. Only ${successRate}% success rate across ${totalQuests + totalFails} attempts. ` +
                `${totalDmg} damage absorbed. Regroup and reconsider your strategy.`;
        }
        if (skillsSet.size > 0) {
            text += ` Skills leveled: ${Array.from(skillsSet).join(', ')}.`;
        }
        narrative.textContent = text;
        // Close button
        const close = contentEl.createDiv({ cls: 'sisy-pomodoro-controls' });
        const btn = close.createEl('button', { text: 'DISMISS', cls: 'sisy-btn mod-cta' });
        btn.onclick = () => this.close();
    }
    stat(parent, value, label) {
        const box = parent.createDiv({ cls: 'sisy-review-stat' });
        box.createDiv({ text: value, cls: 'sisy-review-stat-val' });
        box.createDiv({ text: label, cls: 'sisy-review-stat-label' });
    }
    onClose() { this.contentEl.empty(); }
}
/**
 * Boss Encounter Modal â€” Dramatic boss introduction with health bar.
 */
class BossEncounterModal extends obsidian.Modal {
    constructor(app, plugin, bossName, bossLevel, bossSubtitle) {
        super(app);
        this.plugin = plugin;
        this.bossName = bossName;
        this.bossLevel = bossLevel;
        this.bossSubtitle = bossSubtitle;
    }
    onOpen() {
        const { contentEl } = this;
        contentEl.addClass('sisy-boss-modal');
        contentEl.style.animation = 'boss-entrance 0.6s ease-out';
        // Phase label
        contentEl.createDiv({ text: `âš ï¸ BOSS ENCOUNTER â€” LEVEL ${this.bossLevel}`, cls: 'sisy-boss-phase' });
        // Boss name
        contentEl.createDiv({ text: `â˜ ï¸ ${this.bossName}`, cls: 'sisy-boss-name' });
        // Subtitle
        contentEl.createDiv({ text: this.bossSubtitle, cls: 'sisy-boss-subtitle' });
        // Boss HP bar (visual only, full health)
        const hpBar = contentEl.createDiv({ cls: 'sisy-boss-hp-bar' });
        const fill = hpBar.createDiv({ cls: 'sisy-boss-hp-fill' });
        fill.style.width = '100%';
        // Lore text
        const lore = contentEl.createDiv({ cls: 'sisy-review-narrative' });
        lore.textContent = `A formidable challenge awaits. Complete the boss quest chain to defeat this adversary and claim legendary rewards.`;
        lore.style.textAlign = 'center';
        // Engage button
        const controls = contentEl.createDiv({ cls: 'sisy-pomodoro-controls' });
        const btn = controls.createEl('button', { text: 'âš”ï¸ ENGAGE', cls: 'sisy-btn mod-fail' });
        btn.style.fontSize = '1.1em';
        btn.style.padding = '12px 30px';
        btn.onclick = () => {
            this.plugin.audio.playSound('heartbeat');
            this.close();
        };
    }
    onClose() { this.contentEl.empty(); }
}

const ACHIEVEMENT_DEFINITIONS = [
    // â”€â”€â”€ COMMON (easy milestones) â”€â”€â”€
    { id: "first_blood", name: "First Blood", description: "Complete your first quest.", rarity: "common" },
    { id: "week_warrior", name: "Week Warrior", description: "Maintain a 7-day streak.", rarity: "common" },
    { id: "warm_up", name: "Warm Up", description: "Complete 10 total quests.", rarity: "common" },
    { id: "night_owl", name: "Night Owl", description: "Complete a quest after 10 PM.", rarity: "common" },
    { id: "early_bird", name: "Early Bird", description: "Complete a quest before 7 AM.", rarity: "common" },
    { id: "triple_threat", name: "Triple Threat", description: "Complete 3 quests in a single day.", rarity: "common" },
    // â”€â”€â”€ RARE (mid-game) â”€â”€â”€
    { id: "skill_adept", name: "Apprentice", description: "Reach Level 5 in any skill.", rarity: "rare" },
    { id: "chain_gang", name: "Chain Gang", description: "Complete a Quest Chain.", rarity: "rare" },
    { id: "researcher", name: "Scholar", description: "Complete 5 Research Quests.", rarity: "rare" },
    { id: "rich", name: "Capitalist", description: "Hold 500 gold at once.", rarity: "rare" },
    { id: "combo_king", name: "Combo King", description: "Reach a x5 combo.", rarity: "rare" },
    { id: "speed_demon", name: "Speed Demon", description: "Complete 5+ quests in one day.", rarity: "rare" },
    { id: "perfectionist", name: "Perfectionist", description: "7 consecutive days with 0 failures.", rarity: "rare" },
    { id: "iron_streak", name: "Iron Streak", description: "Maintain a 14-day streak.", rarity: "rare" },
    // â”€â”€â”€ EPIC (late-game) â”€â”€â”€
    { id: "boss_slayer", name: "Giant Slayer", description: "Defeat your first Boss.", rarity: "epic" },
    { id: "skill_master", name: "Skill Master", description: "Reach Level 10 in any skill.", rarity: "epic" },
    { id: "century", name: "Centurion", description: "Complete 100 total quests.", rarity: "epic" },
    { id: "phoenix", name: "Phoenix", description: "Die and reach Level 10 again.", rarity: "epic" },
    { id: "research_professor", name: "Professor", description: "Complete 20 Research Quests.", rarity: "epic" },
    { id: "gold_hoarder", name: "Gold Hoarder", description: "Hold 2000 gold at once.", rarity: "epic" },
    // â”€â”€â”€ LEGENDARY (endgame) â”€â”€â”€
    { id: "ascended", name: "Sisyphus Happy", description: "Reach Level 50.", rarity: "legendary" },
    { id: "immortal", name: "Immortal", description: "Reach Level 20 with 0 Deaths.", rarity: "legendary" },
    { id: "completionist", name: "Completionist", description: "Unlock all other achievements.", rarity: "legendary" },
    { id: "marathon", name: "Marathon", description: "Maintain a 30-day streak.", rarity: "legendary" },
    { id: "grand_master", name: "Grand Master", description: "Have 5 skills at Level 10+.", rarity: "legendary" },
];

class AnalyticsEngine {
    constructor(settings, audioController) {
        this.settings = settings;
        this.audioController = audioController;
    }
    /**
     * Ensure all achievements exist in settings
     */
    initializeAchievements() {
        // If achievements array is empty or missing definitions, sync it
        if (!this.settings.achievements)
            this.settings.achievements = [];
        ACHIEVEMENT_DEFINITIONS.forEach(def => {
            const exists = this.settings.achievements.find(a => a.id === def.id);
            if (!exists) {
                this.settings.achievements.push(Object.assign(Object.assign({}, def), { unlocked: false }));
            }
        });
    }
    trackDailyMetrics(type, amount = 1) {
        const today = obsidian.moment().format("YYYY-MM-DD");
        let metric = this.settings.dayMetrics.find(m => m.date === today);
        if (!metric) {
            metric = { date: today, questsCompleted: 0, questsFailed: 0, xpEarned: 0, goldEarned: 0, damagesTaken: 0, skillsLeveled: [], chainsCompleted: 0 };
            this.settings.dayMetrics.push(metric);
        }
        switch (type) {
            case "quest_complete":
                metric.questsCompleted += amount;
                break;
            case "quest_fail":
                metric.questsFailed += amount;
                break;
            case "xp":
                metric.xpEarned += amount;
                break;
            case "gold":
                metric.goldEarned += amount;
                break;
            case "damage":
                metric.damagesTaken += amount;
                break;
            case "skill_level":
                metric.skillsLeveled.push("Skill leveled");
                break;
            case "chain_complete":
                metric.chainsCompleted += amount;
                break;
        }
        // Trigger Achievement Check after every metric update
        this.checkAchievements();
    }
    updateStreak() {
        const today = obsidian.moment().format("YYYY-MM-DD");
        const lastDate = this.settings.streak.lastDate;
        if (lastDate !== today) {
            const yesterday = obsidian.moment().subtract(1, 'day').format("YYYY-MM-DD");
            if (lastDate === yesterday) {
                // Continued from yesterday
                this.settings.streak.current++;
            }
            else if (!lastDate) {
                // First ever quest
                this.settings.streak.current = 1;
            }
            else {
                // Broken streak
                this.settings.streak.current = 1;
            }
            if (this.settings.streak.current > this.settings.streak.longest) {
                this.settings.streak.longest = this.settings.streak.current;
            }
            this.settings.streak.lastDate = today;
        }
        // Always check achievements
        this.checkAchievements();
    }
    checkAchievements() {
        this.initializeAchievements();
        const s = this.settings;
        const totalQuests = s.dayMetrics.reduce((sum, m) => sum + m.questsCompleted, 0);
        // 1. First Blood
        if (totalQuests >= 1)
            this.unlock("first_blood");
        // 2. Warm Up
        if (totalQuests >= 10)
            this.unlock("warm_up");
        // 3. Week Warrior
        if (s.streak.current >= 7)
            this.unlock("week_warrior");
        // 4. Skill Adept
        if (s.skills.some(skill => skill.level >= 5))
            this.unlock("skill_adept");
        // 5. Chain Gang
        if (s.chainHistory.length >= 1)
            this.unlock("chain_gang");
        // 6. Researcher
        if (s.researchStats.researchCompleted >= 5)
            this.unlock("researcher");
        // 7. Capitalist
        if (s.gold >= 500)
            this.unlock("rich");
        // 8. Giant Slayer
        if (s.bossMilestones.some(b => b.defeated))
            this.unlock("boss_slayer");
        // 9. Ascended
        if (s.level >= 50)
            this.unlock("ascended");
        // 10. Immortal
        if (s.level >= 20 && s.legacy.deathCount === 0)
            this.unlock("immortal");
    }
    unlock(id) {
        const ach = this.settings.achievements.find(a => a.id === id);
        if (ach && !ach.unlocked) {
            ach.unlocked = true;
            ach.unlockedAt = new Date().toISOString();
            if (this.audioController)
                this.audioController.playSound("success");
            // We return true so the caller can show a notice if they want, 
            // though usually the Notice is better handled here if we had access to that API easily, 
            // or let the engine handle the notification.
        }
    }
    // ... (Keep existing boss/report methods below as they were) ...
    initializeBossMilestones() {
        if (this.settings.bossMilestones.length === 0) {
            this.settings.bossMilestones = [
                { level: 10, name: "The First Trial", unlocked: false, defeated: false, xpReward: 500 },
                { level: 20, name: "The Nemesis Returns", unlocked: false, defeated: false, xpReward: 1000 },
                { level: 30, name: "The Reaper Awakens", unlocked: false, defeated: false, xpReward: 1500 },
                { level: 50, name: "The Final Ascension", unlocked: false, defeated: false, xpReward: 5000 }
            ];
        }
    }
    checkBossMilestones() {
        const messages = [];
        if (!this.settings.bossMilestones || this.settings.bossMilestones.length === 0)
            this.initializeBossMilestones();
        this.settings.bossMilestones.forEach((boss) => {
            if (this.settings.level >= boss.level && !boss.unlocked) {
                boss.unlocked = true;
                messages.push(`Boss Unlocked: ${boss.name} (Level ${boss.level})`);
                if (this.audioController)
                    this.audioController.playSound("success");
            }
        });
        return messages;
    }
    defeatBoss(level) {
        const boss = this.settings.bossMilestones.find((b) => b.level === level);
        if (!boss)
            return { success: false, message: "Boss not found", xpReward: 0 };
        if (boss.defeated)
            return { success: false, message: "Boss already defeated", xpReward: 0 };
        boss.defeated = true;
        boss.defeatedAt = new Date().toISOString();
        this.settings.xp += boss.xpReward;
        if (this.audioController)
            this.audioController.playSound("success");
        if (level === 50)
            this.winGame();
        return { success: true, message: `Boss Defeated: ${boss.name}! +${boss.xpReward} XP`, xpReward: boss.xpReward };
    }
    winGame() {
        this.settings.gameWon = true;
        this.settings.endGameDate = new Date().toISOString();
        if (this.audioController)
            this.audioController.playSound("success");
    }
    generateWeeklyReport() {
        const week = obsidian.moment().week();
        const startDate = obsidian.moment().startOf('week').format("YYYY-MM-DD");
        const endDate = obsidian.moment().endOf('week').format("YYYY-MM-DD");
        const weekMetrics = this.settings.dayMetrics.filter((m) => obsidian.moment(m.date).isBetween(obsidian.moment(startDate), obsidian.moment(endDate), null, '[]'));
        const totalQuests = weekMetrics.reduce((sum, m) => sum + m.questsCompleted, 0);
        const totalFailed = weekMetrics.reduce((sum, m) => sum + m.questsFailed, 0);
        const successRate = totalQuests + totalFailed > 0 ? Math.round((totalQuests / (totalQuests + totalFailed)) * 100) : 0;
        const totalXp = weekMetrics.reduce((sum, m) => sum + m.xpEarned, 0);
        const totalGold = weekMetrics.reduce((sum, m) => sum + m.goldEarned, 0);
        const topSkills = [...this.settings.skills].sort((a, b) => (b.level - a.level)).slice(0, 3).map((s) => s.name);
        const bestDay = weekMetrics.length > 0 ? weekMetrics.reduce((max, m) => m.questsCompleted > max.questsCompleted ? m : max).date : startDate;
        const worstDay = weekMetrics.length > 0 ? weekMetrics.reduce((min, m) => m.questsFailed > min.questsFailed ? m : min).date : startDate;
        const report = { week, startDate, endDate, totalQuests, successRate, totalXp, totalGold, topSkills, bestDay, worstDay };
        this.settings.weeklyReports.push(report);
        return report;
    }
    unlockAchievement(achievementId) {
        // This is a manual override if needed, logic is mostly in checkAchievements now
        this.checkAchievements();
        return true;
    }
    getGameStats() {
        return {
            level: this.settings.level,
            currentStreak: this.settings.streak.current,
            longestStreak: this.settings.streak.longest,
            totalQuests: this.settings.dayMetrics.reduce((sum, m) => sum + m.questsCompleted, 0),
            totalXp: this.settings.dayMetrics.reduce((sum, m) => sum + m.xpEarned, 0),
            gameWon: this.settings.gameWon,
            bossesDefeated: this.settings.bossMilestones.filter((b) => b.defeated).length,
            totalBosses: this.settings.bossMilestones.length
        };
    }
}

/**
 * DLC 3: Meditation & Recovery Engine
 * Handles lockdown state, meditation healing, and quest deletion quota
 *
 * ISOLATED: Only reads/writes to lockdownUntil, isMeditating, meditationClicksThisLockdown,
 *           questDeletionsToday, lastDeletionReset
 * DEPENDENCIES: moment, SisyphusSettings
 * SIDE EFFECTS: Plays audio (432 Hz tone)
 */
class MeditationEngine {
    constructor(settings, audioController) {
        this.meditationCooldownMs = 30000; // 30 seconds
        this.meditationAudioCtx = null;
        this.settings = settings;
        this.audioController = audioController;
    }
    /**
     * Check if currently locked down
     */
    isLockedDown() {
        if (!this.settings.lockdownUntil)
            return false;
        return obsidian.moment().isBefore(obsidian.moment(this.settings.lockdownUntil));
    }
    /**
     * Get lockdown time remaining in minutes
     */
    getLockdownTimeRemaining() {
        if (!this.isLockedDown()) {
            return { hours: 0, minutes: 0, totalMinutes: 0 };
        }
        const totalMinutes = obsidian.moment(this.settings.lockdownUntil).diff(obsidian.moment(), 'minutes');
        const hours = Math.floor(totalMinutes / 60);
        const minutes = totalMinutes % 60;
        return { hours, minutes, totalMinutes };
    }
    /**
     * Trigger lockdown after taking 50+ damage
     */
    triggerLockdown() {
        this.settings.lockdownUntil = obsidian.moment().add(6, 'hours').toISOString();
        this.settings.meditationClicksThisLockdown = 0;
    }
    /**
     * Perform one meditation cycle (click)
     * Returns: { success, cyclesDone, cyclesRemaining, message }
     */
    meditate() {
        var _a;
        if (!this.isLockedDown()) {
            return {
                success: false,
                cyclesDone: 0,
                cyclesRemaining: 0,
                message: "Not in lockdown. No need to meditate.",
                lockdownReduced: false
            };
        }
        if (this.settings.isMeditating) {
            return {
                success: false,
                cyclesDone: this.settings.meditationClicksThisLockdown,
                cyclesRemaining: Math.max(0, 10 - this.settings.meditationClicksThisLockdown),
                message: "Already meditating. Wait 30 seconds.",
                lockdownReduced: false
            };
        }
        this.settings.isMeditating = true;
        this.settings.meditationClicksThisLockdown++;
        // Play healing frequency
        this.playMeditationSound();
        const remaining = 10 - this.settings.meditationClicksThisLockdown;
        // Check if 10 cycles complete
        if (this.settings.meditationClicksThisLockdown >= 10) {
            const reducedTime = obsidian.moment(this.settings.lockdownUntil).subtract(5, 'hours');
            this.settings.lockdownUntil = reducedTime.toISOString();
            this.settings.meditationClicksThisLockdown = 0;
            if ((_a = this.audioController) === null || _a === void 0 ? void 0 : _a.playSound) {
                this.audioController.playSound("success");
            }
            // Auto-reset meditation flag after cooldown
            setTimeout(() => {
                this.settings.isMeditating = false;
            }, this.meditationCooldownMs);
            return {
                success: true,
                cyclesDone: 0,
                cyclesRemaining: 0,
                message: "Meditation complete. Lockdown reduced by 5 hours.",
                lockdownReduced: true
            };
        }
        // Auto-reset meditation flag after cooldown
        setTimeout(() => {
            this.settings.isMeditating = false;
        }, this.meditationCooldownMs);
        return {
            success: true,
            cyclesDone: this.settings.meditationClicksThisLockdown,
            cyclesRemaining: remaining,
            message: `Meditation (${this.settings.meditationClicksThisLockdown}/10) - ${remaining} cycles left`,
            lockdownReduced: false
        };
    }
    /**
     * Play 432 Hz healing frequency for 1 second
     */
    playMeditationSound() {
        try {
            if (!this.meditationAudioCtx || this.meditationAudioCtx.state === 'closed') {
                this.meditationAudioCtx = new (window.AudioContext || window.webkitAudioContext)();
            }
            const audioContext = this.meditationAudioCtx;
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            oscillator.frequency.value = 432;
            oscillator.type = "sine";
            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 1);
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 1);
        }
        catch (e) {
            console.log("Audio not available for meditation");
        }
    }
    /**
     * Get meditation status for current lockdown
     */
    getMeditationStatus() {
        const cyclesDone = this.settings.meditationClicksThisLockdown;
        const cyclesRemaining = Math.max(0, 10 - cyclesDone);
        const timeReduced = (10 - cyclesRemaining) * 30; // 30 min per cycle
        return {
            cyclesDone,
            cyclesRemaining,
            timeReduced
        };
    }
    /**
     * Reset deletion quota if new day
     */
    ensureDeletionQuotaReset() {
        const today = obsidian.moment().format("YYYY-MM-DD");
        if (this.settings.lastDeletionReset !== today) {
            this.settings.lastDeletionReset = today;
            this.settings.questDeletionsToday = 0;
        }
    }
    /**
     * Check if user has free deletions left today
     */
    canDeleteQuestFree() {
        this.ensureDeletionQuotaReset();
        return this.settings.questDeletionsToday < 3;
    }
    /**
     * Get deletion quota status
     */
    getDeletionQuota() {
        this.ensureDeletionQuotaReset();
        const remaining = Math.max(0, 3 - this.settings.questDeletionsToday);
        const paid = Math.max(0, this.settings.questDeletionsToday - 3);
        return {
            free: remaining,
            paid: paid,
            remaining: remaining
        };
    }
    /**
     * Get the cost of the next deletion without mutating state.
     * Use this to check affordability before calling applyDeletionCost.
     */
    getDeletionCost() {
        this.ensureDeletionQuotaReset();
        let cost = 0;
        let message = "";
        if (this.settings.questDeletionsToday >= 3) {
            cost = 10;
            message = `Quest deleted. Cost: -${cost}g`;
        }
        else {
            const remaining = 3 - this.settings.questDeletionsToday;
            message = `Quest deleted. (${remaining - 1} free deletions remaining)`;
        }
        return { cost, message };
    }
    /**
     * Apply deletion: increment quota and charge gold. Call only after checking getDeletionCost().
     * Returns: { cost, message }
     */
    applyDeletionCost() {
        const { cost, message } = this.getDeletionCost();
        this.settings.questDeletionsToday++;
        this.settings.gold -= cost;
        return { cost, message };
    }
}

class ResearchEngine {
    constructor(settings, app, audioController) {
        this.settings = settings;
        this.app = app;
        this.audioController = audioController;
    }
    createResearchQuest(title, type, linkedSkill, linkedCombatQuest) {
        return __awaiter(this, void 0, void 0, function* () {
            // [FIX] Allow first research quest for free (Cold Start), otherwise enforce 2:1
            if (this.settings.researchStats.totalResearch > 0 && !this.canCreateResearchQuest()) {
                return {
                    success: false,
                    message: "RESEARCH BLOCKED: Complete 2 combat quests per research quest"
                };
            }
            const wordLimit = type === "survey" ? 200 : 400;
            const questId = `research_${(this.settings.lastResearchQuestId || 0) + 1}`;
            const researchQuest = {
                id: questId,
                title: title,
                type: type,
                linkedSkill: linkedSkill,
                wordLimit: wordLimit,
                wordCount: 0,
                linkedCombatQuest: linkedCombatQuest,
                createdAt: new Date().toISOString(),
                completed: false
            };
            // [FIX] Create actual Markdown file
            const folderPath = "Active_Run/Research";
            if (!this.app.vault.getAbstractFileByPath(folderPath)) {
                yield this.app.vault.createFolder(folderPath);
            }
            const safeTitle = title.replace(/[^a-z0-9]/gi, '_').toLowerCase();
            const filename = `${folderPath}/${safeTitle}.md`;
            const content = `---
type: research
research_id: ${questId}
status: active
linked_skill: ${linkedSkill}
word_limit: ${wordLimit}
created: ${new Date().toISOString()}
---
# ðŸ“š ${title}
> [!INFO] Research Guidelines
> **Type:** ${type} | **Target:** ${wordLimit} words
> **Linked Skill:** ${linkedSkill}

Write your research here...
`;
            try {
                yield this.app.vault.create(filename, content);
            }
            catch (e) {
                new obsidian.Notice("Error creating research file. Check console.");
                console.error(e);
            }
            this.settings.researchQuests.push(researchQuest);
            this.settings.lastResearchQuestId = parseInt(questId.split('_')[1]);
            this.settings.researchStats.totalResearch++;
            return {
                success: true,
                message: `Research Quest Created: ${type === "survey" ? "Survey" : "Deep Dive"}`,
                questId: questId
            };
        });
    }
    completeResearchQuest(questId, finalWordCount) {
        var _a;
        const researchQuest = this.settings.researchQuests.find(q => q.id === questId);
        if (!researchQuest)
            return { success: false, message: "Research quest not found", xpReward: 0, goldPenalty: 0 };
        if (researchQuest.completed)
            return { success: false, message: "Quest already completed", xpReward: 0, goldPenalty: 0 };
        const minWords = Math.ceil(researchQuest.wordLimit * 0.8);
        if (finalWordCount < minWords) {
            return { success: false, message: `Too short! Need ${minWords} words.`, xpReward: 0, goldPenalty: 0 };
        }
        if (finalWordCount > researchQuest.wordLimit * 1.25) {
            return { success: false, message: `Too long! Max ${Math.ceil(researchQuest.wordLimit * 1.25)} words.`, xpReward: 0, goldPenalty: 0 };
        }
        let xpReward = researchQuest.type === "survey" ? 5 : 20;
        let goldPenalty = 0;
        if (finalWordCount > researchQuest.wordLimit) {
            const overagePercent = ((finalWordCount - researchQuest.wordLimit) / researchQuest.wordLimit) * 100;
            goldPenalty = Math.floor(20 * (overagePercent / 100));
        }
        const skill = this.settings.skills.find(s => s.name === researchQuest.linkedSkill);
        if (skill) {
            skill.xp += xpReward;
            if (skill.xp >= skill.xpReq) {
                skill.level++;
                skill.xp = 0;
            }
        }
        this.settings.gold -= goldPenalty;
        researchQuest.completed = true;
        researchQuest.completedAt = new Date().toISOString();
        this.settings.researchStats.researchCompleted++;
        if ((_a = this.audioController) === null || _a === void 0 ? void 0 : _a.playSound)
            this.audioController.playSound("success");
        let message = `Research Complete! +${xpReward} XP`;
        if (goldPenalty > 0)
            message += ` (-${goldPenalty}g tax)`;
        return { success: true, message, xpReward, goldPenalty };
    }
    deleteResearchQuest(questId) {
        return __awaiter(this, void 0, void 0, function* () {
            const index = this.settings.researchQuests.findIndex(q => q.id === questId);
            if (index !== -1) {
                const quest = this.settings.researchQuests[index];
                // [FIX] Try to find and delete the file
                const files = this.app.vault.getMarkdownFiles();
                const file = files.find(f => {
                    var _a;
                    const cache = this.app.metadataCache.getFileCache(f);
                    return ((_a = cache === null || cache === void 0 ? void 0 : cache.frontmatter) === null || _a === void 0 ? void 0 : _a.research_id) === questId;
                });
                if (file) {
                    yield this.app.vault.delete(file);
                }
                this.settings.researchQuests.splice(index, 1);
                if (!quest.completed)
                    this.settings.researchStats.totalResearch = Math.max(0, this.settings.researchStats.totalResearch - 1);
                else
                    this.settings.researchStats.researchCompleted = Math.max(0, this.settings.researchStats.researchCompleted - 1);
                return { success: true, message: "Research deleted" };
            }
            return { success: false, message: "Not found" };
        });
    }
    updateResearchWordCount(questId, newWordCount) {
        const researchQuest = this.settings.researchQuests.find(q => q.id === questId);
        if (researchQuest) {
            researchQuest.wordCount = newWordCount;
            return true;
        }
        return false;
    }
    getResearchRatio() {
        const stats = this.settings.researchStats;
        const ratio = stats.totalCombat / Math.max(1, stats.totalResearch);
        return { combat: stats.totalCombat, research: stats.totalResearch, ratio: ratio.toFixed(2) };
    }
    canCreateResearchQuest() {
        const stats = this.settings.researchStats;
        const ratio = stats.totalCombat / Math.max(1, stats.totalResearch);
        return ratio >= 2;
    }
}

/**
 * DLC 4: Quest Chains Engine
 * Handles multi-quest sequences with ordering, locking, and completion tracking
 *
 * ISOLATED: Only reads/writes to activeChains, chainHistory, currentChainId, chainQuestsCompleted
 * DEPENDENCIES: SisyphusSettings types
 * INTEGRATION POINTS: Needs to hook into completeQuest() in main engine for chain progression
 */
class ChainsEngine {
    constructor(settings, audioController) {
        this.settings = settings;
        this.audioController = audioController;
    }
    /**
     * Create a new quest chain
     */
    createQuestChain(name, questNames) {
        return __awaiter(this, void 0, void 0, function* () {
            if (questNames.length < 2) {
                return {
                    success: false,
                    message: "Chain must have at least 2 quests"
                };
            }
            const chainId = `chain_${Date.now()}`;
            const chain = {
                id: chainId,
                name: name,
                quests: questNames,
                currentIndex: 0,
                completed: false,
                startedAt: new Date().toISOString(),
                isBoss: questNames[questNames.length - 1].toLowerCase().includes("boss")
            };
            this.settings.activeChains.push(chain);
            this.settings.currentChainId = chainId;
            return {
                success: true,
                message: `Chain created: ${name} (${questNames.length} quests)`,
                chainId: chainId
            };
        });
    }
    /**
     * Get the current active chain
     */
    getActiveChain() {
        if (!this.settings.currentChainId)
            return null;
        const chain = this.settings.activeChains.find(c => c.id === this.settings.currentChainId);
        return (chain && !chain.completed) ? chain : null;
    }
    /**
     * Get the next quest that should be completed in the active chain
     */
    getNextQuestInChain() {
        const chain = this.getActiveChain();
        if (!chain)
            return null;
        return chain.quests[chain.currentIndex] || null;
    }
    /**
     * Check if a quest is part of an active (incomplete) chain
     */
    isQuestInChain(questName) {
        const chain = this.settings.activeChains.find(c => !c.completed);
        if (!chain)
            return false;
        return chain.quests.includes(questName);
    }
    /**
     * Check if a quest can be started (is it the next quest in the chain?)
     */
    canStartQuest(questName) {
        const chain = this.getActiveChain();
        if (!chain)
            return true; // Not in a chain, can start any quest
        const nextQuest = this.getNextQuestInChain();
        return nextQuest === questName;
    }
    /**
     * Mark a quest as completed in the chain
     * Advances chain if successful, awards bonus XP if chain completes
     */
    completeChainQuest(questName) {
        return __awaiter(this, void 0, void 0, function* () {
            const chain = this.getActiveChain();
            if (!chain) {
                return { success: false, message: "No active chain", chainComplete: false, bonusXp: 0 };
            }
            const currentQuest = chain.quests[chain.currentIndex];
            if (currentQuest !== questName) {
                return {
                    success: false,
                    message: "Quest is not next in chain",
                    chainComplete: false,
                    bonusXp: 0
                };
            }
            chain.currentIndex++;
            this.settings.chainQuestsCompleted++;
            // Check if chain is complete
            if (chain.currentIndex >= chain.quests.length) {
                return this.completeChain(chain);
            }
            const remaining = chain.quests.length - chain.currentIndex;
            const percent = Math.floor((chain.currentIndex / chain.quests.length) * 100);
            return {
                success: true,
                message: `Chain progress: ${chain.currentIndex}/${chain.quests.length} (${remaining} remaining, ${percent}% complete)`,
                chainComplete: false,
                bonusXp: 0
            };
        });
    }
    /**
     * Complete the entire chain
     */
    completeChain(chain) {
        return __awaiter(this, void 0, void 0, function* () {
            var _a;
            chain.completed = true;
            chain.completedAt = new Date().toISOString();
            const bonusXp = 100;
            this.settings.xp += bonusXp;
            const record = {
                chainId: chain.id,
                chainName: chain.name,
                totalQuests: chain.quests.length,
                completedAt: chain.completedAt,
                xpEarned: bonusXp
            };
            this.settings.chainHistory.push(record);
            if ((_a = this.audioController) === null || _a === void 0 ? void 0 : _a.playSound) {
                this.audioController.playSound("success");
            }
            return {
                success: true,
                message: `Chain complete: ${chain.name}! +${bonusXp} XP Bonus`,
                chainComplete: true,
                bonusXp: bonusXp
            };
        });
    }
    /**
     * Break an active chain
     * Keeps earned XP from completed quests
     */
    breakChain() {
        return __awaiter(this, void 0, void 0, function* () {
            const chain = this.getActiveChain();
            if (!chain) {
                return { success: false, message: "No active chain to break", xpKept: 0 };
            }
            const completed = chain.currentIndex;
            const xpKept = completed * 10; // Approximate XP from each quest
            // Save to history as broken
            const record = {
                chainId: chain.id,
                chainName: chain.name,
                totalQuests: chain.quests.length,
                completedAt: new Date().toISOString(),
                xpEarned: xpKept
            };
            this.settings.chainHistory.push(record);
            this.settings.activeChains = this.settings.activeChains.filter(c => c.id !== chain.id);
            this.settings.currentChainId = "";
            return {
                success: true,
                message: `Chain broken: ${chain.name}. Kept ${completed} quest completions (${xpKept} XP).`,
                xpKept: xpKept
            };
        });
    }
    /**
       * Handle file rename events to keep chains intact
       * @param oldName The previous basename of the file
       * @param newName The new basename of the file
       */
    handleRename(oldName, newName) {
        let changesMade = false;
        this.settings.activeChains.forEach(chain => {
            // Check if this chain contains the old quest name
            const index = chain.quests.indexOf(oldName);
            if (index !== -1) {
                // Replace with new name
                chain.quests[index] = newName;
                changesMade = true;
            }
        });
        // Also check history (optional, but good for data integrity)
        this.settings.chainHistory.forEach(record => {
            // If you store quest lists in history later, update them here.
            // Currently history is just summary data, so strictly not needed yet,
            // but good to keep in mind.
        });
        if (changesMade) {
            // Using console log for debug, Notice might be too spammy during batch renames
            console.log(`[Sisyphus] Updated chains for rename: ${oldName} -> ${newName}`);
        }
    }
    /**
     * Get progress of active chain
     */
    getChainProgress() {
        const chain = this.getActiveChain();
        if (!chain)
            return { completed: 0, total: 0, percent: 0 };
        return {
            completed: chain.currentIndex,
            total: chain.quests.length,
            percent: Math.floor((chain.currentIndex / chain.quests.length) * 100)
        };
    }
    /**
     * Get all completed chain records (history)
     */
    getChainHistory() {
        return this.settings.chainHistory;
    }
    /**
     * Get all active chains (not completed)
     */
    getActiveChains() {
        return this.settings.activeChains.filter(c => !c.completed);
    }
    /**
     * Get detailed state of active chain (for UI rendering)
     */
    getChainDetails() {
        const chain = this.getActiveChain();
        if (!chain) {
            return { chain: null, progress: { completed: 0, total: 0, percent: 0 }, questStates: [] };
        }
        const progress = this.getChainProgress();
        const questStates = chain.quests.map((quest, idx) => {
            if (idx < chain.currentIndex) {
                return { quest, status: 'completed' };
            }
            else if (idx === chain.currentIndex) {
                return { quest, status: 'active' };
            }
            else {
                return { quest, status: 'locked' };
            }
        });
        return { chain, progress, questStates };
    }
}

/**
 * DLC 5: Context Filters Engine
 * Handles quest filtering by energy level, location context, and custom tags
 *
 * ISOLATED: Only reads/writes to questFilters, filterState
 * DEPENDENCIES: SisyphusSettings types, TFile (for quest metadata)
 * NOTE: This is primarily a VIEW LAYER concern, but keeping logic isolated is good
 */
class FiltersEngine {
    constructor(settings) {
        this.settings = settings;
    }
    /**
       * Handle file rename events to preserve filters
       * @param oldName The previous basename
       * @param newName The new basename
       */
    handleRename(oldName, newName) {
        const filterData = this.settings.questFilters[oldName];
        if (filterData) {
            // 1. Assign data to new key
            this.settings.questFilters[newName] = filterData;
            // 2. Delete old key
            delete this.settings.questFilters[oldName];
            console.log(`[Sisyphus] Transferred filters: ${oldName} -> ${newName}`);
        }
    }
    /**
     * Garbage Collection: Clean up filters for files that no longer exist
     * Call this sparingly (e.g., on plugin load)
     */
    cleanupOrphans(existingFileNames) {
        const keys = Object.keys(this.settings.questFilters);
        let deleted = 0;
        keys.forEach(key => {
            if (!existingFileNames.includes(key)) {
                delete this.settings.questFilters[key];
                deleted++;
            }
        });
        if (deleted > 0) {
            console.log(`[Sisyphus] Cleaned up ${deleted} orphaned filter entries.`);
        }
    }
    /**
     * Set filter for a specific quest
     */
    setQuestFilter(questName, energy, context, tags) {
        this.settings.questFilters[questName] = {
            energyLevel: energy,
            context: context,
            tags: tags
        };
    }
    /**
     * Get filter for a specific quest
     */
    getQuestFilter(questName) {
        return this.settings.questFilters[questName] || null;
    }
    /**
     * Update the active filter state
     */
    setFilterState(energy, context, tags) {
        this.settings.filterState = {
            activeEnergy: energy,
            activeContext: context,
            activeTags: tags
        };
    }
    /**
     * Get current filter state
     */
    getFilterState() {
        return this.settings.filterState;
    }
    /**
     * Check if a quest matches current filter state
     */
    questMatchesFilter(questName) {
        const filters = this.settings.filterState;
        const questFilter = this.settings.questFilters[questName];
        // If no filter set for this quest, always show
        if (!questFilter)
            return true;
        // Energy filter
        if (filters.activeEnergy !== "any" && questFilter.energyLevel !== filters.activeEnergy) {
            return false;
        }
        // Context filter
        if (filters.activeContext !== "any" && questFilter.context !== filters.activeContext) {
            return false;
        }
        // Tags filter (requires ANY of the active tags)
        if (filters.activeTags.length > 0) {
            const hasTag = filters.activeTags.some((tag) => questFilter.tags.includes(tag));
            if (!hasTag)
                return false;
        }
        return true;
    }
    /**
     * Filter a list of quests based on current filter state
     */
    filterQuests(quests) {
        return quests.filter(quest => {
            const questName = quest.basename || quest.name;
            return this.questMatchesFilter(questName);
        });
    }
    /**
     * Get quests by specific energy level
     */
    getQuestsByEnergy(energy, quests) {
        return quests.filter(q => {
            const questName = q.basename || q.name;
            const filter = this.settings.questFilters[questName];
            return filter && filter.energyLevel === energy;
        });
    }
    /**
     * Get quests by specific context
     */
    getQuestsByContext(context, quests) {
        return quests.filter(q => {
            const questName = q.basename || q.name;
            const filter = this.settings.questFilters[questName];
            return filter && filter.context === context;
        });
    }
    /**
     * Get quests by specific tags
     */
    getQuestsByTags(tags, quests) {
        return quests.filter(q => {
            const questName = q.basename || q.name;
            const filter = this.settings.questFilters[questName];
            if (!filter)
                return false;
            return tags.some(tag => filter.tags.includes(tag));
        });
    }
    /**
     * Clear all active filters
     */
    clearFilters() {
        this.settings.filterState = {
            activeEnergy: "any",
            activeContext: "any",
            activeTags: []
        };
    }
    /**
     * Get all unique tags used across all quests
     */
    getAvailableTags() {
        const tags = new Set();
        for (const questName in this.settings.questFilters) {
            const filter = this.settings.questFilters[questName];
            (filter.tags || []).forEach((tag) => tags.add(tag));
        }
        return Array.from(tags).sort();
    }
    /**
     * Get summary stats about filtered state
     */
    getFilterStats(allQuests) {
        const filtered = this.filterQuests(allQuests);
        const activeFiltersCount = (this.settings.filterState.activeEnergy !== "any" ? 1 : 0) +
            (this.settings.filterState.activeContext !== "any" ? 1 : 0) +
            (this.settings.filterState.activeTags.length > 0 ? 1 : 0);
        return {
            total: allQuests.length,
            filtered: filtered.length,
            activeFiltersCount: activeFiltersCount
        };
    }
    /**
     * Toggle a specific filter value
     * Useful for UI toggle buttons
     */
    toggleEnergyFilter(energy) {
        if (this.settings.filterState.activeEnergy === energy) {
            this.settings.filterState.activeEnergy = "any";
        }
        else {
            this.settings.filterState.activeEnergy = energy;
        }
    }
    /**
     * Toggle context filter
     */
    toggleContextFilter(context) {
        if (this.settings.filterState.activeContext === context) {
            this.settings.filterState.activeContext = "any";
        }
        else {
            this.settings.filterState.activeContext = context;
        }
    }
    /**
     * Toggle a tag in the active tag list
     */
    toggleTag(tag) {
        const idx = this.settings.filterState.activeTags.indexOf(tag);
        if (idx >= 0) {
            this.settings.filterState.activeTags.splice(idx, 1);
        }
        else {
            this.settings.filterState.activeTags.push(tag);
        }
    }
}

/**
 * Pure game formulas for Sisyphus Engine.
 * No Obsidian or runtime deps â€” safe to unit test.
 */
const BOSS_DATA = {
    10: { name: "The Gatekeeper", desc: "The first major filter.", hp_pen: 20 },
    20: { name: "The Shadow Self", desc: "Your own bad habits manifest.", hp_pen: 30 },
    30: { name: "The Mountain", desc: "The peak is visible.", hp_pen: 40 },
    50: { name: "Sisyphus Prime", desc: "One must imagine Sisyphus happy.", hp_pen: 99 },
};
function getDifficultyNumber(diffLabel) {
    var _a;
    const map = {
        Trivial: 1,
        Easy: 2,
        Medium: 3,
        Hard: 4,
        SUICIDE: 5,
    };
    return (_a = map[diffLabel]) !== null && _a !== void 0 ? _a : 3;
}
function questRewardsByDifficulty(diff, xpReq, isBoss, highStakes) {
    if (isBoss) {
        return { xpReward: 1000, goldReward: 1000, diffLabel: "â˜ ï¸ BOSS" };
    }
    let xpReward;
    let goldReward;
    let diffLabel;
    switch (diff) {
        case 1:
            xpReward = Math.floor(xpReq * 0.05);
            goldReward = 10;
            diffLabel = "Trivial";
            break;
        case 2:
            xpReward = Math.floor(xpReq * 0.1);
            goldReward = 20;
            diffLabel = "Easy";
            break;
        case 3:
            xpReward = Math.floor(xpReq * 0.2);
            goldReward = 40;
            diffLabel = "Medium";
            break;
        case 4:
            xpReward = Math.floor(xpReq * 0.4);
            goldReward = 80;
            diffLabel = "Hard";
            break;
        case 5:
            xpReward = Math.floor(xpReq * 0.6);
            goldReward = 150;
            diffLabel = "SUICIDE";
            break;
        default:
            xpReward = Math.floor(xpReq * 0.2);
            goldReward = 40;
            diffLabel = "Medium";
    }
    if (highStakes)
        goldReward = Math.floor(goldReward * 1.5);
    return { xpReward, goldReward, diffLabel };
}
/**
 * Compute fail damage: base + rival, then buff mult, then boss penalty, then debt double.
 */
function computeFailDamage(rivalDmg, gold, damageMult, bossHpPenalty) {
    let d = 10 + Math.floor(rivalDmg / 2);
    d = Math.floor(d * damageMult);
    d += bossHpPenalty;
    if (gold < 0)
        d *= 2;
    return d;
}
function getBossHpPenalty(level) {
    var _a, _b;
    return (_b = (_a = BOSS_DATA[level]) === null || _a === void 0 ? void 0 : _a.hp_pen) !== null && _b !== void 0 ? _b : 0;
}

const DEFAULT_MODIFIER = { name: "Clear Skies", desc: "No effects.", xpMult: 1, goldMult: 1, priceMult: 1, icon: "â˜€ï¸" };
const CHAOS_TABLE = [
    { name: "Clear Skies", desc: "Normal.", xpMult: 1, goldMult: 1, priceMult: 1, icon: "â˜€ï¸" },
    { name: "Flow State", desc: "+50% XP.", xpMult: 1.5, goldMult: 1, priceMult: 1, icon: "ðŸŒŠ" },
    { name: "Windfall", desc: "+50% Gold.", xpMult: 1, goldMult: 1.5, priceMult: 1, icon: "ðŸ’°" },
    { name: "Inflation", desc: "Prices 2x.", xpMult: 1, goldMult: 1, priceMult: 2, icon: "ðŸ“ˆ" },
    { name: "Brain Fog", desc: "XP 0.5x.", xpMult: 0.5, goldMult: 1, priceMult: 1, icon: "ðŸŒ«ï¸" },
    { name: "Rival Sabotage", desc: "Gold 0.5x.", xpMult: 1, goldMult: 0.5, priceMult: 1, icon: "ðŸ•µï¸" },
    { name: "Adrenaline", desc: "2x XP, -5 HP/Q.", xpMult: 2, goldMult: 1, priceMult: 1, icon: "ðŸ’‰" }
];
const MISSION_POOL = [
    { id: "morning_win", name: "â˜€ï¸ Morning Win", desc: "Complete 1 Trivial quest before 10 AM", target: 1, reward: { xp: 0, gold: 15 }, check: "morning_trivial" },
    { id: "momentum", name: "ðŸ”¥ Momentum", desc: "Complete 3 quests today", target: 3, reward: { xp: 20, gold: 0 }, check: "quest_count" },
    { id: "zero_inbox", name: "ðŸ§˜ Zero Inbox", desc: "Process all files in 'Scraps'", target: 1, reward: { xp: 0, gold: 10 }, check: "zero_inbox" },
    { id: "specialist", name: "ðŸŽ¯ Specialist", desc: "Use the same skill 3 times", target: 3, reward: { xp: 15, gold: 0 }, check: "skill_repeat" },
    { id: "high_stakes", name: "ðŸ’ª High Stakes", desc: "Complete 1 High Stakes quest", target: 1, reward: { xp: 0, gold: 30 }, check: "high_stakes" },
    { id: "speed_demon", name: "âš¡ Speed Demon", desc: "Complete quest within 2h of creation", target: 1, reward: { xp: 25, gold: 0 }, check: "fast_complete" },
    { id: "synergist", name: "ðŸ”— Synergist", desc: "Complete quest with Primary + Secondary skill", target: 1, reward: { xp: 0, gold: 10 }, check: "synergy" },
    { id: "survivor", name: "ðŸ›¡ï¸ Survivor", desc: "Don't take any damage today", target: 1, reward: { xp: 0, gold: 20 }, check: "no_damage" },
    { id: "risk_taker", name: "ðŸŽ² Risk Taker", desc: "Complete Difficulty 4+ quest", target: 1, reward: { xp: 15, gold: 0 }, check: "hard_quest" }
];
class SisyphusEngine extends TinyEmitter {
    constructor(app, plugin, audio) {
        super();
        // [FEATURE] Undo Buffer
        this.deletedQuestBuffer = [];
        this.app = app;
        this.plugin = plugin;
        this.audio = audio;
        this.analyticsEngine = new AnalyticsEngine(this.plugin.settings, this.audio);
        this.meditationEngine = new MeditationEngine(this.plugin.settings, this.audio);
        this.researchEngine = new ResearchEngine(this.plugin.settings, this.app, this.audio);
        this.chainsEngine = new ChainsEngine(this.plugin.settings, this.audio);
        this.filtersEngine = new FiltersEngine(this.plugin.settings);
    }
    get settings() { return this.plugin.settings; }
    set settings(val) { this.plugin.settings = val; }
    save() {
        return __awaiter(this, void 0, void 0, function* () { yield this.plugin.saveSettings(); this.trigger("update"); });
    }
    /** Same sanitization as createQuest; use for lookup. */
    toSafeQuestName(name) {
        return name.replace(/[^a-z0-9]/gi, '_').toLowerCase();
    }
    // [FIX] Safe Archiver: Handles duplicates by renaming (Quest -> Quest (1))
    safeArchive(file_1) {
        return __awaiter(this, arguments, void 0, function* (file, subfolder = "Archive") {
            const root = "Active_Run";
            const targetFolder = `${root}/${subfolder}`;
            if (!this.app.vault.getAbstractFileByPath(root))
                yield this.app.vault.createFolder(root);
            if (!this.app.vault.getAbstractFileByPath(targetFolder))
                yield this.app.vault.createFolder(targetFolder);
            let targetPath = `${targetFolder}/${file.name}`;
            // Collision Detection Loop
            let counter = 1;
            while (this.app.vault.getAbstractFileByPath(targetPath)) {
                targetPath = `${targetFolder}/${file.basename} (${counter}).${file.extension}`;
                counter++;
            }
            yield this.app.fileManager.renameFile(file, targetPath);
        });
    }
    activateBuff(item) {
        const expires = obsidian.moment().add(item.duration, 'minutes').toISOString();
        this.settings.activeBuffs.push({
            id: item.id,
            name: item.name,
            icon: item.icon,
            expiresAt: expires,
            effect: item.effect
        });
        new obsidian.Notice(`ðŸ¥¤ Gulp! ${item.name} active for ${item.duration}m`);
    }
    rollDailyMissions() {
        const available = [...MISSION_POOL];
        const selected = [];
        for (let i = 0; i < 3; i++) {
            if (available.length === 0)
                break;
            const idx = Math.floor(Math.random() * available.length);
            const mission = available.splice(idx, 1)[0];
            selected.push(Object.assign(Object.assign({}, mission), { checkFunc: mission.check, progress: 0, completed: false }));
        }
        this.settings.dailyMissions = selected;
        this.settings.dailyMissionDate = obsidian.moment().format("YYYY-MM-DD");
        this.settings.questsCompletedToday = 0;
        this.settings.skillUsesToday = {};
    }
    checkDailyMissions(context) {
        const now = obsidian.moment();
        let justFinishedAll = false;
        this.settings.dailyMissions.forEach(mission => {
            if (mission.completed)
                return;
            switch (mission.checkFunc) {
                case "zero_inbox":
                    const scraps = this.app.vault.getAbstractFileByPath("Scraps");
                    if (scraps instanceof obsidian.TFolder) {
                        mission.progress = scraps.children.length === 0 ? 1 : 0;
                    }
                    else {
                        mission.progress = 1;
                    }
                    break;
                case "morning_trivial":
                    if (context.type === "complete" && context.difficulty === 1 && now.hour() < 10)
                        mission.progress++;
                    break;
                case "quest_count":
                    if (context.type === "complete")
                        mission.progress = this.settings.questsCompletedToday;
                    break;
                case "high_stakes":
                    if (context.type === "complete" && context.highStakes)
                        mission.progress++;
                    break;
                case "fast_complete":
                    if (context.type === "complete" && context.questCreated && obsidian.moment().diff(obsidian.moment(context.questCreated), 'hours') <= 2)
                        mission.progress++;
                    break;
                case "synergy":
                    if (context.type === "complete" && context.skill && context.secondarySkill && context.secondarySkill !== "None")
                        mission.progress++;
                    break;
                case "no_damage":
                    if (context.type === "damage")
                        mission.progress = 0;
                    break;
                case "hard_quest":
                    if (context.type === "complete" && context.difficulty && context.difficulty >= 4)
                        mission.progress++;
                    break;
                case "skill_repeat":
                    if (context.type === "complete" && context.skill) {
                        this.settings.skillUsesToday[context.skill] = (this.settings.skillUsesToday[context.skill] || 0) + 1;
                        mission.progress = Math.max(0, ...Object.values(this.settings.skillUsesToday));
                    }
                    break;
            }
            if (mission.progress >= mission.target && !mission.completed) {
                mission.completed = true;
                this.grantRewards(mission.reward.xp, mission.reward.gold, `mission:${mission.id}`);
                new obsidian.Notice(`âœ… Mission Complete: ${mission.name}`);
                this.audio.playSound("success");
                if (this.settings.dailyMissions.every(m => m.completed))
                    justFinishedAll = true;
            }
        });
        if (justFinishedAll) {
            this.grantRewards(0, 50, 'missions:all_complete_bonus');
            new obsidian.Notice("ðŸŽ‰ All Missions Complete! +50 Bonus Gold");
            this.audio.playSound("success");
        }
    }
    getDifficultyNumber(diffLabel) {
        return getDifficultyNumber(diffLabel);
    }
    grantRewards(xp, gold, reason) {
        this.plugin.kernel.events.emit('reward:granted', { xp, gold, reason });
    }
    checkDailyLogin() {
        return __awaiter(this, void 0, void 0, function* () {
            this.plugin.kernel.events.emit('session:start', { now: new Date().toISOString() });
        });
    }
    completeQuest(file) {
        return __awaiter(this, void 0, void 0, function* () {
            var _a;
            if (this.meditationEngine.isLockedDown()) {
                new obsidian.Notice("LOCKDOWN ACTIVE");
                return;
            }
            // --- COMBO SYSTEM ---
            const now = Date.now();
            const timeDiff = now - this.settings.lastCompletionTime;
            const COMBO_WINDOW = 10 * 60 * 1000; // 10 minutes
            if (timeDiff < COMBO_WINDOW) {
                this.settings.comboCount++;
                this.audio.playSound("success");
            }
            else {
                this.settings.comboCount = 1;
            }
            this.settings.lastCompletionTime = now;
            // ---------------------------
            const fm = (_a = this.app.metadataCache.getFileCache(file)) === null || _a === void 0 ? void 0 : _a.frontmatter;
            if (!fm)
                return;
            const questName = file.basename;
            if (this.chainsEngine.isQuestInChain(questName)) {
                const canStart = this.chainsEngine.canStartQuest(questName);
                if (!canStart) {
                    new obsidian.Notice("Locked by Chain.");
                    return;
                }
                const chainResult = yield this.chainsEngine.completeChainQuest(questName);
                if (chainResult.success) {
                    new obsidian.Notice(chainResult.message);
                    if (chainResult.chainComplete) {
                        this.grantRewards(chainResult.bonusXp, 0, 'chain:completion_bonus');
                        new obsidian.Notice(`ðŸŽ‰ Chain Bonus: +${chainResult.bonusXp} XP!`);
                    }
                }
            }
            this.analyticsEngine.trackDailyMetrics("quest_complete", 1);
            this.settings.researchStats.totalCombat++;
            // Rewards
            let xpMult = this.settings.dailyModifier.xpMult;
            let goldMult = this.settings.dailyModifier.goldMult;
            this.settings.activeBuffs.forEach(b => {
                if (b.effect.xpMult)
                    xpMult *= b.effect.xpMult;
                if (b.effect.goldMult)
                    goldMult *= b.effect.goldMult;
            });
            let xp = (fm.xp_reward || 20) * xpMult;
            let gold = (fm.gold_reward || 0) * goldMult;
            if (this.settings.comboCount > 1) {
                const bonus = Math.floor(xp * 0.1 * (this.settings.comboCount - 1));
                xp += bonus;
                new obsidian.Notice(`ðŸ”¥ COMBO x${this.settings.comboCount}! +${bonus} Bonus XP`);
            }
            const skillName = fm.skill || "None";
            const secondary = fm.secondary_skill || "None";
            const bossMatch = fm.is_boss ? file.basename.match(/BOSS_LVL(\d+)/) : null;
            const bossLevel = bossMatch ? parseInt(bossMatch[1]) : null;
            this.plugin.kernel.events.emit('quest:completed', {
                questId: file.basename,
                difficulty: this.getDifficultyNumber(fm.difficulty),
                skillName,
                secondarySkill: secondary,
                highStakes: !!fm.high_stakes,
                isBoss: !!fm.is_boss,
                bossLevel,
                xpReward: xp,
                goldReward: gold
            });
            this.audio.playSound("success");
            if (this.settings.hp <= 0) {
                return;
            }
            this.settings.questsCompletedToday++;
            this.analyticsEngine.updateStreak();
            this.checkDailyMissions({
                type: "complete",
                difficulty: this.getDifficultyNumber(fm.difficulty),
                skill: skillName,
                secondarySkill: secondary,
                highStakes: fm.high_stakes
            });
            yield this.app.fileManager.processFrontMatter(file, (f) => { f.status = "completed"; f.completed_at = new Date().toISOString(); });
            // [FIX] Use Safe Archive to prevent duplicates/zombies
            yield this.safeArchive(file, "Archive");
            // *** RECURRING QUEST: auto-redeploy if marked recurring ***
            if (fm.recurring) {
                const nextDeadline = this.computeNextRecurringDeadline(fm.recurring_interval || 'daily', fm.deadline);
                yield this.createQuest(file.basename, this.getDifficultyNumber(fm.difficulty), fm.skill || 'None', fm.secondary_skill || 'None', nextDeadline, !!fm.high_stakes, fm.priority || 'normal', !!fm.is_boss);
                // Mark the re-created quest as recurring in frontmatter
                const newFile = this.app.vault.getAbstractFileByPath(`Active_Run/Quests/${this.toSafeQuestName(file.basename)}.md`);
                if (newFile instanceof obsidian.TFile) {
                    yield this.app.fileManager.processFrontMatter(newFile, (f) => {
                        f.recurring = true;
                        f.recurring_interval = fm.recurring_interval || 'daily';
                    });
                }
            }
            yield this.save();
        });
    }
    spawnBoss(level) {
        return __awaiter(this, void 0, void 0, function* () {
            const boss = BOSS_DATA[level];
            if (!boss)
                return;
            this.audio.playSound("heartbeat");
            new obsidian.Notice("âš ï¸ ANOMALY DETECTED...", 2000);
            setTimeout(() => __awaiter(this, void 0, void 0, function* () {
                this.audio.playSound("death");
                new BossEncounterModal(this.app, this.plugin, boss.name, level, boss.desc || 'A formidable adversary.').open();
                yield this.createQuest(`BOSS_LVL${level} - ${boss.name}`, 5, "Boss", "None", obsidian.moment().add(3, 'days').toISOString(), true, "Critical", true);
                setTimeout(() => __awaiter(this, void 0, void 0, function* () {
                    const safeName = this.toSafeQuestName(`BOSS_LVL${level} - ${boss.name}`);
                    const files = this.app.vault.getMarkdownFiles();
                    const file = files.find(f => f.basename.toLowerCase() === safeName);
                    if (file instanceof obsidian.TFile) {
                        const maxHp = 100 + (level * 20);
                        yield this.app.fileManager.processFrontMatter(file, (fm) => {
                            fm.boss_hp = maxHp;
                            fm.boss_max_hp = maxHp;
                        });
                        this.trigger("update");
                    }
                }), 500);
            }), 3000);
        });
    }
    damageBoss(file) {
        return __awaiter(this, void 0, void 0, function* () {
            var _a;
            const fm = (_a = this.app.metadataCache.getFileCache(file)) === null || _a === void 0 ? void 0 : _a.frontmatter;
            if (!fm || !fm.is_boss)
                return;
            const damage = 25;
            const currentHp = fm.boss_hp || 100;
            const newHp = currentHp - damage;
            if (newHp <= 0) {
                yield this.completeQuest(file);
                new obsidian.Notice("âš”ï¸ FINAL BLOW! Boss Defeated!");
            }
            else {
                yield this.app.fileManager.processFrontMatter(file, (f) => {
                    f.boss_hp = newHp;
                });
                this.audio.playSound("fail");
                new obsidian.Notice(`âš”ï¸ Boss Damaged! ${newHp}/${fm.boss_max_hp} HP remaining`);
                setTimeout(() => this.trigger("update"), 200);
            }
        });
    }
    failQuest(file_1) {
        return __awaiter(this, arguments, void 0, function* (file, manualAbort = false) {
            var _a;
            if (this.isResting() && !manualAbort) {
                new obsidian.Notice("Rest Day protection.");
                return;
            }
            if (this.isShielded() && !manualAbort) {
                new obsidian.Notice("Shielded!");
                return;
            }
            let damageMult = 1;
            this.settings.activeBuffs.forEach(b => {
                if (b.effect.damageMult)
                    damageMult *= b.effect.damageMult;
            });
            const fm = (_a = this.app.metadataCache.getFileCache(file)) === null || _a === void 0 ? void 0 : _a.frontmatter;
            let bossHpPenalty = 0;
            if (fm === null || fm === void 0 ? void 0 : fm.is_boss) {
                const match = file.basename.match(/BOSS_LVL(\d+)/);
                if (match) {
                    const level = parseInt(match[1]);
                    bossHpPenalty = getBossHpPenalty(level);
                }
            }
            const damage = computeFailDamage(this.settings.rivalDmg, this.settings.gold, damageMult, bossHpPenalty);
            this.plugin.kernel.events.emit('quest:failed', {
                questId: file.basename,
                reason: manualAbort ? 'manual_abort' : 'failed',
                damage,
                manualAbort,
                bossHpPenalty
            });
            if (this.settings.hp <= 0) {
                return;
            }
            const gravePath = "Graveyard/Failures";
            if (!this.app.vault.getAbstractFileByPath(gravePath))
                yield this.app.vault.createFolder(gravePath);
            yield this.app.fileManager.renameFile(file, `${gravePath}/[FAILED] ${file.name}`);
            yield this.save();
        });
    }
    createQuest(name, diff, skill, secSkill, deadlineIso, highStakes, priority, isBoss) {
        return __awaiter(this, void 0, void 0, function* () {
            if (this.meditationEngine.isLockedDown()) {
                new obsidian.Notice("LOCKDOWN ACTIVE");
                return;
            }
            const { xpReward, goldReward, diffLabel } = questRewardsByDifficulty(diff, this.settings.xpReq, isBoss, highStakes);
            const rootPath = "Active_Run/Quests";
            if (!this.app.vault.getAbstractFileByPath(rootPath))
                yield this.app.vault.createFolder(rootPath);
            const safeName = this.toSafeQuestName(name);
            const existingFile = this.app.vault.getAbstractFileByPath(`${rootPath}/${safeName}.md`);
            if (existingFile) {
                new obsidian.Notice("Quest with that name already exists!");
                return;
            }
            const content = `---
type: quest
status: active
difficulty: ${diffLabel}
priority: ${priority}
xp_reward: ${xpReward}
gold_reward: ${goldReward}
skill: ${skill}
secondary_skill: ${secSkill}
high_stakes: ${highStakes ? 'true' : 'false'}
is_boss: ${isBoss}
created: ${new Date().toISOString()}
deadline: ${deadlineIso}
---
# âš”ï¸ ${name}`;
            try {
                yield this.app.vault.create(`${rootPath}/${safeName}.md`, content);
            }
            catch (e) {
                console.error("Failed to create quest file", e);
                new obsidian.Notice("Failed to create quest. Check console for details.");
                return;
            }
            this.audio.playSound("click");
            this.save();
        });
    }
    deleteQuest(file) {
        return __awaiter(this, void 0, void 0, function* () {
            const { cost } = this.meditationEngine.getDeletionCost();
            if (cost > 0 && this.settings.gold < cost) {
                new obsidian.Notice("Insufficient gold for paid deletion!");
                return;
            }
            const costResult = this.meditationEngine.applyDeletionCost();
            try {
                const content = yield this.app.vault.read(file);
                this.deletedQuestBuffer.push({
                    name: file.name,
                    content: content,
                    path: file.path,
                    deletedAt: Date.now()
                });
                if (this.deletedQuestBuffer.length > 5)
                    this.deletedQuestBuffer.shift();
                this.trigger("undo:show", file.basename);
            }
            catch (e) {
                console.error("Buffer fail", e);
            }
            yield this.app.vault.delete(file);
            if (costResult.message)
                new obsidian.Notice(costResult.message);
            this.save();
        });
    }
    undoLastDeletion() {
        return __awaiter(this, void 0, void 0, function* () {
            const last = this.deletedQuestBuffer.pop();
            if (!last) {
                new obsidian.Notice("Nothing to undo.");
                return;
            }
            if (Date.now() - last.deletedAt > 60000) {
                new obsidian.Notice("Too late to undo.");
                return;
            }
            try {
                yield this.app.vault.create(last.path, last.content);
                new obsidian.Notice(`Restored: ${last.name}`);
                setTimeout(() => {
                    this.trigger("update");
                }, 100);
            }
            catch (e) {
                new obsidian.Notice("Could not restore file (path may be taken).");
            }
        });
    }
    checkDeadlines() {
        return __awaiter(this, void 0, void 0, function* () {
            var _a;
            if (!this.plugin.kernel) {
                const now = obsidian.moment();
                const initialCount = this.settings.activeBuffs.length;
                this.settings.activeBuffs = this.settings.activeBuffs.filter(b => obsidian.moment(b.expiresAt).isAfter(now));
                if (this.settings.activeBuffs.length < initialCount) {
                    new obsidian.Notice("A potion effect has worn off.");
                    this.trigger("update");
                }
            }
            const folder = this.app.vault.getAbstractFileByPath("Active_Run/Quests");
            if (!(folder instanceof obsidian.TFolder))
                return;
            const zeroInbox = this.settings.dailyMissions.find(m => m.checkFunc === "zero_inbox" && !m.completed);
            if (zeroInbox) {
                const scraps = this.app.vault.getAbstractFileByPath("Scraps");
                if (scraps instanceof obsidian.TFolder && scraps.children.length === 0) {
                    this.checkDailyMissions({ type: "check" });
                }
            }
            for (const file of folder.children) {
                if (file instanceof obsidian.TFile) {
                    const fm = (_a = this.app.metadataCache.getFileCache(file)) === null || _a === void 0 ? void 0 : _a.frontmatter;
                    if ((fm === null || fm === void 0 ? void 0 : fm.deadline) && obsidian.moment().isAfter(obsidian.moment(fm.deadline)))
                        yield this.failQuest(file);
                }
            }
            yield this.save();
        });
    }
    rollChaos() {
        return __awaiter(this, arguments, void 0, function* (showModal = false) {
            const roll = Math.random();
            if (roll < 0.4)
                this.settings.dailyModifier = DEFAULT_MODIFIER;
            else {
                const idx = Math.floor(Math.random() * (CHAOS_TABLE.length - 1)) + 1;
                this.settings.dailyModifier = CHAOS_TABLE[idx];
            }
            yield this.save();
            if (showModal)
                new ChaosModal(this.app, this.settings.dailyModifier).open();
        });
    }
    attemptRecovery() {
        return __awaiter(this, void 0, void 0, function* () {
            if (!this.meditationEngine.isLockedDown()) {
                new obsidian.Notice("Not in Lockdown.");
                return;
            }
            const { hours, minutes } = this.meditationEngine.getLockdownTimeRemaining();
            new obsidian.Notice(`Recovering... ${hours}h ${minutes}m remaining.`);
        });
    }
    isLockedDown() { return this.meditationEngine.isLockedDown(); }
    isResting() { return !!(this.settings.restDayUntil && obsidian.moment().isBefore(obsidian.moment(this.settings.restDayUntil))); }
    isShielded() { return !!(this.settings.shieldedUntil && obsidian.moment().isBefore(obsidian.moment(this.settings.shieldedUntil))); }
    createResearchQuest(title, type, linkedSkill, linkedCombatQuest) {
        return __awaiter(this, void 0, void 0, function* () {
            const res = yield this.researchEngine.createResearchQuest(title, type, linkedSkill, linkedCombatQuest);
            if (res.success) {
                new obsidian.Notice(res.message);
                yield this.save();
            }
            else {
                new obsidian.Notice(res.message);
            }
            return res;
        });
    }
    completeResearchQuest(id, words) { this.researchEngine.completeResearchQuest(id, words); this.save(); }
    deleteResearchQuest(id) {
        return __awaiter(this, void 0, void 0, function* () { yield this.researchEngine.deleteResearchQuest(id); yield this.save(); });
    }
    updateResearchWordCount(id, words) {
        this.researchEngine.updateResearchWordCount(id, words);
        this.trigger("update");
    }
    getResearchRatio() { return this.researchEngine.getResearchRatio(); }
    canCreateResearchQuest() { return this.researchEngine.canCreateResearchQuest(); }
    startMeditation() {
        return __awaiter(this, void 0, void 0, function* () { const r = this.meditationEngine.meditate(); new obsidian.Notice(r.message); yield this.save(); });
    }
    getMeditationStatus() { return this.meditationEngine.getMeditationStatus(); }
    createScrap(content) {
        return __awaiter(this, void 0, void 0, function* () {
            const folderPath = "Scraps";
            if (!this.app.vault.getAbstractFileByPath(folderPath))
                yield this.app.vault.createFolder(folderPath);
            const timestamp = obsidian.moment().format("YYYY-MM-DD HH-mm-ss");
            yield this.app.vault.create(`${folderPath}/${timestamp}.md`, content);
            new obsidian.Notice("âš¡ Scrap Captured");
            this.audio.playSound("click");
        });
    }
    generateSkillGraph() {
        return __awaiter(this, void 0, void 0, function* () {
            const skills = this.settings.skills;
            if (skills.length === 0) {
                new obsidian.Notice("No neural nodes found.");
                return;
            }
            const nodes = [];
            const edges = [];
            const width = 250;
            const height = 140;
            const radius = Math.max(400, skills.length * 60);
            const centerX = 0;
            const centerY = 0;
            const angleStep = (2 * Math.PI) / skills.length;
            skills.forEach((skill, index) => {
                const angle = index * angleStep;
                const x = centerX + radius * Math.cos(angle);
                const y = centerY + radius * Math.sin(angle);
                let color = "4";
                if (skill.rust > 0)
                    color = "1";
                else if (skill.level >= 10)
                    color = "6";
                const statusIcon = skill.rust > 0 ? "âš ï¸ RUSTY" : "ðŸŸ¢ ACTIVE";
                const progress = skill.xpReq > 0 ? Math.floor((skill.xp / skill.xpReq) * 100) : 0;
                const text = `## ${skill.name}\n**Lv ${skill.level}**\n${statusIcon}\nXP: ${skill.xp}/${skill.xpReq} (${progress}%)`;
                nodes.push({ id: skill.name, x: Math.floor(x), y: Math.floor(y), width, height, type: "text", text, color });
            });
            skills.forEach(skill => {
                if (skill.connections) {
                    skill.connections.forEach(targetName => {
                        if (skills.find(s => s.name === targetName)) {
                            edges.push({ id: `${skill.name}-${targetName}`, fromNode: skill.name, fromSide: "right", toNode: targetName, toSide: "left", color: "4" });
                        }
                    });
                }
            });
            const canvasData = { nodes, edges };
            const path = this.settings.neuralHubPath || "Active_Run/Neural_Hub.canvas";
            const file = this.app.vault.getAbstractFileByPath(path);
            if (file instanceof obsidian.TFile) {
                yield this.app.vault.modify(file, JSON.stringify(canvasData, null, 2));
                new obsidian.Notice("Neural Hub updated.");
            }
            else {
                yield this.app.vault.create(path, JSON.stringify(canvasData, null, 2));
                new obsidian.Notice("Neural Hub created.");
            }
        });
    }
    createQuestChain(name, quests) {
        return __awaiter(this, void 0, void 0, function* () { yield this.chainsEngine.createQuestChain(name, quests); yield this.save(); });
    }
    getActiveChain() { return this.chainsEngine.getActiveChain(); }
    getChainProgress() { return this.chainsEngine.getChainProgress(); }
    breakChain() {
        return __awaiter(this, void 0, void 0, function* () { yield this.chainsEngine.breakChain(); yield this.save(); });
    }
    setFilterState(energy, context, tags) { this.filtersEngine.setFilterState(energy, context, tags); this.save(); }
    clearFilters() { this.filtersEngine.clearFilters(); this.save(); }
    getGameStats() { return this.analyticsEngine.getGameStats(); }
    checkBossMilestones() { return this.analyticsEngine.checkBossMilestones(); }
    generateWeeklyReport() { return this.analyticsEngine.generateWeeklyReport(); }
    taunt(trigger) {
        const msgs = {
            "fail": ["Pathetic.", "Try again.", "Is that all?"],
            "level_up": ["Power overwhelming.", "Ascending."],
            "low_hp": ["Bleeding out...", "Hold on."]
        };
        const msg = msgs[trigger] ? msgs[trigger][Math.floor(Math.random() * msgs[trigger].length)] : "Observe.";
        new obsidian.Notice(`SYSTEM: ${msg}`);
    }
    parseQuickInput(text) {
        const match = text.match(/(.+?)\s*\/(\d)/);
        if (match) {
            const diff = Math.min(5, Math.max(1, parseInt(match[2], 10) || 3));
            this.createQuest(match[1], diff, "None", "None", obsidian.moment().add(24, 'hours').toISOString(), false, "Normal", false);
        }
        else {
            this.createQuest(text, 3, "None", "None", obsidian.moment().add(24, 'hours').toISOString(), false, "Normal", false);
        }
    }
    triggerDeath() {
        return __awaiter(this, void 0, void 0, function* () {
            var _a, _b, _c;
            const nextDeath = (((_a = this.settings.legacy) === null || _a === void 0 ? void 0 : _a.deathCount) || 0) + 1;
            const runLevel = this.settings.level;
            const runStreak = ((_b = this.settings.streak) === null || _b === void 0 ? void 0 : _b.longest) || 0;
            const bossesDefeated = (this.settings.bossMilestones || []).filter((b) => b.defeated).length;
            if (!this.settings.scars)
                this.settings.scars = [];
            this.settings.scars.push({
                id: `death_${Date.now()}`,
                label: "Death",
                value: `#${nextDeath} Â· Lv ${runLevel} Â· Streak ${runStreak} Â· Bosses ${bossesDefeated}`,
                earnedAt: new Date().toISOString()
            });
            const activeFolder = this.app.vault.getAbstractFileByPath("Active_Run/Quests");
            const graveFolder = "Graveyard/Deaths/" + obsidian.moment().format("YYYY-MM-DD-HHmm");
            if (!this.app.vault.getAbstractFileByPath(graveFolder))
                yield this.app.vault.createFolder(graveFolder);
            if (activeFolder instanceof obsidian.TFolder) {
                for (const file of activeFolder.children) {
                    if (file instanceof obsidian.TFile) {
                        yield this.app.fileManager.renameFile(file, `${graveFolder}/${file.name}`);
                    }
                }
            }
            this.settings.level = 1;
            this.settings.hp = 100;
            this.settings.maxHp = 100;
            this.settings.gold = 0;
            this.settings.xp = 0;
            this.settings.xpReq = 100;
            this.settings.rivalDmg = 5;
            this.settings.comboCount = 0;
            this.settings.lastCompletionTime = 0;
            this.settings.questsCompletedToday = 0;
            this.settings.damageTakenToday = 0;
            this.settings.activeBuffs = [];
            this.settings.activeChains = [];
            this.settings.researchQuests = [];
            this.settings.lockdownUntil = '';
            this.settings.shieldedUntil = '';
            this.settings.restDayUntil = '';
            this.settings.dailyModifier = Object.assign({}, DEFAULT_MODIFIER);
            this.settings.streak = { current: 0, longest: ((_c = this.settings.streak) === null || _c === void 0 ? void 0 : _c.longest) || 0, lastDate: '' };
            this.settings.skills = [];
            this.settings.legacy.deathCount = nextDeath;
            yield this.save();
        });
    }
    /** Compute the next deadline for a recurring quest */
    computeNextRecurringDeadline(interval, currentDeadline) {
        const base = currentDeadline ? obsidian.moment(currentDeadline) : obsidian.moment();
        let next;
        switch (interval) {
            case 'weekly':
                next = base.clone().add(7, 'days');
                break;
            case 'weekday':
                next = base.clone().add(1, 'day');
                // Skip weekends
                while (next.day() === 0 || next.day() === 6) {
                    next.add(1, 'day');
                }
                break;
            case 'daily':
            default:
                next = base.clone().add(1, 'day');
                break;
        }
        return next.toISOString();
    }
}

/**
 * Sisyphus Charts v2.0 â€” GitHub heatmap, sparklines, skill radar, time-of-day chart
 */
class ChartRenderer {
    /* ============================================================
     * 1. GITHUB-STYLE 365-DAY CONTRIBUTION HEATMAP
     * ============================================================ */
    static renderGitHubHeatmap(parent, metrics) {
        const CELL = 11, GAP = 2, WEEKS = 52, DAYS = 7;
        const W = (CELL + GAP) * WEEKS + 30; // +30 for day labels
        const H = (CELL + GAP) * DAYS + 20; // +20 for month labels
        const svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
        svg.setAttribute("viewBox", `0 0 ${W} ${H}`);
        svg.setAttribute("width", "100%");
        svg.classList.add("sisy-github-heatmap");
        parent.appendChild(svg);
        // Build lookup map
        const lookup = new Map();
        metrics.forEach(m => lookup.set(m.date, m.questsCompleted));
        // Color scale
        const colorScale = (count) => {
            if (count === 0)
                return 'var(--sisy-heat-0, rgba(255,255,255,0.06))';
            if (count <= 2)
                return 'var(--sisy-heat-1, #0e4429)';
            if (count <= 4)
                return 'var(--sisy-heat-2, #006d32)';
            if (count <= 6)
                return 'var(--sisy-heat-3, #26a641)';
            return 'var(--sisy-heat-4, #39d353)';
        };
        // Day labels
        const dayLabels = ['', 'Mon', '', 'Wed', '', 'Fri', ''];
        dayLabels.forEach((label, i) => {
            if (!label)
                return;
            const text = document.createElementNS("http://www.w3.org/2000/svg", "text");
            text.setAttribute("x", "0");
            text.setAttribute("y", String(20 + i * (CELL + GAP) + CELL / 2 + 3));
            text.setAttribute("font-size", "9");
            text.setAttribute("fill", "var(--text-muted)");
            text.textContent = label;
            svg.appendChild(text);
        });
        // Draw cells â€” go backwards from today
        const today = obsidian.moment();
        const startDay = today.clone().subtract(WEEKS * 7 - 1, 'days');
        // Adjust to start on a Sunday
        startDay.subtract(startDay.day(), 'days');
        let lastMonth = -1;
        for (let week = 0; week < WEEKS; week++) {
            for (let day = 0; day < DAYS; day++) {
                const date = startDay.clone().add(week * 7 + day, 'days');
                if (date.isAfter(today))
                    continue;
                const dateStr = date.format("YYYY-MM-DD");
                const count = lookup.get(dateStr) || 0;
                const x = 28 + week * (CELL + GAP);
                const y = 18 + day * (CELL + GAP);
                const rect = document.createElementNS("http://www.w3.org/2000/svg", "rect");
                rect.setAttribute("x", String(x));
                rect.setAttribute("y", String(y));
                rect.setAttribute("width", String(CELL));
                rect.setAttribute("height", String(CELL));
                rect.setAttribute("rx", "2");
                rect.setAttribute("fill", colorScale(count));
                rect.classList.add("sisy-heat-cell-svg");
                // Tooltip
                const title = document.createElementNS("http://www.w3.org/2000/svg", "title");
                title.textContent = `${dateStr}: ${count} quests`;
                rect.appendChild(title);
                svg.appendChild(rect);
                // Month labels
                if (day === 0 && date.month() !== lastMonth) {
                    lastMonth = date.month();
                    const monthText = document.createElementNS("http://www.w3.org/2000/svg", "text");
                    monthText.setAttribute("x", String(x));
                    monthText.setAttribute("y", "12");
                    monthText.setAttribute("font-size", "9");
                    monthText.setAttribute("fill", "var(--text-muted)");
                    monthText.textContent = date.format("MMM");
                    svg.appendChild(monthText);
                }
            }
        }
    }
    /* ============================================================
     * 2. INLINE SPARKLINE (tiny 7-day trend line)
     * ============================================================ */
    static renderSparkline(parent, data, color = 'var(--sisy-blue)') {
        const W = 60, H = 18;
        const svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
        svg.setAttribute("viewBox", `0 0 ${W} ${H}`);
        svg.setAttribute("width", String(W));
        svg.setAttribute("height", String(H));
        svg.classList.add("sisy-sparkline");
        parent.appendChild(svg);
        if (data.length < 2)
            return;
        const max = Math.max(...data, 1);
        const points = data.map((v, i) => {
            const x = (i / (data.length - 1)) * (W - 4) + 2;
            const y = H - 2 - ((v / max) * (H - 4));
            return `${x},${y}`;
        });
        // Gradient fill under the line
        const defs = document.createElementNS("http://www.w3.org/2000/svg", "defs");
        const grad = document.createElementNS("http://www.w3.org/2000/svg", "linearGradient");
        grad.setAttribute("id", `spark-grad-${Math.random().toString(36).slice(2, 7)}`);
        grad.setAttribute("x1", "0");
        grad.setAttribute("y1", "0");
        grad.setAttribute("x2", "0");
        grad.setAttribute("y2", "1");
        const s1 = document.createElementNS("http://www.w3.org/2000/svg", "stop");
        s1.setAttribute("offset", "0%");
        s1.setAttribute("stop-color", color);
        s1.setAttribute("stop-opacity", "0.3");
        const s2 = document.createElementNS("http://www.w3.org/2000/svg", "stop");
        s2.setAttribute("offset", "100%");
        s2.setAttribute("stop-color", color);
        s2.setAttribute("stop-opacity", "0.0");
        grad.appendChild(s1);
        grad.appendChild(s2);
        defs.appendChild(grad);
        svg.appendChild(defs);
        // Area fill
        const area = document.createElementNS("http://www.w3.org/2000/svg", "polygon");
        const firstX = (0 / (data.length - 1)) * (W - 4) + 2;
        const lastX = ((data.length - 1) / (data.length - 1)) * (W - 4) + 2;
        area.setAttribute("points", `${firstX},${H} ${points.join(" ")} ${lastX},${H}`);
        area.setAttribute("fill", `url(#${grad.getAttribute("id")})`);
        svg.appendChild(area);
        // Line
        const polyline = document.createElementNS("http://www.w3.org/2000/svg", "polyline");
        polyline.setAttribute("points", points.join(" "));
        polyline.setAttribute("fill", "none");
        polyline.setAttribute("stroke", color);
        polyline.setAttribute("stroke-width", "1.5");
        polyline.setAttribute("stroke-linecap", "round");
        svg.appendChild(polyline);
        // End dot
        const lastPoint = points[points.length - 1].split(",");
        const dot = document.createElementNS("http://www.w3.org/2000/svg", "circle");
        dot.setAttribute("cx", lastPoint[0]);
        dot.setAttribute("cy", lastPoint[1]);
        dot.setAttribute("r", "2");
        dot.setAttribute("fill", color);
        svg.appendChild(dot);
    }
    /* ============================================================
     * 3. SKILL RADAR CHART (polygon)
     * ============================================================ */
    static renderRadar(parent, skills, maxLevel = 20) {
        const SIZE = 160, CX = SIZE / 2, CY = SIZE / 2, R = 60;
        const top = skills.slice(0, 6); // max 6 axes
        if (top.length < 3)
            return; // need at least 3 for a polygon
        const svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
        svg.setAttribute("viewBox", `0 0 ${SIZE} ${SIZE}`);
        svg.setAttribute("width", "100%");
        svg.classList.add("sisy-radar-chart");
        parent.appendChild(svg);
        const n = top.length;
        const angleStep = (2 * Math.PI) / n;
        // Grid rings (3 levels)
        [0.33, 0.66, 1.0].forEach(pct => {
            const ringPts = [];
            for (let i = 0; i < n; i++) {
                const angle = i * angleStep - Math.PI / 2;
                ringPts.push(`${CX + R * pct * Math.cos(angle)},${CY + R * pct * Math.sin(angle)}`);
            }
            const ring = document.createElementNS("http://www.w3.org/2000/svg", "polygon");
            ring.setAttribute("points", ringPts.join(" "));
            ring.setAttribute("fill", "none");
            ring.setAttribute("stroke", "var(--background-modifier-border)");
            ring.setAttribute("stroke-width", "0.5");
            svg.appendChild(ring);
        });
        // Axis lines
        for (let i = 0; i < n; i++) {
            const angle = i * angleStep - Math.PI / 2;
            const line = document.createElementNS("http://www.w3.org/2000/svg", "line");
            line.setAttribute("x1", String(CX));
            line.setAttribute("y1", String(CY));
            line.setAttribute("x2", String(CX + R * Math.cos(angle)));
            line.setAttribute("y2", String(CY + R * Math.sin(angle)));
            line.setAttribute("stroke", "var(--background-modifier-border)");
            line.setAttribute("stroke-width", "0.5");
            svg.appendChild(line);
        }
        // Data polygon
        const dataPts = [];
        for (let i = 0; i < n; i++) {
            const angle = i * angleStep - Math.PI / 2;
            const val = Math.min(top[i].level / maxLevel, 1);
            dataPts.push(`${CX + R * val * Math.cos(angle)},${CY + R * val * Math.sin(angle)}`);
        }
        const poly = document.createElementNS("http://www.w3.org/2000/svg", "polygon");
        poly.setAttribute("points", dataPts.join(" "));
        poly.setAttribute("fill", "var(--sisy-blue)");
        poly.setAttribute("fill-opacity", "0.25");
        poly.setAttribute("stroke", "var(--sisy-blue)");
        poly.setAttribute("stroke-width", "1.5");
        svg.appendChild(poly);
        // Data points + labels
        for (let i = 0; i < n; i++) {
            const angle = i * angleStep - Math.PI / 2;
            const val = Math.min(top[i].level / maxLevel, 1);
            // Point
            const dot = document.createElementNS("http://www.w3.org/2000/svg", "circle");
            dot.setAttribute("cx", String(CX + R * val * Math.cos(angle)));
            dot.setAttribute("cy", String(CY + R * val * Math.sin(angle)));
            dot.setAttribute("r", "3");
            dot.setAttribute("fill", "var(--sisy-blue)");
            svg.appendChild(dot);
            // Label
            const lx = CX + (R + 14) * Math.cos(angle);
            const ly = CY + (R + 14) * Math.sin(angle);
            const label = document.createElementNS("http://www.w3.org/2000/svg", "text");
            label.setAttribute("x", String(lx));
            label.setAttribute("y", String(ly + 3));
            label.setAttribute("font-size", "8");
            label.setAttribute("fill", "var(--text-muted)");
            label.setAttribute("text-anchor", "middle");
            label.textContent = `${top[i].name} L${top[i].level}`;
            svg.appendChild(label);
        }
    }
    /* ============================================================
     * 4. TIME-OF-DAY BAR CHART
     * ============================================================ */
    static renderTimeOfDay(parent, metrics) {
        const W = 280, H = 60;
        const hourly = new Array(24).fill(0);
        // Aggregate hourly completions across all days
        metrics.forEach(m => {
            if (m.hourlyCompletions) {
                m.hourlyCompletions.forEach((count, hour) => {
                    hourly[hour] += count;
                });
            }
        });
        const max = Math.max(...hourly, 1);
        const svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
        svg.setAttribute("viewBox", `0 0 ${W} ${H}`);
        svg.setAttribute("width", "100%");
        svg.classList.add("sisy-time-chart");
        parent.appendChild(svg);
        const barW = (W - 20) / 24;
        hourly.forEach((count, i) => {
            const barH = (count / max) * (H - 15);
            const x = 10 + i * barW;
            const y = H - 12 - barH;
            const rect = document.createElementNS("http://www.w3.org/2000/svg", "rect");
            rect.setAttribute("x", String(x + 1));
            rect.setAttribute("y", String(y));
            rect.setAttribute("width", String(barW - 2));
            rect.setAttribute("height", String(Math.max(barH, 1)));
            rect.setAttribute("rx", "1");
            rect.setAttribute("fill", count > 0 ? 'var(--sisy-blue)' : 'var(--background-modifier-border)');
            rect.setAttribute("opacity", count > 0 ? String(0.4 + (count / max) * 0.6) : "0.3");
            const title = document.createElementNS("http://www.w3.org/2000/svg", "title");
            title.textContent = `${i}:00 â€” ${count} quests`;
            rect.appendChild(title);
            svg.appendChild(rect);
        });
        // Hour labels (every 6 hours)
        [0, 6, 12, 18].forEach(h => {
            const text = document.createElementNS("http://www.w3.org/2000/svg", "text");
            text.setAttribute("x", String(10 + h * barW + barW / 2));
            text.setAttribute("y", String(H - 2));
            text.setAttribute("font-size", "7");
            text.setAttribute("fill", "var(--text-muted)");
            text.setAttribute("text-anchor", "middle");
            text.textContent = `${h}:00`;
            svg.appendChild(text);
        });
    }
    /* ============================================================
     * 5. WEEK-OVER-WEEK COMPARISON
     * ============================================================ */
    static getWeekComparison(metrics) {
        const now = obsidian.moment();
        const thisWeekStart = now.clone().subtract(6, 'days').startOf('day');
        const lastWeekStart = now.clone().subtract(13, 'days').startOf('day');
        const lastWeekEnd = now.clone().subtract(7, 'days').endOf('day');
        const thisWeek = metrics.filter(m => obsidian.moment(m.date).isAfter(thisWeekStart));
        const lastWeek = metrics.filter(m => {
            const d = obsidian.moment(m.date);
            return d.isAfter(lastWeekStart) && d.isBefore(lastWeekEnd);
        });
        const sum = (arr, key) => arr.reduce((s, d) => s + (d[key] || 0), 0);
        const compare = (label, key) => {
            const tw = sum(thisWeek, key);
            const lw = sum(lastWeek, key);
            const diff = lw > 0 ? Math.round(((tw - lw) / lw) * 100) : (tw > 0 ? 100 : 0);
            return { label, thisWeek: tw, lastWeek: lw, delta: `${diff >= 0 ? 'â–²' : 'â–¼'}${Math.abs(diff)}%`, up: diff >= 0 };
        };
        return [
            compare('Quests', 'questsCompleted'),
            compare('XP', 'xpEarned'),
            compare('Gold', 'goldEarned'),
            compare('Damage', 'damagesTaken'),
        ];
    }
    /* ============================================================
     * 6. LEGACY LINE CHART (kept for backward compatibility)
     * ============================================================ */
    static renderLineChart(parent, metrics, widthOverride) {
        const height = 100;
        const width = widthOverride || parent.clientWidth || 300;
        const padding = 5;
        const data = [];
        const labels = [];
        for (let i = 6; i >= 0; i--) {
            const d = obsidian.moment().subtract(i, 'days').format("YYYY-MM-DD");
            const m = metrics.find((x) => x.date === d);
            data.push(m ? m.questsCompleted : 0);
            labels.push(obsidian.moment(d).format("ddd"));
        }
        const maxVal = Math.max(...data, 5);
        const points = [];
        const divisor = Math.max(1, data.length - 1);
        data.forEach((val, idx) => {
            const x = (idx / divisor) * (width - padding * 2) + padding;
            const y = height - ((val / maxVal) * (height - padding * 2)) - padding;
            points.push(`${x},${y}`);
        });
        const svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
        svg.setAttribute("width", "100%");
        svg.setAttribute("height", "100%");
        svg.setAttribute("viewBox", `0 0 ${width} ${height}`);
        svg.setAttribute("preserveAspectRatio", "none");
        svg.classList.add("sisy-chart-svg");
        parent.appendChild(svg);
        const polyline = document.createElementNS("http://www.w3.org/2000/svg", "polyline");
        polyline.setAttribute("points", points.join(" "));
        polyline.setAttribute("fill", "none");
        polyline.setAttribute("stroke", "var(--sisy-blue)");
        polyline.setAttribute("stroke-width", "2");
        svg.appendChild(polyline);
        points.forEach((p) => {
            const [cx, cy] = p.split(",");
            const circle = document.createElementNS("http://www.w3.org/2000/svg", "circle");
            circle.setAttribute("cx", cx);
            circle.setAttribute("cy", cy);
            circle.setAttribute("r", "3");
            circle.setAttribute("fill", "var(--sisy-blue)");
            svg.appendChild(circle);
        });
    }
    /** Legacy heatmap â€” kept for compatibility */
    static renderHeatmap(parent, metrics) {
        const heatmap = parent.createDiv({ cls: "sisy-heatmap" });
        for (let i = 27; i >= 0; i--) {
            const date = obsidian.moment().subtract(i, 'days').format("YYYY-MM-DD");
            const m = metrics.find((x) => x.date === date);
            const count = m ? m.questsCompleted : 0;
            let color = "rgba(255,255,255,0.05)";
            if (count > 0)
                color = "rgba(0, 176, 255, 0.3)";
            if (count > 3)
                color = "rgba(0, 176, 255, 0.6)";
            if (count > 6)
                color = "rgba(0, 176, 255, 1.0)";
            const day = heatmap.createDiv({ cls: "sisy-heat-cell" });
            day.style.background = color;
            day.setAttribute("title", `${date}: ${count} quests`);
            if (i === 0)
                day.style.border = "1px solid white";
        }
    }
}

const DIFF_COLORS = {
    'trivial': 'var(--sisy-green)',
    'easy': '#4caf50',
    'medium': 'var(--sisy-gold)',
    'hard': '#ff6b35',
    'legendary': 'var(--sisy-purple)',
};
const PRIORITY_BADGES = {
    'critical': { text: 'ðŸ”´ CRITICAL', cls: 'sisy-priority-critical' },
    'high': { text: 'ðŸŸ¡ HIGH', cls: 'sisy-priority-high' },
    'normal': { text: '', cls: '' },
    'low': { text: 'âšª LOW', cls: 'sisy-priority-low' },
};
const SKILL_ICONS = {
    'Coding': 'ðŸ’»', 'Writing': 'âœï¸', 'Research': 'ðŸ”¬', 'Design': 'ðŸŽ¨',
    'Math': 'ðŸ“', 'Reading': 'ðŸ“š', 'Fitness': 'ðŸ’ª', 'Music': 'ðŸŽµ',
    'Language': 'ðŸŒ', 'Boss': 'â˜ ï¸', 'None': 'âš¡',
};
class QuestCardRenderer {
    static render(parent, file, view) {
        var _a, _b;
        const fm = (_a = view.app.metadataCache.getFileCache(file)) === null || _a === void 0 ? void 0 : _a.frontmatter;
        const card = parent.createDiv({ cls: "sisy-card" });
        // Difficulty color band (left border)
        const diffLabel = ((fm === null || fm === void 0 ? void 0 : fm.difficulty) || 'medium').toLowerCase();
        const diffColor = DIFF_COLORS[diffLabel] || DIFF_COLORS.medium;
        card.style.borderLeft = `3px solid ${diffColor}`;
        if (view.selectMode) {
            const isSelected = view.selectedQuests.has(file);
            if (isSelected)
                card.style.borderColor = "var(--sisy-blue)";
            const top = card.createDiv({ cls: "sisy-card-top" });
            const cb = top.createEl("input", { type: "checkbox" });
            cb.checked = isSelected;
            cb.style.marginRight = "10px";
            top.createDiv({ text: file.basename, cls: "sisy-card-title" });
            card.onclick = () => {
                if (view.selectedQuests.has(file))
                    view.selectedQuests.delete(file);
                else
                    view.selectedQuests.add(file);
                view.refresh();
            };
        }
        else {
            if (fm === null || fm === void 0 ? void 0 : fm.is_boss)
                card.addClass("sisy-card-boss");
            // === DRAG & DROP ===
            card.setAttribute("draggable", "true");
            card.addEventListener("dragstart", (e) => {
                var _a;
                view.draggedFile = file;
                card.style.opacity = "0.4";
                card.style.transform = "scale(0.95)";
                (_a = e.dataTransfer) === null || _a === void 0 ? void 0 : _a.setData("text/plain", file.path);
            });
            card.addEventListener("dragend", () => {
                card.style.opacity = "1";
                card.style.transform = "none";
                view.draggedFile = null;
                parent.querySelectorAll(".sisy-card").forEach(el => el.style.borderTop = "");
            });
            card.addEventListener("dragover", (e) => {
                e.preventDefault();
                card.style.borderTop = "3px solid var(--sisy-blue)";
            });
            card.addEventListener("dragleave", () => { card.style.borderTop = ""; });
            card.addEventListener("drop", (e) => __awaiter(this, void 0, void 0, function* () {
                var _a;
                e.preventDefault();
                card.style.borderTop = "";
                if (view.draggedFile && view.draggedFile !== file) {
                    const dragged = view.draggedFile;
                    const targetFm = (_a = view.app.metadataCache.getFileCache(file)) === null || _a === void 0 ? void 0 : _a.frontmatter;
                    const targetOrder = (targetFm === null || targetFm === void 0 ? void 0 : targetFm.manual_order) !== undefined ? targetFm.manual_order : obsidian.moment().valueOf();
                    const newOrder = targetOrder - 100;
                    yield view.plugin.app.fileManager.processFrontMatter(dragged, (f) => {
                        f.manual_order = newOrder;
                    });
                    view.plugin.engine.trigger("update");
                }
            }));
            // --- TOP ROW ---
            const top = card.createDiv({ cls: "sisy-card-top" });
            const titleRow = top.createDiv({ cls: "sisy-card-meta" });
            // Skill icon
            const skill = (fm === null || fm === void 0 ? void 0 : fm.skill) || 'None';
            const icon = SKILL_ICONS[skill] || 'âš¡';
            titleRow.createSpan({ text: icon, cls: 'sisy-card-skill-icon', attr: { title: skill } });
            titleRow.createDiv({ text: file.basename, cls: "sisy-card-title" });
            // Priority badge
            const priority = ((fm === null || fm === void 0 ? void 0 : fm.priority) || 'normal').toLowerCase();
            const prBadge = PRIORITY_BADGES[priority];
            if (prBadge && prBadge.text) {
                titleRow.createDiv({ text: prBadge.text, cls: `sisy-tag ${prBadge.cls}` });
            }
            // Recurring badge
            if (fm === null || fm === void 0 ? void 0 : fm.recurring) {
                titleRow.createDiv({ text: "ðŸ”„ RECURRING", cls: "sisy-recurring-badge" });
            }
            // Dependency lock
            let isLocked = false;
            if (fm === null || fm === void 0 ? void 0 : fm.depends_on) {
                const depFile = view.app.vault.getAbstractFileByPath(`Active_Run/Quests/${fm.depends_on}.md`);
                if (depFile) {
                    isLocked = true;
                    titleRow.createDiv({ text: "ðŸ”’", cls: "sisy-tag", attr: { title: `Requires: ${fm.depends_on}` } });
                }
            }
            // Deadline timer
            if (fm === null || fm === void 0 ? void 0 : fm.deadline) {
                const diff = obsidian.moment(fm.deadline).diff(obsidian.moment(), 'minutes');
                const t = top.createDiv({
                    text: diff < 0 ? "EXPIRED" : `${Math.floor(diff / 60)}h ${diff % 60}m`,
                    cls: "sisy-timer"
                });
                if (diff < 60)
                    t.addClass("sisy-timer-late");
            }
            // Delete button
            const trash = top.createDiv({ cls: "sisy-btn", text: "X", attr: { style: "padding: 2px 8px; font-size: 0.8em;" } });
            trash.onclick = (e) => { e.stopPropagation(); view.plugin.engine.deleteQuest(file); };
            // --- DETAIL ROW: XP + Gold preview + Difficulty badge ---
            const detail = card.createDiv({ cls: 'sisy-card-detail' });
            const diffBadge = detail.createDiv({ cls: `sisy-diff-badge sisy-diff-${diffLabel}` });
            diffBadge.textContent = diffLabel.toUpperCase();
            if (fm === null || fm === void 0 ? void 0 : fm.xp_reward) {
                detail.createSpan({ text: `âš¡${fm.xp_reward}`, cls: 'sisy-card-reward sisy-reward-xp' });
            }
            if ((fm === null || fm === void 0 ? void 0 : fm.gold_reward) && fm.gold_reward > 0) {
                detail.createSpan({ text: `ðŸ’°${fm.gold_reward}`, cls: 'sisy-card-reward sisy-reward-gold' });
            }
            if (fm === null || fm === void 0 ? void 0 : fm.high_stakes) {
                detail.createSpan({ text: 'ðŸŽ² HIGH STAKES', cls: 'sisy-tag sisy-tag-stakes' });
            }
            // --- BOSS HP BAR ---
            if ((fm === null || fm === void 0 ? void 0 : fm.is_boss) && (fm === null || fm === void 0 ? void 0 : fm.boss_max_hp)) {
                const bar = card.createDiv({ cls: "sisy-bar-bg" });
                const pct = (((_b = fm.boss_hp) !== null && _b !== void 0 ? _b : 0) / fm.boss_max_hp) * 100;
                bar.createDiv({ cls: "sisy-bar-fill sisy-fill-red", attr: { style: `width:${pct}%;` } });
                card.createDiv({
                    text: `${fm.boss_hp}/${fm.boss_max_hp} HP`,
                    attr: { style: "text-align:center; font-size:0.8em; color:var(--sisy-red); font-weight:bold;" }
                });
            }
            // --- PROGRESS BAR (multi-step quests) ---
            if ((fm === null || fm === void 0 ? void 0 : fm.steps_total) && fm.steps_total > 0) {
                const done = fm.steps_done || 0;
                const progRow = card.createDiv({ cls: 'sisy-card-progress' });
                const progBar = progRow.createDiv({ cls: 'sisy-bar-bg' });
                progBar.createDiv({ cls: 'sisy-bar-fill sisy-fill-blue', attr: { style: `width:${(done / fm.steps_total) * 100}%` } });
                progRow.createSpan({ text: `${done}/${fm.steps_total} steps`, cls: 'sisy-card-steps' });
            }
            // --- ACTION BUTTONS ---
            const acts = card.createDiv({ cls: "sisy-actions" });
            const bOk = acts.createEl("button", {
                text: isLocked ? "ðŸ”’ LOCKED" : "âœ“ COMPLETE",
                cls: `sisy-btn ${isLocked ? '' : 'mod-done'} sisy-action-btn`
            });
            if (isLocked) {
                bOk.style.opacity = '0.4';
                bOk.style.cursor = 'not-allowed';
            }
            else {
                bOk.onclick = (e) => {
                    e.stopPropagation();
                    // Confetti animation
                    card.classList.add('sisy-card-complete-anim');
                    setTimeout(() => view.plugin.engine.completeQuest(file), 300);
                };
            }
            const bFail = acts.createEl("button", { text: "âœ— FAIL", cls: "sisy-btn mod-fail sisy-action-btn" });
            bFail.onclick = (e) => {
                e.stopPropagation();
                // Shake animation
                card.classList.add('sisy-card-fail-anim');
                setTimeout(() => view.plugin.engine.failQuest(file, true), 400);
            };
        }
    }
}

class SkillTreeRenderer {
    static render(parent, skills, onClickSkill) {
        if (skills.length === 0) {
            parent.createDiv({ text: 'No skills unlocked yet.', cls: 'sisy-empty-state' });
            return;
        }
        const grid = parent.createDiv({ cls: 'sisy-skill-tree' });
        skills.forEach((skill, idx) => {
            const node = grid.createDiv({ cls: 'sisy-skill-node' });
            node.onclick = () => onClickSkill(idx);
            // Level-based glow
            if (skill.level >= 10)
                node.addClass('sisy-skill-node-master');
            else if (skill.level >= 5)
                node.addClass('sisy-skill-node-adept');
            // Top: Icon + Name
            const header = node.createDiv({ cls: 'sisy-skill-node-header' });
            const iconMap = {
                'Coding': 'ðŸ’»', 'Writing': 'âœï¸', 'Research': 'ðŸ”¬', 'Design': 'ðŸŽ¨',
                'Math': 'ðŸ“', 'Reading': 'ðŸ“š', 'Fitness': 'ðŸ’ª', 'Music': 'ðŸŽµ',
                'Language': 'ðŸŒ', 'Boss': 'â˜ ï¸', 'None': 'âš¡'
            };
            const icon = iconMap[skill.name] || 'âš¡';
            header.createSpan({ text: icon, cls: 'sisy-skill-icon' });
            header.createSpan({ text: skill.name, cls: 'sisy-skill-name' });
            // Level badge
            const badge = node.createDiv({ cls: 'sisy-skill-level-badge' });
            badge.textContent = `L${skill.level}`;
            if (skill.level >= 10)
                badge.addClass('sisy-level-master');
            else if (skill.level >= 5)
                badge.addClass('sisy-level-adept');
            // XP Progress bar
            const barWrap = node.createDiv({ cls: 'sisy-skill-bar-wrap' });
            const bar = barWrap.createDiv({ cls: 'sisy-bar-bg' });
            const pct = skill.xpReq > 0 ? Math.min((skill.xp / skill.xpReq) * 100, 100) : 0;
            const fill = bar.createDiv({ cls: 'sisy-bar-fill sisy-fill-blue' });
            fill.style.width = `${pct}%`;
            barWrap.createDiv({ text: `${skill.xp}/${skill.xpReq} XP`, cls: 'sisy-skill-xp-label' });
            // Rust indicator
            if (skill.rust > 0) {
                const rust = node.createDiv({ cls: 'sisy-skill-rust' });
                rust.textContent = `âš ï¸ RUST ${skill.rust}`;
            }
            // Connections indicator
            if (skill.connections && skill.connections.length > 0) {
                const conn = node.createDiv({ cls: 'sisy-skill-connections' });
                conn.textContent = `ðŸ”— ${skill.connections.join(', ')}`;
            }
        });
        // Draw connection lines between linked skills via SVG overlay
        SkillTreeRenderer.drawConnections(grid, skills);
    }
    static drawConnections(grid, skills) {
        // Defer connection drawing until layout is complete
        requestAnimationFrame(() => {
            const nodes = grid.querySelectorAll('.sisy-skill-node');
            if (nodes.length < 2)
                return;
            const svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
            svg.classList.add('sisy-skill-connections-svg');
            svg.style.position = 'absolute';
            svg.style.top = '0';
            svg.style.left = '0';
            svg.style.width = '100%';
            svg.style.height = '100%';
            svg.style.pointerEvents = 'none';
            grid.style.position = 'relative';
            grid.insertBefore(svg, grid.firstChild);
            const gridRect = grid.getBoundingClientRect();
            skills.forEach((skill, i) => {
                if (!skill.connections)
                    return;
                skill.connections.forEach(connName => {
                    const j = skills.findIndex(s => s.name === connName);
                    if (j < 0 || j <= i)
                        return; // Avoid duplicates
                    const nodeA = nodes[i];
                    const nodeB = nodes[j];
                    if (!nodeA || !nodeB)
                        return;
                    const rectA = nodeA.getBoundingClientRect();
                    const rectB = nodeB.getBoundingClientRect();
                    const x1 = rectA.left + rectA.width / 2 - gridRect.left;
                    const y1 = rectA.top + rectA.height / 2 - gridRect.top;
                    const x2 = rectB.left + rectB.width / 2 - gridRect.left;
                    const y2 = rectB.top + rectB.height / 2 - gridRect.top;
                    const line = document.createElementNS("http://www.w3.org/2000/svg", "line");
                    line.setAttribute("x1", String(x1));
                    line.setAttribute("y1", String(y1));
                    line.setAttribute("x2", String(x2));
                    line.setAttribute("y2", String(y2));
                    line.setAttribute("stroke", "var(--sisy-blue)");
                    line.setAttribute("stroke-width", "1");
                    line.setAttribute("stroke-opacity", "0.3");
                    line.setAttribute("stroke-dasharray", "4,4");
                    svg.appendChild(line);
                });
            });
        });
    }
}

const RIVAL_NAMES = ['ECHO-7', 'WRAITH', 'CIPHER', 'PHANTOM', 'NEMESIS', 'SHADOW', 'ORACLE-X', 'VOID'];
const RIVAL_AVATARS = ['ðŸ‘¤', 'ðŸ¤–', 'ðŸ‘ï¸', 'ðŸ’€', 'ðŸŽ­', 'ðŸŒ‘', 'âš¡', 'ðŸ”®'];
const TAUNTS = {
    aggressive: {
        fail: ["PATHETIC. I expected more.", "You call that effort? Laughable.", "Every failure feeds ME."],
        slack: ["Still resting? I'm pulling ahead.", "Your inaction is my progress.", "Tick tock. I don't sleep."],
        low_hp: ["Bleeding out already? Soft.", "I can smell your weakness.", "One more hit and you're DONE."],
        rival_stronger: ["I'm stronger now. Can you feel it?", "The gap widens. Give up.", "You're falling behind. Permanently."],
        quest_complete: ["Lucky hit. Won't last.", "One win means nothing.", "I completed THREE while you did one."],
    },
    mocking: {
        fail: ["Oh no! ðŸ˜¢ That was SO close. Not really.", "Oops! Butterfingers!", "Maybe try something easier? Like breathing?"],
        slack: ["Nap time? Adorable.", "I'll keep score while you rest ðŸ“‹", "ZzzzZzzz... oh sorry, were you working?"],
        low_hp: ["Might want to see a doctor ðŸ¥", "That doesn't look healthy!", "Red suits you, actually."],
        rival_stronger: ["Getting... kinda easy up here ðŸ˜Ž", "I can barely see you from this high!", "Wave up at me! ðŸ‘‹"],
        quest_complete: ["Aww, good job! â­ Want a sticker?", "Participation trophy incoming!", "Even a broken clock..."],
    },
    calculating: {
        fail: ["Failure probability: as predicted.", "Data point recorded. Trend negative.", "Error rate: increasing."],
        slack: ["Idle time: measurable. Progress: zero.", "Inactivity logged. Advantage: mine.", "Time decay applied."],
        low_hp: ["Vital signs: critical. Prognosis: poor.", "System integrity: compromised.", "HP below threshold. Intervention unlikely."],
        rival_stronger: ["Delta exceeds recovery threshold.", "Probability of your victory: declining.", "Statistical irreversibility approaching."],
        quest_complete: ["Anomaly noted. Likely regression to mean.", "Single data point. Insufficient.", "Acknowledged. Adjusting projections."],
    },
    silent: {
        fail: ["..."], slack: ["..."], low_hp: ["..."],
        rival_stronger: ["âš”ï¸"], quest_complete: [""],
    },
};
class RivalEngine {
    /** Initialize rival state if not present */
    static init(settings) {
        if (!settings.rival || !settings.rival.name) {
            const idx = Math.floor(Math.random() * RIVAL_NAMES.length);
            settings.rival = {
                name: RIVAL_NAMES[idx],
                avatar: RIVAL_AVATARS[idx],
                personality: ['aggressive', 'mocking', 'calculating'][Math.floor(Math.random() * 3)],
                level: 1,
                xp: 0,
                xpReq: 100,
                damageDealt: 0,
                lastTaunt: '',
                lastTauntTime: '',
            };
        }
    }
    /** Rival gains XP when player fails or slacks */
    static rivalGainXP(settings, amount) {
        const r = settings.rival;
        r.xp += amount;
        while (r.xp >= r.xpReq) {
            r.xp -= r.xpReq;
            r.level++;
            r.xpReq = Math.floor(r.xpReq * 1.3);
            showToast({
                icon: r.avatar,
                title: `${r.name} leveled up!`,
                message: `Rival is now Level ${r.level}.`,
                variant: 'fail',
                duration: 4000,
            });
        }
    }
    /** Get a contextual taunt */
    static taunt(settings, trigger) {
        var _a;
        const r = settings.rival;
        const pool = ((_a = TAUNTS[r.personality]) === null || _a === void 0 ? void 0 : _a[trigger]) || TAUNTS.aggressive.fail;
        const msg = pool[Math.floor(Math.random() * pool.length)];
        r.lastTaunt = msg;
        r.lastTauntTime = new Date().toISOString();
        return msg;
    }
    /** Show a taunt as a toast */
    static showTaunt(settings, trigger) {
        const r = settings.rival;
        const msg = RivalEngine.taunt(settings, trigger);
        if (!msg || msg === '')
            return;
        showToast({
            icon: r.avatar,
            title: r.name,
            message: msg,
            variant: 'fail',
            duration: 5000,
        });
    }
    /** Check if rival is stronger than player and taunt */
    static checkRivalAdvantage(settings) {
        const r = settings.rival;
        if (r.level > settings.level) {
            RivalEngine.showTaunt(settings, 'rival_stronger');
        }
    }
    /** Render rival section in HUD */
    static renderRivalHUD(parent, settings) {
        const r = settings.rival;
        const section = parent.createDiv({ cls: 'sisy-rival-section' });
        const header = section.createDiv({ cls: 'sisy-rival-header' });
        header.createSpan({ text: `${r.avatar} ${r.name}`, cls: 'sisy-rival-name' });
        header.createSpan({ text: `Lv${r.level}`, cls: 'sisy-rival-level' });
        // Level comparison bar
        const compBar = section.createDiv({ cls: 'sisy-rival-compare' });
        const playerPct = Math.min((settings.level / (settings.level + r.level)) * 100, 100);
        const rivalPct = 100 - playerPct;
        const playerBar = compBar.createDiv({ cls: 'sisy-rival-bar-player' });
        playerBar.style.width = `${playerPct}%`;
        playerBar.textContent = `You L${settings.level}`;
        const rivalBar = compBar.createDiv({ cls: 'sisy-rival-bar-rival' });
        rivalBar.style.width = `${rivalPct}%`;
        rivalBar.textContent = `${r.name} L${r.level}`;
        // Last taunt bubble
        if (r.lastTaunt && r.lastTaunt !== '') {
            const bubble = section.createDiv({ cls: 'sisy-rival-taunt' });
            bubble.textContent = `"${r.lastTaunt}"`;
        }
        // Rival XP bar
        const xpBar = section.createDiv({ cls: 'sisy-bar-bg' });
        const xpPct = r.xpReq > 0 ? (r.xp / r.xpReq) * 100 : 0;
        xpBar.createDiv({ cls: 'sisy-bar-fill sisy-fill-red', attr: { style: `width:${xpPct}%` } });
        return section;
    }
}

const VIEW_TYPE_PANOPTICON = "sisyphus-panopticon";
class PanopticonView extends obsidian.ItemView {
    /** Check if a kernel module is enabled */
    isModEnabled(id) {
        var _a, _b;
        return (_b = (_a = this.plugin.kernel) === null || _a === void 0 ? void 0 : _a.isModuleEnabled(id)) !== null && _b !== void 0 ? _b : false;
    }
    constructor(leaf, plugin) {
        super(leaf);
        this.draggedFile = null;
        this.selectMode = false;
        this.selectedQuests = new Set();
        this.observer = null;
        this.currentQuestList = [];
        this.renderedCount = 0;
        this.BATCH_SIZE = 20;
        this.debouncedRefresh = obsidian.debounce(this.refresh.bind(this), 50, true);
        this.boundShowUndoToast = (name) => this.showUndoToast(name);
        this.plugin = plugin;
    }
    getViewType() { return VIEW_TYPE_PANOPTICON; }
    getDisplayText() { return "Eye Sisyphus"; }
    getIcon() { return "skull"; }
    onOpen() {
        return __awaiter(this, void 0, void 0, function* () {
            this.refresh();
            this.plugin.engine.on('update', this.debouncedRefresh);
            this.plugin.engine.on('undo:show', this.boundShowUndoToast);
        });
    }
    onClose() {
        return __awaiter(this, void 0, void 0, function* () {
            this.plugin.engine.off('update', this.debouncedRefresh);
            this.plugin.engine.off('undo:show', this.boundShowUndoToast);
            if (this.observer)
                this.observer.disconnect();
        });
    }
    refresh() {
        return __awaiter(this, void 0, void 0, function* () {
            var _a;
            // 1. Capture State & Dimensions
            const scrollArea = this.contentEl.querySelector(".sisy-scroll-area");
            let lastScroll = 0;
            if (scrollArea)
                lastScroll = scrollArea.scrollTop;
            // [FIX] Measure width BEFORE wiping DOM so we can draw charts off-screen
            const currentWidth = this.contentEl.clientWidth || 300;
            const itemsToRestore = Math.max(this.renderedCount, this.BATCH_SIZE);
            const activeEl = document.activeElement;
            const isQuickInput = activeEl && activeEl.classList.contains("sisy-quick-input");
            let quickInputValue = "";
            if (isQuickInput)
                quickInputValue = activeEl.value;
            // 2. Clean & Prep
            if (this.observer) {
                this.observer.disconnect();
                this.observer = null;
            }
            this.prepareQuests();
            this.renderedCount = 0;
            // 3. Build Buffer
            const buffer = document.createDocumentFragment();
            const container = buffer.createDiv({ cls: "sisy-container" });
            const scroll = container.createDiv({ cls: "sisy-scroll-area" });
            scroll.style.scrollBehavior = "auto";
            // --- UI CONSTRUCTION ---
            const header = scroll.createDiv({ cls: "sisy-header" });
            header.createEl("h2", { text: "Eye SISYPHUS OS" });
            const soundBtn = header.createEl("span", { text: this.plugin.settings.muted ? "ðŸ”‡" : "ðŸ”Š", cls: "sisy-sound-btn" });
            soundBtn.onclick = () => __awaiter(this, void 0, void 0, function* () {
                this.plugin.settings.muted = !this.plugin.settings.muted;
                this.plugin.audio.setMuted(this.plugin.settings.muted);
                yield this.plugin.saveSettings();
                this.debouncedRefresh();
            });
            this.renderAlerts(scroll);
            const hud = scroll.createDiv({ cls: "sisy-hud" });
            const weekComp = ChartRenderer.getWeekComparison(this.plugin.settings.dayMetrics);
            if (this.isModEnabled('survival')) {
                this.statWithSparkline(hud, "HEALTH", `${this.plugin.settings.hp}/${this.plugin.settings.maxHp}`, this.plugin.settings.hp < 30 ? "sisy-critical" : "", undefined, undefined);
            }
            if (this.isModEnabled('economy')) {
                const goldComp = weekComp.find(c => c.label === 'Gold');
                this.statWithSparkline(hud, "GOLD", `${this.plugin.settings.gold}`, this.plugin.settings.gold < 0 ? "sisy-val-debt" : "", this.getLast7(d => d.goldEarned), goldComp ? { text: goldComp.delta, up: goldComp.up } : undefined, 'var(--sisy-gold)');
            }
            if (this.isModEnabled('progression')) {
                const xpComp = weekComp.find(c => c.label === 'XP');
                this.statWithSparkline(hud, "LEVEL", `${this.plugin.settings.level}`, '', this.getLast7(d => d.xpEarned), xpComp ? { text: xpComp.delta, up: xpComp.up } : undefined, 'var(--sisy-blue)');
            }
            if (this.isModEnabled('combat')) {
                const qComp = weekComp.find(c => c.label === 'Quests');
                this.statWithSparkline(hud, "QUESTS", `${this.plugin.settings.questsCompletedToday} today`, '', this.getLast7(d => d.questsCompleted), qComp ? { text: qComp.delta, up: qComp.up } : undefined, 'var(--sisy-green)');
            }
            if (this.isModEnabled('survival')) {
                this.renderOracle(scroll);
                this.renderScars(scroll);
            }
            if (this.isModEnabled('productivity')) {
                scroll.createDiv({ text: "TODAYS OBJECTIVES", cls: "sisy-section-title" });
                this.renderDailyMissions(scroll);
            }
            const ctrls = scroll.createDiv({ cls: "sisy-controls" });
            ctrls.createEl("button", { text: "DEPLOY", cls: "sisy-btn mod-cta" }).onclick = () => new QuestModal(this.app, this.plugin).open();
            if (this.isModEnabled('economy')) {
                ctrls.createEl("button", { text: "SHOP", cls: "sisy-btn" }).onclick = () => new ShopModal(this.app, this.plugin).open();
            }
            const focusLabel = this.plugin.pomodoro.isRunning()
                ? `â± ${this.plugin.pomodoro.formatTime()}`
                : 'FOCUS';
            ctrls.createEl('button', { text: focusLabel, cls: 'sisy-btn' }).onclick = () => {
                if (this.plugin.pomodoro.isRunning())
                    this.plugin.pomodoro.pause();
                else
                    this.plugin.pomodoro.start();
                this.debouncedRefresh();
            };
            const selBtn = ctrls.createEl("button", {
                text: this.selectMode ? `CANCEL (${this.selectedQuests.size})` : "SELECT",
                cls: "sisy-btn"
            });
            if (this.selectMode)
                selBtn.addClass("sisy-filter-active");
            selBtn.onclick = () => {
                this.selectMode = !this.selectMode;
                this.selectedQuests.clear();
                this.refresh();
            };
            if (this.isModEnabled('productivity')) {
                scroll.createDiv({ text: "FILTER CONTROLS", cls: "sisy-section-title" });
                this.renderFilterBar(scroll);
                if (this.plugin.engine.getActiveChain()) {
                    scroll.createDiv({ text: "ACTIVE CHAIN", cls: "sisy-section-title" });
                    this.renderChainSection(scroll);
                }
                scroll.createDiv({ text: "RESEARCH LIBRARY", cls: "sisy-section-title" });
                this.renderResearchSection(scroll);
            }
            if (this.isModEnabled('analytics')) {
                scroll.createDiv({ text: "ANALYTICS", cls: "sisy-section-title" });
                const analyticsContainer = scroll.createDiv({ cls: "sisy-analytics" });
                this.setupAnalyticsStructure(analyticsContainer);
                this.renderAnalyticsCharts(analyticsContainer, currentWidth);
                // GitHub Heatmap
                analyticsContainer.createEl('h4', { text: 'Contribution Heatmap (365 Days)' });
                const heatContainer = analyticsContainer.createDiv({ cls: 'sisy-chart-container-heat' });
                ChartRenderer.renderGitHubHeatmap(heatContainer, this.plugin.settings.dayMetrics);
                // Time-of-day chart
                analyticsContainer.createEl('h4', { text: 'Productivity by Hour' });
                const todContainer = analyticsContainer.createDiv();
                ChartRenderer.renderTimeOfDay(todContainer, this.plugin.settings.dayMetrics);
                // Week-over-week comparison
                analyticsContainer.createEl('h4', { text: 'This Week vs Last Week' });
                const compGrid = analyticsContainer.createDiv({ cls: 'sisy-week-compare' });
                weekComp.forEach(c => {
                    const item = compGrid.createDiv({ cls: 'sisy-week-compare-item' });
                    item.createDiv({ text: c.label, cls: 'sisy-week-compare-label' });
                    item.createDiv({ text: String(c.thisWeek), cls: 'sisy-week-compare-val' });
                    item.createDiv({ text: c.delta, cls: `sisy-stat-delta ${c.up ? 'sisy-stat-delta-up' : 'sisy-stat-delta-down'}` });
                });
            }
            // Trophy shelf
            if (this.isModEnabled('analytics')) {
                const unlocked = (this.plugin.settings.achievements || []).filter(a => a.unlocked);
                if (unlocked.length > 0) {
                    scroll.createDiv({ text: `TROPHIES (${unlocked.length})`, cls: 'sisy-section-title' });
                    const shelf = scroll.createDiv({ cls: 'sisy-trophy-shelf' });
                    const sorted = [...unlocked].sort((a, b) => {
                        var _a, _b;
                        const order = { legendary: 0, epic: 1, rare: 2, common: 3 };
                        return ((_a = order[a.rarity]) !== null && _a !== void 0 ? _a : 4) - ((_b = order[b.rarity]) !== null && _b !== void 0 ? _b : 4);
                    });
                    sorted.slice(0, 8).forEach(ach => {
                        const icons = { common: 'ðŸ…', rare: 'ðŸ’Ž', epic: 'ðŸ‘‘', legendary: 'â­' };
                        const item = shelf.createDiv({ text: `${icons[ach.rarity] || 'ðŸ†'} ${ach.name}`, cls: `sisy-trophy-item sisy-trophy-${ach.rarity}` });
                        item.setAttribute('title', ach.description);
                    });
                }
            }
            // Rival HUD
            if (this.isModEnabled('combat') && ((_a = this.plugin.settings.rival) === null || _a === void 0 ? void 0 : _a.name)) {
                scroll.createDiv({ text: 'RIVAL', cls: 'sisy-section-title' });
                RivalEngine.renderRivalHUD(scroll, this.plugin.settings);
            }
            scroll.createDiv({ text: "ACTIVE THREATS", cls: "sisy-section-title" });
            const questContainer = scroll.createDiv({ cls: "sisy-quest-container" });
            this.renderQuestBatch(questContainer, itemsToRestore);
            if (this.isModEnabled('progression')) {
                scroll.createDiv({ text: "NEURAL HUB", cls: "sisy-section-title" });
                const skillContainer = scroll.createDiv();
                SkillTreeRenderer.render(skillContainer, this.plugin.settings.skills, (idx) => {
                    new SkillDetailModal(this.app, this.plugin, idx).open();
                });
                scroll.createDiv({ text: "+ Add Node", cls: "sisy-btn", attr: { style: "width:100%; margin-top:10px;" } }).onclick = () => new SkillManagerModal(this.app, this.plugin).open();
                // Skill Radar Chart
                if (this.plugin.settings.skills.length >= 3) {
                    scroll.createDiv({ text: 'SKILL PROFILE', cls: 'sisy-section-title' });
                    const radarWrap = scroll.createDiv({ cls: 'sisy-profile-radar' });
                    const sorted = [...this.plugin.settings.skills].sort((a, b) => b.level - a.level);
                    ChartRenderer.renderRadar(radarWrap, sorted);
                }
            }
            const footer = container.createDiv({ cls: "sisy-quick-capture" });
            const input = footer.createEl("input", { cls: "sisy-quick-input", placeholder: "Mission /1...5" });
            if (isQuickInput)
                input.value = quickInputValue;
            input.onkeydown = (e) => __awaiter(this, void 0, void 0, function* () {
                if (e.key === 'Enter' && input.value.trim()) {
                    this.plugin.engine.parseQuickInput(input.value.trim());
                    input.value = "";
                }
            });
            this.renderBulkBar(container);
            // 4. THE SWAP
            this.contentEl.empty();
            this.contentEl.appendChild(buffer);
            // 5. RESTORE
            if (isQuickInput) {
                const newInput = this.contentEl.querySelector(".sisy-quick-input");
                if (newInput) {
                    newInput.focus();
                    const len = newInput.value.length;
                    newInput.setSelectionRange(len, len);
                }
            }
            if (lastScroll > 0) {
                const newScroll = this.contentEl.querySelector(".sisy-scroll-area");
                if (newScroll)
                    newScroll.scrollTop = lastScroll;
            }
        });
    }
    prepareQuests() {
        const folder = this.app.vault.getAbstractFileByPath("Active_Run/Quests");
        this.currentQuestList = [];
        if (folder instanceof obsidian.TFolder) {
            let files = folder.children.filter(f => f instanceof obsidian.TFile);
            files = this.plugin.engine.filtersEngine.filterQuests(files).filter((f) => f instanceof obsidian.TFile);
            files.sort((a, b) => {
                var _a, _b;
                const fmA = (_a = this.app.metadataCache.getFileCache(a)) === null || _a === void 0 ? void 0 : _a.frontmatter;
                const fmB = (_b = this.app.metadataCache.getFileCache(b)) === null || _b === void 0 ? void 0 : _b.frontmatter;
                const orderA = (fmA === null || fmA === void 0 ? void 0 : fmA.manual_order) !== undefined ? fmA.manual_order : 9999999999999;
                const orderB = (fmB === null || fmB === void 0 ? void 0 : fmB.manual_order) !== undefined ? fmB.manual_order : 9999999999999;
                if (orderA !== orderB)
                    return orderA - orderB;
                if ((fmA === null || fmA === void 0 ? void 0 : fmA.is_boss) !== (fmB === null || fmB === void 0 ? void 0 : fmB.is_boss))
                    return ((fmB === null || fmB === void 0 ? void 0 : fmB.is_boss) ? 1 : 0) - ((fmA === null || fmA === void 0 ? void 0 : fmA.is_boss) ? 1 : 0);
                const dateA = (fmA === null || fmA === void 0 ? void 0 : fmA.deadline) ? obsidian.moment(fmA.deadline).valueOf() : 9999999999999;
                const dateB = (fmB === null || fmB === void 0 ? void 0 : fmB.deadline) ? obsidian.moment(fmB.deadline).valueOf() : 9999999999999;
                return dateA - dateB;
            });
            this.currentQuestList = files;
        }
    }
    renderQuestBatch(container, batchSize = this.BATCH_SIZE) {
        if (this.currentQuestList.length === 0) {
            renderEmptyState(container, 'quests', '[DEPLOY QUEST]', () => new QuestModal(this.app, this.plugin).open());
            return;
        }
        const nextBatch = this.currentQuestList.slice(this.renderedCount, this.renderedCount + batchSize);
        for (const file of nextBatch)
            QuestCardRenderer.render(container, file, this);
        this.renderedCount += nextBatch.length;
        if (this.renderedCount < this.currentQuestList.length) {
            const sentinel = container.createDiv({ cls: "sisy-sentinel" });
            this.observer = new IntersectionObserver((entries) => {
                var _a;
                if (entries[0].isIntersecting) {
                    (_a = this.observer) === null || _a === void 0 ? void 0 : _a.disconnect();
                    sentinel.remove();
                    this.renderQuestBatch(container, this.BATCH_SIZE);
                }
            }, { root: container.parentElement, threshold: 0.1 });
            this.observer.observe(sentinel);
        }
    }
    setupAnalyticsStructure(parent) {
        const stats = this.plugin.engine.getGameStats();
        const g = parent.createDiv({ cls: "sisy-hud" });
        this.stat(g, "Streak", String(stats.currentStreak));
        this.stat(g, "Today", String(this.plugin.settings.questsCompletedToday));
        parent.createEl("h4", { text: "Activity (7 Days)" });
        parent.createDiv({ cls: "sisy-chart-container-line" });
        parent.createEl("h4", { text: "Heatmap" });
        parent.createDiv({ cls: "sisy-chart-container-heat" });
    }
    // [FIX] Accept widthOverride to enable off-screen rendering
    renderAnalyticsCharts(parent, widthOverride) {
        const lineContainer = parent.querySelector(".sisy-chart-container-line");
        const heatContainer = parent.querySelector(".sisy-chart-container-heat");
        if (lineContainer) {
            lineContainer.empty();
            ChartRenderer.renderLineChart(lineContainer, this.plugin.settings.dayMetrics, widthOverride);
        }
        if (heatContainer) {
            heatContainer.empty();
            ChartRenderer.renderHeatmap(heatContainer, this.plugin.settings.dayMetrics);
        }
    }
    renderAlerts(scroll) {
        if (this.plugin.settings.activeBuffs.length > 0) {
            const buffBar = scroll.createDiv({ cls: "sisy-alert sisy-alert-buff" });
            buffBar.createEl("h3", { text: "ACTIVE EFFECTS", attr: { style: "color: var(--sisy-purple);" } });
            this.plugin.settings.activeBuffs.forEach(b => {
                const row = buffBar.createDiv({ cls: "sisy-alert-row" });
                row.createSpan({ text: `${b.icon} ${b.name}` });
                row.createSpan({ text: `${obsidian.moment(b.expiresAt).diff(obsidian.moment(), 'minutes')}m left`, cls: "sisy-alert-timer" });
            });
        }
        if (this.plugin.settings.gold < 0) {
            const d = scroll.createDiv({ cls: "sisy-alert sisy-alert-debt" });
            d.createEl("h3", { text: "âš ï¸ DEBT CRISIS" });
            d.createEl("p", { text: `Balance: ${this.plugin.settings.gold}g` });
        }
    }
    renderOracle(scroll) {
        const oracle = scroll.createDiv({ cls: "sisy-oracle" });
        oracle.createEl("h4", { text: "ORACLE PREDICTION" });
        const survival = Math.floor(this.plugin.settings.hp / Math.max(1, (this.plugin.settings.rivalDmg * (this.plugin.settings.gold < 0 ? 2 : 1))));
        const survEl = oracle.createDiv({ text: `Survival: ${survival} days`, cls: "sisy-prediction" });
        if (survival < 2)
            survEl.addClass("sisy-prediction-bad");
    }
    renderScars(scroll) {
        const scars = this.plugin.settings.scars || [];
        if (scars.length === 0)
            return;
        const div = scroll.createDiv({ cls: "sisy-scars" });
        div.createEl("h4", { text: "ðŸ§¬ SCARS" });
        const recent = scars.slice(-3).reverse();
        recent.forEach((s) => {
            div.createEl("p", { text: `${s.label}: ${s.value}`, attr: { style: "font-size: 0.9em; opacity: 0.85;" } });
        });
        const btn = div.createEl("button", { text: "View all", cls: "sisy-btn" });
        btn.style.marginTop = "6px";
        btn.onclick = () => new ScarsModal(this.app, this.plugin).open();
    }
    renderSkills(scroll) {
        this.plugin.settings.skills.forEach((s, idx) => {
            const row = scroll.createDiv({ cls: "sisy-skill-row" });
            row.onclick = () => new SkillDetailModal(this.app, this.plugin, idx).open();
            const meta = row.createDiv({ cls: "sisy-skill-meta" });
            meta.createSpan({ text: `${s.name} (Lvl ${s.level})` });
            if (s.rust > 0)
                meta.createSpan({ text: `RUST ${s.rust}`, cls: "sisy-text-rust" });
            const bar = row.createDiv({ cls: "sisy-bar-bg" });
            const pct = s.xpReq > 0 ? (s.xp / s.xpReq) * 100 : 0;
            bar.createDiv({ cls: "sisy-bar-fill sisy-fill-blue", attr: { style: `width: ${pct}%;` } });
        });
        scroll.createDiv({ text: "+ Add Node", cls: "sisy-btn", attr: { style: "width:100%; margin-top:10px;" } }).onclick = () => new SkillManagerModal(this.app, this.plugin).open();
    }
    renderBulkBar(parent) {
        if (!this.selectMode || this.selectedQuests.size === 0)
            return;
        const bar = parent.createDiv({ cls: "sisy-bulk-bar" });
        bar.createSpan({ text: `${this.selectedQuests.size} Selected`, attr: { style: "align-self:center; font-weight:bold; color: white;" } });
        const btnC = bar.createEl("button", { text: "COMPLETE ALL", cls: "sisy-btn mod-done" });
        btnC.onclick = () => __awaiter(this, void 0, void 0, function* () { for (const f of this.selectedQuests)
            yield this.plugin.engine.completeQuest(f); this.selectedQuests.clear(); this.selectMode = false; this.debouncedRefresh(); });
        const btnD = bar.createEl("button", { text: "DELETE ALL", cls: "sisy-btn mod-fail" });
        btnD.onclick = () => __awaiter(this, void 0, void 0, function* () { for (const f of this.selectedQuests)
            yield this.plugin.engine.deleteQuest(f); this.selectedQuests.clear(); this.selectMode = false; this.debouncedRefresh(); });
    }
    renderDailyMissions(parent) {
        const missions = this.plugin.settings.dailyMissions || [];
        if (missions.length === 0) {
            renderEmptyState(parent, 'missions');
            return;
        }
        const missionsDiv = parent.createDiv();
        missions.forEach((m) => {
            const card = missionsDiv.createDiv({ cls: "sisy-mission-card" });
            if (m.completed)
                card.addClass("sisy-mission-completed");
            const h = card.createDiv({ cls: "sisy-card-top" });
            h.createEl("span", { text: m.name, cls: "sisy-card-title" });
            h.createEl("span", { text: `${m.progress}/${m.target}`, attr: { style: "font-weight: bold;" } });
            card.createDiv({ text: m.desc, attr: { style: "font-size: 0.8em; opacity: 0.7; margin-bottom: 5px;" } });
            const bar = card.createDiv({ cls: "sisy-bar-bg" });
            const pct = m.target > 0 ? (m.progress / m.target) * 100 : 0;
            bar.createDiv({ cls: "sisy-bar-fill sisy-fill-green", attr: { style: `width: ${pct}%;` } });
        });
    }
    renderChainSection(parent) {
        const chain = this.plugin.engine.getActiveChain();
        if (!chain)
            return;
        const div = parent.createDiv({ cls: "sisy-chain-container" });
        div.createEl("h3", { text: chain.name, attr: { style: "color: var(--sisy-green);" } });
        const p = this.plugin.engine.getChainProgress();
        const b = div.createDiv({ cls: "sisy-bar-bg" });
        b.createDiv({ cls: "sisy-bar-fill sisy-fill-green", attr: { style: `width:${p.percent}%;` } });
        const list = div.createDiv({ attr: { style: "margin: 10px 0; font-size: 0.9em;" } });
        chain.quests.forEach((q, i) => list.createEl("p", { text: `[${i < p.completed ? "OK" : ".."}] ${q}`, attr: { style: i === p.completed ? "font-weight:bold" : "opacity:0.5" } }));
        div.createEl("button", { text: "BREAK CHAIN", cls: "sisy-btn mod-fail", attr: { style: "width:100%; margin-top:10px;" } }).onclick = () => __awaiter(this, void 0, void 0, function* () { yield this.plugin.engine.breakChain(); this.debouncedRefresh(); });
    }
    renderResearchSection(parent) {
        const research = this.plugin.settings.researchQuests || [];
        const active = research.filter(q => !q.completed);
        const stats = this.plugin.engine.getResearchRatio();
        const statsDiv = parent.createDiv({ cls: "sisy-research-stats sisy-card" });
        statsDiv.createEl("p", { text: `Research Ratio: ${stats.combat}:${stats.research}` });
        if (active.length === 0)
            renderEmptyState(parent, 'research');
        else
            active.forEach((q) => {
                const card = parent.createDiv({ cls: "sisy-research-card" });
                const h = card.createDiv({ cls: "sisy-card-top" });
                h.createEl("span", { text: q.title, cls: "sisy-card-title" });
                card.createEl("p", { text: `Words: ${q.wordCount}/${q.wordLimit}` });
                const bar = card.createDiv({ cls: "sisy-bar-bg" });
                const wpct = q.wordLimit > 0 ? Math.min(100, (q.wordCount / q.wordLimit) * 100) : 0;
                bar.createDiv({ cls: "sisy-bar-fill sisy-fill-purple", attr: { style: `width:${wpct}%;` } });
                const acts = card.createDiv({ cls: "sisy-actions" });
                acts.createEl("button", { text: "COMPLETE", cls: "sisy-btn mod-done sisy-action-btn" }).onclick = () => { this.plugin.engine.completeResearchQuest(q.id, q.wordCount); this.debouncedRefresh(); };
                acts.createEl("button", { text: "DELETE", cls: "sisy-btn mod-fail sisy-action-btn" }).onclick = () => __awaiter(this, void 0, void 0, function* () { yield this.plugin.engine.deleteResearchQuest(q.id); this.debouncedRefresh(); });
            });
    }
    renderFilterBar(parent) {
        const getFreshState = () => this.plugin.settings.filterState;
        const d = parent.createDiv({ cls: "sisy-filter-bar" });
        const addRow = (l, opts, curr, cb) => {
            const r = d.createDiv({ cls: "sisy-filter-row" });
            r.createSpan({ text: l, cls: "sisy-filter-label" });
            opts.forEach(o => {
                const btn = r.createEl("button", { text: o.toUpperCase(), cls: "sisy-filter-btn" });
                if (curr === o)
                    btn.addClass("sisy-filter-active");
                btn.onclick = () => cb(o);
            });
        };
        const f = getFreshState();
        addRow("Energy:", ["any", "high", "medium"], f.activeEnergy, (v) => {
            const s = getFreshState();
            const newVal = (s.activeEnergy === v && v !== "any") ? "any" : v;
            this.plugin.engine.setFilterState(newVal, s.activeContext, s.activeTags);
            this.debouncedRefresh();
        });
        addRow("Context:", ["any", "home", "office"], f.activeContext, (v) => {
            const s = getFreshState();
            const newVal = (s.activeContext === v && v !== "any") ? "any" : v;
            this.plugin.engine.setFilterState(s.activeEnergy, newVal, s.activeTags);
            this.debouncedRefresh();
        });
        d.createEl("button", { text: "CLEAR", cls: "sisy-btn mod-fail", attr: { style: "width:100%; margin-top:5px;" } }).onclick = () => { this.plugin.engine.clearFilters(); this.debouncedRefresh(); };
    }
    stat(p, label, val, cls = "") {
        const b = p.createDiv({ cls: "sisy-stat-box" });
        if (cls)
            b.addClass(cls);
        b.createDiv({ text: label, cls: "sisy-stat-label" });
        b.createDiv({ text: val, cls: "sisy-stat-val" });
    }
    /** Stat box with optional sparkline and week-over-week delta */
    statWithSparkline(p, label, val, cls = '', sparkData, delta, sparkColor) {
        const b = p.createDiv({ cls: 'sisy-stat-box' });
        if (cls)
            b.addClass(cls);
        b.createDiv({ text: label, cls: 'sisy-stat-label' });
        b.createDiv({ text: val, cls: 'sisy-stat-val' });
        if (delta) {
            b.createDiv({ text: delta.text, cls: `sisy-stat-delta ${delta.up ? 'sisy-stat-delta-up' : 'sisy-stat-delta-down'}` });
        }
        if (sparkData && sparkData.length > 1) {
            const sparkWrap = b.createDiv({ cls: 'sisy-stat-sparkline' });
            ChartRenderer.renderSparkline(sparkWrap, sparkData, sparkColor || 'var(--sisy-blue)');
        }
    }
    /** Get last 7 days of a metric */
    getLast7(accessor) {
        const result = [];
        for (let i = 6; i >= 0; i--) {
            const date = obsidian.moment().subtract(i, 'days').format('YYYY-MM-DD');
            const m = this.plugin.settings.dayMetrics.find((x) => x.date === date);
            result.push(m ? accessor(m) : 0);
        }
        return result;
    }
    showUndoToast(questName) {
        showToast({
            icon: 'ðŸ—‘ï¸',
            title: `Deleted: ${questName}`,
            variant: 'fail',
            duration: 8000,
            action: {
                label: 'UNDO',
                callback: () => this.plugin.engine.undoLastDeletion()
            }
        });
    }
}

const CONFIG_VERSION = 1;
const STATE_VERSION = 1;
const KNOWN_MODULE_IDS = [
    'survival',
    'progression',
    'economy',
    'combat',
    'productivity',
    'analytics',
    'recovery',
    'daily_lifecycle'
];
const GAME_MODE_PRESETS = {
    full: KNOWN_MODULE_IDS,
    pacifist: ['survival', 'progression', 'economy', 'productivity', 'analytics', 'recovery', 'daily_lifecycle'],
    zen: ['productivity', 'analytics', 'daily_lifecycle'],
    hardcore: ['survival', 'progression', 'combat', 'productivity', 'analytics', 'recovery', 'daily_lifecycle'],
};
const GAME_MODE_DESCRIPTIONS = {
    full: 'All systems active â€” the complete Sisyphus experience.',
    pacifist: 'No bosses, no rival damage. Focus on quests & progression.',
    zen: 'Pure tracking. No HP, gold, or gamification.',
    hardcore: 'No economy/shop. Earn everything through pure effort.',
    custom: 'Mix and match modules to your liking.',
};
function normalizeEnabledModules(rawIds) {
    if (!Array.isArray(rawIds))
        return [...KNOWN_MODULE_IDS];
    const allowed = new Set(KNOWN_MODULE_IDS);
    const normalized = rawIds
        .filter((id) => typeof id === 'string')
        .filter((id) => allowed.has(id));
    return normalized.length > 0 ? [...new Set(normalized)] : [...KNOWN_MODULE_IDS];
}
function detectGameMode(enabledModules) {
    const sorted = [...enabledModules].sort();
    for (const [mode, preset] of Object.entries(GAME_MODE_PRESETS)) {
        const presetSorted = [...preset].sort();
        if (sorted.length === presetSorted.length && sorted.every((id, i) => id === presetSorted[i])) {
            return mode;
        }
    }
    return 'custom';
}
const DEFAULT_CONFIG = {
    enabledModules: [...KNOWN_MODULE_IDS],
    gameMode: 'full',
    difficultyScale: 1,
    muteAudio: false
};
function isPersistedState(value) {
    if (!value || typeof value !== 'object')
        return false;
    const candidate = value;
    return !!candidate.config && !!candidate.state;
}
class StateManager {
    constructor(defaultState) {
        this.defaultState = defaultState;
    }
    migrate(rawData) {
        var _a, _b, _c, _d, _e;
        if (isPersistedState(rawData)) {
            const nextConfig = Object.assign(Object.assign(Object.assign({}, DEFAULT_CONFIG), rawData.config), { enabledModules: normalizeEnabledModules((_a = rawData.config) === null || _a === void 0 ? void 0 : _a.enabledModules), gameMode: (_c = (_b = rawData.config) === null || _b === void 0 ? void 0 : _b.gameMode) !== null && _c !== void 0 ? _c : detectGameMode(normalizeEnabledModules((_d = rawData.config) === null || _d === void 0 ? void 0 : _d.enabledModules)) });
            return {
                config: nextConfig,
                state: Object.assign({}, this.defaultState, rawData.state),
                migrated: rawData.configVersion !== CONFIG_VERSION || rawData.stateVersion !== STATE_VERSION
            };
        }
        const legacyState = Object.assign({}, this.defaultState, (rawData !== null && rawData !== void 0 ? rawData : {}));
        return {
            config: Object.assign(Object.assign({}, DEFAULT_CONFIG), { muteAudio: (_e = legacyState.muted) !== null && _e !== void 0 ? _e : DEFAULT_CONFIG.muteAudio, enabledModules: normalizeEnabledModules(undefined) }),
            state: legacyState,
            migrated: true
        };
    }
    toPersistedState(config, state) {
        return {
            configVersion: CONFIG_VERSION,
            stateVersion: STATE_VERSION,
            config: Object.assign(Object.assign(Object.assign({}, DEFAULT_CONFIG), config), { enabledModules: normalizeEnabledModules(config.enabledModules) }),
            state
        };
    }
}

class SisyphusSettingTab extends obsidian.PluginSettingTab {
    constructor(app, plugin) {
        super(app, plugin);
        this.plugin = plugin;
    }
    display() {
        var _a, _b;
        const { containerEl } = this;
        containerEl.empty();
        containerEl.createEl('h2', { text: 'Sisyphus Engine Settings' });
        // --- GAME MODE SECTION ---
        containerEl.createEl('h3', { text: 'Game Mode' });
        new obsidian.Setting(containerEl)
            .setName('Active Mode')
            .setDesc(GAME_MODE_DESCRIPTIONS[this.plugin.config.gameMode])
            .addDropdown((dropdown) => {
            const modes = ['full', 'pacifist', 'zen', 'hardcore', 'custom'];
            modes.forEach((mode) => {
                dropdown.addOption(mode, mode.charAt(0).toUpperCase() + mode.slice(1));
            });
            dropdown.setValue(this.plugin.config.gameMode);
            dropdown.onChange((value) => __awaiter(this, void 0, void 0, function* () {
                const mode = value;
                this.plugin.config.gameMode = mode;
                if (mode !== 'custom') {
                    const preset = GAME_MODE_PRESETS[mode];
                    const presetSet = new Set(preset);
                    // Disable all, then enable preset modules
                    this.plugin.kernel.modules.getAll().forEach((m) => {
                        if (presetSet.has(m.id)) {
                            try {
                                this.plugin.kernel.modules.enable(m.id);
                            }
                            catch (_) { }
                        }
                        else {
                            try {
                                this.plugin.kernel.modules.disable(m.id);
                            }
                            catch (_) { }
                        }
                    });
                    this.plugin.config.enabledModules = [...preset];
                }
                yield this.plugin.saveSettings();
                this.plugin.engine.trigger('update');
                this.display(); // Refresh to update toggle states and description
            }));
        });
        // --- MODULES SECTION ---
        containerEl.createEl('h3', { text: 'Modules' });
        const modules = (_b = (_a = this.plugin.kernel) === null || _a === void 0 ? void 0 : _a.modules.getAll()) !== null && _b !== void 0 ? _b : [];
        modules.forEach((module) => {
            new obsidian.Setting(containerEl)
                .setName(module.name)
                .setDesc(module.description)
                .addToggle((toggle) => {
                const enabled = this.plugin.kernel.modules.isEnabled(module.id);
                toggle
                    .setValue(enabled)
                    .onChange((value) => __awaiter(this, void 0, void 0, function* () {
                    try {
                        if (value) {
                            this.plugin.kernel.modules.enable(module.id);
                        }
                        else {
                            this.plugin.kernel.modules.disable(module.id);
                        }
                        const enabledIds = this.plugin.kernel.modules
                            .getAll()
                            .filter((entry) => this.plugin.kernel.modules.isEnabled(entry.id))
                            .map((entry) => entry.id);
                        this.plugin.config.enabledModules = enabledIds;
                        // Auto-switch to 'custom' when manually toggling
                        this.plugin.config.gameMode = 'custom';
                        yield this.plugin.saveSettings();
                        this.plugin.engine.trigger('update');
                        this.display(); // Refresh to show updated mode
                    }
                    catch (error) {
                        new obsidian.Notice(`Failed to toggle module '${module.name}'.`);
                        console.error(error);
                        this.display();
                    }
                }));
            });
        });
        // Render per-module settings for enabled modules
        modules.forEach((module) => {
            if (this.plugin.kernel.modules.isEnabled(module.id)) {
                module.renderSettings(containerEl);
            }
        });
        // --- GAMEPLAY SECTION ---
        containerEl.createEl('h3', { text: 'Gameplay' });
        new obsidian.Setting(containerEl)
            .setName('Starting HP')
            .setDesc('Base HP for a new run (Default: 100)')
            .addText((text) => text.setValue(String(this.plugin.settings.maxHp)).onChange((value) => __awaiter(this, void 0, void 0, function* () {
            const num = parseInt(value);
            this.plugin.settings.maxHp = Number.isNaN(num) ? 100 : num;
            yield this.plugin.saveSettings();
        })));
        new obsidian.Setting(containerEl)
            .setName('Difficulty Scaling (Rival Damage)')
            .setDesc('Starting damage punishment for failed quests (Default: 10)')
            .addText((text) => text.setValue(String(this.plugin.settings.rivalDmg)).onChange((value) => __awaiter(this, void 0, void 0, function* () {
            const num = parseInt(value);
            this.plugin.settings.rivalDmg = Number.isNaN(num) ? 10 : num;
            yield this.plugin.saveSettings();
        })));
        new obsidian.Setting(containerEl)
            .setName('Quest Templates')
            .setDesc('Create or delete quick-deploy templates.')
            .addButton((btn) => btn.setButtonText('Manage Templates').onClick(() => {
            new TemplateManagerModal(this.app, this.plugin).open();
        }));
        // --- AUDIO SECTION ---
        containerEl.createEl('h3', { text: 'Audio' });
        new obsidian.Setting(containerEl)
            .setName('Mute All Sounds')
            .setDesc('Disable sound effects and ambient noise')
            .addToggle((toggle) => toggle.setValue(this.plugin.settings.muted).onChange((value) => __awaiter(this, void 0, void 0, function* () {
            this.plugin.settings.muted = value;
            this.plugin.audio.setMuted(value);
            yield this.plugin.saveSettings();
        })));
        // --- DATA MANAGEMENT SECTION ---
        containerEl.createEl('h3', { text: 'Data Management' });
        new obsidian.Setting(containerEl)
            .setName('Export Full Data')
            .setDesc('Download config and full game state as a JSON file.')
            .addButton((btn) => btn.setButtonText('Export Backup').onClick(() => {
            const stateManager = new StateManager(this.plugin.settings);
            const payload = stateManager.toPersistedState(this.plugin.config, this.plugin.settings);
            const json = JSON.stringify(payload, null, 2);
            const blob = new Blob([json], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const anchor = document.createElement('a');
            anchor.href = url;
            anchor.download = `sisyphus_backup_${Date.now()}.json`;
            anchor.click();
            URL.revokeObjectURL(url);
            new obsidian.Notice('Backup downloaded.');
        }));
        new obsidian.Setting(containerEl)
            .setName('Import Data')
            .setDesc('Restore from backup file. âš ï¸ WARNING: Overwrites current progress!')
            .addButton((btn) => btn
            .setButtonText('Import Backup')
            .setWarning()
            .onClick(() => {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            input.onchange = (event) => __awaiter(this, void 0, void 0, function* () {
                var _a;
                const target = event.target;
                const file = (_a = target.files) === null || _a === void 0 ? void 0 : _a[0];
                if (!file)
                    return;
                try {
                    const text = yield file.text();
                    const data = JSON.parse(text);
                    const stateManager = new StateManager(this.plugin.settings);
                    const migrated = stateManager.migrate(data);
                    this.plugin.config = migrated.config;
                    this.plugin.settings = migrated.state;
                    // Keep runtime references in sync
                    this.plugin.kernel.config = this.plugin.config;
                    this.plugin.kernel.state = this.plugin.settings;
                    const enabled = new Set(this.plugin.config.enabledModules);
                    this.plugin.kernel.modules.getAll().forEach((module) => {
                        if (enabled.has(module.id)) {
                            this.plugin.kernel.modules.enable(module.id);
                        }
                        else {
                            this.plugin.kernel.modules.disable(module.id);
                        }
                    });
                    yield this.plugin.saveSettings();
                    this.plugin.engine.trigger('update');
                    this.display();
                    new obsidian.Notice('Data imported successfully!');
                }
                catch (error) {
                    new obsidian.Notice('Error importing data.');
                    console.error(error);
                }
            });
            input.click();
        }));
    }
}

class EventBus {
    constructor() {
        this.listeners = new Map();
    }
    on(event, handler) {
        var _a;
        const handlers = (_a = this.listeners.get(event)) !== null && _a !== void 0 ? _a : new Set();
        handlers.add(handler);
        this.listeners.set(event, handlers);
        return () => this.off(event, handler);
    }
    off(event, handler) {
        const handlers = this.listeners.get(event);
        if (!handlers)
            return;
        handlers.delete(handler);
        if (handlers.size === 0) {
            this.listeners.delete(event);
        }
    }
    emit(event, payload) {
        const handlers = this.listeners.get(event);
        if (!handlers || handlers.size === 0)
            return;
        handlers.forEach((registeredHandler) => registeredHandler(payload));
    }
    clear() {
        this.listeners.clear();
    }
}

class ModuleManager {
    constructor() {
        this.modules = new Map();
        this.enabledModules = new Set();
    }
    register(module) {
        this.modules.set(module.id, module);
    }
    getAll() {
        return [...this.modules.values()];
    }
    getById(moduleId) {
        var _a;
        return (_a = this.modules.get(moduleId)) !== null && _a !== void 0 ? _a : null;
    }
    isEnabled(moduleId) {
        return this.enabledModules.has(moduleId);
    }
    enable(moduleId) {
        const module = this.modules.get(moduleId);
        if (!module || this.enabledModules.has(moduleId))
            return;
        const sortedDependencies = this.resolveDependencies(moduleId);
        sortedDependencies.forEach((id) => {
            if (this.enabledModules.has(id))
                return;
            const dependency = this.modules.get(id);
            if (!dependency)
                return;
            dependency.onEnable();
            this.enabledModules.add(id);
        });
    }
    disable(moduleId) {
        if (!this.enabledModules.has(moduleId))
            return;
        const dependents = this.findDependents(moduleId);
        dependents.forEach((dependentId) => this.disable(dependentId));
        const module = this.modules.get(moduleId);
        if (!module)
            return;
        module.onDisable();
        this.enabledModules.delete(moduleId);
    }
    disableAll() {
        [...this.enabledModules].forEach((moduleId) => this.disable(moduleId));
    }
    resolveDependencies(moduleId) {
        const sorted = [];
        const visiting = new Set();
        const visited = new Set();
        const visit = (id) => {
            if (visited.has(id))
                return;
            if (visiting.has(id)) {
                throw new Error(`Circular module dependency detected for module: ${id}`);
            }
            visiting.add(id);
            const module = this.modules.get(id);
            if (!module) {
                throw new Error(`Missing dependency module: ${id}`);
            }
            module.dependencies.forEach((dependencyId) => visit(dependencyId));
            visiting.delete(id);
            visited.add(id);
            sorted.push(id);
        };
        visit(moduleId);
        return sorted;
    }
    findDependents(moduleId) {
        const dependents = [];
        this.modules.forEach((module) => {
            if (!this.enabledModules.has(module.id))
                return;
            if (module.dependencies.includes(moduleId)) {
                dependents.push(module.id);
            }
        });
        return dependents;
    }
}

class SisyphusKernel {
    constructor(context) {
        var _a;
        this.context = context;
        this.events = new EventBus();
        this.modules = new ModuleManager();
        this.config = context.config;
        this.state = context.state;
        this.stateManager = new StateManager(this.state);
        this.services = Object.assign({}, ((_a = context.services) !== null && _a !== void 0 ? _a : {}));
    }
    setService(name, service) {
        this.services[name] = service;
    }
    getService(name) {
        var _a;
        return (_a = this.services[name]) !== null && _a !== void 0 ? _a : null;
    }
    registerModule(module) {
        module.onLoad(this);
        this.modules.register(module);
    }
    enableConfiguredModules() {
        this.config.enabledModules.forEach((moduleId) => {
            try {
                this.modules.enable(moduleId);
            }
            catch (error) {
                console.error(`[SisyphusKernel] Could not enable module '${moduleId}'.`, error);
            }
        });
    }
    persist() {
        return __awaiter(this, void 0, void 0, function* () {
            yield this.context.save(this.config, this.state);
        });
    }
    shutdown() {
        this.modules.disableAll();
        this.modules.getAll().forEach((module) => module.onUnload());
        this.events.clear();
    }
    isModuleEnabled(moduleId) {
        return this.modules.isEnabled(moduleId);
    }
}

class AchievementEngine {
    /** Initialize achievements if not present */
    static init(settings) {
        if (!settings.achievements || settings.achievements.length === 0) {
            settings.achievements = ACHIEVEMENT_DEFINITIONS.map(def => (Object.assign(Object.assign({}, def), { unlocked: false })));
        }
        // Add any new definitions not yet in settings
        const existingIds = new Set(settings.achievements.map(a => a.id));
        ACHIEVEMENT_DEFINITIONS.forEach(def => {
            if (!existingIds.has(def.id)) {
                settings.achievements.push(Object.assign(Object.assign({}, def), { unlocked: false }));
            }
        });
    }
    /** Check all achievements, unlock any newly met */
    static checkAll(settings) {
        const newlyUnlocked = [];
        settings.achievements.forEach(ach => {
            if (ach.unlocked)
                return;
            if (this.evaluate(ach.id, settings)) {
                ach.unlocked = true;
                ach.unlockedAt = new Date().toISOString();
                newlyUnlocked.push(ach);
            }
        });
        // Show celebrations for newly unlocked
        newlyUnlocked.forEach(ach => {
            const rarityColors = {
                common: 'var(--sisy-green)',
                rare: 'var(--sisy-blue)',
                epic: 'var(--sisy-purple)',
                legendary: 'var(--sisy-gold)',
            };
            const rarityIcons = {
                common: 'ðŸ…',
                rare: 'ðŸ’Ž',
                epic: 'ðŸ‘‘',
                legendary: 'â­',
            };
            showToast({
                icon: rarityIcons[ach.rarity] || 'ðŸ†',
                title: `Achievement Unlocked!`,
                message: `${ach.name} â€” ${ach.description}`,
                variant: ach.rarity === 'legendary' ? 'level' : ach.rarity === 'epic' ? 'xp' : 'success',
                duration: ach.rarity === 'legendary' ? 8000 : 5000,
            });
            floatReward(`ðŸ† ${ach.name}`, 'xp');
            // Full-screen overlay for epic+ achievements
            if (ach.rarity === 'epic' || ach.rarity === 'legendary') {
                AchievementEngine.showUnlockOverlay(ach, rarityColors[ach.rarity]);
            }
        });
        return newlyUnlocked;
    }
    /** Evaluate a single achievement condition */
    static evaluate(id, s) {
        var _a, _b, _c;
        const totalQuests = s.dayMetrics.reduce((sum, d) => sum + d.questsCompleted, 0);
        const totalResearches = s.researchQuests.filter(r => r.completed).length;
        const bossesDefeated = (s.bossMilestones || []).filter(b => b.defeated).length;
        const maxSkillLevel = s.skills.length > 0 ? Math.max(...s.skills.map(sk => sk.level)) : 0;
        const chainsDone = (s.chainHistory || []).length;
        switch (id) {
            // Common
            case 'first_blood': return totalQuests >= 1;
            case 'week_warrior': return (((_a = s.streak) === null || _a === void 0 ? void 0 : _a.current) || 0) >= 7;
            case 'warm_up': return totalQuests >= 10;
            case 'night_owl': return this.hasNightOwl(s);
            case 'early_bird': return this.hasEarlyBird(s);
            case 'triple_threat': return s.questsCompletedToday >= 3;
            // Rare
            case 'skill_adept': return maxSkillLevel >= 5;
            case 'chain_gang': return chainsDone >= 1;
            case 'researcher': return totalResearches >= 5;
            case 'rich': return s.gold >= 500;
            case 'combo_king': return s.comboCount >= 5;
            case 'speed_demon': return this.hasSpeedDemon(s);
            case 'perfectionist': return this.hasPerfectWeek(s);
            case 'iron_streak': return (((_b = s.streak) === null || _b === void 0 ? void 0 : _b.current) || 0) >= 14;
            // Epic
            case 'boss_slayer': return bossesDefeated >= 1;
            case 'skill_master': return maxSkillLevel >= 10;
            case 'century': return totalQuests >= 100;
            case 'phoenix': return s.legacy.deathCount >= 1 && s.level >= 10;
            case 'research_professor': return totalResearches >= 20;
            case 'gold_hoarder': return s.gold >= 2000;
            // Legendary
            case 'ascended': return s.level >= 50;
            case 'immortal': return s.level >= 20 && s.legacy.deathCount === 0;
            case 'completionist': return s.achievements.filter(a => a.unlocked && a.rarity !== 'legendary').length >= (s.achievements.length - 3);
            case 'marathon': return (((_c = s.streak) === null || _c === void 0 ? void 0 : _c.current) || 0) >= 30;
            case 'grand_master': return s.skills.filter(sk => sk.level >= 10).length >= 5;
            default: return false;
        }
    }
    static hasNightOwl(s) {
        return s.dayMetrics.some(d => d.hourlyCompletions && (d.hourlyCompletions[22] > 0 || d.hourlyCompletions[23] > 0 || d.hourlyCompletions[0] > 0));
    }
    static hasEarlyBird(s) {
        return s.dayMetrics.some(d => d.hourlyCompletions && (d.hourlyCompletions[5] > 0 || d.hourlyCompletions[6] > 0));
    }
    static hasSpeedDemon(s) {
        // Completed 5+ quests in one day
        return s.dayMetrics.some(d => d.questsCompleted >= 5);
    }
    static hasPerfectWeek(s) {
        // 7 consecutive days with at least 1 quest, 0 failures
        const sorted = [...s.dayMetrics].sort((a, b) => a.date.localeCompare(b.date));
        for (let i = 0; i <= sorted.length - 7; i++) {
            const slice = sorted.slice(i, i + 7);
            if (slice.every(d => d.questsCompleted > 0 && d.questsFailed === 0))
                return true;
        }
        return false;
    }
    /** Full-screen achievement unlock overlay */
    static showUnlockOverlay(ach, color) {
        const overlay = document.createElement('div');
        overlay.className = 'sisy-achievement-overlay';
        overlay.style.setProperty('--ach-color', color);
        overlay.innerHTML = `
            <div class="sisy-achievement-overlay-content">
                <div class="sisy-achievement-rarity">${ach.rarity.toUpperCase()}</div>
                <div class="sisy-achievement-icon">ðŸ†</div>
                <div class="sisy-achievement-name">${ach.name}</div>
                <div class="sisy-achievement-desc">${ach.description}</div>
            </div>
        `;
        document.body.appendChild(overlay);
        setTimeout(() => {
            overlay.classList.add('sisy-achievement-overlay-exit');
            setTimeout(() => overlay.remove(), 500);
        }, 3000);
    }
}

/**
 * Character Sheet / Profile Modal â€” Full stats overview.
 */
class ProfileModal extends obsidian.Modal {
    constructor(app, plugin) {
        super(app);
        this.plugin = plugin;
    }
    onOpen() {
        var _a, _b;
        const { contentEl } = this;
        const s = this.plugin.settings;
        contentEl.addClass('sisy-profile');
        // --- HEADER ---
        const hero = contentEl.createDiv({ cls: 'sisy-profile-hero' });
        const topSkill = s.skills.length > 0 ? [...s.skills].sort((a, b) => b.level - a.level)[0] : null;
        const classTitle = topSkill ? this.deriveClass(topSkill.name, topSkill.level) : 'Untrained';
        const achievementCount = ((_a = s.achievements) === null || _a === void 0 ? void 0 : _a.filter(a => a.unlocked).length) || 0;
        const titleFromAch = this.deriveTitle(achievementCount, s.level);
        hero.createDiv({ text: `âš”ï¸`, cls: 'sisy-profile-avatar' });
        hero.createEl('h2', { text: titleFromAch, cls: 'sisy-profile-title' });
        hero.createDiv({ text: `Class: ${classTitle}`, cls: 'sisy-profile-class' });
        hero.createDiv({ text: `Level ${s.level} Â· Run #${s.runCount + 1} Â· ${s.legacy.deathCount} Deaths`, cls: 'sisy-profile-subtitle' });
        // --- STAT GRID ---
        const stats = contentEl.createDiv({ cls: 'sisy-profile-stats' });
        this.statBox(stats, 'â¤ï¸', 'HP', `${s.hp}/${s.maxHp}`);
        this.statBox(stats, 'âš¡', 'XP', `${s.xp}/${s.xpReq}`);
        this.statBox(stats, 'ðŸ’°', 'Gold', String(s.gold));
        this.statBox(stats, 'ðŸ”¥', 'Streak', String(((_b = s.streak) === null || _b === void 0 ? void 0 : _b.current) || 0));
        this.statBox(stats, 'âš”ï¸', 'Combo', `x${s.comboCount}`);
        this.statBox(stats, 'ðŸ†', 'Trophies', `${achievementCount}`);
        this.statBox(stats, 'ðŸ’€', 'Deaths', String(s.legacy.deathCount));
        this.statBox(stats, 'ðŸ“Š', 'Total Quests', String(s.dayMetrics.reduce((sum, d) => sum + d.questsCompleted, 0)));
        // --- ACTIVE BUFFS ---
        if (s.activeBuffs.length > 0) {
            contentEl.createEl('h3', { text: 'âš¡ ACTIVE EFFECTS' });
            const buffs = contentEl.createDiv({ cls: 'sisy-profile-buffs' });
            s.activeBuffs.forEach(b => {
                const remaining = obsidian.moment(b.expiresAt).diff(obsidian.moment(), 'minutes');
                if (remaining > 0) {
                    const chip = buffs.createDiv({ cls: 'sisy-profile-buff-chip' });
                    chip.textContent = `${b.icon} ${b.name} (${remaining}m)`;
                }
            });
        }
        // --- SKILL RADAR ---
        if (s.skills.length >= 3) {
            contentEl.createEl('h3', { text: 'ðŸ§  SKILL PROFILE' });
            const radarContainer = contentEl.createDiv({ cls: 'sisy-profile-radar' });
            const sorted = [...s.skills].sort((a, b) => b.level - a.level);
            ChartRenderer.renderRadar(radarContainer, sorted);
        }
        // --- ACHIEVEMENT SHOWCASE ---
        const unlocked = (s.achievements || []).filter(a => a.unlocked);
        if (unlocked.length > 0) {
            contentEl.createEl('h3', { text: 'ðŸ† ACHIEVEMENTS' });
            const achGrid = contentEl.createDiv({ cls: 'sisy-profile-achievements' });
            const sorted = [...unlocked].sort((a, b) => {
                var _a, _b;
                const order = { legendary: 0, epic: 1, rare: 2, common: 3 };
                return ((_a = order[a.rarity]) !== null && _a !== void 0 ? _a : 4) - ((_b = order[b.rarity]) !== null && _b !== void 0 ? _b : 4);
            });
            sorted.slice(0, 12).forEach(ach => {
                const card = achGrid.createDiv({ cls: `sisy-achievement-card sisy-ach-${ach.rarity}` });
                const rarityIcons = { common: 'ðŸ…', rare: 'ðŸ’Ž', epic: 'ðŸ‘‘', legendary: 'â­' };
                card.createDiv({ text: rarityIcons[ach.rarity] || 'ðŸ†', cls: 'sisy-ach-icon' });
                card.createDiv({ text: ach.name, cls: 'sisy-ach-name' });
                card.createDiv({ text: ach.description, cls: 'sisy-ach-desc' });
            });
        }
        // --- RUN HISTORY ---
        if (s.scars && s.scars.length > 0) {
            contentEl.createEl('h3', { text: 'ðŸ§¬ SCARS & HISTORY' });
            const scarList = contentEl.createDiv({ cls: 'sisy-profile-scars' });
            s.scars.slice(-5).reverse().forEach(scar => {
                const row = scarList.createDiv({ cls: 'sisy-profile-scar-row' });
                row.createSpan({ text: `${scar.label}: ${scar.value}` });
                row.createSpan({ text: obsidian.moment(scar.earnedAt).fromNow(), cls: 'sisy-text-muted' });
            });
        }
        // --- LEGACY ---
        contentEl.createEl('h3', { text: 'ðŸ‘» LEGACY' });
        const legacy = contentEl.createDiv({ cls: 'sisy-profile-stats' });
        this.statBox(legacy, 'ðŸ‘»', 'Souls', String(s.legacy.souls));
        this.statBox(legacy, 'ðŸ’°', 'Start Gold', `+${s.legacy.perks.startGold}`);
        this.statBox(legacy, 'ðŸ§¬', 'Relics', String(s.legacy.relics.length));
        // --- CLOSE ---
        const close = contentEl.createDiv({ cls: 'sisy-pomodoro-controls' });
        close.createEl('button', { text: 'DISMISS', cls: 'sisy-btn mod-cta' }).onclick = () => this.close();
    }
    statBox(parent, icon, label, value) {
        const box = parent.createDiv({ cls: 'sisy-profile-stat-box' });
        box.createDiv({ text: icon, cls: 'sisy-profile-stat-icon' });
        box.createDiv({ text: value, cls: 'sisy-profile-stat-val' });
        box.createDiv({ text: label, cls: 'sisy-profile-stat-label' });
    }
    deriveClass(skillName, level) {
        const tier = level >= 10 ? 'Master' : level >= 5 ? 'Adept' : 'Apprentice';
        return `${tier} ${skillName}`;
    }
    deriveTitle(achievementCount, level) {
        if (level >= 50)
            return 'âœ¨ Sisyphus, Transcended';
        if (level >= 30)
            return 'ðŸŒŸ Champion of the Summit';
        if (level >= 20)
            return 'âš¡ Veteran of the Boulder';
        if (level >= 10)
            return 'ðŸ”¥ Warrior of the Climb';
        if (achievementCount >= 5)
            return 'ðŸ›¡ï¸ Proven Seeker';
        return 'ðŸ—¡ï¸ Initiate';
    }
    onClose() { this.contentEl.empty(); }
}

class GameModule {
    constructor() {
        this.dependencies = [];
        this.kernel = null;
    }
    onLoad(kernel) {
        this.kernel = kernel;
    }
    onUnload() {
        this.kernel = null;
    }
    renderSettings(_container) {
        // Optional override for module-specific settings
    }
}

class ProgressionModule extends GameModule {
    constructor() {
        super(...arguments);
        this.id = 'progression';
        this.name = 'Progression';
        this.description = 'XP, leveling, and skill growth from completed quests.';
        this.unsubscribeQuestCompleted = null;
        this.unsubscribeRewardGranted = null;
    }
    onEnable() {
        if (!this.kernel)
            return;
        this.unsubscribeQuestCompleted = this.kernel.events.on('quest:completed', (payload) => {
            var _a, _b, _c;
            const settings = this.kernel.state;
            const engine = this.kernel.getService('engine');
            let xp = payload.xpReward;
            const skill = settings.skills.find((entry) => entry.name === payload.skillName);
            if (skill) {
                skill.rust = 0;
                skill.xpReq = Math.max(1, Math.floor(skill.xpReq / 1.1));
                skill.lastUsed = new Date().toISOString();
                skill.xp += 1;
                if (skill.xp >= skill.xpReq) {
                    skill.level++;
                    skill.xp = 0;
                    new obsidian.Notice(`ðŸ§  ${skill.name} Leveled Up!`);
                }
            }
            if (payload.secondarySkill && payload.secondarySkill !== 'None') {
                const secondarySkill = settings.skills.find((entry) => entry.name === payload.secondarySkill);
                if (secondarySkill && skill) {
                    if (!skill.connections)
                        skill.connections = [];
                    if (!skill.connections.includes(payload.secondarySkill)) {
                        skill.connections.push(payload.secondarySkill);
                        new obsidian.Notice('ðŸ”— Neural Link Established');
                    }
                    xp += Math.floor(secondarySkill.level * 0.5);
                    secondarySkill.xp += 1;
                }
            }
            settings.xp += xp;
            if (settings.xp >= settings.xpReq) {
                settings.level++;
                settings.xp = 0;
                settings.xpReq = Math.floor(settings.xpReq * 1.1);
                settings.maxHp = 100 + (settings.level * 5);
                settings.hp = settings.maxHp;
                if (engine === null || engine === void 0 ? void 0 : engine.taunt)
                    engine.taunt('level_up');
                const messages = (_c = (_b = (_a = engine === null || engine === void 0 ? void 0 : engine.analyticsEngine) === null || _a === void 0 ? void 0 : _a.checkBossMilestones) === null || _b === void 0 ? void 0 : _b.call(_a)) !== null && _c !== void 0 ? _c : [];
                messages.forEach((message) => new obsidian.Notice(message));
                if ([10, 20, 30, 50].includes(settings.level) && (engine === null || engine === void 0 ? void 0 : engine.spawnBoss)) {
                    void engine.spawnBoss(settings.level);
                }
            }
        });
        this.unsubscribeRewardGranted = this.kernel.events.on('reward:granted', (payload) => {
            this.kernel.state.xp += payload.xp;
        });
    }
    onDisable() {
        if (this.unsubscribeQuestCompleted) {
            this.unsubscribeQuestCompleted();
            this.unsubscribeQuestCompleted = null;
        }
        if (this.unsubscribeRewardGranted) {
            this.unsubscribeRewardGranted();
            this.unsubscribeRewardGranted = null;
        }
    }
}

class EconomyModule extends GameModule {
    constructor() {
        super(...arguments);
        this.id = 'economy';
        this.name = 'Economy';
        this.description = 'Applies gold rewards from quest completions.';
        this.unsubscribeQuestCompleted = null;
        this.unsubscribeRewardGranted = null;
    }
    onEnable() {
        if (!this.kernel)
            return;
        this.unsubscribeQuestCompleted = this.kernel.events.on('quest:completed', (payload) => {
            this.kernel.state.gold += payload.goldReward;
        });
        this.unsubscribeRewardGranted = this.kernel.events.on('reward:granted', (payload) => {
            this.kernel.state.gold += payload.gold;
        });
    }
    onDisable() {
        if (this.unsubscribeQuestCompleted) {
            this.unsubscribeQuestCompleted();
            this.unsubscribeQuestCompleted = null;
        }
        if (this.unsubscribeRewardGranted) {
            this.unsubscribeRewardGranted();
            this.unsubscribeRewardGranted = null;
        }
    }
}

class SurvivalModule extends GameModule {
    constructor() {
        super(...arguments);
        this.id = 'survival';
        this.name = 'Survival';
        this.description = 'HP damage, lockdown, and death handling for failed quests.';
        this.unsubscribeQuestFailed = null;
        this.unsubscribeQuestCompleted = null;
    }
    onEnable() {
        if (!this.kernel)
            return;
        this.unsubscribeQuestFailed = this.kernel.events.on('quest:failed', (payload) => {
            var _a;
            const settings = this.kernel.state;
            const engine = this.kernel.getService('engine');
            const app = this.kernel.getService('app');
            const plugin = this.kernel.getService('plugin');
            const audio = this.kernel.getService('audio');
            settings.hp -= payload.damage;
            settings.damageTakenToday += payload.damage;
            if (!payload.manualAbort)
                settings.rivalDmg += 1;
            if (audio === null || audio === void 0 ? void 0 : audio.playSound)
                audio.playSound('fail');
            if (engine === null || engine === void 0 ? void 0 : engine.checkDailyMissions)
                engine.checkDailyMissions({ type: 'damage' });
            if (settings.damageTakenToday > 50) {
                if ((_a = engine === null || engine === void 0 ? void 0 : engine.meditationEngine) === null || _a === void 0 ? void 0 : _a.triggerLockdown)
                    engine.meditationEngine.triggerLockdown();
                if (engine === null || engine === void 0 ? void 0 : engine.trigger)
                    engine.trigger('lockdown');
            }
            if (settings.hp <= 0) {
                if (app && plugin)
                    new DeathModal(app, plugin).open();
                return;
            }
            if (payload.bossHpPenalty > 0) {
                new obsidian.Notice(`â˜ ï¸ Boss Crush: +${payload.bossHpPenalty} Damage`);
            }
        });
        this.unsubscribeQuestCompleted = this.kernel.events.on('quest:completed', () => {
            var _a;
            const settings = this.kernel.state;
            const engine = this.kernel.getService('engine');
            const app = this.kernel.getService('app');
            const plugin = this.kernel.getService('plugin');
            if (settings.dailyModifier.name !== 'Adrenaline')
                return;
            settings.hp -= 5;
            settings.damageTakenToday += 5;
            if (settings.damageTakenToday > 50) {
                if ((_a = engine === null || engine === void 0 ? void 0 : engine.meditationEngine) === null || _a === void 0 ? void 0 : _a.triggerLockdown)
                    engine.meditationEngine.triggerLockdown();
                if (engine === null || engine === void 0 ? void 0 : engine.trigger)
                    engine.trigger('lockdown');
                new obsidian.Notice('Overexertion! LOCKDOWN INITIATED.');
            }
            if (settings.hp <= 0) {
                if (app && plugin)
                    new DeathModal(app, plugin).open();
            }
        });
    }
    onDisable() {
        if (this.unsubscribeQuestFailed) {
            this.unsubscribeQuestFailed();
            this.unsubscribeQuestFailed = null;
        }
        if (this.unsubscribeQuestCompleted) {
            this.unsubscribeQuestCompleted();
            this.unsubscribeQuestCompleted = null;
        }
    }
}

class CombatModule extends GameModule {
    constructor() {
        super(...arguments);
        this.id = 'combat';
        this.name = 'Combat';
        this.description = 'Boss defeat processing and victory checks.';
        this.unsubscribeQuestCompleted = null;
    }
    onEnable() {
        if (!this.kernel)
            return;
        this.unsubscribeQuestCompleted = this.kernel.events.on('quest:completed', (payload) => {
            var _a, _b;
            if (!payload.isBoss || payload.bossLevel === null)
                return;
            const engine = this.kernel.getService('engine');
            const app = this.kernel.getService('app');
            const plugin = this.kernel.getService('plugin');
            if (!app || !plugin)
                return;
            const result = (_b = (_a = engine === null || engine === void 0 ? void 0 : engine.analyticsEngine) === null || _a === void 0 ? void 0 : _a.defeatBoss) === null || _b === void 0 ? void 0 : _b.call(_a, payload.bossLevel);
            if (result === null || result === void 0 ? void 0 : result.message) {
                new obsidian.Notice(result.message);
            }
            if (this.kernel.state.gameWon) {
                new VictoryModal(app, plugin).open();
            }
        });
    }
    onDisable() {
        if (this.unsubscribeQuestCompleted) {
            this.unsubscribeQuestCompleted();
            this.unsubscribeQuestCompleted = null;
        }
    }
}

class ProductivityModule extends GameModule {
    constructor() {
        super(...arguments);
        this.id = 'productivity';
        this.name = 'Productivity';
        this.description = 'Quest completion counters, streaks, and mission progression.';
        this.unsubscribeQuestCompleted = null;
    }
    onEnable() {
        if (!this.kernel)
            return;
        this.unsubscribeQuestCompleted = this.kernel.events.on('quest:completed', (payload) => {
            var _a, _b, _c;
            const settings = this.kernel.state;
            const engine = this.kernel.getService('engine');
            settings.questsCompletedToday += 1;
            (_b = (_a = engine === null || engine === void 0 ? void 0 : engine.analyticsEngine) === null || _a === void 0 ? void 0 : _a.updateStreak) === null || _b === void 0 ? void 0 : _b.call(_a);
            (_c = engine === null || engine === void 0 ? void 0 : engine.checkDailyMissions) === null || _c === void 0 ? void 0 : _c.call(engine, {
                type: 'complete',
                difficulty: payload.difficulty,
                skill: payload.skillName,
                secondarySkill: payload.secondarySkill,
                highStakes: payload.highStakes
            });
        });
    }
    onDisable() {
        if (this.unsubscribeQuestCompleted) {
            this.unsubscribeQuestCompleted();
            this.unsubscribeQuestCompleted = null;
        }
    }
}

class AnalyticsModule extends GameModule {
    constructor() {
        super(...arguments);
        this.id = 'analytics';
        this.name = 'Analytics';
        this.description = 'Tracks gameplay telemetry from domain events.';
        this.unsubscribeQuestCompleted = null;
        this.unsubscribeQuestFailed = null;
    }
    onEnable() {
        if (!this.kernel)
            return;
        this.unsubscribeQuestCompleted = this.kernel.events.on('quest:completed', () => {
            var _a, _b;
            const settings = this.kernel.state;
            const engine = this.kernel.getService('engine');
            (_b = (_a = engine === null || engine === void 0 ? void 0 : engine.analyticsEngine) === null || _a === void 0 ? void 0 : _a.trackDailyMetrics) === null || _b === void 0 ? void 0 : _b.call(_a, 'quest_complete', 1);
            settings.researchStats.totalCombat += 1;
        });
        this.unsubscribeQuestFailed = this.kernel.events.on('quest:failed', () => {
            var _a, _b;
            const engine = this.kernel.getService('engine');
            (_b = (_a = engine === null || engine === void 0 ? void 0 : engine.analyticsEngine) === null || _a === void 0 ? void 0 : _a.trackDailyMetrics) === null || _b === void 0 ? void 0 : _b.call(_a, 'quest_fail', 1);
        });
    }
    onDisable() {
        if (this.unsubscribeQuestCompleted) {
            this.unsubscribeQuestCompleted();
            this.unsubscribeQuestCompleted = null;
        }
        if (this.unsubscribeQuestFailed) {
            this.unsubscribeQuestFailed();
            this.unsubscribeQuestFailed = null;
        }
    }
}

class RecoveryModule extends GameModule {
    constructor() {
        super(...arguments);
        this.id = 'recovery';
        this.name = 'Recovery';
        this.description = 'Handles timed recovery effects such as buff expiration.';
        this.unsubscribeClockTick = null;
    }
    onEnable() {
        if (!this.kernel)
            return;
        this.unsubscribeClockTick = this.kernel.events.on('clock:tick', () => {
            var _a;
            const settings = this.kernel.state;
            const engine = this.kernel.getService('engine');
            const now = obsidian.moment();
            const initialCount = settings.activeBuffs.length;
            settings.activeBuffs = settings.activeBuffs.filter((buff) => obsidian.moment(buff.expiresAt).isAfter(now));
            if (settings.activeBuffs.length < initialCount) {
                new obsidian.Notice('A potion effect has worn off.');
                (_a = engine === null || engine === void 0 ? void 0 : engine.trigger) === null || _a === void 0 ? void 0 : _a.call(engine, 'update');
            }
        });
    }
    onDisable() {
        if (this.unsubscribeClockTick) {
            this.unsubscribeClockTick();
            this.unsubscribeClockTick = null;
        }
    }
}

class DailyLifecycleModule extends GameModule {
    constructor() {
        super(...arguments);
        this.id = 'daily_lifecycle';
        this.name = 'Daily Lifecycle';
        this.description = 'Handles daily login reset, rot damage, and daily chaos roll.';
        this.unsubscribeSessionStart = null;
    }
    onEnable() {
        if (!this.kernel)
            return;
        this.unsubscribeSessionStart = this.kernel.events.on('session:start', () => __awaiter(this, void 0, void 0, function* () {
            var _a, _b, _c, _d, _e;
            const settings = this.kernel.state;
            const app = this.kernel.getService('app');
            const plugin = this.kernel.getService('plugin');
            const engine = this.kernel.getService('engine');
            if (!app || !plugin)
                return;
            const today = obsidian.moment().format('YYYY-MM-DD');
            if (settings.lastLogin) {
                const daysDiff = obsidian.moment().diff(obsidian.moment(settings.lastLogin), 'days');
                if (daysDiff > 2) {
                    const rotDamage = (daysDiff - 1) * 10;
                    if (rotDamage > 0) {
                        settings.hp -= rotDamage;
                        settings.history.push({ date: today, status: 'rot', xpEarned: -rotDamage });
                    }
                    if (settings.hp <= 0) {
                        new DeathModal(app, plugin).open();
                        yield ((_a = engine === null || engine === void 0 ? void 0 : engine.save) === null || _a === void 0 ? void 0 : _a.call(engine));
                        return;
                    }
                }
            }
            if (settings.lastLogin !== today) {
                settings.maxHp = 100 + (settings.level * 5);
                settings.hp = Math.min(settings.maxHp, settings.hp + 20);
                settings.damageTakenToday = 0;
                settings.lockdownUntil = '';
                settings.lastLogin = today;
                const todayMoment = obsidian.moment();
                settings.skills.forEach((skill) => {
                    var _a;
                    if (skill.lastUsed && todayMoment.diff(obsidian.moment(skill.lastUsed), 'days') > 3 && !((_a = engine === null || engine === void 0 ? void 0 : engine.isResting) === null || _a === void 0 ? void 0 : _a.call(engine))) {
                        skill.rust = Math.min(10, (skill.rust || 0) + 1);
                        skill.xpReq = Math.floor(skill.xpReq * 1.1);
                    }
                });
                if (settings.dailyMissionDate !== today) {
                    (_b = engine === null || engine === void 0 ? void 0 : engine.rollDailyMissions) === null || _b === void 0 ? void 0 : _b.call(engine);
                }
                yield ((_c = engine === null || engine === void 0 ? void 0 : engine.rollChaos) === null || _c === void 0 ? void 0 : _c.call(engine, true));
                yield ((_d = engine === null || engine === void 0 ? void 0 : engine.save) === null || _d === void 0 ? void 0 : _d.call(engine));
                return;
            }
            yield ((_e = engine === null || engine === void 0 ? void 0 : engine.save) === null || _e === void 0 ? void 0 : _e.call(engine));
        }));
    }
    onDisable() {
        if (this.unsubscribeSessionStart) {
            this.unsubscribeSessionStart();
            this.unsubscribeSessionStart = null;
        }
    }
}

/**
 * Pomodoro Focus Timer â€” Integrated timer with work/break cycles.
 * Replaces the basic brown noise toggle with a full Pomodoro system.
 */
const DEFAULT_WORK_DURATION = 25 * 60; // 25 minutes
const DEFAULT_BREAK_DURATION = 5 * 60; // 5 minutes
class PomodoroTimer {
    constructor(audio) {
        this.intervalId = null;
        this.audio = audio;
        this.events = new TinyEmitter();
        this.state = {
            phase: 'idle',
            remaining: DEFAULT_WORK_DURATION,
            totalWork: DEFAULT_WORK_DURATION,
            totalBreak: DEFAULT_BREAK_DURATION,
            cyclesCompleted: 0,
        };
    }
    start() {
        if (this.state.phase === 'idle') {
            this.state.phase = 'work';
            this.state.remaining = this.state.totalWork;
        }
        if (this.intervalId)
            return;
        this.intervalId = window.setInterval(() => this.tick(), 1000);
        this.audio.toggleBrownNoise(); // Start focus audio
        this.events.trigger('update', this.state);
    }
    pause() {
        if (this.intervalId) {
            clearInterval(this.intervalId);
            this.intervalId = null;
        }
        this.events.trigger('update', this.state);
    }
    reset() {
        this.pause();
        if (this.audio) {
            // Stop brown noise if playing
            try {
                this.audio.toggleBrownNoise();
            }
            catch (_) { }
        }
        this.state.phase = 'idle';
        this.state.remaining = this.state.totalWork;
        this.events.trigger('update', this.state);
    }
    skip() {
        this.transitionPhase();
    }
    isRunning() {
        return this.intervalId !== null;
    }
    tick() {
        this.state.remaining--;
        if (this.state.remaining <= 0) {
            this.transitionPhase();
        }
        this.events.trigger('update', this.state);
    }
    transitionPhase() {
        if (this.state.phase === 'work') {
            this.state.cyclesCompleted++;
            this.state.phase = 'break';
            this.state.remaining = this.state.totalBreak;
            this.audio.playSound('success');
            showToast({
                icon: 'â˜•',
                title: `Focus cycle ${this.state.cyclesCompleted} complete!`,
                message: 'Time for a break.',
                variant: 'success',
                duration: 5000,
            });
            floatReward(`+1 ðŸ…`, 'xp');
        }
        else {
            this.state.phase = 'work';
            this.state.remaining = this.state.totalWork;
            this.audio.playSound('click');
            showToast({
                icon: 'âš¡',
                title: 'Break over!',
                message: 'Back to work.',
                variant: 'xp',
                duration: 3000,
            });
        }
        this.events.trigger('phase', this.state);
    }
    formatTime() {
        const m = Math.floor(this.state.remaining / 60);
        const s = this.state.remaining % 60;
        return `${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;
    }
    destroy() {
        this.pause();
    }
}

const DEFAULT_SETTINGS = {
    // [NEW] Default Templates
    questTemplates: [
        { name: "Morning Routine", diff: 1, skill: "Discipline", deadline: "10:00" },
        { name: "Deep Work Block", diff: 3, skill: "Focus", deadline: "+2h" },
        { name: "Quick Exercise", diff: 2, skill: "Health", deadline: "+12h" }
    ], // Comma here, NO closing brace yet!
    // [NEW] Defaults
    comboCount: 0,
    lastCompletionTime: 0,
    // [NEW]
    activeBuffs: [],
    hp: 100, maxHp: 100, xp: 0, gold: 0, xpReq: 100, level: 1, rivalDmg: 10,
    lastLogin: "", shieldedUntil: "", restDayUntil: "", skills: [],
    dailyModifier: DEFAULT_MODIFIER,
    legacy: { souls: 0, perks: { startGold: 0, startSkillPoints: 0, rivalDelay: 0 }, relics: [], deathCount: 0 },
    muted: false, history: [], runCount: 1, lockdownUntil: "", damageTakenToday: 0,
    dailyMissions: [],
    dailyMissionDate: "",
    questsCompletedToday: 0,
    skillUsesToday: {},
    researchQuests: [],
    researchStats: { totalResearch: 0, totalCombat: 0, researchCompleted: 0, combatCompleted: 0 },
    lastResearchQuestId: 0,
    meditationCyclesCompleted: 0,
    questDeletionsToday: 0,
    lastDeletionReset: "",
    isMeditating: false,
    meditationClicksThisLockdown: 0,
    activeChains: [],
    chainHistory: [],
    currentChainId: "",
    chainQuestsCompleted: 0,
    questFilters: {},
    filterState: { activeEnergy: "any", activeContext: "any", activeTags: [] },
    dayMetrics: [],
    weeklyReports: [],
    bossMilestones: [],
    streak: { current: 0, longest: 0, lastDate: "" },
    achievements: [],
    gameWon: false,
    scars: [],
    neuralHubPath: "Active_Run/Neural_Hub.canvas",
    rival: { name: '', avatar: '', personality: 'aggressive', level: 1, xp: 0, xpReq: 100, damageDealt: 0, lastTaunt: '', lastTauntTime: '' },
};
class SisyphusPlugin extends obsidian.Plugin {
    onload() {
        return __awaiter(this, void 0, void 0, function* () {
            // --- EVENT LISTENER: FILE RENAME ---
            this.registerEvent(this.app.vault.on('rename', (file, oldPath) => {
                if (!this.engine)
                    return;
                if (file instanceof obsidian.TFile && file.extension === 'md') {
                    const newName = file.basename;
                    // Extract old basename from the old path
                    // oldPath looks like "Active_Run/Quests/OldName.md"
                    const pathParts = oldPath.split('/');
                    const oldFileName = pathParts[pathParts.length - 1];
                    const oldName = oldFileName.replace(/\.md$/, ''); // Remove extension
                    if (oldName !== newName) {
                        // Propagate rename to engines
                        this.engine.chainsEngine.handleRename(oldName, newName);
                        this.engine.filtersEngine.handleRename(oldName, newName);
                        // Force save to persist changes
                        this.engine.save();
                    }
                }
            }));
            yield this.loadSettings();
            this.loadStyles();
            this.audio = new AudioController(this.config.muteAudio);
            this.pomodoro = new PomodoroTimer(this.audio);
            this.engine = new SisyphusEngine(this.app, this, this.audio);
            this.kernel = new SisyphusKernel({
                config: this.config,
                state: this.settings,
                save: (config, state) => __awaiter(this, void 0, void 0, function* () {
                    yield this.saveData({ config, state });
                }),
                services: {
                    app: this.app,
                    engine: this.engine,
                    audio: this.audio,
                    plugin: this
                }
            });
            this.kernel.registerModule(new SurvivalModule());
            this.kernel.registerModule(new ProgressionModule());
            this.kernel.registerModule(new EconomyModule());
            this.kernel.registerModule(new CombatModule());
            this.kernel.registerModule(new ProductivityModule());
            this.kernel.registerModule(new AnalyticsModule());
            this.kernel.registerModule(new RecoveryModule());
            this.kernel.registerModule(new DailyLifecycleModule());
            this.kernel.enableConfiguredModules();
            this.registerView(VIEW_TYPE_PANOPTICON, (leaf) => new PanopticonView(leaf, this));
            this.statusBarItem = this.addStatusBarItem();
            window.sisyphusEngine = this.engine;
            yield this.engine.checkDailyLogin();
            this.updateStatusBar();
            // --- REWARD VISUAL EFFECTS via KERNEL EVENTS ---
            this.kernel.events.on('reward:granted', (data) => {
                if (data.xp > 0)
                    floatReward(`+${data.xp} XP`, 'xp');
                if (data.gold > 0)
                    floatReward(`+${data.gold} G`, 'gold');
            });
            this.kernel.events.on('quest:completed', (data) => {
                var _a;
                showToast({ icon: 'âš”ï¸', title: 'Quest Complete!', message: `${data.questId} â€” +${data.xpReward}XP, +${data.goldReward}G`, variant: 'success' });
                // Achievement check
                AchievementEngine.checkAll(this.settings);
                // Rival reacts to player success
                if ((_a = this.settings.rival) === null || _a === void 0 ? void 0 : _a.name) {
                    RivalEngine.showTaunt(this.settings, 'quest_complete');
                }
                // Track hourly completion
                this.trackHourlyCompletion();
            });
            this.kernel.events.on('quest:failed', (data) => {
                var _a;
                if (data.damage > 0)
                    floatReward(`-${data.damage} HP`, 'damage');
                // Rival gains XP on player failure
                if ((_a = this.settings.rival) === null || _a === void 0 ? void 0 : _a.name) {
                    RivalEngine.rivalGainXP(this.settings, 15);
                    RivalEngine.showTaunt(this.settings, 'fail');
                }
                // HP critical vignette
                if (this.settings.hp <= 20)
                    this.showHPVignette();
            });
            // --- COMMANDS ---
            this.addCommand({ id: 'open-panopticon', name: 'Open Panopticon', callback: () => this.activateView() });
            this.addCommand({ id: 'toggle-focus', name: 'Toggle Focus Audio', callback: () => this.audio.toggleBrownNoise() });
            this.addCommand({
                id: 'pomodoro-start', name: 'Pomodoro: Start/Pause', callback: () => {
                    if (this.pomodoro.isRunning())
                        this.pomodoro.pause();
                    else
                        this.pomodoro.start();
                }
            });
            this.addCommand({ id: 'pomodoro-reset', name: 'Pomodoro: Reset', callback: () => this.pomodoro.reset() });
            this.addCommand({ id: 'weekly-review', name: 'Weekly Review', hotkeys: [{ modifiers: ["Mod", "Shift"], key: "w" }], callback: () => new WeeklyReviewModal(this.app, this).open() });
            this.addCommand({ id: 'create-research', name: 'Research: Create Quest', callback: () => new ResearchQuestModal(this.app, this).open() });
            this.addCommand({ id: 'view-research', name: 'Research: View Library', callback: () => new ResearchListModal(this.app, this).open() });
            this.addCommand({ id: 'meditate', name: 'Meditation: Start', callback: () => this.engine.startMeditation() });
            this.addCommand({ id: 'create-chain', name: 'Chains: Create', callback: () => new ChainBuilderModal(this.app, this).open() });
            this.addCommand({ id: 'view-chains', name: 'Chains: View Active', callback: () => { const c = this.engine.getActiveChain(); new obsidian.Notice(c ? `Active: ${c.name}` : "No active chain"); } });
            this.addCommand({ id: 'filter-high', name: 'Filters: High Energy', callback: () => this.engine.setFilterState("high", "any", []) });
            this.addCommand({ id: 'clear-filters', name: 'Filters: Clear', callback: () => this.engine.clearFilters() });
            this.addCommand({ id: 'game-stats', name: 'Analytics: Stats', callback: () => { const s = this.engine.getGameStats(); new obsidian.Notice(`Lvl ${s.level} | Streak ${s.currentStreak}`); } });
            this.addCommand({ id: 'scars', name: 'Scars: View', callback: () => new ScarsModal(this.app, this).open() });
            this.addCommand({
                id: 'character-profile',
                name: 'Character Profile',
                hotkeys: [{ modifiers: ["Mod", "Shift"], key: "p" }],
                callback: () => new ProfileModal(this.app, this).open()
            });
            this.addCommand({
                id: 'quest-templates',
                name: 'Deploy Quest from Template',
                callback: () => new QuestTemplateModal(this.app, this).open()
            });
            this.addCommand({
                id: 'deploy-quest-hotkey',
                name: 'Deploy Quest',
                hotkeys: [{ modifiers: ["Mod"], key: "d" }],
                callback: () => new QuestModal(this.app, this).open()
            });
            this.addCommand({
                id: 'undo-quest-delete',
                name: 'Undo Last Quest Deletion',
                hotkeys: [{ modifiers: ["Mod", "Shift"], key: "z" }],
                callback: () => this.engine.undoLastDeletion()
            });
            this.addCommand({
                id: 'complete-top-quest',
                name: 'Complete Top Quest',
                hotkeys: [{ modifiers: ["Mod", "Shift"], key: "c" }],
                callback: () => __awaiter(this, void 0, void 0, function* () {
                    var _a, _b;
                    const folder = this.app.vault.getAbstractFileByPath("Active_Run/Quests");
                    if (folder instanceof obsidian.TFile) {
                        new obsidian.Notice('No active quests.');
                        return;
                    }
                    const files = (_b = (_a = folder === null || folder === void 0 ? void 0 : folder.children) === null || _a === void 0 ? void 0 : _a.filter((f) => f instanceof obsidian.TFile && f.extension === 'md')) !== null && _b !== void 0 ? _b : [];
                    if (files.length > 0) {
                        yield this.engine.completeQuest(files[0]);
                        this.engine.trigger('update');
                    }
                    else {
                        new obsidian.Notice('No active quests to complete.');
                    }
                })
            });
            this.addCommand({
                id: 'start-meditation-hotkey',
                name: 'Start Meditation',
                hotkeys: [{ modifiers: ["Mod", "Shift"], key: "m" }],
                callback: () => this.engine.startMeditation()
            });
            this.addCommand({
                id: 'quick-capture-hotkey',
                name: 'Quick Capture',
                hotkeys: [{ modifiers: ["Mod", "Shift"], key: "x" }],
                callback: () => new QuickCaptureModal(this.app, this).open()
            });
            this.addCommand({
                id: 'export-stats',
                name: 'Analytics: Export Stats JSON',
                callback: () => __awaiter(this, void 0, void 0, function* () {
                    const stats = this.engine.getGameStats();
                    const path = `Sisyphus_Stats_${Date.now()}.json`;
                    yield this.app.vault.create(path, JSON.stringify(stats, null, 2));
                    new obsidian.Notice(`Stats exported to ${path}`);
                })
            });
            this.addCommand({
                id: 'accept-death',
                name: 'ACCEPT DEATH (Reset Run)',
                callback: () => this.engine.triggerDeath()
            });
            this.addCommand({
                id: 'reroll-chaos',
                name: 'Reroll Chaos',
                callback: () => this.engine.rollChaos(true)
            });
            this.addCommand({
                id: 'quick-capture',
                name: 'Quick Capture (Scrap)',
                callback: () => new QuickCaptureModal(this.app, this).open()
            });
            this.addCommand({
                id: 'generate-skill-graph',
                name: 'Neural Hub: Generate Skill Graph',
                callback: () => this.engine.generateSkillGraph()
            });
            this.addRibbonIcon('skull', 'Sisyphus Sidebar', () => this.activateView());
            // ... previous code ...
            // --- SETTINGS TAB ---
            this.addSettingTab(new SisyphusSettingTab(this.app, this));
            this.registerInterval(window.setInterval(() => {
                if (this.kernel)
                    this.kernel.events.emit('clock:tick', { now: new Date().toISOString() });
                void this.engine.checkDeadlines();
            }, 60000));
            // [FIX] Debounced Word Counter (Typewriter Fix)
            const debouncedUpdate = obsidian.debounce((file, content) => {
                var _a;
                // 1. Check if file still exists to prevent race condition errors
                if (!file || !file.path)
                    return;
                const exists = this.app.vault.getAbstractFileByPath(file.path);
                if (!exists)
                    return;
                const cache = this.app.metadataCache.getFileCache(file);
                if ((_a = cache === null || cache === void 0 ? void 0 : cache.frontmatter) === null || _a === void 0 ? void 0 : _a.research_id) {
                    const words = content.trim().split(/\s+/).length;
                    this.engine.updateResearchWordCount(cache.frontmatter.research_id, words);
                }
            }, 1000, true);
            // Register the event listener to actually USE the debounce function
            this.registerEvent(this.app.workspace.on('editor-change', (editor, info) => {
                if (info && info.file) {
                    debouncedUpdate(info.file, editor.getValue());
                }
            }));
        });
    } // <--- THIS BRACE WAS MISSING
    loadStyles() {
        return __awaiter(this, void 0, void 0, function* () {
            try {
                const dir = (this.manifest && this.manifest.dir) || "";
                const path = dir ? `${dir}/styles.css` : "styles.css";
                const cssFile = this.app.vault.getAbstractFileByPath(path);
                if (cssFile instanceof obsidian.TFile) {
                    const css = yield this.app.vault.read(cssFile);
                    const style = document.createElement("style");
                    style.id = "sisyphus-styles";
                    style.innerHTML = css;
                    document.head.appendChild(style);
                }
            }
            catch (e) {
                console.error("Could not load styles.css", e);
            }
        });
    }
    onunload() {
        var _a;
        this.app.workspace.detachLeavesOfType(VIEW_TYPE_PANOPTICON);
        if (this.kernel)
            this.kernel.shutdown();
        if ((_a = this.audio) === null || _a === void 0 ? void 0 : _a.audioCtx) {
            this.audio.audioCtx.close().catch(() => { });
        }
        const style = document.getElementById("sisyphus-styles");
        if (style)
            style.remove();
    }
    activateView() {
        return __awaiter(this, void 0, void 0, function* () {
            const { workspace } = this.app;
            let leaf = null;
            const leaves = workspace.getLeavesOfType(VIEW_TYPE_PANOPTICON);
            if (leaves.length > 0)
                leaf = leaves[0];
            else {
                leaf = workspace.getRightLeaf(false);
                yield leaf.setViewState({ type: VIEW_TYPE_PANOPTICON, active: true });
            }
            workspace.revealLeaf(leaf);
        });
    }
    updateStatusBar() {
        var _a;
        const s = this.settings;
        const shield = (this.engine.isShielded() || this.engine.isResting()) ? (this.engine.isResting() ? 'ðŸ’¤' : 'ðŸ›¡ï¸') : '';
        const mCount = s.dailyMissions.filter(m => m.completed).length;
        const combo = s.comboCount > 1 ? ` ðŸ”¥x${s.comboCount}` : '';
        const streak = ((_a = s.streak) === null || _a === void 0 ? void 0 : _a.current) > 0 ? ` âš¡${s.streak.current}` : '';
        const hpPct = Math.round((s.hp / s.maxHp) * 100);
        const hpColor = hpPct < 30 ? 'var(--sisy-red)' : hpPct < 60 ? 'var(--sisy-gold)' : 'var(--sisy-green)';
        this.statusBarItem.empty();
        this.statusBarItem.style.display = 'flex';
        this.statusBarItem.style.alignItems = 'center';
        this.statusBarItem.style.gap = '6px';
        this.statusBarItem.style.fontSize = '0.85em';
        // Shield/Rest indicator
        if (shield) {
            const shieldEl = this.statusBarItem.createSpan({ text: shield });
            shieldEl.style.fontSize = '1.1em';
        }
        // HP with inline mini bar
        const hpWrap = this.statusBarItem.createSpan();
        hpWrap.style.display = 'flex';
        hpWrap.style.alignItems = 'center';
        hpWrap.style.gap = '3px';
        hpWrap.createSpan({ text: 'â™¥' }).style.color = hpColor;
        const hpBar = hpWrap.createSpan();
        hpBar.style.width = '30px';
        hpBar.style.height = '4px';
        hpBar.style.background = 'var(--background-modifier-border)';
        hpBar.style.borderRadius = '2px';
        hpBar.style.overflow = 'hidden';
        hpBar.style.display = 'inline-block';
        const hpFill = hpBar.createSpan();
        hpFill.style.display = 'block';
        hpFill.style.height = '100%';
        hpFill.style.width = `${hpPct}%`;
        hpFill.style.background = hpColor;
        hpFill.style.borderRadius = '2px';
        hpWrap.createSpan({ text: `${s.hp}` }).style.fontFamily = 'var(--font-monospace)';
        // Level
        const lvl = this.statusBarItem.createSpan({ text: `Lv${s.level}` });
        lvl.style.color = 'var(--sisy-purple)';
        lvl.style.fontWeight = '700';
        // Gold
        const gold = this.statusBarItem.createSpan({ text: `ðŸ’°${s.gold}` });
        gold.style.color = s.gold < 0 ? 'var(--sisy-red)' : 'var(--sisy-gold)';
        // Missions
        this.statusBarItem.createSpan({ text: `ðŸ“‹${mCount}/3` });
        // Streak + combo
        if (streak || combo) {
            this.statusBarItem.createSpan({ text: `${streak}${combo}` });
        }
        // Chaos modifier icon
        this.statusBarItem.createSpan({ text: s.dailyModifier.icon });
    }
    loadSettings() {
        return __awaiter(this, void 0, void 0, function* () {
            const stateManager = new StateManager(DEFAULT_SETTINGS);
            const migration = stateManager.migrate(yield this.loadData());
            this.config = migration.config;
            this.settings = migration.state;
            if (migration.migrated) {
                yield this.saveData(stateManager.toPersistedState(this.config, this.settings));
            }
        });
    }
    saveSettings() {
        return __awaiter(this, void 0, void 0, function* () {
            const stateManager = new StateManager(DEFAULT_SETTINGS);
            this.config.muteAudio = this.settings.muted;
            yield this.saveData(stateManager.toPersistedState(this.config, this.settings));
        });
    }
    /** Track quest completion hour for time-of-day analytics */
    trackHourlyCompletion() {
        const now = new Date();
        const todayStr = now.toISOString().split('T')[0];
        let metric = this.settings.dayMetrics.find((d) => d.date === todayStr);
        if (metric) {
            if (!metric.hourlyCompletions)
                metric.hourlyCompletions = new Array(24).fill(0);
            metric.hourlyCompletions[now.getHours()]++;
        }
    }
    /** Show red vignette overlay when HP is critically low */
    showHPVignette() {
        const existing = document.querySelector('.sisy-hp-critical-vignette');
        if (existing)
            return; // Already showing
        const el = document.createElement('div');
        el.className = 'sisy-hp-critical-vignette';
        document.body.appendChild(el);
        setTimeout(() => el.remove(), 6000);
    }
}

module.exports = SisyphusPlugin;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXMiOlsibm9kZV9tb2R1bGVzL3RzbGliL3RzbGliLmVzNi5qcyIsInNyYy91aS9lZmZlY3RzLnRzIiwic3JjL3V0aWxzLnRzIiwic3JjL3VpL21vZGFscy50cyIsInNyYy91aS9yZXZpZXcudHMiLCJzcmMvYWNoaWV2ZW1lbnRzLnRzIiwic3JjL2VuZ2luZXMvQW5hbHl0aWNzRW5naW5lLnRzIiwic3JjL2VuZ2luZXMvTWVkaXRhdGlvbkVuZ2luZS50cyIsInNyYy9lbmdpbmVzL1Jlc2VhcmNoRW5naW5lLnRzIiwic3JjL2VuZ2luZXMvQ2hhaW5zRW5naW5lLnRzIiwic3JjL2VuZ2luZXMvRmlsdGVyc0VuZ2luZS50cyIsInNyYy9tZWNoYW5pY3MudHMiLCJzcmMvZW5naW5lLnRzIiwic3JjL3VpL2NoYXJ0cy50cyIsInNyYy91aS9jYXJkLnRzIiwic3JjL3VpL3NraWxsdHJlZS50cyIsInNyYy9lbmdpbmVzL1JpdmFsRW5naW5lLnRzIiwic3JjL3VpL3ZpZXcudHMiLCJzcmMvY29yZS9TdGF0ZU1hbmFnZXIudHMiLCJzcmMvc2V0dGluZ3MudHMiLCJzcmMvY29yZS9FdmVudEJ1cy50cyIsInNyYy9jb3JlL01vZHVsZU1hbmFnZXIudHMiLCJzcmMvY29yZS9LZXJuZWwudHMiLCJzcmMvZW5naW5lcy9BY2hpZXZlbWVudEVuZ2luZS50cyIsInNyYy91aS9wcm9maWxlLnRzIiwic3JjL2NvcmUvR2FtZU1vZHVsZS50cyIsInNyYy9tb2R1bGVzL3Byb2dyZXNzaW9uL1Byb2dyZXNzaW9uTW9kdWxlLnRzIiwic3JjL21vZHVsZXMvZWNvbm9teS9FY29ub215TW9kdWxlLnRzIiwic3JjL21vZHVsZXMvc3Vydml2YWwvU3Vydml2YWxNb2R1bGUudHMiLCJzcmMvbW9kdWxlcy9jb21iYXQvQ29tYmF0TW9kdWxlLnRzIiwic3JjL21vZHVsZXMvcHJvZHVjdGl2aXR5L1Byb2R1Y3Rpdml0eU1vZHVsZS50cyIsInNyYy9tb2R1bGVzL2FuYWx5dGljcy9BbmFseXRpY3NNb2R1bGUudHMiLCJzcmMvbW9kdWxlcy9yZWNvdmVyeS9SZWNvdmVyeU1vZHVsZS50cyIsInNyYy9tb2R1bGVzL3JlY292ZXJ5L0RhaWx5TGlmZWN5Y2xlTW9kdWxlLnRzIiwic3JjL2VuZ2luZXMvUG9tb2Rvcm9UaW1lci50cyIsInNyYy9tYWluLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uXHJcblxyXG5QZXJtaXNzaW9uIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBhbmQvb3IgZGlzdHJpYnV0ZSB0aGlzIHNvZnR3YXJlIGZvciBhbnlcclxucHVycG9zZSB3aXRoIG9yIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLlxyXG5cclxuVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiBBTkQgVEhFIEFVVEhPUiBESVNDTEFJTVMgQUxMIFdBUlJBTlRJRVMgV0lUSFxyXG5SRUdBUkQgVE8gVEhJUyBTT0ZUV0FSRSBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFlcclxuQU5EIEZJVE5FU1MuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1IgQkUgTElBQkxFIEZPUiBBTlkgU1BFQ0lBTCwgRElSRUNULFxyXG5JTkRJUkVDVCwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIE9SIEFOWSBEQU1BR0VTIFdIQVRTT0VWRVIgUkVTVUxUSU5HIEZST01cclxuTE9TUyBPRiBVU0UsIERBVEEgT1IgUFJPRklUUywgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UgT1JcclxuT1RIRVIgVE9SVElPVVMgQUNUSU9OLCBBUklTSU5HIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFVTRSBPUlxyXG5QRVJGT1JNQU5DRSBPRiBUSElTIFNPRlRXQVJFLlxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xyXG4vKiBnbG9iYWwgUmVmbGVjdCwgUHJvbWlzZSwgU3VwcHJlc3NlZEVycm9yLCBTeW1ib2wsIEl0ZXJhdG9yICovXHJcblxyXG52YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uKGQsIGIpIHtcclxuICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXh0ZW5kcyhkLCBiKSB7XHJcbiAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxyXG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcclxuICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxufVxyXG5cclxuZXhwb3J0IHZhciBfX2Fzc2lnbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uIF9fYXNzaWduKHQpIHtcclxuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKSB0W3BdID0gc1twXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVzdChzLCBlKSB7XHJcbiAgICB2YXIgdCA9IHt9O1xyXG4gICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApICYmIGUuaW5kZXhPZihwKSA8IDApXHJcbiAgICAgICAgdFtwXSA9IHNbcF07XHJcbiAgICBpZiAocyAhPSBudWxsICYmIHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09PSBcImZ1bmN0aW9uXCIpXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIHAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHMpOyBpIDwgcC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoZS5pbmRleE9mKHBbaV0pIDwgMCAmJiBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwocywgcFtpXSkpXHJcbiAgICAgICAgICAgICAgICB0W3BbaV1dID0gc1twW2ldXTtcclxuICAgICAgICB9XHJcbiAgICByZXR1cm4gdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xyXG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3BhcmFtKHBhcmFtSW5kZXgsIGRlY29yYXRvcikge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIGtleSkgeyBkZWNvcmF0b3IodGFyZ2V0LCBrZXksIHBhcmFtSW5kZXgpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2VzRGVjb3JhdGUoY3RvciwgZGVzY3JpcHRvckluLCBkZWNvcmF0b3JzLCBjb250ZXh0SW4sIGluaXRpYWxpemVycywgZXh0cmFJbml0aWFsaXplcnMpIHtcclxuICAgIGZ1bmN0aW9uIGFjY2VwdChmKSB7IGlmIChmICE9PSB2b2lkIDAgJiYgdHlwZW9mIGYgIT09IFwiZnVuY3Rpb25cIikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkZ1bmN0aW9uIGV4cGVjdGVkXCIpOyByZXR1cm4gZjsgfVxyXG4gICAgdmFyIGtpbmQgPSBjb250ZXh0SW4ua2luZCwga2V5ID0ga2luZCA9PT0gXCJnZXR0ZXJcIiA/IFwiZ2V0XCIgOiBraW5kID09PSBcInNldHRlclwiID8gXCJzZXRcIiA6IFwidmFsdWVcIjtcclxuICAgIHZhciB0YXJnZXQgPSAhZGVzY3JpcHRvckluICYmIGN0b3IgPyBjb250ZXh0SW5bXCJzdGF0aWNcIl0gPyBjdG9yIDogY3Rvci5wcm90b3R5cGUgOiBudWxsO1xyXG4gICAgdmFyIGRlc2NyaXB0b3IgPSBkZXNjcmlwdG9ySW4gfHwgKHRhcmdldCA/IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBjb250ZXh0SW4ubmFtZSkgOiB7fSk7XHJcbiAgICB2YXIgXywgZG9uZSA9IGZhbHNlO1xyXG4gICAgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcclxuICAgICAgICB2YXIgY29udGV4dCA9IHt9O1xyXG4gICAgICAgIGZvciAodmFyIHAgaW4gY29udGV4dEluKSBjb250ZXh0W3BdID0gcCA9PT0gXCJhY2Nlc3NcIiA/IHt9IDogY29udGV4dEluW3BdO1xyXG4gICAgICAgIGZvciAodmFyIHAgaW4gY29udGV4dEluLmFjY2VzcykgY29udGV4dC5hY2Nlc3NbcF0gPSBjb250ZXh0SW4uYWNjZXNzW3BdO1xyXG4gICAgICAgIGNvbnRleHQuYWRkSW5pdGlhbGl6ZXIgPSBmdW5jdGlvbiAoZikgeyBpZiAoZG9uZSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBhZGQgaW5pdGlhbGl6ZXJzIGFmdGVyIGRlY29yYXRpb24gaGFzIGNvbXBsZXRlZFwiKTsgZXh0cmFJbml0aWFsaXplcnMucHVzaChhY2NlcHQoZiB8fCBudWxsKSk7IH07XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9ICgwLCBkZWNvcmF0b3JzW2ldKShraW5kID09PSBcImFjY2Vzc29yXCIgPyB7IGdldDogZGVzY3JpcHRvci5nZXQsIHNldDogZGVzY3JpcHRvci5zZXQgfSA6IGRlc2NyaXB0b3Jba2V5XSwgY29udGV4dCk7XHJcbiAgICAgICAgaWYgKGtpbmQgPT09IFwiYWNjZXNzb3JcIikge1xyXG4gICAgICAgICAgICBpZiAocmVzdWx0ID09PSB2b2lkIDApIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICBpZiAocmVzdWx0ID09PSBudWxsIHx8IHR5cGVvZiByZXN1bHQgIT09IFwib2JqZWN0XCIpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJPYmplY3QgZXhwZWN0ZWRcIik7XHJcbiAgICAgICAgICAgIGlmIChfID0gYWNjZXB0KHJlc3VsdC5nZXQpKSBkZXNjcmlwdG9yLmdldCA9IF87XHJcbiAgICAgICAgICAgIGlmIChfID0gYWNjZXB0KHJlc3VsdC5zZXQpKSBkZXNjcmlwdG9yLnNldCA9IF87XHJcbiAgICAgICAgICAgIGlmIChfID0gYWNjZXB0KHJlc3VsdC5pbml0KSkgaW5pdGlhbGl6ZXJzLnVuc2hpZnQoXyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKF8gPSBhY2NlcHQocmVzdWx0KSkge1xyXG4gICAgICAgICAgICBpZiAoa2luZCA9PT0gXCJmaWVsZFwiKSBpbml0aWFsaXplcnMudW5zaGlmdChfKTtcclxuICAgICAgICAgICAgZWxzZSBkZXNjcmlwdG9yW2tleV0gPSBfO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmICh0YXJnZXQpIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGNvbnRleHRJbi5uYW1lLCBkZXNjcmlwdG9yKTtcclxuICAgIGRvbmUgPSB0cnVlO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcnVuSW5pdGlhbGl6ZXJzKHRoaXNBcmcsIGluaXRpYWxpemVycywgdmFsdWUpIHtcclxuICAgIHZhciB1c2VWYWx1ZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAyO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbml0aWFsaXplcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICB2YWx1ZSA9IHVzZVZhbHVlID8gaW5pdGlhbGl6ZXJzW2ldLmNhbGwodGhpc0FyZywgdmFsdWUpIDogaW5pdGlhbGl6ZXJzW2ldLmNhbGwodGhpc0FyZyk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdXNlVmFsdWUgPyB2YWx1ZSA6IHZvaWQgMDtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3Byb3BLZXkoeCkge1xyXG4gICAgcmV0dXJuIHR5cGVvZiB4ID09PSBcInN5bWJvbFwiID8geCA6IFwiXCIuY29uY2F0KHgpO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc2V0RnVuY3Rpb25OYW1lKGYsIG5hbWUsIHByZWZpeCkge1xyXG4gICAgaWYgKHR5cGVvZiBuYW1lID09PSBcInN5bWJvbFwiKSBuYW1lID0gbmFtZS5kZXNjcmlwdGlvbiA/IFwiW1wiLmNvbmNhdChuYW1lLmRlc2NyaXB0aW9uLCBcIl1cIikgOiBcIlwiO1xyXG4gICAgcmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShmLCBcIm5hbWVcIiwgeyBjb25maWd1cmFibGU6IHRydWUsIHZhbHVlOiBwcmVmaXggPyBcIlwiLmNvbmNhdChwcmVmaXgsIFwiIFwiLCBuYW1lKSA6IG5hbWUgfSk7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSkge1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0Lm1ldGFkYXRhID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBSZWZsZWN0Lm1ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXRlcih0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxyXG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XHJcbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2dlbmVyYXRvcih0aGlzQXJnLCBib2R5KSB7XHJcbiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnID0gT2JqZWN0LmNyZWF0ZSgodHlwZW9mIEl0ZXJhdG9yID09PSBcImZ1bmN0aW9uXCIgPyBJdGVyYXRvciA6IE9iamVjdCkucHJvdG90eXBlKTtcclxuICAgIHJldHVybiBnLm5leHQgPSB2ZXJiKDApLCBnW1widGhyb3dcIl0gPSB2ZXJiKDEpLCBnW1wicmV0dXJuXCJdID0gdmVyYigyKSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XHJcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xyXG4gICAgICAgIHdoaWxlIChnICYmIChnID0gMCwgb3BbMF0gJiYgKF8gPSAwKSksIF8pIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcclxuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcclxuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cclxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IHZhciBfX2NyZWF0ZUJpbmRpbmcgPSBPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XHJcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xyXG4gICAgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG0sIGspO1xyXG4gICAgaWYgKCFkZXNjIHx8IChcImdldFwiIGluIGRlc2MgPyAhbS5fX2VzTW9kdWxlIDogZGVzYy53cml0YWJsZSB8fCBkZXNjLmNvbmZpZ3VyYWJsZSkpIHtcclxuICAgICAgICBkZXNjID0geyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbVtrXTsgfSB9O1xyXG4gICAgfVxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIGsyLCBkZXNjKTtcclxufSkgOiAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcclxuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XHJcbiAgICBvW2syXSA9IG1ba107XHJcbn0pO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXhwb3J0U3RhcihtLCBvKSB7XHJcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmIChwICE9PSBcImRlZmF1bHRcIiAmJiAhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG8sIHApKSBfX2NyZWF0ZUJpbmRpbmcobywgbSwgcCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3ZhbHVlcyhvKSB7XHJcbiAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwO1xyXG4gICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7XHJcbiAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09IFwibnVtYmVyXCIpIHJldHVybiB7XHJcbiAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwO1xyXG4gICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/IFwiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS5cIiA6IFwiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVhZChvLCBuKSB7XHJcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl07XHJcbiAgICBpZiAoIW0pIHJldHVybiBvO1xyXG4gICAgdmFyIGkgPSBtLmNhbGwobyksIHIsIGFyID0gW10sIGU7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHdoaWxlICgobiA9PT0gdm9pZCAwIHx8IG4tLSA+IDApICYmICEociA9IGkubmV4dCgpKS5kb25lKSBhci5wdXNoKHIudmFsdWUpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGVycm9yKSB7IGUgPSB7IGVycm9yOiBlcnJvciB9OyB9XHJcbiAgICBmaW5hbGx5IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAociAmJiAhci5kb25lICYmIChtID0gaVtcInJldHVyblwiXSkpIG0uY2FsbChpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZmluYWxseSB7IGlmIChlKSB0aHJvdyBlLmVycm9yOyB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbi8qKiBAZGVwcmVjYXRlZCAqL1xyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWQoKSB7XHJcbiAgICBmb3IgKHZhciBhciA9IFtdLCBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKylcclxuICAgICAgICBhciA9IGFyLmNvbmNhdChfX3JlYWQoYXJndW1lbnRzW2ldKSk7XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbi8qKiBAZGVwcmVjYXRlZCAqL1xyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWRBcnJheXMoKSB7XHJcbiAgICBmb3IgKHZhciBzID0gMCwgaSA9IDAsIGlsID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGlsOyBpKyspIHMgKz0gYXJndW1lbnRzW2ldLmxlbmd0aDtcclxuICAgIGZvciAodmFyIHIgPSBBcnJheShzKSwgayA9IDAsIGkgPSAwOyBpIDwgaWw7IGkrKylcclxuICAgICAgICBmb3IgKHZhciBhID0gYXJndW1lbnRzW2ldLCBqID0gMCwgamwgPSBhLmxlbmd0aDsgaiA8IGpsOyBqKyssIGsrKylcclxuICAgICAgICAgICAgcltrXSA9IGFbal07XHJcbiAgICByZXR1cm4gcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkQXJyYXkodG8sIGZyb20sIHBhY2spIHtcclxuICAgIGlmIChwYWNrIHx8IGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIGZvciAodmFyIGkgPSAwLCBsID0gZnJvbS5sZW5ndGgsIGFyOyBpIDwgbDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKGFyIHx8ICEoaSBpbiBmcm9tKSkge1xyXG4gICAgICAgICAgICBpZiAoIWFyKSBhciA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20sIDAsIGkpO1xyXG4gICAgICAgICAgICBhcltpXSA9IGZyb21baV07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRvLmNvbmNhdChhciB8fCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tKSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0KHYpIHtcclxuICAgIHJldHVybiB0aGlzIGluc3RhbmNlb2YgX19hd2FpdCA/ICh0aGlzLnYgPSB2LCB0aGlzKSA6IG5ldyBfX2F3YWl0KHYpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0dlbmVyYXRvcih0aGlzQXJnLCBfYXJndW1lbnRzLCBnZW5lcmF0b3IpIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgZyA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSwgaSwgcSA9IFtdO1xyXG4gICAgcmV0dXJuIGkgPSBPYmplY3QuY3JlYXRlKCh0eXBlb2YgQXN5bmNJdGVyYXRvciA9PT0gXCJmdW5jdGlvblwiID8gQXN5bmNJdGVyYXRvciA6IE9iamVjdCkucHJvdG90eXBlKSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiLCBhd2FpdFJldHVybiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIGF3YWl0UmV0dXJuKGYpIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBQcm9taXNlLnJlc29sdmUodikudGhlbihmLCByZWplY3QpOyB9OyB9XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4sIGYpIHsgaWYgKGdbbl0pIHsgaVtuXSA9IGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoYSwgYikgeyBxLnB1c2goW24sIHYsIGEsIGJdKSA+IDEgfHwgcmVzdW1lKG4sIHYpOyB9KTsgfTsgaWYgKGYpIGlbbl0gPSBmKGlbbl0pOyB9IH1cclxuICAgIGZ1bmN0aW9uIHJlc3VtZShuLCB2KSB7IHRyeSB7IHN0ZXAoZ1tuXSh2KSk7IH0gY2F0Y2ggKGUpIHsgc2V0dGxlKHFbMF1bM10sIGUpOyB9IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAocikgeyByLnZhbHVlIGluc3RhbmNlb2YgX19hd2FpdCA/IFByb21pc2UucmVzb2x2ZShyLnZhbHVlLnYpLnRoZW4oZnVsZmlsbCwgcmVqZWN0KSA6IHNldHRsZShxWzBdWzJdLCByKTsgfVxyXG4gICAgZnVuY3Rpb24gZnVsZmlsbCh2YWx1ZSkgeyByZXN1bWUoXCJuZXh0XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gcmVqZWN0KHZhbHVlKSB7IHJlc3VtZShcInRocm93XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKGYsIHYpIHsgaWYgKGYodiksIHEuc2hpZnQoKSwgcS5sZW5ndGgpIHJlc3VtZShxWzBdWzBdLCBxWzBdWzFdKTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0RlbGVnYXRvcihvKSB7XHJcbiAgICB2YXIgaSwgcDtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiwgZnVuY3Rpb24gKGUpIHsgdGhyb3cgZTsgfSksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4sIGYpIHsgaVtuXSA9IG9bbl0gPyBmdW5jdGlvbiAodikgeyByZXR1cm4gKHAgPSAhcCkgPyB7IHZhbHVlOiBfX2F3YWl0KG9bbl0odikpLCBkb25lOiBmYWxzZSB9IDogZiA/IGYodikgOiB2OyB9IDogZjsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY1ZhbHVlcyhvKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIG0gPSBvW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSwgaTtcclxuICAgIHJldHVybiBtID8gbS5jYWxsKG8pIDogKG8gPSB0eXBlb2YgX192YWx1ZXMgPT09IFwiZnVuY3Rpb25cIiA/IF9fdmFsdWVzKG8pIDogb1tTeW1ib2wuaXRlcmF0b3JdKCksIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpKTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpW25dID0gb1tuXSAmJiBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgeyB2ID0gb1tuXSh2KSwgc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgdi5kb25lLCB2LnZhbHVlKTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHNldHRsZShyZXNvbHZlLCByZWplY3QsIGQsIHYpIHsgUHJvbWlzZS5yZXNvbHZlKHYpLnRoZW4oZnVuY3Rpb24odikgeyByZXNvbHZlKHsgdmFsdWU6IHYsIGRvbmU6IGQgfSk7IH0sIHJlamVjdCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWFrZVRlbXBsYXRlT2JqZWN0KGNvb2tlZCwgcmF3KSB7XHJcbiAgICBpZiAoT2JqZWN0LmRlZmluZVByb3BlcnR5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjb29rZWQsIFwicmF3XCIsIHsgdmFsdWU6IHJhdyB9KTsgfSBlbHNlIHsgY29va2VkLnJhdyA9IHJhdzsgfVxyXG4gICAgcmV0dXJuIGNvb2tlZDtcclxufTtcclxuXHJcbnZhciBfX3NldE1vZHVsZURlZmF1bHQgPSBPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIHYpIHtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBcImRlZmF1bHRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdiB9KTtcclxufSkgOiBmdW5jdGlvbihvLCB2KSB7XHJcbiAgICBvW1wiZGVmYXVsdFwiXSA9IHY7XHJcbn07XHJcblxyXG52YXIgb3duS2V5cyA9IGZ1bmN0aW9uKG8pIHtcclxuICAgIG93bktleXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyB8fCBmdW5jdGlvbiAobykge1xyXG4gICAgICAgIHZhciBhciA9IFtdO1xyXG4gICAgICAgIGZvciAodmFyIGsgaW4gbykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvLCBrKSkgYXJbYXIubGVuZ3RoXSA9IGs7XHJcbiAgICAgICAgcmV0dXJuIGFyO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBvd25LZXlzKG8pO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0U3Rhcihtb2QpIHtcclxuICAgIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XHJcbiAgICB2YXIgcmVzdWx0ID0ge307XHJcbiAgICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgPSBvd25LZXlzKG1vZCksIGkgPSAwOyBpIDwgay5sZW5ndGg7IGkrKykgaWYgKGtbaV0gIT09IFwiZGVmYXVsdFwiKSBfX2NyZWF0ZUJpbmRpbmcocmVzdWx0LCBtb2QsIGtbaV0pO1xyXG4gICAgX19zZXRNb2R1bGVEZWZhdWx0KHJlc3VsdCwgbW9kKTtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydERlZmF1bHQobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IGRlZmF1bHQ6IG1vZCB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19jbGFzc1ByaXZhdGVGaWVsZEdldChyZWNlaXZlciwgc3RhdGUsIGtpbmQsIGYpIHtcclxuICAgIGlmIChraW5kID09PSBcImFcIiAmJiAhZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgYWNjZXNzb3Igd2FzIGRlZmluZWQgd2l0aG91dCBhIGdldHRlclwiKTtcclxuICAgIGlmICh0eXBlb2Ygc3RhdGUgPT09IFwiZnVuY3Rpb25cIiA/IHJlY2VpdmVyICE9PSBzdGF0ZSB8fCAhZiA6ICFzdGF0ZS5oYXMocmVjZWl2ZXIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IHJlYWQgcHJpdmF0ZSBtZW1iZXIgZnJvbSBhbiBvYmplY3Qgd2hvc2UgY2xhc3MgZGlkIG5vdCBkZWNsYXJlIGl0XCIpO1xyXG4gICAgcmV0dXJuIGtpbmQgPT09IFwibVwiID8gZiA6IGtpbmQgPT09IFwiYVwiID8gZi5jYWxsKHJlY2VpdmVyKSA6IGYgPyBmLnZhbHVlIDogc3RhdGUuZ2V0KHJlY2VpdmVyKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fY2xhc3NQcml2YXRlRmllbGRTZXQocmVjZWl2ZXIsIHN0YXRlLCB2YWx1ZSwga2luZCwgZikge1xyXG4gICAgaWYgKGtpbmQgPT09IFwibVwiKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBtZXRob2QgaXMgbm90IHdyaXRhYmxlXCIpO1xyXG4gICAgaWYgKGtpbmQgPT09IFwiYVwiICYmICFmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBhY2Nlc3NvciB3YXMgZGVmaW5lZCB3aXRob3V0IGEgc2V0dGVyXCIpO1xyXG4gICAgaWYgKHR5cGVvZiBzdGF0ZSA9PT0gXCJmdW5jdGlvblwiID8gcmVjZWl2ZXIgIT09IHN0YXRlIHx8ICFmIDogIXN0YXRlLmhhcyhyZWNlaXZlcikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3Qgd3JpdGUgcHJpdmF0ZSBtZW1iZXIgdG8gYW4gb2JqZWN0IHdob3NlIGNsYXNzIGRpZCBub3QgZGVjbGFyZSBpdFwiKTtcclxuICAgIHJldHVybiAoa2luZCA9PT0gXCJhXCIgPyBmLmNhbGwocmVjZWl2ZXIsIHZhbHVlKSA6IGYgPyBmLnZhbHVlID0gdmFsdWUgOiBzdGF0ZS5zZXQocmVjZWl2ZXIsIHZhbHVlKSksIHZhbHVlO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19jbGFzc1ByaXZhdGVGaWVsZEluKHN0YXRlLCByZWNlaXZlcikge1xyXG4gICAgaWYgKHJlY2VpdmVyID09PSBudWxsIHx8ICh0eXBlb2YgcmVjZWl2ZXIgIT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIHJlY2VpdmVyICE9PSBcImZ1bmN0aW9uXCIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IHVzZSAnaW4nIG9wZXJhdG9yIG9uIG5vbi1vYmplY3RcIik7XHJcbiAgICByZXR1cm4gdHlwZW9mIHN0YXRlID09PSBcImZ1bmN0aW9uXCIgPyByZWNlaXZlciA9PT0gc3RhdGUgOiBzdGF0ZS5oYXMocmVjZWl2ZXIpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hZGREaXNwb3NhYmxlUmVzb3VyY2UoZW52LCB2YWx1ZSwgYXN5bmMpIHtcclxuICAgIGlmICh2YWx1ZSAhPT0gbnVsbCAmJiB2YWx1ZSAhPT0gdm9pZCAwKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgdmFsdWUgIT09IFwiZnVuY3Rpb25cIikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIk9iamVjdCBleHBlY3RlZC5cIik7XHJcbiAgICAgICAgdmFyIGRpc3Bvc2UsIGlubmVyO1xyXG4gICAgICAgIGlmIChhc3luYykge1xyXG4gICAgICAgICAgICBpZiAoIVN5bWJvbC5hc3luY0Rpc3Bvc2UpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNEaXNwb3NlIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgICAgICAgICAgZGlzcG9zZSA9IHZhbHVlW1N5bWJvbC5hc3luY0Rpc3Bvc2VdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZGlzcG9zZSA9PT0gdm9pZCAwKSB7XHJcbiAgICAgICAgICAgIGlmICghU3ltYm9sLmRpc3Bvc2UpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuZGlzcG9zZSBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICAgICAgICAgIGRpc3Bvc2UgPSB2YWx1ZVtTeW1ib2wuZGlzcG9zZV07XHJcbiAgICAgICAgICAgIGlmIChhc3luYykgaW5uZXIgPSBkaXNwb3NlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodHlwZW9mIGRpc3Bvc2UgIT09IFwiZnVuY3Rpb25cIikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIk9iamVjdCBub3QgZGlzcG9zYWJsZS5cIik7XHJcbiAgICAgICAgaWYgKGlubmVyKSBkaXNwb3NlID0gZnVuY3Rpb24oKSB7IHRyeSB7IGlubmVyLmNhbGwodGhpcyk7IH0gY2F0Y2ggKGUpIHsgcmV0dXJuIFByb21pc2UucmVqZWN0KGUpOyB9IH07XHJcbiAgICAgICAgZW52LnN0YWNrLnB1c2goeyB2YWx1ZTogdmFsdWUsIGRpc3Bvc2U6IGRpc3Bvc2UsIGFzeW5jOiBhc3luYyB9KTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGFzeW5jKSB7XHJcbiAgICAgICAgZW52LnN0YWNrLnB1c2goeyBhc3luYzogdHJ1ZSB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiB2YWx1ZTtcclxuXHJcbn1cclxuXHJcbnZhciBfU3VwcHJlc3NlZEVycm9yID0gdHlwZW9mIFN1cHByZXNzZWRFcnJvciA9PT0gXCJmdW5jdGlvblwiID8gU3VwcHJlc3NlZEVycm9yIDogZnVuY3Rpb24gKGVycm9yLCBzdXBwcmVzc2VkLCBtZXNzYWdlKSB7XHJcbiAgICB2YXIgZSA9IG5ldyBFcnJvcihtZXNzYWdlKTtcclxuICAgIHJldHVybiBlLm5hbWUgPSBcIlN1cHByZXNzZWRFcnJvclwiLCBlLmVycm9yID0gZXJyb3IsIGUuc3VwcHJlc3NlZCA9IHN1cHByZXNzZWQsIGU7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19kaXNwb3NlUmVzb3VyY2VzKGVudikge1xyXG4gICAgZnVuY3Rpb24gZmFpbChlKSB7XHJcbiAgICAgICAgZW52LmVycm9yID0gZW52Lmhhc0Vycm9yID8gbmV3IF9TdXBwcmVzc2VkRXJyb3IoZSwgZW52LmVycm9yLCBcIkFuIGVycm9yIHdhcyBzdXBwcmVzc2VkIGR1cmluZyBkaXNwb3NhbC5cIikgOiBlO1xyXG4gICAgICAgIGVudi5oYXNFcnJvciA9IHRydWU7XHJcbiAgICB9XHJcbiAgICB2YXIgciwgcyA9IDA7XHJcbiAgICBmdW5jdGlvbiBuZXh0KCkge1xyXG4gICAgICAgIHdoaWxlIChyID0gZW52LnN0YWNrLnBvcCgpKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXIuYXN5bmMgJiYgcyA9PT0gMSkgcmV0dXJuIHMgPSAwLCBlbnYuc3RhY2sucHVzaChyKSwgUHJvbWlzZS5yZXNvbHZlKCkudGhlbihuZXh0KTtcclxuICAgICAgICAgICAgICAgIGlmIChyLmRpc3Bvc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gci5kaXNwb3NlLmNhbGwoci52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHIuYXN5bmMpIHJldHVybiBzIHw9IDIsIFByb21pc2UucmVzb2x2ZShyZXN1bHQpLnRoZW4obmV4dCwgZnVuY3Rpb24oZSkgeyBmYWlsKGUpOyByZXR1cm4gbmV4dCgpOyB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgcyB8PSAxO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICBmYWlsKGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzID09PSAxKSByZXR1cm4gZW52Lmhhc0Vycm9yID8gUHJvbWlzZS5yZWplY3QoZW52LmVycm9yKSA6IFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgIGlmIChlbnYuaGFzRXJyb3IpIHRocm93IGVudi5lcnJvcjtcclxuICAgIH1cclxuICAgIHJldHVybiBuZXh0KCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3Jld3JpdGVSZWxhdGl2ZUltcG9ydEV4dGVuc2lvbihwYXRoLCBwcmVzZXJ2ZUpzeCkge1xyXG4gICAgaWYgKHR5cGVvZiBwYXRoID09PSBcInN0cmluZ1wiICYmIC9eXFwuXFwuP1xcLy8udGVzdChwYXRoKSkge1xyXG4gICAgICAgIHJldHVybiBwYXRoLnJlcGxhY2UoL1xcLih0c3gpJHwoKD86XFwuZCk/KSgoPzpcXC5bXi4vXSs/KT8pXFwuKFtjbV0/KXRzJC9pLCBmdW5jdGlvbiAobSwgdHN4LCBkLCBleHQsIGNtKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0c3ggPyBwcmVzZXJ2ZUpzeCA/IFwiLmpzeFwiIDogXCIuanNcIiA6IGQgJiYgKCFleHQgfHwgIWNtKSA/IG0gOiAoZCArIGV4dCArIFwiLlwiICsgY20udG9Mb3dlckNhc2UoKSArIFwianNcIik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcGF0aDtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQge1xyXG4gICAgX19leHRlbmRzOiBfX2V4dGVuZHMsXHJcbiAgICBfX2Fzc2lnbjogX19hc3NpZ24sXHJcbiAgICBfX3Jlc3Q6IF9fcmVzdCxcclxuICAgIF9fZGVjb3JhdGU6IF9fZGVjb3JhdGUsXHJcbiAgICBfX3BhcmFtOiBfX3BhcmFtLFxyXG4gICAgX19lc0RlY29yYXRlOiBfX2VzRGVjb3JhdGUsXHJcbiAgICBfX3J1bkluaXRpYWxpemVyczogX19ydW5Jbml0aWFsaXplcnMsXHJcbiAgICBfX3Byb3BLZXk6IF9fcHJvcEtleSxcclxuICAgIF9fc2V0RnVuY3Rpb25OYW1lOiBfX3NldEZ1bmN0aW9uTmFtZSxcclxuICAgIF9fbWV0YWRhdGE6IF9fbWV0YWRhdGEsXHJcbiAgICBfX2F3YWl0ZXI6IF9fYXdhaXRlcixcclxuICAgIF9fZ2VuZXJhdG9yOiBfX2dlbmVyYXRvcixcclxuICAgIF9fY3JlYXRlQmluZGluZzogX19jcmVhdGVCaW5kaW5nLFxyXG4gICAgX19leHBvcnRTdGFyOiBfX2V4cG9ydFN0YXIsXHJcbiAgICBfX3ZhbHVlczogX192YWx1ZXMsXHJcbiAgICBfX3JlYWQ6IF9fcmVhZCxcclxuICAgIF9fc3ByZWFkOiBfX3NwcmVhZCxcclxuICAgIF9fc3ByZWFkQXJyYXlzOiBfX3NwcmVhZEFycmF5cyxcclxuICAgIF9fc3ByZWFkQXJyYXk6IF9fc3ByZWFkQXJyYXksXHJcbiAgICBfX2F3YWl0OiBfX2F3YWl0LFxyXG4gICAgX19hc3luY0dlbmVyYXRvcjogX19hc3luY0dlbmVyYXRvcixcclxuICAgIF9fYXN5bmNEZWxlZ2F0b3I6IF9fYXN5bmNEZWxlZ2F0b3IsXHJcbiAgICBfX2FzeW5jVmFsdWVzOiBfX2FzeW5jVmFsdWVzLFxyXG4gICAgX19tYWtlVGVtcGxhdGVPYmplY3Q6IF9fbWFrZVRlbXBsYXRlT2JqZWN0LFxyXG4gICAgX19pbXBvcnRTdGFyOiBfX2ltcG9ydFN0YXIsXHJcbiAgICBfX2ltcG9ydERlZmF1bHQ6IF9faW1wb3J0RGVmYXVsdCxcclxuICAgIF9fY2xhc3NQcml2YXRlRmllbGRHZXQ6IF9fY2xhc3NQcml2YXRlRmllbGRHZXQsXHJcbiAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0OiBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0LFxyXG4gICAgX19jbGFzc1ByaXZhdGVGaWVsZEluOiBfX2NsYXNzUHJpdmF0ZUZpZWxkSW4sXHJcbiAgICBfX2FkZERpc3Bvc2FibGVSZXNvdXJjZTogX19hZGREaXNwb3NhYmxlUmVzb3VyY2UsXHJcbiAgICBfX2Rpc3Bvc2VSZXNvdXJjZXM6IF9fZGlzcG9zZVJlc291cmNlcyxcclxuICAgIF9fcmV3cml0ZVJlbGF0aXZlSW1wb3J0RXh0ZW5zaW9uOiBfX3Jld3JpdGVSZWxhdGl2ZUltcG9ydEV4dGVuc2lvbixcclxufTtcclxuIiwiLyoqXG4gKiBTaXN5cGh1cyBVSSBFZmZlY3RzIOKAlCBUb2FzdCBub3RpZmljYXRpb25zLCBmbG9hdGluZyByZXdhcmRzLCBhbmQgdmlzdWFsIGZlZWRiYWNrLlxuICovXG5cbi8qID09PSBUSEVNRUQgVE9BU1QgTk9USUZJQ0FUSU9OUyA9PT0gKi9cblxuZXhwb3J0IHR5cGUgVG9hc3RWYXJpYW50ID0gJ3N1Y2Nlc3MnIHwgJ2ZhaWwnIHwgJ3hwJyB8ICdnb2xkJyB8ICdsZXZlbCc7XG5cbmludGVyZmFjZSBUb2FzdE9wdGlvbnMge1xuICAgIGljb24/OiBzdHJpbmc7XG4gICAgdGl0bGU6IHN0cmluZztcbiAgICBtZXNzYWdlPzogc3RyaW5nO1xuICAgIHZhcmlhbnQ/OiBUb2FzdFZhcmlhbnQ7XG4gICAgZHVyYXRpb24/OiBudW1iZXI7XG4gICAgYWN0aW9uPzogeyBsYWJlbDogc3RyaW5nOyBjYWxsYmFjazogKCkgPT4gdm9pZCB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2hvd1RvYXN0KG9wdHM6IFRvYXN0T3B0aW9ucyk6IHZvaWQge1xuICAgIGNvbnN0IHRvYXN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdG9hc3QuY2xhc3NOYW1lID0gYHNpc3ktdG9hc3Qgc2lzeS10b2FzdC0ke29wdHMudmFyaWFudCA/PyAnc3VjY2Vzcyd9YDtcblxuICAgIGlmIChvcHRzLmljb24pIHtcbiAgICAgICAgY29uc3QgaWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgICAgaWNvbi5jbGFzc05hbWUgPSAnc2lzeS10b2FzdC1pY29uJztcbiAgICAgICAgaWNvbi50ZXh0Q29udGVudCA9IG9wdHMuaWNvbjtcbiAgICAgICAgdG9hc3QuYXBwZW5kQ2hpbGQoaWNvbik7XG4gICAgfVxuXG4gICAgY29uc3QgYm9keSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGJvZHkuY2xhc3NOYW1lID0gJ3Npc3ktdG9hc3QtYm9keSc7XG4gICAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0aXRsZS5jbGFzc05hbWUgPSAnc2lzeS10b2FzdC10aXRsZSc7XG4gICAgdGl0bGUudGV4dENvbnRlbnQgPSBvcHRzLnRpdGxlO1xuICAgIGJvZHkuYXBwZW5kQ2hpbGQodGl0bGUpO1xuXG4gICAgaWYgKG9wdHMubWVzc2FnZSkge1xuICAgICAgICBjb25zdCBtc2cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgbXNnLmNsYXNzTmFtZSA9ICdzaXN5LXRvYXN0LW1zZyc7XG4gICAgICAgIG1zZy50ZXh0Q29udGVudCA9IG9wdHMubWVzc2FnZTtcbiAgICAgICAgYm9keS5hcHBlbmRDaGlsZChtc2cpO1xuICAgIH1cbiAgICB0b2FzdC5hcHBlbmRDaGlsZChib2R5KTtcblxuICAgIGlmIChvcHRzLmFjdGlvbikge1xuICAgICAgICBjb25zdCBidG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgYnRuLmNsYXNzTmFtZSA9ICdzaXN5LXRvYXN0LWFjdGlvbic7XG4gICAgICAgIGJ0bi50ZXh0Q29udGVudCA9IG9wdHMuYWN0aW9uLmxhYmVsO1xuICAgICAgICBidG4ub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgICAgIG9wdHMuYWN0aW9uIS5jYWxsYmFjaygpO1xuICAgICAgICAgICAgcmVtb3ZlVG9hc3QodG9hc3QpO1xuICAgICAgICB9O1xuICAgICAgICB0b2FzdC5hcHBlbmRDaGlsZChidG4pO1xuICAgIH1cblxuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodG9hc3QpO1xuXG4gICAgY29uc3QgZHVyYXRpb24gPSBvcHRzLmR1cmF0aW9uID8/IDQwMDA7XG4gICAgc2V0VGltZW91dCgoKSA9PiByZW1vdmVUb2FzdCh0b2FzdCksIGR1cmF0aW9uKTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlVG9hc3QodG9hc3Q6IEhUTUxFbGVtZW50KTogdm9pZCB7XG4gICAgaWYgKCF0b2FzdC5wYXJlbnROb2RlKSByZXR1cm47XG4gICAgdG9hc3QuY2xhc3NMaXN0LmFkZCgnc2lzeS10b2FzdC1leGl0Jyk7XG4gICAgc2V0VGltZW91dCgoKSA9PiB0b2FzdC5yZW1vdmUoKSwgMzAwKTtcbn1cblxuLyogPT09IEZMT0FUSU5HIFJFV0FSRCBBTklNQVRJT04gPT09ICovXG5cbmV4cG9ydCBmdW5jdGlvbiBmbG9hdFJld2FyZCh0ZXh0OiBzdHJpbmcsIHR5cGU6ICd4cCcgfCAnZ29sZCcgfCAnZGFtYWdlJyB8ICdsZXZlbCcgPSAneHAnKTogdm9pZCB7XG4gICAgY29uc3QgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBlbC5jbGFzc05hbWUgPSBgc2lzeS1mbG9hdC1yZXdhcmQgc2lzeS1mbG9hdC0ke3R5cGV9YDtcbiAgICBlbC50ZXh0Q29udGVudCA9IHRleHQ7XG5cbiAgICAvLyBQb3NpdGlvbiBuZWFyIHRoZSBjZW50ZXItdG9wIG9mIHRoZSB2aWV3cG9ydFxuICAgIGVsLnN0eWxlLmxlZnQgPSBgJHs1MCArIChNYXRoLnJhbmRvbSgpICogMTAgLSA1KX0lYDtcbiAgICBlbC5zdHlsZS50b3AgPSBgNDAlYDtcbiAgICBlbC5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlWCgtNTAlKSc7XG5cbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGVsKTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IGVsLnJlbW92ZSgpLCAxNjAwKTtcbn1cblxuLyogPT09IENPTlRFWFQtQVdBUkUgRU1QVFkgU1RBVEVTID09PSAqL1xuXG5jb25zdCBFTVBUWV9NRVNTQUdFUzogUmVjb3JkPHN0cmluZywgeyBpY29uOiBzdHJpbmc7IHRleHQ6IHN0cmluZzsgaGludDogc3RyaW5nIH1bXT4gPSB7XG4gICAgcXVlc3RzOiBbXG4gICAgICAgIHsgaWNvbjogJ/Cfm6HvuI8nLCB0ZXh0OiAnQWxsIHF1aWV0IG9uIHRoZSBmcm9udC4nLCBoaW50OiAnRGVwbG95IGEgcXVlc3QgdG8gYnJlYWsgdGhlIHNpbGVuY2UuJyB9LFxuICAgICAgICB7IGljb246ICfimpTvuI8nLCB0ZXh0OiAnVGhlIGJhdHRsZWZpZWxkIGF3YWl0cy4nLCBoaW50OiAnTm8gYWN0aXZlIHRocmVhdHMgZGV0ZWN0ZWQuJyB9LFxuICAgICAgICB7IGljb246ICfwn46vJywgdGV4dDogJ1RhcmdldCBhY3F1aXJlZDogbm90aGluZy4nLCBoaW50OiAnVGltZSB0byBjcmVhdGUgc29tZSBjaGFvcy4nIH0sXG4gICAgXSxcbiAgICBtaXNzaW9uczogW1xuICAgICAgICB7IGljb246ICfwn5OLJywgdGV4dDogJ05vIG1pc3Npb25zIGJyaWVmZWQuJywgaGludDogJ01pc3Npb25zIHJlZnJlc2ggZGFpbHkgYXQgZGF3bi4nIH0sXG4gICAgXSxcbiAgICByZXNlYXJjaDogW1xuICAgICAgICB7IGljb246ICfwn5SsJywgdGV4dDogJ1RoZSBsYWIgaXMgZW1wdHkuJywgaGludDogJ1N0YXJ0IGEgcmVzZWFyY2ggcXVlc3QgdG8gZmlsbCBpdC4nIH0sXG4gICAgXSxcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRFbXB0eU1lc3NhZ2UoY2F0ZWdvcnk6IHN0cmluZyk6IHsgaWNvbjogc3RyaW5nOyB0ZXh0OiBzdHJpbmc7IGhpbnQ6IHN0cmluZyB9IHtcbiAgICBjb25zdCBtZXNzYWdlcyA9IEVNUFRZX01FU1NBR0VTW2NhdGVnb3J5XSA/PyBFTVBUWV9NRVNTQUdFU1sncXVlc3RzJ107XG4gICAgcmV0dXJuIG1lc3NhZ2VzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIG1lc3NhZ2VzLmxlbmd0aCldO1xufVxuXG4vKiogUmVuZGVyIGEgc3R5bGVkIGVtcHR5IHN0YXRlIGVsZW1lbnQgKi9cbmV4cG9ydCBmdW5jdGlvbiByZW5kZXJFbXB0eVN0YXRlKHBhcmVudDogSFRNTEVsZW1lbnQsIGNhdGVnb3J5OiBzdHJpbmcsIGN0YVRleHQ/OiBzdHJpbmcsIGN0YUNiPzogKCkgPT4gdm9pZCk6IEhUTUxFbGVtZW50IHtcbiAgICBjb25zdCBtc2cgPSBnZXRFbXB0eU1lc3NhZ2UoY2F0ZWdvcnkpO1xuICAgIGNvbnN0IGVsID0gcGFyZW50LmNyZWF0ZURpdih7IGNsczogJ3Npc3ktZW1wdHktc3RhdGUnIH0pO1xuXG4gICAgY29uc3QgaWNvbiA9IGVsLmNyZWF0ZURpdih7IGNsczogJ3Npc3ktZW1wdHktaWNvbicgfSk7XG4gICAgaWNvbi50ZXh0Q29udGVudCA9IG1zZy5pY29uO1xuICAgIGVsLmNyZWF0ZURpdih7IHRleHQ6IG1zZy50ZXh0IH0pO1xuICAgIGVsLmNyZWF0ZURpdih7IHRleHQ6IG1zZy5oaW50LCBjbHM6ICdzaXN5LWVtcHR5LWhpbnQnIH0pO1xuXG4gICAgaWYgKGN0YVRleHQgJiYgY3RhQ2IpIHtcbiAgICAgICAgY29uc3QgYnRuID0gZWwuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogY3RhVGV4dCwgY2xzOiAnc2lzeS1idG4gbW9kLWN0YScgfSk7XG4gICAgICAgIGJ0bi5zdHlsZS5tYXJnaW5Ub3AgPSAnMTBweCc7XG4gICAgICAgIGJ0bi5vbmNsaWNrID0gY3RhQ2I7XG4gICAgfVxuXG4gICAgcmV0dXJuIGVsO1xufVxuIiwiaW1wb3J0IHsgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xuXG4vLyBFVkVOVCBCVVMgU1lTVEVNXG5leHBvcnQgY2xhc3MgVGlueUVtaXR0ZXIge1xuICAgIHByaXZhdGUgbGlzdGVuZXJzOiB7IFtrZXk6IHN0cmluZ106IEZ1bmN0aW9uW10gfSA9IHt9O1xuXG4gICAgb24oZXZlbnQ6IHN0cmluZywgZm46IEZ1bmN0aW9uKSB7XG4gICAgICAgICh0aGlzLmxpc3RlbmVyc1tldmVudF0gPSB0aGlzLmxpc3RlbmVyc1tldmVudF0gfHwgW10pLnB1c2goZm4pO1xuICAgIH1cblxuICAgIG9mZihldmVudDogc3RyaW5nLCBmbjogRnVuY3Rpb24pIHtcbiAgICAgICAgaWYgKCF0aGlzLmxpc3RlbmVyc1tldmVudF0pIHJldHVybjtcbiAgICAgICAgdGhpcy5saXN0ZW5lcnNbZXZlbnRdID0gdGhpcy5saXN0ZW5lcnNbZXZlbnRdLmZpbHRlcihmID0+IGYgIT09IGZuKTtcbiAgICB9XG5cbiAgICB0cmlnZ2VyKGV2ZW50OiBzdHJpbmcsIGRhdGE/OiBhbnkpIHtcbiAgICAgICAgKHRoaXMubGlzdGVuZXJzW2V2ZW50XSB8fCBbXSkuZm9yRWFjaChmbiA9PiBmbihkYXRhKSk7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgQXVkaW9Db250cm9sbGVyIHtcbiAgICBhdWRpb0N0eDogQXVkaW9Db250ZXh0IHwgbnVsbCA9IG51bGw7XG4gICAgYnJvd25Ob2lzZU5vZGU6IFNjcmlwdFByb2Nlc3Nvck5vZGUgfCBudWxsID0gbnVsbDtcbiAgICBtdXRlZDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gICAgY29uc3RydWN0b3IobXV0ZWQ6IGJvb2xlYW4pIHsgdGhpcy5tdXRlZCA9IG11dGVkOyB9XG5cbiAgICBzZXRNdXRlZChtdXRlZDogYm9vbGVhbikgeyB0aGlzLm11dGVkID0gbXV0ZWQ7IH1cblxuICAgIGluaXRBdWRpbygpIHsgaWYgKCF0aGlzLmF1ZGlvQ3R4KSB0aGlzLmF1ZGlvQ3R4ID0gbmV3ICh3aW5kb3cuQXVkaW9Db250ZXh0IHx8ICh3aW5kb3cgYXMgYW55KS53ZWJraXRBdWRpb0NvbnRleHQpKCk7IH1cblxuICAgIHBsYXlUb25lKGZyZXE6IG51bWJlciwgdHlwZTogT3NjaWxsYXRvclR5cGUsIGR1cmF0aW9uOiBudW1iZXIsIHZvbDogbnVtYmVyID0gMC4xKSB7XG4gICAgICAgIGlmICh0aGlzLm11dGVkKSByZXR1cm47XG4gICAgICAgIHRoaXMuaW5pdEF1ZGlvKCk7XG4gICAgICAgIGNvbnN0IG9zYyA9IHRoaXMuYXVkaW9DdHghLmNyZWF0ZU9zY2lsbGF0b3IoKTtcbiAgICAgICAgY29uc3QgZ2FpbiA9IHRoaXMuYXVkaW9DdHghLmNyZWF0ZUdhaW4oKTtcbiAgICAgICAgb3NjLnR5cGUgPSB0eXBlO1xuICAgICAgICBvc2MuZnJlcXVlbmN5LnZhbHVlID0gZnJlcTtcbiAgICAgICAgb3NjLmNvbm5lY3QoZ2Fpbik7XG4gICAgICAgIGdhaW4uY29ubmVjdCh0aGlzLmF1ZGlvQ3R4IS5kZXN0aW5hdGlvbik7XG4gICAgICAgIG9zYy5zdGFydCgpO1xuICAgICAgICBnYWluLmdhaW4uc2V0VmFsdWVBdFRpbWUodm9sLCB0aGlzLmF1ZGlvQ3R4IS5jdXJyZW50VGltZSk7XG4gICAgICAgIGdhaW4uZ2Fpbi5leHBvbmVudGlhbFJhbXBUb1ZhbHVlQXRUaW1lKDAuMDAwMDEsIHRoaXMuYXVkaW9DdHghLmN1cnJlbnRUaW1lICsgZHVyYXRpb24pO1xuICAgICAgICBvc2Muc3RvcCh0aGlzLmF1ZGlvQ3R4IS5jdXJyZW50VGltZSArIGR1cmF0aW9uKTtcbiAgICB9XG5cbiAgICBwbGF5U291bmQodHlwZTogXCJzdWNjZXNzXCJ8XCJmYWlsXCJ8XCJkZWF0aFwifFwiY2xpY2tcInxcImhlYXJ0YmVhdFwifFwibWVkaXRhdGVcIikge1xuICAgICAgICBpZiAodHlwZSA9PT0gXCJzdWNjZXNzXCIpIHsgdGhpcy5wbGF5VG9uZSg2MDAsIFwic2luZVwiLCAwLjEpOyBzZXRUaW1lb3V0KCgpID0+IHRoaXMucGxheVRvbmUoODAwLCBcInNpbmVcIiwgMC4yKSwgMTAwKTsgfVxuICAgICAgICBlbHNlIGlmICh0eXBlID09PSBcImZhaWxcIikgeyB0aGlzLnBsYXlUb25lKDE1MCwgXCJzYXd0b290aFwiLCAwLjQpOyBzZXRUaW1lb3V0KCgpID0+IHRoaXMucGxheVRvbmUoMTAwLCBcInNhd3Rvb3RoXCIsIDAuNCksIDE1MCk7IH1cbiAgICAgICAgZWxzZSBpZiAodHlwZSA9PT0gXCJkZWF0aFwiKSB7IHRoaXMucGxheVRvbmUoNTAsIFwic3F1YXJlXCIsIDEuMCk7IH1cbiAgICAgICAgZWxzZSBpZiAodHlwZSA9PT0gXCJjbGlja1wiKSB7IHRoaXMucGxheVRvbmUoODAwLCBcInNpbmVcIiwgMC4wNSk7IH1cbiAgICAgICAgZWxzZSBpZiAodHlwZSA9PT0gXCJoZWFydGJlYXRcIikgeyB0aGlzLnBsYXlUb25lKDYwLCBcInNpbmVcIiwgMC4xLCAwLjUpOyBzZXRUaW1lb3V0KCgpPT50aGlzLnBsYXlUb25lKDUwLCBcInNpbmVcIiwgMC4xLCAwLjQpLCAxNTApOyB9XG4gICAgICAgIGVsc2UgaWYgKHR5cGUgPT09IFwibWVkaXRhdGVcIikgeyB0aGlzLnBsYXlUb25lKDQzMiwgXCJzaW5lXCIsIDIuMCwgMC4wNSk7IH1cbiAgICB9XG5cbiAgICB0b2dnbGVCcm93bk5vaXNlKCkge1xuICAgICAgICB0aGlzLmluaXRBdWRpbygpO1xuICAgICAgICBpZiAodGhpcy5icm93bk5vaXNlTm9kZSkgeyBcbiAgICAgICAgICAgIHRoaXMuYnJvd25Ob2lzZU5vZGUuZGlzY29ubmVjdCgpOyBcbiAgICAgICAgICAgIHRoaXMuYnJvd25Ob2lzZU5vZGUgPSBudWxsOyBcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJGb2N1cyBBdWRpbzogT0ZGXCIpOyBcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGJ1ZmZlclNpemUgPSA0MDk2OyBcbiAgICAgICAgICAgIHRoaXMuYnJvd25Ob2lzZU5vZGUgPSB0aGlzLmF1ZGlvQ3R4IS5jcmVhdGVTY3JpcHRQcm9jZXNzb3IoYnVmZmVyU2l6ZSwgMSwgMSk7XG4gICAgICAgICAgICBsZXQgbGFzdE91dCA9IDA7XG4gICAgICAgICAgICB0aGlzLmJyb3duTm9pc2VOb2RlLm9uYXVkaW9wcm9jZXNzID0gKGUpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBvdXRwdXQgPSBlLm91dHB1dEJ1ZmZlci5nZXRDaGFubmVsRGF0YSgwKTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJ1ZmZlclNpemU7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB3aGl0ZSA9IE1hdGgucmFuZG9tKCkgKiAyIC0gMTsgXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dFtpXSA9IChsYXN0T3V0ICsgKDAuMDIgKiB3aGl0ZSkpIC8gMS4wMjsgXG4gICAgICAgICAgICAgICAgICAgIGxhc3RPdXQgPSBvdXRwdXRbaV07IFxuICAgICAgICAgICAgICAgICAgICBvdXRwdXRbaV0gKj0gMC4xOyBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5icm93bk5vaXNlTm9kZS5jb25uZWN0KHRoaXMuYXVkaW9DdHghLmRlc3RpbmF0aW9uKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJGb2N1cyBBdWRpbzogT04gKEJyb3duIE5vaXNlKVwiKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7IEFwcCwgTW9kYWwsIFNldHRpbmcsIE5vdGljZSwgbW9tZW50LCBURmlsZSwgVEZvbGRlciB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCBTaXN5cGh1c1BsdWdpbiBmcm9tICcuLi9tYWluJztcbmltcG9ydCB7IE1vZGlmaWVyIH0gZnJvbSAnLi4vdHlwZXMnO1xuXG5leHBvcnQgY2xhc3MgQ2hhb3NNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgICBtb2RpZmllcjogTW9kaWZpZXI7XG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIG06IE1vZGlmaWVyKSB7IHN1cGVyKGFwcCk7IHRoaXMubW9kaWZpZXIgPSBtOyB9XG4gICAgb25PcGVuKCkge1xuICAgICAgICBjb25zdCBjID0gdGhpcy5jb250ZW50RWw7XG4gICAgICAgIGNvbnN0IGgxID0gYy5jcmVhdGVFbChcImgxXCIsIHsgdGV4dDogXCJUSEUgT01FTlwiIH0pO1xuICAgICAgICBoMS5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcInRleHQtYWxpZ246Y2VudGVyOyBjb2xvcjojZjU1O1wiKTtcbiAgICAgICAgY29uc3QgaWMgPSBjLmNyZWF0ZUVsKFwiZGl2XCIsIHsgdGV4dDogdGhpcy5tb2RpZmllci5pY29uIH0pO1xuICAgICAgICBpYy5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcImZvbnQtc2l6ZTo4MHB4OyB0ZXh0LWFsaWduOmNlbnRlcjtcIik7XG4gICAgICAgIGNvbnN0IGgyID0gYy5jcmVhdGVFbChcImgyXCIsIHsgdGV4dDogdGhpcy5tb2RpZmllci5uYW1lIH0pO1xuICAgICAgICBoMi5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcInRleHQtYWxpZ246Y2VudGVyO1wiKTtcbiAgICAgICAgY29uc3QgcCA9IGMuY3JlYXRlRWwoXCJwXCIsIHsgdGV4dDogdGhpcy5tb2RpZmllci5kZXNjIH0pO1xuICAgICAgICBwLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIFwidGV4dC1hbGlnbjpjZW50ZXJcIik7XG4gICAgICAgIGNvbnN0IGIgPSBjLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJBY2tub3dsZWRnZVwiIH0pO1xuICAgICAgICBiLmFkZENsYXNzKFwibW9kLWN0YVwiKTtcbiAgICAgICAgYi5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xuICAgICAgICBiLnN0eWxlLm1hcmdpbiA9IFwiMjBweCBhdXRvXCI7XG4gICAgICAgIGIub25jbGljayA9ICgpID0+IHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gICAgb25DbG9zZSgpIHsgdGhpcy5jb250ZW50RWwuZW1wdHkoKTsgfVxufVxuXG5leHBvcnQgY2xhc3MgU2hvcE1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICAgIHBsdWdpbjogU2lzeXBodXNQbHVnaW47XG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogU2lzeXBodXNQbHVnaW4pIHsgc3VwZXIoYXBwKTsgdGhpcy5wbHVnaW4gPSBwbHVnaW47IH1cblxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbChcImgyXCIsIHsgdGV4dDogXCLwn5uSIEJMQUNLIE1BUktFVFwiIH0pO1xuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoXCJwXCIsIHsgdGV4dDogYFB1cnNlOiDwn6qZICR7dGhpcy5wbHVnaW4uc2V0dGluZ3MuZ29sZH1gIH0pO1xuXG4gICAgICAgIC8vIDEuIFN0YW5kYXJkIEl0ZW1zXG4gICAgICAgIHRoaXMuaXRlbShjb250ZW50RWwsIFwi8J+SiSBTdGltcGFja1wiLCBcIkhlYWwgMjAgSFBcIiwgNTAsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmhwID0gTWF0aC5taW4odGhpcy5wbHVnaW4uc2V0dGluZ3MubWF4SHAsIHRoaXMucGx1Z2luLnNldHRpbmdzLmhwICsgMjApO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5pdGVtKGNvbnRlbnRFbCwgXCLwn5KjIFNhYm90YWdlXCIsIFwiLTUgUml2YWwgRG1nXCIsIDIwMCwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Mucml2YWxEbWcgPSBNYXRoLm1heCg1LCB0aGlzLnBsdWdpbi5zZXR0aW5ncy5yaXZhbERtZyAtIDUpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5pdGVtKGNvbnRlbnRFbCwgXCLwn5uh77iPIFNoaWVsZFwiLCBcIjI0aCBQcm90ZWN0aW9uXCIsIDE1MCwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hpZWxkZWRVbnRpbCA9IG1vbWVudCgpLmFkZCgyNCwgJ2hvdXJzJykudG9JU09TdHJpbmcoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuaXRlbShjb250ZW50RWwsIFwi8J+YtCBSZXN0IERheVwiLCBcIlNhZmUgZm9yIDI0aFwiLCAxMDAsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnJlc3REYXlVbnRpbCA9IG1vbWVudCgpLmFkZCgyNCwgJ2hvdXJzJykudG9JU09TdHJpbmcoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gMi4gUG93ZXItVXBzXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbChcImgzXCIsIHsgdGV4dDogXCLwn6eqIEFMQ0hFTVlcIiB9KTtcbiAgICAgICAgY29uc3QgYnVmZnMgPSBbXG4gICAgICAgICAgICB7IGlkOiBcImZvY3VzX3BvdGlvblwiLCBuYW1lOiBcIkZvY3VzIFBvdGlvblwiLCBpY29uOiBcIvCfp6pcIiwgZGVzYzogXCIyeCBYUCAoMWgpXCIsIGNvc3Q6IDEwMCwgZHVyYXRpb246IDYwLCBlZmZlY3Q6IHsgeHBNdWx0OiAyIH0gfSxcbiAgICAgICAgICAgIHsgaWQ6IFwibWlkYXNfdG91Y2hcIiwgbmFtZTogXCJNaWRhcyBUb3VjaFwiLCBpY29uOiBcIuKcqFwiLCBkZXNjOiBcIjN4IEdvbGQgKDMwbSlcIiwgY29zdDogMTUwLCBkdXJhdGlvbjogMzAsIGVmZmVjdDogeyBnb2xkTXVsdDogMyB9IH0sXG4gICAgICAgICAgICB7IGlkOiBcImlyb25fd2lsbFwiLCBuYW1lOiBcIklyb24gV2lsbFwiLCBpY29uOiBcIvCfm6HvuI9cIiwgZGVzYzogXCI1MCUgRG1nIFJlZHVjdCAoMmgpXCIsIGNvc3Q6IDIwMCwgZHVyYXRpb246IDEyMCwgZWZmZWN0OiB7IGRhbWFnZU11bHQ6IDAuNSB9IH1cbiAgICAgICAgXTtcblxuICAgICAgICBidWZmcy5mb3JFYWNoKGJ1ZmYgPT4ge1xuICAgICAgICAgICAgdGhpcy5pdGVtKGNvbnRlbnRFbCwgYCR7YnVmZi5pY29ufSAke2J1ZmYubmFtZX1gLCBidWZmLmRlc2MsIGJ1ZmYuY29zdCwgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLmVuZ2luZS5hY3RpdmF0ZUJ1ZmYoYnVmZik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgaXRlbShlbDogSFRNTEVsZW1lbnQsIG5hbWU6IHN0cmluZywgZGVzYzogc3RyaW5nLCBiYXNlQ29zdDogbnVtYmVyLCBlZmZlY3Q6ICgpID0+IFByb21pc2U8dm9pZD4pIHtcbiAgICAgICAgLy8gW0ZJWF0gQXBwbHkgSW5mbGF0aW9uIE11bHRpcGxpZXJcbiAgICAgICAgY29uc3QgbXVsdCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmRhaWx5TW9kaWZpZXIucHJpY2VNdWx0IHx8IDE7XG4gICAgICAgIGNvbnN0IHJlYWxDb3N0ID0gTWF0aC5jZWlsKGJhc2VDb3N0ICogbXVsdCk7XG5cbiAgICAgICAgY29uc3QgYyA9IGVsLmNyZWF0ZURpdigpO1xuICAgICAgICBjLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIFwiZGlzcGxheTpmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjsgcGFkZGluZzoxMHB4IDA7IGJvcmRlci1ib3R0b206MXB4IHNvbGlkICMzMzM7XCIpO1xuICAgICAgICBjb25zdCBpID0gYy5jcmVhdGVEaXYoKTtcbiAgICAgICAgaS5jcmVhdGVFbChcImJcIiwgeyB0ZXh0OiBuYW1lIH0pO1xuXG4gICAgICAgIC8vIFNob3cgaW5mbGF0ZWQgcHJpY2Ugd2FybmluZyBpZiBhcHBsaWNhYmxlXG4gICAgICAgIGlmIChtdWx0ID4gMSkge1xuICAgICAgICAgICAgaS5jcmVhdGVFbChcInNwYW5cIiwgeyB0ZXh0OiBgICjwn5OIIEluZjogJHttdWx0fXgpYCwgYXR0cjogeyBzdHlsZTogXCJjb2xvcjogcmVkOyBmb250LXNpemU6IDAuOGVtO1wiIH0gfSk7XG4gICAgICAgIH1cblxuICAgICAgICBpLmNyZWF0ZUVsKFwiZGl2XCIsIHsgdGV4dDogZGVzYyB9KTtcbiAgICAgICAgY29uc3QgYiA9IGMuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBgJHtyZWFsQ29zdH0gR2AgfSk7XG5cbiAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmdvbGQgPCByZWFsQ29zdCkge1xuICAgICAgICAgICAgYi5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCBcInRydWVcIik7IGIuc3R5bGUub3BhY2l0eSA9IFwiMC41XCI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBiLmFkZENsYXNzKFwibW9kLWN0YVwiKTtcbiAgICAgICAgICAgIGIub25jbGljayA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5nb2xkIC09IHJlYWxDb3N0O1xuICAgICAgICAgICAgICAgIGF3YWl0IGVmZmVjdCgpO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmVuZ2luZS5zYXZlKCk7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShgQm91Z2h0ICR7bmFtZX0gZm9yICR7cmVhbENvc3R9Z2ApO1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICBuZXcgU2hvcE1vZGFsKHRoaXMuYXBwLCB0aGlzLnBsdWdpbikub3BlbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIG9uQ2xvc2UoKSB7IHRoaXMuY29udGVudEVsLmVtcHR5KCk7IH1cbn1cblxuZXhwb3J0IGNsYXNzIFF1ZXN0TW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gICAgcGx1Z2luOiBTaXN5cGh1c1BsdWdpbjtcbiAgICBuYW1lOiBzdHJpbmc7IGRpZmZpY3VsdHk6IG51bWJlciA9IDM7IHNraWxsOiBzdHJpbmcgPSBcIk5vbmVcIjsgc2VjU2tpbGw6IHN0cmluZyA9IFwiTm9uZVwiOyBkZWFkbGluZTogc3RyaW5nID0gXCJcIjsgaGlnaFN0YWtlczogYm9vbGVhbiA9IGZhbHNlOyBpc0Jvc3M6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBTaXN5cGh1c1BsdWdpbikgeyBzdXBlcihhcHApOyB0aGlzLnBsdWdpbiA9IHBsdWdpbjsgfVxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbChcImgyXCIsIHsgdGV4dDogXCLimpTvuI8gREVQTE9ZTUVOVFwiIH0pO1xuICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpLnNldE5hbWUoXCJPYmplY3RpdmVcIikuYWRkVGV4dCh0ID0+IHsgdC5vbkNoYW5nZSh2ID0+IHRoaXMubmFtZSA9IHYpOyBzZXRUaW1lb3V0KCgpID0+IHQuaW5wdXRFbC5mb2N1cygpLCA1MCk7IH0pO1xuICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpLnNldE5hbWUoXCJEaWZmaWN1bHR5XCIpLmFkZERyb3Bkb3duKGQgPT4gZC5hZGRPcHRpb24oXCIxXCIsIFwiVHJpdmlhbFwiKS5hZGRPcHRpb24oXCIyXCIsIFwiRWFzeVwiKS5hZGRPcHRpb24oXCIzXCIsIFwiTWVkaXVtXCIpLmFkZE9wdGlvbihcIjRcIiwgXCJIYXJkXCIpLmFkZE9wdGlvbihcIjVcIiwgXCJTVUlDSURFXCIpLnNldFZhbHVlKFwiM1wiKS5vbkNoYW5nZSh2ID0+IHRoaXMuZGlmZmljdWx0eSA9IHBhcnNlSW50KHYpKSk7XG4gICAgICAgIGNvbnN0IHNraWxsczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHsgXCJOb25lXCI6IFwiTm9uZVwiIH07XG4gICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnNraWxscy5mb3JFYWNoKHMgPT4gc2tpbGxzW3MubmFtZV0gPSBzLm5hbWUpO1xuICAgICAgICBza2lsbHNbXCIrIE5ld1wiXSA9IFwiKyBOZXdcIjtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKS5zZXROYW1lKFwiUHJpbWFyeSBOb2RlXCIpLmFkZERyb3Bkb3duKGQgPT4gZC5hZGRPcHRpb25zKHNraWxscykub25DaGFuZ2UodiA9PiB7IGlmICh2ID09PSBcIisgTmV3XCIpIHsgdGhpcy5jbG9zZSgpOyBuZXcgU2tpbGxNYW5hZ2VyTW9kYWwodGhpcy5hcHAsIHRoaXMucGx1Z2luKS5vcGVuKCk7IH0gZWxzZSB0aGlzLnNraWxsID0gdjsgfSkpO1xuICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpLnNldE5hbWUoXCJTeW5lcmd5IE5vZGVcIikuYWRkRHJvcGRvd24oZCA9PiBkLmFkZE9wdGlvbnMoc2tpbGxzKS5zZXRWYWx1ZShcIk5vbmVcIikub25DaGFuZ2UodiA9PiB0aGlzLnNlY1NraWxsID0gdikpO1xuICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpLnNldE5hbWUoXCJEZWFkbGluZVwiKS5hZGRUZXh0KHQgPT4geyB0LmlucHV0RWwudHlwZSA9IFwiZGF0ZXRpbWUtbG9jYWxcIjsgdC5vbkNoYW5nZSh2ID0+IHRoaXMuZGVhZGxpbmUgPSB2KTsgfSk7XG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbCkuc2V0TmFtZShcIkhpZ2ggU3Rha2VzXCIpLnNldERlc2MoXCJEb3VibGUgR29sZCAvIERvdWJsZSBEYW1hZ2VcIikuYWRkVG9nZ2xlKHQgPT4gdC5zZXRWYWx1ZShmYWxzZSkub25DaGFuZ2UodiA9PiB0aGlzLmhpZ2hTdGFrZXMgPSB2KSk7XG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbCkuYWRkQnV0dG9uKGIgPT4gYi5zZXRCdXR0b25UZXh0KFwiRGVwbG95XCIpLnNldEN0YSgpLm9uQ2xpY2soKCkgPT4geyBpZiAodGhpcy5uYW1lKSB7IHRoaXMucGx1Z2luLmVuZ2luZS5jcmVhdGVRdWVzdCh0aGlzLm5hbWUsIHRoaXMuZGlmZmljdWx0eSwgdGhpcy5za2lsbCwgdGhpcy5zZWNTa2lsbCwgdGhpcy5kZWFkbGluZSwgdGhpcy5oaWdoU3Rha2VzLCBcIk5vcm1hbFwiLCB0aGlzLmlzQm9zcyk7IHRoaXMuY2xvc2UoKTsgfSB9KSk7XG4gICAgfVxuICAgIG9uQ2xvc2UoKSB7IHRoaXMuY29udGVudEVsLmVtcHR5KCk7IH1cbn1cblxuZXhwb3J0IGNsYXNzIFNraWxsTWFuYWdlck1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICAgIHBsdWdpbjogU2lzeXBodXNQbHVnaW47XG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogU2lzeXBodXNQbHVnaW4pIHsgc3VwZXIoYXBwKTsgdGhpcy5wbHVnaW4gPSBwbHVnaW47IH1cbiAgICBvbk9wZW4oKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoXCJoMlwiLCB7IHRleHQ6IFwiQWRkIE5ldyBOb2RlXCIgfSk7XG4gICAgICAgIGxldCBuID0gXCJcIjtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKS5zZXROYW1lKFwiTm9kZSBOYW1lXCIpLmFkZFRleHQodCA9PiB0Lm9uQ2hhbmdlKHYgPT4gbiA9IHYpKS5hZGRCdXR0b24oYiA9PiBiLnNldEJ1dHRvblRleHQoXCJDcmVhdGVcIikuc2V0Q3RhKCkub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBpZiAobikgeyB0aGlzLnBsdWdpbi5zZXR0aW5ncy5za2lsbHMucHVzaCh7IG5hbWU6IG4sIGxldmVsOiAxLCB4cDogMCwgeHBSZXE6IDUsIGxhc3RVc2VkOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksIHJ1c3Q6IDAsIGNvbm5lY3Rpb25zOiBbXSB9KTsgYXdhaXQgdGhpcy5wbHVnaW4uZW5naW5lLnNhdmUoKTsgdGhpcy5jbG9zZSgpOyB9XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgb25DbG9zZSgpIHsgdGhpcy5jb250ZW50RWwuZW1wdHkoKTsgfVxufVxuXG5leHBvcnQgY2xhc3MgU2tpbGxEZXRhaWxNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgICBwbHVnaW46IFNpc3lwaHVzUGx1Z2luOyBpbmRleDogbnVtYmVyO1xuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IFNpc3lwaHVzUGx1Z2luLCBpbmRleDogbnVtYmVyKSB7IHN1cGVyKGFwcCk7IHRoaXMucGx1Z2luID0gcGx1Z2luOyB0aGlzLmluZGV4ID0gaW5kZXg7IH1cbiAgICBvbk9wZW4oKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb25zdCBzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2tpbGxzW3RoaXMuaW5kZXhdO1xuICAgICAgICBpZiAoIXMpIHsgY29udGVudEVsLmNyZWF0ZUVsKFwicFwiLCB7IHRleHQ6IFwiU2tpbGwgbm90IGZvdW5kLlwiIH0pOyByZXR1cm47IH1cbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKFwiaDJcIiwgeyB0ZXh0OiBgTm9kZTogJHtzLm5hbWV9YCB9KTtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKS5zZXROYW1lKFwiTmFtZVwiKS5hZGRUZXh0KHQgPT4gdC5zZXRWYWx1ZShzLm5hbWUpLm9uQ2hhbmdlKHYgPT4gcy5uYW1lID0gdikpO1xuICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpLnNldE5hbWUoXCJSdXN0IFN0YXR1c1wiKS5zZXREZXNjKGBTdGFja3M6ICR7cy5ydXN0fWApLmFkZEJ1dHRvbihiID0+IGIuc2V0QnV0dG9uVGV4dChcIk1hbnVhbCBQb2xpc2hcIikub25DbGljayhhc3luYyAoKSA9PiB7IHMucnVzdCA9IDA7IHMueHBSZXEgPSBNYXRoLmZsb29yKHMueHBSZXEgLyAxLjEpOyBhd2FpdCB0aGlzLnBsdWdpbi5lbmdpbmUuc2F2ZSgpOyB0aGlzLmNsb3NlKCk7IG5ldyBOb3RpY2UoXCJSdXN0IHBvbGlzaGVkLlwiKTsgfSkpO1xuICAgICAgICBjb25zdCBkaXYgPSBjb250ZW50RWwuY3JlYXRlRGl2KCk7IGRpdi5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcIm1hcmdpbi10b3A6MjBweDsgZGlzcGxheTpmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjtcIik7XG4gICAgICAgIGNvbnN0IGJTYXZlID0gZGl2LmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJTYXZlXCIgfSk7IGJTYXZlLmFkZENsYXNzKFwibW9kLWN0YVwiKTsgYlNhdmUub25jbGljayA9IGFzeW5jICgpID0+IHsgYXdhaXQgdGhpcy5wbHVnaW4uZW5naW5lLnNhdmUoKTsgdGhpcy5jbG9zZSgpOyB9O1xuICAgICAgICBjb25zdCBiRGVsID0gZGl2LmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJEZWxldGUgTm9kZVwiIH0pOyBiRGVsLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIFwiY29sb3I6cmVkO1wiKTsgYkRlbC5vbmNsaWNrID0gYXN5bmMgKCkgPT4geyB0aGlzLnBsdWdpbi5zZXR0aW5ncy5za2lsbHMuc3BsaWNlKHRoaXMuaW5kZXgsIDEpOyBhd2FpdCB0aGlzLnBsdWdpbi5lbmdpbmUuc2F2ZSgpOyB0aGlzLmNsb3NlKCk7IH07XG4gICAgfVxuICAgIG9uQ2xvc2UoKSB7IHRoaXMuY29udGVudEVsLmVtcHR5KCk7IH1cbn1cblxuZXhwb3J0IGNsYXNzIFF1aWNrQ2FwdHVyZU1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICAgIHBsdWdpbjogU2lzeXBodXNQbHVnaW47XG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogU2lzeXBodXNQbHVnaW4pIHsgc3VwZXIoYXBwKTsgdGhpcy5wbHVnaW4gPSBwbHVnaW47IH1cbiAgICBvbk9wZW4oKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoXCJoMlwiLCB7IHRleHQ6IFwi4pqhIFF1aWNrIENhcHR1cmVcIiB9KTtcbiAgICAgICAgY29uc3QgZGl2ID0gY29udGVudEVsLmNyZWF0ZURpdigpO1xuICAgICAgICBjb25zdCBpbnB1dCA9IGRpdi5jcmVhdGVFbChcImlucHV0XCIsIHsgdHlwZTogXCJ0ZXh0XCIsIGF0dHI6IHsgcGxhY2Vob2xkZXI6IFwiV2hhdCdzIG9uIHlvdXIgbWluZD9cIiwgc3R5bGU6IFwid2lkdGg6IDEwMCU7IHBhZGRpbmc6IDEwcHg7IGZvbnQtc2l6ZTogMS4yZW07IGJhY2tncm91bmQ6ICMyMjI7IGJvcmRlcjogMXB4IHNvbGlkICM0NDQ7IGNvbG9yOiAjZTBlMGUwO1wiIH0gfSk7XG4gICAgICAgIGlucHV0LmZvY3VzKCk7XG4gICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlwcmVzc1wiLCBhc3luYyAoZSkgPT4geyBpZiAoZS5rZXkgPT09IFwiRW50ZXJcIiAmJiBpbnB1dC52YWx1ZS50cmltKCkubGVuZ3RoID4gMCkgeyBhd2FpdCB0aGlzLnBsdWdpbi5lbmdpbmUuY3JlYXRlU2NyYXAoaW5wdXQudmFsdWUpOyB0aGlzLmNsb3NlKCk7IH0gfSk7XG4gICAgICAgIGNvbnN0IGJ0biA9IGNvbnRlbnRFbC5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQ2FwdHVyZSB0byBTY3JhcHNcIiB9KTtcbiAgICAgICAgYnRuLmFkZENsYXNzKFwibW9kLWN0YVwiKTtcbiAgICAgICAgYnRuLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIFwibWFyZ2luLXRvcDogMTVweDsgd2lkdGg6IDEwMCU7XCIpO1xuICAgICAgICBidG4ub25jbGljayA9IGFzeW5jICgpID0+IHsgaWYgKGlucHV0LnZhbHVlLnRyaW0oKS5sZW5ndGggPiAwKSB7IGF3YWl0IHRoaXMucGx1Z2luLmVuZ2luZS5jcmVhdGVTY3JhcChpbnB1dC52YWx1ZSk7IHRoaXMuY2xvc2UoKTsgfSB9O1xuICAgIH1cbiAgICBvbkNsb3NlKCkgeyB0aGlzLmNvbnRlbnRFbC5lbXB0eSgpOyB9XG59XG5cbmV4cG9ydCBjbGFzcyBRdWVzdFRlbXBsYXRlTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gICAgcGx1Z2luOiBTaXN5cGh1c1BsdWdpbjtcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBTaXN5cGh1c1BsdWdpbikgeyBzdXBlcihhcHApOyB0aGlzLnBsdWdpbiA9IHBsdWdpbjsgfVxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbChcImgyXCIsIHsgdGV4dDogXCLimqEgUXVpY2sgRGVwbG95IFRlbXBsYXRlc1wiIH0pO1xuICAgICAgICBjb25zdCBncmlkID0gY29udGVudEVsLmNyZWF0ZURpdigpO1xuICAgICAgICBncmlkLnN0eWxlLmRpc3BsYXkgPSBcImdyaWRcIjsgZ3JpZC5zdHlsZS5ncmlkVGVtcGxhdGVDb2x1bW5zID0gXCIxZnIgMWZyXCI7IGdyaWQuc3R5bGUuZ2FwID0gXCIxMHB4XCI7XG4gICAgICAgIGNvbnN0IHRlbXBsYXRlcyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnF1ZXN0VGVtcGxhdGVzIHx8IFtdO1xuICAgICAgICBpZiAodGVtcGxhdGVzLmxlbmd0aCA9PT0gMCkgZ3JpZC5jcmVhdGVEaXYoeyB0ZXh0OiBcIk5vIHRlbXBsYXRlcyBmb3VuZC4gQ3JlYXRlIG9uZSBpbiBTZXR0aW5ncy5cIiB9KTtcbiAgICAgICAgdGVtcGxhdGVzLmZvckVhY2godGVtcGxhdGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgYnRuID0gZ3JpZC5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IHRlbXBsYXRlLm5hbWUgfSk7XG4gICAgICAgICAgICBidG4uYWRkQ2xhc3MoXCJzaXN5LWJ0blwiKTsgYnRuLnN0eWxlLnRleHRBbGlnbiA9IFwibGVmdFwiOyBidG4uc3R5bGUucGFkZGluZyA9IFwiMTVweFwiO1xuICAgICAgICAgICAgYnRuLmNyZWF0ZURpdih7IHRleHQ6IGBEaWZmOiAke3RlbXBsYXRlLmRpZmZ9IHwgU2tpbGw6ICR7dGVtcGxhdGUuc2tpbGx9YCwgYXR0cjogeyBzdHlsZTogXCJmb250LXNpemU6IDAuOGVtOyBvcGFjaXR5OiAwLjc7IG1hcmdpbi10b3A6IDVweDtcIiB9IH0pO1xuICAgICAgICAgICAgYnRuLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IGRlYWRsaW5lID0gXCJcIjtcbiAgICAgICAgICAgICAgICBpZiAodGVtcGxhdGUuZGVhZGxpbmUuc3RhcnRzV2l0aChcIitcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmF3ID0gdGVtcGxhdGUuZGVhZGxpbmUucmVwbGFjZSgvXlxcK1xccyovLCBcIlwiKS5yZXBsYWNlKC9cXHMqaChvdXIpP3M/JC9pLCBcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaG91cnMgPSBwYXJzZUludChyYXcsIDEwKTtcbiAgICAgICAgICAgICAgICAgICAgZGVhZGxpbmUgPSBpc05hTihob3VycykgfHwgaG91cnMgPCAwXG4gICAgICAgICAgICAgICAgICAgICAgICA/IG1vbWVudCgpLmFkZCgyNCwgJ2hvdXJzJykudG9JU09TdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgICAgICAgOiBtb21lbnQoKS5hZGQoaG91cnMsICdob3VycycpLnRvSVNPU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0ZW1wbGF0ZS5kZWFkbGluZS5pbmNsdWRlcyhcIjpcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgW2gsIG1dID0gdGVtcGxhdGUuZGVhZGxpbmUuc3BsaXQoXCI6XCIpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBob3VyID0gcGFyc2VJbnQoaCwgMTApIHx8IDA7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1pbnV0ZSA9IHBhcnNlSW50KG0sIDEwKSB8fCAwO1xuICAgICAgICAgICAgICAgICAgICBkZWFkbGluZSA9IG1vbWVudCgpLnNldCh7IGhvdXIsIG1pbnV0ZSB9KS50b0lTT1N0cmluZygpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobW9tZW50KCkuaXNBZnRlcihkZWFkbGluZSkpIGRlYWRsaW5lID0gbW9tZW50KGRlYWRsaW5lKS5hZGQoMSwgJ2RheScpLnRvSVNPU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZGVhZGxpbmUgPSBtb21lbnQoKS5hZGQoMjQsICdob3VycycpLnRvSVNPU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLmVuZ2luZS5jcmVhdGVRdWVzdCh0ZW1wbGF0ZS5uYW1lLCB0ZW1wbGF0ZS5kaWZmLCB0ZW1wbGF0ZS5za2lsbCwgXCJOb25lXCIsIGRlYWRsaW5lLCBmYWxzZSwgXCJOb3JtYWxcIiwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYERlcGxveWVkOiAke3RlbXBsYXRlLm5hbWV9YCk7XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIG9uQ2xvc2UoKSB7IHRoaXMuY29udGVudEVsLmVtcHR5KCk7IH1cbn1cblxuZXhwb3J0IGNsYXNzIFJlc2VhcmNoUXVlc3RNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgICBwbHVnaW46IFNpc3lwaHVzUGx1Z2luOyB0aXRsZTogc3RyaW5nID0gXCJcIjsgdHlwZTogXCJzdXJ2ZXlcIiB8IFwiZGVlcF9kaXZlXCIgPSBcInN1cnZleVwiOyBsaW5rZWRTa2lsbDogc3RyaW5nID0gXCJOb25lXCI7IGxpbmtlZENvbWJhdFF1ZXN0OiBzdHJpbmcgPSBcIk5vbmVcIjtcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBTaXN5cGh1c1BsdWdpbikgeyBzdXBlcihhcHApOyB0aGlzLnBsdWdpbiA9IHBsdWdpbjsgfVxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7IGNvbnRlbnRFbC5jcmVhdGVFbChcImgyXCIsIHsgdGV4dDogXCJSRVNFQVJDSCBERVBMT1lNRU5UXCIgfSk7XG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbCkuc2V0TmFtZShcIlJlc2VhcmNoIFRpdGxlXCIpLmFkZFRleHQodCA9PiB7IHQub25DaGFuZ2UodiA9PiB0aGlzLnRpdGxlID0gdik7IHNldFRpbWVvdXQoKCkgPT4gdC5pbnB1dEVsLmZvY3VzKCksIDUwKTsgfSk7XG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbCkuc2V0TmFtZShcIlJlc2VhcmNoIFR5cGVcIikuYWRkRHJvcGRvd24oZCA9PiBkLmFkZE9wdGlvbihcInN1cnZleVwiLCBcIlN1cnZleSAoMTAwLTIwMCB3b3JkcylcIikuYWRkT3B0aW9uKFwiZGVlcF9kaXZlXCIsIFwiRGVlcCBEaXZlICgyMDAtNDAwIHdvcmRzKVwiKS5zZXRWYWx1ZShcInN1cnZleVwiKS5vbkNoYW5nZSh2ID0+IHRoaXMudHlwZSA9IHYgYXMgXCJzdXJ2ZXlcIiB8IFwiZGVlcF9kaXZlXCIpKTtcbiAgICAgICAgY29uc3Qgc2tpbGxzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0geyBcIk5vbmVcIjogXCJOb25lXCIgfTsgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2tpbGxzLmZvckVhY2gocyA9PiBza2lsbHNbcy5uYW1lXSA9IHMubmFtZSk7XG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbCkuc2V0TmFtZShcIkxpbmtlZCBTa2lsbFwiKS5hZGREcm9wZG93bihkID0+IGQuYWRkT3B0aW9ucyhza2lsbHMpLnNldFZhbHVlKFwiTm9uZVwiKS5vbkNoYW5nZSh2ID0+IHRoaXMubGlua2VkU2tpbGwgPSB2KSk7XG4gICAgICAgIGNvbnN0IGNvbWJhdFF1ZXN0czogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHsgXCJOb25lXCI6IFwiTm9uZVwiIH07XG4gICAgICAgIGNvbnN0IHF1ZXN0Rm9sZGVyID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKFwiQWN0aXZlX1J1bi9RdWVzdHNcIik7XG4gICAgICAgIGlmIChxdWVzdEZvbGRlciBpbnN0YW5jZW9mIFRGb2xkZXIpIHsgcXVlc3RGb2xkZXIuY2hpbGRyZW4uZm9yRWFjaChmID0+IHsgaWYgKGYgaW5zdGFuY2VvZiBURmlsZSAmJiBmLmV4dGVuc2lvbiA9PT0gXCJtZFwiKSBjb21iYXRRdWVzdHNbZi5iYXNlbmFtZV0gPSBmLmJhc2VuYW1lOyB9KTsgfVxuICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpLnNldE5hbWUoXCJMaW5rIENvbWJhdCBRdWVzdFwiKS5hZGREcm9wZG93bihkID0+IGQuYWRkT3B0aW9ucyhjb21iYXRRdWVzdHMpLnNldFZhbHVlKFwiTm9uZVwiKS5vbkNoYW5nZSh2ID0+IHRoaXMubGlua2VkQ29tYmF0UXVlc3QgPSB2KSk7XG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbCkuYWRkQnV0dG9uKGIgPT4gYi5zZXRCdXR0b25UZXh0KFwiQ1JFQVRFIFJFU0VBUkNIXCIpLnNldEN0YSgpLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLnRpdGxlKSByZXR1cm47XG4gICAgICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLnBsdWdpbi5lbmdpbmUuY3JlYXRlUmVzZWFyY2hRdWVzdCh0aGlzLnRpdGxlLCB0aGlzLnR5cGUsIHRoaXMubGlua2VkU2tpbGwsIHRoaXMubGlua2VkQ29tYmF0UXVlc3QpO1xuICAgICAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgb25DbG9zZSgpIHsgdGhpcy5jb250ZW50RWwuZW1wdHkoKTsgfVxufVxuXG5leHBvcnQgY2xhc3MgUmVzZWFyY2hMaXN0TW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gICAgcGx1Z2luOiBTaXN5cGh1c1BsdWdpbjtcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBTaXN5cGh1c1BsdWdpbikgeyBzdXBlcihhcHApOyB0aGlzLnBsdWdpbiA9IHBsdWdpbjsgfVxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7IGNvbnRlbnRFbC5jcmVhdGVFbChcImgyXCIsIHsgdGV4dDogXCJSRVNFQVJDSCBMSUJSQVJZXCIgfSk7XG4gICAgICAgIGNvbnN0IHN0YXRzID0gdGhpcy5wbHVnaW4uZW5naW5lLmdldFJlc2VhcmNoUmF0aW8oKTtcbiAgICAgICAgY29uc3Qgc3RhdHNFbCA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6IFwic2lzeS1yZXNlYXJjaC1zdGF0c1wiIH0pOyBzdGF0c0VsLmNyZWF0ZUVsKFwicFwiLCB7IHRleHQ6IGBDb21iYXQgUXVlc3RzOiAke3N0YXRzLmNvbWJhdH1gIH0pOyBzdGF0c0VsLmNyZWF0ZUVsKFwicFwiLCB7IHRleHQ6IGBSZXNlYXJjaCBRdWVzdHM6ICR7c3RhdHMucmVzZWFyY2h9YCB9KTsgc3RhdHNFbC5jcmVhdGVFbChcInBcIiwgeyB0ZXh0OiBgUmF0aW86ICR7c3RhdHMucmF0aW99OjFgIH0pO1xuICAgICAgICBpZiAoIXRoaXMucGx1Z2luLmVuZ2luZS5jYW5DcmVhdGVSZXNlYXJjaFF1ZXN0KCkpIHsgY29uc3Qgd2FybmluZyA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoKTsgd2FybmluZy5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcImNvbG9yOiBvcmFuZ2U7IGZvbnQtd2VpZ2h0OiBib2xkOyBtYXJnaW46IDEwcHggMDtcIik7IHdhcm5pbmcuc2V0VGV4dChcIlJFU0VBUkNIIEJMT0NLRUQ6IE5lZWQgMjoxIGNvbWJhdCB0byByZXNlYXJjaCByYXRpb1wiKTsgfVxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoXCJoM1wiLCB7IHRleHQ6IFwiQWN0aXZlIFJlc2VhcmNoXCIgfSk7XG4gICAgICAgIGNvbnN0IHF1ZXN0cyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnJlc2VhcmNoUXVlc3RzLmZpbHRlcihxID0+ICFxLmNvbXBsZXRlZCk7XG4gICAgICAgIGlmIChxdWVzdHMubGVuZ3RoID09PSAwKSBjb250ZW50RWwuY3JlYXRlRWwoXCJwXCIsIHsgdGV4dDogXCJObyBhY3RpdmUgcmVzZWFyY2ggcXVlc3RzLlwiIH0pO1xuICAgICAgICBlbHNlIHF1ZXN0cy5mb3JFYWNoKChxOiBhbnkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNhcmQgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiBcInNpc3ktcmVzZWFyY2gtY2FyZFwiIH0pOyBjYXJkLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIFwiYm9yZGVyOiAxcHggc29saWQgIzQ0NDsgcGFkZGluZzogMTBweDsgbWFyZ2luOiA1cHggMDsgYm9yZGVyLXJhZGl1czogNHB4O1wiKTtcbiAgICAgICAgICAgIGNvbnN0IGhlYWRlciA9IGNhcmQuY3JlYXRlRWwoXCJoNFwiLCB7IHRleHQ6IHEudGl0bGUgfSk7IGhlYWRlci5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcIm1hcmdpbjogMCAwIDVweCAwO1wiKTtcbiAgICAgICAgICAgIGNvbnN0IGluZm8gPSBjYXJkLmNyZWF0ZUVsKFwiZGl2XCIpO1xuICAgICAgICAgICAgY29uc3QgY29kZUVsID0gaW5mby5jcmVhdGVFbChcImNvZGVcIik7IGNvZGVFbC5zdHlsZS5jb2xvciA9IFwiI2FhNjRmZlwiOyBjb2RlRWwuc2V0VGV4dChxLmlkKTtcbiAgICAgICAgICAgIGluZm8uY3JlYXRlRWwoXCJiclwiKTtcbiAgICAgICAgICAgIGluZm8uYXBwZW5kVGV4dChgVHlwZTogJHtxLnR5cGUgPT09IFwic3VydmV5XCIgPyBcIlN1cnZleVwiIDogXCJEZWVwIERpdmVcIn0gfCBXb3JkczogJHtxLndvcmRDb3VudH0vJHtxLndvcmRMaW1pdH1gKTtcbiAgICAgICAgICAgIGluZm8uc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgXCJmb250LXNpemU6IDAuOWVtOyBvcGFjaXR5OiAwLjg7XCIpO1xuICAgICAgICAgICAgY29uc3QgYWN0aW9ucyA9IGNhcmQuY3JlYXRlRGl2KCk7IGFjdGlvbnMuc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgXCJtYXJnaW4tdG9wOiA4cHg7IGRpc3BsYXk6IGZsZXg7IGdhcDogNXB4O1wiKTtcbiAgICAgICAgICAgIGNvbnN0IGNvbXBsZXRlQnRuID0gYWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQ09NUExFVEVcIiB9KTsgY29tcGxldGVCdG4uc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgXCJmbGV4OiAxOyBwYWRkaW5nOiA1cHg7IGJhY2tncm91bmQ6IGdyZWVuOyBjb2xvcjogd2hpdGU7IGJvcmRlcjogbm9uZTsgYm9yZGVyLXJhZGl1czogM3B4OyBjdXJzb3I6IHBvaW50ZXI7XCIpOyBjb21wbGV0ZUJ0bi5vbmNsaWNrID0gKCkgPT4geyB0aGlzLnBsdWdpbi5lbmdpbmUuY29tcGxldGVSZXNlYXJjaFF1ZXN0KHEuaWQsIHEud29yZENvdW50KTsgdGhpcy5jbG9zZSgpOyB9O1xuICAgICAgICAgICAgY29uc3QgZGVsZXRlQnRuID0gYWN0aW9ucy5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiREVMRVRFXCIgfSk7IGRlbGV0ZUJ0bi5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcImZsZXg6IDE7IHBhZGRpbmc6IDVweDsgYmFja2dyb3VuZDogcmVkOyBjb2xvcjogd2hpdGU7IGJvcmRlcjogbm9uZTsgYm9yZGVyLXJhZGl1czogM3B4OyBjdXJzb3I6IHBvaW50ZXI7XCIpOyBkZWxldGVCdG4ub25jbGljayA9IGFzeW5jICgpID0+IHsgYXdhaXQgdGhpcy5wbHVnaW4uZW5naW5lLmRlbGV0ZVJlc2VhcmNoUXVlc3QocS5pZCk7IHRoaXMuY2xvc2UoKTsgfTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbChcImgzXCIsIHsgdGV4dDogXCJDb21wbGV0ZWQgUmVzZWFyY2hcIiB9KTtcbiAgICAgICAgY29uc3QgY29tcGxldGVkID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MucmVzZWFyY2hRdWVzdHMuZmlsdGVyKHEgPT4gcS5jb21wbGV0ZWQpO1xuICAgICAgICBpZiAoY29tcGxldGVkLmxlbmd0aCA9PT0gMCkgY29udGVudEVsLmNyZWF0ZUVsKFwicFwiLCB7IHRleHQ6IFwiTm8gY29tcGxldGVkIHJlc2VhcmNoLlwiIH0pO1xuICAgICAgICBlbHNlIGNvbXBsZXRlZC5mb3JFYWNoKChxOiBhbnkpID0+IHsgY29uc3QgaXRlbSA9IGNvbnRlbnRFbC5jcmVhdGVFbChcInBcIik7IGl0ZW0uc2V0VGV4dChgKyAke3EudGl0bGV9ICgke3EudHlwZSA9PT0gXCJzdXJ2ZXlcIiA/IFwiU3VydmV5XCIgOiBcIkRlZXAgRGl2ZVwifSlgKTsgaXRlbS5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLCBcIm9wYWNpdHk6IDAuNjsgZm9udC1zaXplOiAwLjllbTtcIik7IH0pO1xuICAgIH1cbiAgICBvbkNsb3NlKCkgeyB0aGlzLmNvbnRlbnRFbC5lbXB0eSgpOyB9XG59XG5cbmV4cG9ydCBjbGFzcyBDaGFpbkJ1aWxkZXJNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgICBwbHVnaW46IFNpc3lwaHVzUGx1Z2luOyBjaGFpbk5hbWU6IHN0cmluZyA9IFwiXCI7IHNlbGVjdGVkUXVlc3RzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IFNpc3lwaHVzUGx1Z2luKSB7IHN1cGVyKGFwcCk7IHRoaXMucGx1Z2luID0gcGx1Z2luOyB9XG4gICAgb25PcGVuKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpczsgY29udGVudEVsLmNyZWF0ZUVsKFwiaDJcIiwgeyB0ZXh0OiBcIkNIQUlOIEJVSUxERVJcIiB9KTtcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKS5zZXROYW1lKFwiQ2hhaW4gTmFtZVwiKS5hZGRUZXh0KHQgPT4geyB0Lm9uQ2hhbmdlKHYgPT4gdGhpcy5jaGFpbk5hbWUgPSB2KTsgc2V0VGltZW91dCgoKSA9PiB0LmlucHV0RWwuZm9jdXMoKSwgNTApOyB9KTtcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKFwiaDNcIiwgeyB0ZXh0OiBcIlNlbGVjdCBRdWVzdHNcIiB9KTtcbiAgICAgICAgY29uc3QgcXVlc3RGb2xkZXIgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoXCJBY3RpdmVfUnVuL1F1ZXN0c1wiKTtcbiAgICAgICAgY29uc3QgcXVlc3RzOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgICBpZiAocXVlc3RGb2xkZXIgaW5zdGFuY2VvZiBURm9sZGVyKSB7IHF1ZXN0Rm9sZGVyLmNoaWxkcmVuLmZvckVhY2goZiA9PiB7IGlmIChmIGluc3RhbmNlb2YgVEZpbGUgJiYgZi5leHRlbnNpb24gPT09IFwibWRcIikgcXVlc3RzLnB1c2goZi5iYXNlbmFtZSk7IH0pOyB9XG4gICAgICAgIHF1ZXN0cy5mb3JFYWNoKChxdWVzdCwgaWR4KSA9PiB7IG5ldyBTZXR0aW5nKGNvbnRlbnRFbCkuc2V0TmFtZShxdWVzdCkuYWRkVG9nZ2xlKHQgPT4gdC5vbkNoYW5nZSh2ID0+IHsgaWYgKHYpIHRoaXMuc2VsZWN0ZWRRdWVzdHMucHVzaChxdWVzdCk7IGVsc2UgdGhpcy5zZWxlY3RlZFF1ZXN0cyA9IHRoaXMuc2VsZWN0ZWRRdWVzdHMuZmlsdGVyKHEgPT4gcSAhPT0gcXVlc3QpOyB9KSk7IH0pO1xuICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpLmFkZEJ1dHRvbihiID0+IGIuc2V0QnV0dG9uVGV4dChcIkNSRUFURSBDSEFJTlwiKS5zZXRDdGEoKS5vbkNsaWNrKGFzeW5jICgpID0+IHsgaWYgKHRoaXMuY2hhaW5OYW1lICYmIHRoaXMuc2VsZWN0ZWRRdWVzdHMubGVuZ3RoID49IDIpIHsgYXdhaXQgdGhpcy5wbHVnaW4uZW5naW5lLmNyZWF0ZVF1ZXN0Q2hhaW4odGhpcy5jaGFpbk5hbWUsIHRoaXMuc2VsZWN0ZWRRdWVzdHMpOyB0aGlzLmNsb3NlKCk7IH0gZWxzZSBuZXcgTm90aWNlKFwiQ2hhaW4gbmVlZHMgYSBuYW1lIGFuZCBhdCBsZWFzdCAyIHF1ZXN0c1wiKTsgfSkpO1xuICAgIH1cbiAgICBvbkNsb3NlKCkgeyB0aGlzLmNvbnRlbnRFbC5lbXB0eSgpOyB9XG59XG5cbmV4cG9ydCBjbGFzcyBWaWN0b3J5TW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gICAgcGx1Z2luOiBTaXN5cGh1c1BsdWdpbjtcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBTaXN5cGh1c1BsdWdpbikgeyBzdXBlcihhcHApOyB0aGlzLnBsdWdpbiA9IHBsdWdpbjsgfVxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7IGNvbnRlbnRFbC5hZGRDbGFzcyhcInNpc3ktdmljdG9yeS1tb2RhbFwiKTtcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKFwiaDFcIiwgeyB0ZXh0OiBcIkFTQ0VOU0lPTiBBQ0hJRVZFRFwiLCBjbHM6IFwic2lzeS12aWN0b3J5LXRpdGxlXCIgfSk7XG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbChcImRpdlwiLCB7IHRleHQ6IFwi8J+PhlwiLCBhdHRyOiB7IHN0eWxlOiBcImZvbnQtc2l6ZTogNjBweDsgbWFyZ2luOiAyMHB4IDA7XCIgfSB9KTtcbiAgICAgICAgY29uc3Qgc3RhdHMgPSBjb250ZW50RWwuY3JlYXRlRGl2KCk7IGNvbnN0IGxlZ2FjeSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmxlZ2FjeTsgY29uc3QgbWV0cmljcyA9IHRoaXMucGx1Z2luLmVuZ2luZS5nZXRHYW1lU3RhdHMoKTtcbiAgICAgICAgdGhpcy5zdGF0TGluZShzdGF0cywgXCJGaW5hbCBMZXZlbFwiLCBcIjUwXCIpOyB0aGlzLnN0YXRMaW5lKHN0YXRzLCBcIlRvdGFsIFF1ZXN0c1wiLCBgJHttZXRyaWNzLnRvdGFsUXVlc3RzfWApOyB0aGlzLnN0YXRMaW5lKHN0YXRzLCBcIkRlYXRocyBFbmR1cmVkXCIsIGAke2xlZ2FjeS5kZWF0aENvdW50fWApOyB0aGlzLnN0YXRMaW5lKHN0YXRzLCBcIkxvbmdlc3QgU3RyZWFrXCIsIGAke21ldHJpY3MubG9uZ2VzdFN0cmVha30gZGF5c2ApO1xuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoXCJwXCIsIHsgdGV4dDogXCJPbmUgbXVzdCBpbWFnaW5lIFNpc3lwaHVzIGhhcHB5LiBZb3UgaGF2ZSBwdXNoZWQgdGhlIGJvdWxkZXIgdG8gdGhlIHBlYWsuXCIsIGF0dHI6IHsgc3R5bGU6IFwibWFyZ2luOiAzMHB4IDA7IGZvbnQtc3R5bGU6IGl0YWxpYzsgb3BhY2l0eTogMC44O1wiIH0gfSk7XG4gICAgICAgIGNvbnN0IGJ0biA9IGNvbnRlbnRFbC5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQkVHSU4gTkVXIEdBTUUrXCIgfSk7IGJ0bi5hZGRDbGFzcyhcIm1vZC1jdGFcIik7IGJ0bi5zdHlsZS53aWR0aCA9IFwiMTAwJVwiOyBidG4ub25jbGljayA9ICgpID0+IHsgdGhpcy5jbG9zZSgpOyB9O1xuICAgIH1cbiAgICBzdGF0TGluZShlbDogSFRNTEVsZW1lbnQsIGxhYmVsOiBzdHJpbmcsIHZhbDogc3RyaW5nKSB7IGNvbnN0IGxpbmUgPSBlbC5jcmVhdGVEaXYoeyBjbHM6IFwic2lzeS12aWN0b3J5LXN0YXRcIiB9KTsgbGluZS5jcmVhdGVTcGFuKHsgdGV4dDogYCR7bGFiZWx9OiBgIH0pOyBjb25zdCBoaWdobGlnaHQgPSBsaW5lLmNyZWF0ZVNwYW4oeyBjbHM6IFwic2lzeS12aWN0b3J5LWhpZ2hsaWdodFwiIH0pOyBoaWdobGlnaHQuc2V0VGV4dCh2YWwpOyB9XG4gICAgb25DbG9zZSgpIHsgdGhpcy5jb250ZW50RWwuZW1wdHkoKTsgfVxufVxuXG5leHBvcnQgY2xhc3MgRGVhdGhNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgICBwbHVnaW46IFNpc3lwaHVzUGx1Z2luO1xuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IFNpc3lwaHVzUGx1Z2luKSB7IHN1cGVyKGFwcCk7IHRoaXMucGx1Z2luID0gcGx1Z2luOyB9XG4gICAgb25PcGVuKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGVudEVsLmFkZENsYXNzKFwic2lzeS1kZWF0aC1tb2RhbFwiKTtcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKFwiaDFcIiwgeyB0ZXh0OiBcIllPVSBESUVEXCIsIGNsczogXCJzaXN5LWRlYXRoLXRpdGxlXCIsIGF0dHI6IHsgc3R5bGU6IFwidGV4dC1hbGlnbjpjZW50ZXI7IGNvbG9yOiNmNTU7XCIgfSB9KTtcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKFwiZGl2XCIsIHsgdGV4dDogXCLimKDvuI9cIiwgYXR0cjogeyBzdHlsZTogXCJmb250LXNpemU6IDYwcHg7IG1hcmdpbjogMjBweCAwOyB0ZXh0LWFsaWduOiBjZW50ZXI7XCIgfSB9KTtcbiAgICAgICAgY29uc3QgbGVnYWN5ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MubGVnYWN5IHx8IHsgZGVhdGhDb3VudDogMCwgc291bHM6IDAsIHBlcmtzOiB7IHN0YXJ0R29sZDogMCwgc3RhcnRTa2lsbFBvaW50czogMCwgcml2YWxEZWxheTogMCB9LCByZWxpY3M6IFtdIH07XG4gICAgICAgIGNvbnN0IHN0cmVhayA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnN0cmVhayB8fCB7IGxvbmdlc3Q6IDAsIGN1cnJlbnQ6IDAsIGxhc3REYXRlOiBcIlwiIH07XG4gICAgICAgIGNvbnN0IHN0YXRzID0gY29udGVudEVsLmNyZWF0ZURpdih7IGF0dHI6IHsgc3R5bGU6IFwibWFyZ2luOiAyMHB4IDA7XCIgfSB9KTtcbiAgICAgICAgdGhpcy5zdGF0TGluZShzdGF0cywgXCJMZXZlbCBSZWFjaGVkXCIsIGAke3RoaXMucGx1Z2luLnNldHRpbmdzLmxldmVsfWApO1xuICAgICAgICB0aGlzLnN0YXRMaW5lKHN0YXRzLCBcIkRlYXRocyAoYWZ0ZXIgdGhpcylcIiwgYCR7bGVnYWN5LmRlYXRoQ291bnQgKyAxfWApO1xuICAgICAgICB0aGlzLnN0YXRMaW5lKHN0YXRzLCBcIkxvbmdlc3QgU3RyZWFrXCIsIGAke3N0cmVhay5sb25nZXN0IHx8IDB9IGRheXNgKTtcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKFwicFwiLCB7IHRleHQ6IFwiT25lIG11c3QgaW1hZ2luZSBTaXN5cGh1cyBoYXBweS4gVGhlIGJvdWxkZXIgcm9sbHMgYmFjay4gWW91IGtlZXAgb25seSB5b3VyIFNjYXJzLlwiLCBhdHRyOiB7IHN0eWxlOiBcIm1hcmdpbjogMjBweCAwOyBmb250LXN0eWxlOiBpdGFsaWM7IG9wYWNpdHk6IDAuODsgdGV4dC1hbGlnbjogY2VudGVyO1wiIH0gfSk7XG4gICAgICAgIGNvbnN0IGJ0biA9IGNvbnRlbnRFbC5jcmVhdGVFbChcImJ1dHRvblwiLCB7IHRleHQ6IFwiQUNDRVBUIERFQVRIXCIgfSk7XG4gICAgICAgIGJ0bi5hZGRDbGFzcyhcIm1vZC1jdGFcIik7XG4gICAgICAgIGJ0bi5zdHlsZS53aWR0aCA9IFwiMTAwJVwiO1xuICAgICAgICBidG4ub25jbGljayA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLmVuZ2luZS50cmlnZ2VyRGVhdGgoKTtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29udGVudEVsLmFwcGVuZENoaWxkKGJ0bik7XG4gICAgfVxuICAgIHN0YXRMaW5lKGVsOiBIVE1MRWxlbWVudCwgbGFiZWw6IHN0cmluZywgdmFsOiBzdHJpbmcpIHsgY29uc3QgbGluZSA9IGVsLmNyZWF0ZURpdih7IGNsczogXCJzaXN5LXZpY3Rvcnktc3RhdFwiIH0pOyBsaW5lLmNyZWF0ZVNwYW4oeyB0ZXh0OiBgJHtsYWJlbH06IGAgfSk7IGNvbnN0IGhpZ2hsaWdodCA9IGxpbmUuY3JlYXRlU3Bhbih7IGNsczogXCJzaXN5LXZpY3RvcnktaGlnaGxpZ2h0XCIgfSk7IGhpZ2hsaWdodC5zZXRUZXh0KHZhbCk7IH1cbiAgICBvbkNsb3NlKCkgeyB0aGlzLmNvbnRlbnRFbC5lbXB0eSgpOyB9XG59XG5cbmV4cG9ydCBjbGFzcyBTY2Fyc01vZGFsIGV4dGVuZHMgTW9kYWwge1xuICAgIHBsdWdpbjogU2lzeXBodXNQbHVnaW47XG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogU2lzeXBodXNQbHVnaW4pIHsgc3VwZXIoYXBwKTsgdGhpcy5wbHVnaW4gPSBwbHVnaW47IH1cbiAgICBvbk9wZW4oKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoXCJoMlwiLCB7IHRleHQ6IFwi8J+nrCBTQ0FSU1wiIH0pO1xuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoXCJwXCIsIHsgdGV4dDogXCJXaGF0IHBlcnNpc3RzIGFjcm9zcyBkZWF0aHMuXCIsIGF0dHI6IHsgc3R5bGU6IFwib3BhY2l0eTogMC44OyBtYXJnaW4tYm90dG9tOiAxNXB4O1wiIH0gfSk7XG4gICAgICAgIGNvbnN0IHNjYXJzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2NhcnMgfHwgW107XG4gICAgICAgIGlmIChzY2Fycy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbChcInBcIiwgeyB0ZXh0OiBcIk5vIHNjYXJzIHlldC4gVGhleSBhY2N1bXVsYXRlIHdoZW4geW91IGRpZS5cIiwgY2xzOiBcInNpc3ktZW1wdHktc3RhdGVcIiB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGxpc3QgPSBjb250ZW50RWwuY3JlYXRlRGl2KCk7XG4gICAgICAgICAgICBzY2Fycy5zbGljZSgpLnJldmVyc2UoKS5mb3JFYWNoKChzOiB7IGxhYmVsOiBzdHJpbmc7IHZhbHVlOiBzdHJpbmcgfCBudW1iZXI7IGVhcm5lZEF0Pzogc3RyaW5nIH0pID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCByb3cgPSBsaXN0LmNyZWF0ZURpdih7IGF0dHI6IHsgc3R5bGU6IFwicGFkZGluZzogMTBweDsgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICMzMzM7IGRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsgYWxpZ24taXRlbXM6IGNlbnRlcjtcIiB9IH0pO1xuICAgICAgICAgICAgICAgIHJvdy5jcmVhdGVTcGFuKHsgdGV4dDogYCR7cy5sYWJlbH06ICR7cy52YWx1ZX1gIH0pO1xuICAgICAgICAgICAgICAgIGlmIChzLmVhcm5lZEF0KSByb3cuY3JlYXRlU3Bhbih7IHRleHQ6IG5ldyBEYXRlKHMuZWFybmVkQXQpLnRvTG9jYWxlRGF0ZVN0cmluZygpLCBhdHRyOiB7IHN0eWxlOiBcImZvbnQtc2l6ZTogMC44NWVtOyBvcGFjaXR5OiAwLjc7XCIgfSB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIG9uQ2xvc2UoKSB7IHRoaXMuY29udGVudEVsLmVtcHR5KCk7IH1cbn1cblxuZXhwb3J0IGNsYXNzIFRlbXBsYXRlTWFuYWdlck1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICAgIHBsdWdpbjogU2lzeXBodXNQbHVnaW47XG4gICAgbmV3TmFtZTogc3RyaW5nID0gXCJcIjtcbiAgICBuZXdEaWZmOiBudW1iZXIgPSAxO1xuICAgIG5ld1NraWxsOiBzdHJpbmcgPSBcIk5vbmVcIjtcbiAgICBuZXdEZWFkbGluZTogc3RyaW5nID0gXCIrMmhcIjtcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IFNpc3lwaHVzUGx1Z2luKSB7XG4gICAgICAgIHN1cGVyKGFwcCk7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgIH1cblxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgdGhpcy5kaXNwbGF5KCk7XG4gICAgfVxuXG4gICAgZGlzcGxheSgpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoXCJoMlwiLCB7IHRleHQ6IFwiTWFuYWdlIFRlbXBsYXRlc1wiIH0pO1xuXG4gICAgICAgIC8vIDEuIExpc3QgRXhpc3RpbmcgVGVtcGxhdGVzXG4gICAgICAgIGNvbnN0IGxpc3REaXYgPSBjb250ZW50RWwuY3JlYXRlRGl2KCk7XG4gICAgICAgIGxpc3REaXYuc3R5bGUubWFyZ2luQm90dG9tID0gXCIyMHB4XCI7XG4gICAgICAgIGxpc3REaXYuc3R5bGUubWF4SGVpZ2h0ID0gXCIzMDBweFwiO1xuICAgICAgICBsaXN0RGl2LnN0eWxlLm92ZXJmbG93WSA9IFwiYXV0b1wiO1xuXG4gICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnF1ZXN0VGVtcGxhdGVzLmZvckVhY2goKHQsIGlkeCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgcm93ID0gbGlzdERpdi5jcmVhdGVEaXYoKTtcbiAgICAgICAgICAgIHJvdy5zdHlsZS5kaXNwbGF5ID0gXCJmbGV4XCI7XG4gICAgICAgICAgICByb3cuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSBcInNwYWNlLWJldHdlZW5cIjtcbiAgICAgICAgICAgIHJvdy5zdHlsZS5hbGlnbkl0ZW1zID0gXCJjZW50ZXJcIjtcbiAgICAgICAgICAgIHJvdy5zdHlsZS5wYWRkaW5nID0gXCIxMHB4XCI7XG4gICAgICAgICAgICByb3cuc3R5bGUuYm9yZGVyQm90dG9tID0gXCIxcHggc29saWQgIzMzM1wiO1xuXG4gICAgICAgICAgICByb3cuY3JlYXRlRGl2KHsgdGV4dDogYCR7dC5uYW1lfSAoRCR7dC5kaWZmfSwgJHt0LnNraWxsfSwgJHt0LmRlYWRsaW5lfSlgIH0pO1xuXG4gICAgICAgICAgICBjb25zdCBkZWxCdG4gPSByb3cuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkRlbGV0ZVwiIH0pO1xuICAgICAgICAgICAgZGVsQnRuLnN0eWxlLmNvbG9yID0gXCJyZWRcIjtcbiAgICAgICAgICAgIGRlbEJ0bi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnF1ZXN0VGVtcGxhdGVzLnNwbGljZShpZHgsIDEpO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpOyAvLyBSZWZyZXNoIFVJXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyAyLiBBZGQgTmV3IFRlbXBsYXRlIEZvcm1cbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKFwiaDNcIiwgeyB0ZXh0OiBcIkFkZCBOZXcgVGVtcGxhdGVcIiB9KTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpLnNldE5hbWUoXCJOYW1lXCIpLmFkZFRleHQodCA9PiB0Lm9uQ2hhbmdlKHYgPT4gdGhpcy5uZXdOYW1lID0gdikpO1xuICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpLnNldE5hbWUoXCJEaWZmaWN1bHR5ICgxLTUpXCIpLmFkZFRleHQodCA9PiB0LnNldFZhbHVlKFwiMVwiKS5vbkNoYW5nZSh2ID0+IHsgY29uc3QgbiA9IHBhcnNlSW50KHYsIDEwKTsgdGhpcy5uZXdEaWZmID0gaXNOYU4obikgPyAxIDogTWF0aC5taW4oNSwgTWF0aC5tYXgoMSwgbikpOyB9KSk7XG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbCkuc2V0TmFtZShcIlNraWxsXCIpLmFkZFRleHQodCA9PiB0LnNldFZhbHVlKFwiTm9uZVwiKS5vbkNoYW5nZSh2ID0+IHRoaXMubmV3U2tpbGwgPSB2KSk7XG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbCkuc2V0TmFtZShcIkRlYWRsaW5lXCIpLnNldERlc2MoXCJGb3JtYXQ6ICcxMDowMCcgb3IgJysyaCdcIikuYWRkVGV4dCh0ID0+IHQuc2V0VmFsdWUoXCIrMmhcIikub25DaGFuZ2UodiA9PiB0aGlzLm5ld0RlYWRsaW5lID0gdikpO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbCkuYWRkQnV0dG9uKGIgPT4gYlxuICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoXCJBZGQgVGVtcGxhdGVcIilcbiAgICAgICAgICAgIC5zZXRDdGEoKVxuICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5uZXdOYW1lKSByZXR1cm47XG4gICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MucXVlc3RUZW1wbGF0ZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMubmV3TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgZGlmZjogTWF0aC5taW4oNSwgTWF0aC5tYXgoMSwgdGhpcy5uZXdEaWZmIHx8IDEpKSxcbiAgICAgICAgICAgICAgICAgICAgc2tpbGw6IHRoaXMubmV3U2tpbGwgfHwgXCJOb25lXCIsXG4gICAgICAgICAgICAgICAgICAgIGRlYWRsaW5lOiB0aGlzLm5ld0RlYWRsaW5lIHx8IFwiKzJoXCJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTsgLy8gUmVmcmVzaCBVSSB0byBzaG93IG5ldyBpdGVtXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIlRlbXBsYXRlIGFkZGVkLlwiKTtcblxuICAgICAgICAgICAgICAgIC8vIFJlc2V0IGZpZWxkc1xuICAgICAgICAgICAgICAgIHRoaXMubmV3TmFtZSA9IFwiXCI7XG4gICAgICAgICAgICB9KSk7XG4gICAgfVxuXG4gICAgb25DbG9zZSgpIHtcbiAgICAgICAgdGhpcy5jb250ZW50RWwuZW1wdHkoKTtcbiAgICB9XG59XG4iLCIvKipcbiAqIFdlZWtseSBSZXZpZXcgTW9kYWwg4oCUIFNob3dzIGEgbmFycmF0aXZlIHN1bW1hcnkgb2YgdGhlIHBhc3Qgd2VlaydzIHBlcmZvcm1hbmNlLlxuICovXG5pbXBvcnQgeyBBcHAsIE1vZGFsLCBtb21lbnQgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgU2lzeXBodXNQbHVnaW4gZnJvbSAnLi4vbWFpbic7XG5pbXBvcnQgeyBEYXlNZXRyaWNzIH0gZnJvbSAnLi4vdHlwZXMnO1xuXG5leHBvcnQgY2xhc3MgV2Vla2x5UmV2aWV3TW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gICAgcGx1Z2luOiBTaXN5cGh1c1BsdWdpbjtcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IFNpc3lwaHVzUGx1Z2luKSB7XG4gICAgICAgIHN1cGVyKGFwcCk7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgIH1cblxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRlbnRFbC5hZGRDbGFzcygnc2lzeS1yZXZpZXcnKTtcblxuICAgICAgICBjb25zdCBub3cgPSBtb21lbnQoKTtcbiAgICAgICAgY29uc3Qgd2Vla0FnbyA9IG1vbWVudCgpLnN1YnRyYWN0KDcsICdkYXlzJyk7XG5cbiAgICAgICAgLy8gRmlsdGVyIG1ldHJpY3MgZm9yIGxhc3QgNyBkYXlzXG4gICAgICAgIGNvbnN0IHdlZWtNZXRyaWNzID0gKHRoaXMucGx1Z2luLnNldHRpbmdzLmRheU1ldHJpY3MgfHwgW10pLmZpbHRlcigoZDogRGF5TWV0cmljcykgPT4ge1xuICAgICAgICAgICAgY29uc3QgZGF0ZSA9IG1vbWVudChkLmRhdGUpO1xuICAgICAgICAgICAgcmV0dXJuIGRhdGUuaXNBZnRlcih3ZWVrQWdvKSAmJiBkYXRlLmlzQmVmb3JlKG5vdy5jbG9uZSgpLmFkZCgxLCAnZGF5JykpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBBZ2dyZWdhdGUgc3RhdHNcbiAgICAgICAgY29uc3QgdG90YWxRdWVzdHMgPSB3ZWVrTWV0cmljcy5yZWR1Y2UoKHMsIGQpID0+IHMgKyAoZC5xdWVzdHNDb21wbGV0ZWQgfHwgMCksIDApO1xuICAgICAgICBjb25zdCB0b3RhbEZhaWxzID0gd2Vla01ldHJpY3MucmVkdWNlKChzLCBkKSA9PiBzICsgKGQucXVlc3RzRmFpbGVkIHx8IDApLCAwKTtcbiAgICAgICAgY29uc3QgdG90YWxYcCA9IHdlZWtNZXRyaWNzLnJlZHVjZSgocywgZCkgPT4gcyArIChkLnhwRWFybmVkIHx8IDApLCAwKTtcbiAgICAgICAgY29uc3QgdG90YWxHb2xkID0gd2Vla01ldHJpY3MucmVkdWNlKChzLCBkKSA9PiBzICsgKGQuZ29sZEVhcm5lZCB8fCAwKSwgMCk7XG4gICAgICAgIGNvbnN0IHRvdGFsRG1nID0gd2Vla01ldHJpY3MucmVkdWNlKChzLCBkKSA9PiBzICsgKGQuZGFtYWdlc1Rha2VuIHx8IDApLCAwKTtcbiAgICAgICAgY29uc3QgZGF5c0FjdGl2ZSA9IHdlZWtNZXRyaWNzLmxlbmd0aDtcbiAgICAgICAgY29uc3Qgc3VjY2Vzc1JhdGUgPSB0b3RhbFF1ZXN0cyArIHRvdGFsRmFpbHMgPiAwXG4gICAgICAgICAgICA/IE1hdGgucm91bmQoKHRvdGFsUXVlc3RzIC8gKHRvdGFsUXVlc3RzICsgdG90YWxGYWlscykpICogMTAwKSA6IDA7XG5cbiAgICAgICAgLy8gRmluZCBiZXN0IGRheVxuICAgICAgICBsZXQgYmVzdERheSA9ICdOL0EnO1xuICAgICAgICBsZXQgYmVzdERheVF1ZXN0cyA9IDA7XG4gICAgICAgIHdlZWtNZXRyaWNzLmZvckVhY2goKGQ6IERheU1ldHJpY3MpID0+IHtcbiAgICAgICAgICAgIGlmIChkLnF1ZXN0c0NvbXBsZXRlZCA+IGJlc3REYXlRdWVzdHMpIHtcbiAgICAgICAgICAgICAgICBiZXN0RGF5UXVlc3RzID0gZC5xdWVzdHNDb21wbGV0ZWQ7XG4gICAgICAgICAgICAgICAgYmVzdERheSA9IG1vbWVudChkLmRhdGUpLmZvcm1hdCgnZGRkZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBDb2xsZWN0IHVuaXF1ZSBza2lsbHMgbGV2ZWxlZFxuICAgICAgICBjb25zdCBza2lsbHNTZXQgPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgICAgICAgd2Vla01ldHJpY3MuZm9yRWFjaCgoZDogRGF5TWV0cmljcykgPT4ge1xuICAgICAgICAgICAgKGQuc2tpbGxzTGV2ZWxlZCB8fCBbXSkuZm9yRWFjaChzID0+IHNraWxsc1NldC5hZGQocykpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyAtLS0gUkVOREVSIC0tLVxuICAgICAgICBjb25zdCBoZXJvID0gY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogJ3Npc3ktcmV2aWV3LWhlcm8nIH0pO1xuICAgICAgICBoZXJvLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ/Cfk4ogV0VFS0xZIERFQlJJRUYnIH0pO1xuICAgICAgICBoZXJvLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiBgJHt3ZWVrQWdvLmZvcm1hdCgnTU1NIEQnKX0g4oCUICR7bm93LmZvcm1hdCgnTU1NIEQsIFlZWVknKX1gLCBjbHM6ICdzaXN5LXJldmlldy1zdGF0LWxhYmVsJyB9KTtcblxuICAgICAgICBjb25zdCBzdGF0cyA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6ICdzaXN5LXJldmlldy1zdGF0cycgfSk7XG5cbiAgICAgICAgdGhpcy5zdGF0KHN0YXRzLCBTdHJpbmcodG90YWxRdWVzdHMpLCAnUXVlc3RzIERvbmUnKTtcbiAgICAgICAgdGhpcy5zdGF0KHN0YXRzLCBgJHtzdWNjZXNzUmF0ZX0lYCwgJ1N1Y2Nlc3MgUmF0ZScpO1xuICAgICAgICB0aGlzLnN0YXQoc3RhdHMsIGArJHt0b3RhbFhwfWAsICdYUCBFYXJuZWQnKTtcbiAgICAgICAgdGhpcy5zdGF0KHN0YXRzLCBgKyR7dG90YWxHb2xkfWAsICdHb2xkIEVhcm5lZCcpO1xuICAgICAgICB0aGlzLnN0YXQoc3RhdHMsIFN0cmluZyh0b3RhbERtZyksICdEYW1hZ2UgVGFrZW4nKTtcbiAgICAgICAgdGhpcy5zdGF0KHN0YXRzLCBgJHtkYXlzQWN0aXZlfS83YCwgJ0RheXMgQWN0aXZlJyk7XG4gICAgICAgIHRoaXMuc3RhdChzdGF0cywgYmVzdERheSwgJ0Jlc3QgRGF5Jyk7XG4gICAgICAgIHRoaXMuc3RhdChzdGF0cywgU3RyaW5nKHRoaXMucGx1Z2luLnNldHRpbmdzLnN0cmVhaz8uY3VycmVudCB8fCAwKSwgJ0N1cnJlbnQgU3RyZWFrJyk7XG5cbiAgICAgICAgLy8gTmFycmF0aXZlXG4gICAgICAgIGNvbnN0IG5hcnJhdGl2ZSA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6ICdzaXN5LXJldmlldy1uYXJyYXRpdmUnIH0pO1xuICAgICAgICBsZXQgdGV4dCA9ICcnO1xuICAgICAgICBpZiAodG90YWxRdWVzdHMgPT09IDApIHtcbiAgICAgICAgICAgIHRleHQgPSAnVGhlIHNpbGVuY2Ugb2YgaW5hY3Rpb24gaGFuZ3MgaGVhdnkuIE5vdCBhIHNpbmdsZSBxdWVzdCB3YXMgYXR0ZW1wdGVkIHRoaXMgd2Vlay4gVGhlIFJpdmFsIGdyb3dzIHN0cm9uZ2VyLic7XG4gICAgICAgIH0gZWxzZSBpZiAoc3VjY2Vzc1JhdGUgPj0gODApIHtcbiAgICAgICAgICAgIHRleHQgPSBgRXhjZXB0aW9uYWwgd2Vlay4gJHt0b3RhbFF1ZXN0c30gcXVlc3RzIGNvbXBsZXRlZCB3aXRoIGFuICR7c3VjY2Vzc1JhdGV9JSBzdWNjZXNzIHJhdGUuIGAgK1xuICAgICAgICAgICAgICAgIGAke2Jlc3REYXl9IHdhcyB5b3VyIG1vc3QgcHJvZHVjdGl2ZSBkYXkuIEtlZXAgdGhpcyBtb21lbnR1bS5gO1xuICAgICAgICB9IGVsc2UgaWYgKHN1Y2Nlc3NSYXRlID49IDUwKSB7XG4gICAgICAgICAgICB0ZXh0ID0gYEEgYmF0dGxlLXdvcm4gd2Vlay4gICR7dG90YWxRdWVzdHN9IHF1ZXN0cyBjb21wbGV0ZWQsIGJ1dCAke3RvdGFsRmFpbHN9IHdlcmUgbG9zdC4gYCArXG4gICAgICAgICAgICAgICAgYFNoYXJwZW4geW91ciBmb2N1cyBuZXh0IHdlZWsg4oCUIHRoZSBSaXZhbCBzaG93cyBubyBtZXJjeS5gO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGV4dCA9IGBBIGJydXRhbCB3ZWVrLiBPbmx5ICR7c3VjY2Vzc1JhdGV9JSBzdWNjZXNzIHJhdGUgYWNyb3NzICR7dG90YWxRdWVzdHMgKyB0b3RhbEZhaWxzfSBhdHRlbXB0cy4gYCArXG4gICAgICAgICAgICAgICAgYCR7dG90YWxEbWd9IGRhbWFnZSBhYnNvcmJlZC4gUmVncm91cCBhbmQgcmVjb25zaWRlciB5b3VyIHN0cmF0ZWd5LmA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNraWxsc1NldC5zaXplID4gMCkge1xuICAgICAgICAgICAgdGV4dCArPSBgIFNraWxscyBsZXZlbGVkOiAke0FycmF5LmZyb20oc2tpbGxzU2V0KS5qb2luKCcsICcpfS5gO1xuICAgICAgICB9XG4gICAgICAgIG5hcnJhdGl2ZS50ZXh0Q29udGVudCA9IHRleHQ7XG5cbiAgICAgICAgLy8gQ2xvc2UgYnV0dG9uXG4gICAgICAgIGNvbnN0IGNsb3NlID0gY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogJ3Npc3ktcG9tb2Rvcm8tY29udHJvbHMnIH0pO1xuICAgICAgICBjb25zdCBidG4gPSBjbG9zZS5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnRElTTUlTUycsIGNsczogJ3Npc3ktYnRuIG1vZC1jdGEnIH0pO1xuICAgICAgICBidG4ub25jbGljayA9ICgpID0+IHRoaXMuY2xvc2UoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHN0YXQocGFyZW50OiBIVE1MRWxlbWVudCwgdmFsdWU6IHN0cmluZywgbGFiZWw6IHN0cmluZykge1xuICAgICAgICBjb25zdCBib3ggPSBwYXJlbnQuY3JlYXRlRGl2KHsgY2xzOiAnc2lzeS1yZXZpZXctc3RhdCcgfSk7XG4gICAgICAgIGJveC5jcmVhdGVEaXYoeyB0ZXh0OiB2YWx1ZSwgY2xzOiAnc2lzeS1yZXZpZXctc3RhdC12YWwnIH0pO1xuICAgICAgICBib3guY3JlYXRlRGl2KHsgdGV4dDogbGFiZWwsIGNsczogJ3Npc3ktcmV2aWV3LXN0YXQtbGFiZWwnIH0pO1xuICAgIH1cblxuICAgIG9uQ2xvc2UoKSB7IHRoaXMuY29udGVudEVsLmVtcHR5KCk7IH1cbn1cblxuLyoqXG4gKiBCb3NzIEVuY291bnRlciBNb2RhbCDigJQgRHJhbWF0aWMgYm9zcyBpbnRyb2R1Y3Rpb24gd2l0aCBoZWFsdGggYmFyLlxuICovXG5leHBvcnQgY2xhc3MgQm9zc0VuY291bnRlck1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICAgIHBsdWdpbjogU2lzeXBodXNQbHVnaW47XG4gICAgYm9zc05hbWU6IHN0cmluZztcbiAgICBib3NzTGV2ZWw6IG51bWJlcjtcbiAgICBib3NzU3VidGl0bGU6IHN0cmluZztcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IFNpc3lwaHVzUGx1Z2luLCBib3NzTmFtZTogc3RyaW5nLCBib3NzTGV2ZWw6IG51bWJlciwgYm9zc1N1YnRpdGxlOiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgICAgIHRoaXMuYm9zc05hbWUgPSBib3NzTmFtZTtcbiAgICAgICAgdGhpcy5ib3NzTGV2ZWwgPSBib3NzTGV2ZWw7XG4gICAgICAgIHRoaXMuYm9zc1N1YnRpdGxlID0gYm9zc1N1YnRpdGxlO1xuICAgIH1cblxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRlbnRFbC5hZGRDbGFzcygnc2lzeS1ib3NzLW1vZGFsJyk7XG4gICAgICAgIGNvbnRlbnRFbC5zdHlsZS5hbmltYXRpb24gPSAnYm9zcy1lbnRyYW5jZSAwLjZzIGVhc2Utb3V0JztcblxuICAgICAgICAvLyBQaGFzZSBsYWJlbFxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRGl2KHsgdGV4dDogYOKaoO+4jyBCT1NTIEVOQ09VTlRFUiDigJQgTEVWRUwgJHt0aGlzLmJvc3NMZXZlbH1gLCBjbHM6ICdzaXN5LWJvc3MtcGhhc2UnIH0pO1xuXG4gICAgICAgIC8vIEJvc3MgbmFtZVxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRGl2KHsgdGV4dDogYOKYoO+4jyAke3RoaXMuYm9zc05hbWV9YCwgY2xzOiAnc2lzeS1ib3NzLW5hbWUnIH0pO1xuXG4gICAgICAgIC8vIFN1YnRpdGxlXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVEaXYoeyB0ZXh0OiB0aGlzLmJvc3NTdWJ0aXRsZSwgY2xzOiAnc2lzeS1ib3NzLXN1YnRpdGxlJyB9KTtcblxuICAgICAgICAvLyBCb3NzIEhQIGJhciAodmlzdWFsIG9ubHksIGZ1bGwgaGVhbHRoKVxuICAgICAgICBjb25zdCBocEJhciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6ICdzaXN5LWJvc3MtaHAtYmFyJyB9KTtcbiAgICAgICAgY29uc3QgZmlsbCA9IGhwQmFyLmNyZWF0ZURpdih7IGNsczogJ3Npc3ktYm9zcy1ocC1maWxsJyB9KTtcbiAgICAgICAgZmlsbC5zdHlsZS53aWR0aCA9ICcxMDAlJztcblxuICAgICAgICAvLyBMb3JlIHRleHRcbiAgICAgICAgY29uc3QgbG9yZSA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6ICdzaXN5LXJldmlldy1uYXJyYXRpdmUnIH0pO1xuICAgICAgICBsb3JlLnRleHRDb250ZW50ID0gYEEgZm9ybWlkYWJsZSBjaGFsbGVuZ2UgYXdhaXRzLiBDb21wbGV0ZSB0aGUgYm9zcyBxdWVzdCBjaGFpbiB0byBkZWZlYXQgdGhpcyBhZHZlcnNhcnkgYW5kIGNsYWltIGxlZ2VuZGFyeSByZXdhcmRzLmA7XG4gICAgICAgIGxvcmUuc3R5bGUudGV4dEFsaWduID0gJ2NlbnRlcic7XG5cbiAgICAgICAgLy8gRW5nYWdlIGJ1dHRvblxuICAgICAgICBjb25zdCBjb250cm9scyA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6ICdzaXN5LXBvbW9kb3JvLWNvbnRyb2xzJyB9KTtcbiAgICAgICAgY29uc3QgYnRuID0gY29udHJvbHMuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ+KalO+4jyBFTkdBR0UnLCBjbHM6ICdzaXN5LWJ0biBtb2QtZmFpbCcgfSk7XG4gICAgICAgIGJ0bi5zdHlsZS5mb250U2l6ZSA9ICcxLjFlbSc7XG4gICAgICAgIGJ0bi5zdHlsZS5wYWRkaW5nID0gJzEycHggMzBweCc7XG4gICAgICAgIGJ0bi5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uYXVkaW8ucGxheVNvdW5kKCdoZWFydGJlYXQnKTtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBvbkNsb3NlKCkgeyB0aGlzLmNvbnRlbnRFbC5lbXB0eSgpOyB9XG59XG4iLCJpbXBvcnQgeyBBY2hpZXZlbWVudCB9IGZyb20gJy4vdHlwZXMnO1xuXG5leHBvcnQgY29uc3QgQUNISUVWRU1FTlRfREVGSU5JVElPTlM6IE9taXQ8QWNoaWV2ZW1lbnQsIFwidW5sb2NrZWRcIiB8IFwidW5sb2NrZWRBdFwiPltdID0gW1xuICAgIC8vIOKUgOKUgOKUgCBDT01NT04gKGVhc3kgbWlsZXN0b25lcykg4pSA4pSA4pSAXG4gICAgeyBpZDogXCJmaXJzdF9ibG9vZFwiLCBuYW1lOiBcIkZpcnN0IEJsb29kXCIsIGRlc2NyaXB0aW9uOiBcIkNvbXBsZXRlIHlvdXIgZmlyc3QgcXVlc3QuXCIsIHJhcml0eTogXCJjb21tb25cIiB9LFxuICAgIHsgaWQ6IFwid2Vla193YXJyaW9yXCIsIG5hbWU6IFwiV2VlayBXYXJyaW9yXCIsIGRlc2NyaXB0aW9uOiBcIk1haW50YWluIGEgNy1kYXkgc3RyZWFrLlwiLCByYXJpdHk6IFwiY29tbW9uXCIgfSxcbiAgICB7IGlkOiBcIndhcm1fdXBcIiwgbmFtZTogXCJXYXJtIFVwXCIsIGRlc2NyaXB0aW9uOiBcIkNvbXBsZXRlIDEwIHRvdGFsIHF1ZXN0cy5cIiwgcmFyaXR5OiBcImNvbW1vblwiIH0sXG4gICAgeyBpZDogXCJuaWdodF9vd2xcIiwgbmFtZTogXCJOaWdodCBPd2xcIiwgZGVzY3JpcHRpb246IFwiQ29tcGxldGUgYSBxdWVzdCBhZnRlciAxMCBQTS5cIiwgcmFyaXR5OiBcImNvbW1vblwiIH0sXG4gICAgeyBpZDogXCJlYXJseV9iaXJkXCIsIG5hbWU6IFwiRWFybHkgQmlyZFwiLCBkZXNjcmlwdGlvbjogXCJDb21wbGV0ZSBhIHF1ZXN0IGJlZm9yZSA3IEFNLlwiLCByYXJpdHk6IFwiY29tbW9uXCIgfSxcbiAgICB7IGlkOiBcInRyaXBsZV90aHJlYXRcIiwgbmFtZTogXCJUcmlwbGUgVGhyZWF0XCIsIGRlc2NyaXB0aW9uOiBcIkNvbXBsZXRlIDMgcXVlc3RzIGluIGEgc2luZ2xlIGRheS5cIiwgcmFyaXR5OiBcImNvbW1vblwiIH0sXG5cbiAgICAvLyDilIDilIDilIAgUkFSRSAobWlkLWdhbWUpIOKUgOKUgOKUgFxuICAgIHsgaWQ6IFwic2tpbGxfYWRlcHRcIiwgbmFtZTogXCJBcHByZW50aWNlXCIsIGRlc2NyaXB0aW9uOiBcIlJlYWNoIExldmVsIDUgaW4gYW55IHNraWxsLlwiLCByYXJpdHk6IFwicmFyZVwiIH0sXG4gICAgeyBpZDogXCJjaGFpbl9nYW5nXCIsIG5hbWU6IFwiQ2hhaW4gR2FuZ1wiLCBkZXNjcmlwdGlvbjogXCJDb21wbGV0ZSBhIFF1ZXN0IENoYWluLlwiLCByYXJpdHk6IFwicmFyZVwiIH0sXG4gICAgeyBpZDogXCJyZXNlYXJjaGVyXCIsIG5hbWU6IFwiU2Nob2xhclwiLCBkZXNjcmlwdGlvbjogXCJDb21wbGV0ZSA1IFJlc2VhcmNoIFF1ZXN0cy5cIiwgcmFyaXR5OiBcInJhcmVcIiB9LFxuICAgIHsgaWQ6IFwicmljaFwiLCBuYW1lOiBcIkNhcGl0YWxpc3RcIiwgZGVzY3JpcHRpb246IFwiSG9sZCA1MDAgZ29sZCBhdCBvbmNlLlwiLCByYXJpdHk6IFwicmFyZVwiIH0sXG4gICAgeyBpZDogXCJjb21ib19raW5nXCIsIG5hbWU6IFwiQ29tYm8gS2luZ1wiLCBkZXNjcmlwdGlvbjogXCJSZWFjaCBhIHg1IGNvbWJvLlwiLCByYXJpdHk6IFwicmFyZVwiIH0sXG4gICAgeyBpZDogXCJzcGVlZF9kZW1vblwiLCBuYW1lOiBcIlNwZWVkIERlbW9uXCIsIGRlc2NyaXB0aW9uOiBcIkNvbXBsZXRlIDUrIHF1ZXN0cyBpbiBvbmUgZGF5LlwiLCByYXJpdHk6IFwicmFyZVwiIH0sXG4gICAgeyBpZDogXCJwZXJmZWN0aW9uaXN0XCIsIG5hbWU6IFwiUGVyZmVjdGlvbmlzdFwiLCBkZXNjcmlwdGlvbjogXCI3IGNvbnNlY3V0aXZlIGRheXMgd2l0aCAwIGZhaWx1cmVzLlwiLCByYXJpdHk6IFwicmFyZVwiIH0sXG4gICAgeyBpZDogXCJpcm9uX3N0cmVha1wiLCBuYW1lOiBcIklyb24gU3RyZWFrXCIsIGRlc2NyaXB0aW9uOiBcIk1haW50YWluIGEgMTQtZGF5IHN0cmVhay5cIiwgcmFyaXR5OiBcInJhcmVcIiB9LFxuXG4gICAgLy8g4pSA4pSA4pSAIEVQSUMgKGxhdGUtZ2FtZSkg4pSA4pSA4pSAXG4gICAgeyBpZDogXCJib3NzX3NsYXllclwiLCBuYW1lOiBcIkdpYW50IFNsYXllclwiLCBkZXNjcmlwdGlvbjogXCJEZWZlYXQgeW91ciBmaXJzdCBCb3NzLlwiLCByYXJpdHk6IFwiZXBpY1wiIH0sXG4gICAgeyBpZDogXCJza2lsbF9tYXN0ZXJcIiwgbmFtZTogXCJTa2lsbCBNYXN0ZXJcIiwgZGVzY3JpcHRpb246IFwiUmVhY2ggTGV2ZWwgMTAgaW4gYW55IHNraWxsLlwiLCByYXJpdHk6IFwiZXBpY1wiIH0sXG4gICAgeyBpZDogXCJjZW50dXJ5XCIsIG5hbWU6IFwiQ2VudHVyaW9uXCIsIGRlc2NyaXB0aW9uOiBcIkNvbXBsZXRlIDEwMCB0b3RhbCBxdWVzdHMuXCIsIHJhcml0eTogXCJlcGljXCIgfSxcbiAgICB7IGlkOiBcInBob2VuaXhcIiwgbmFtZTogXCJQaG9lbml4XCIsIGRlc2NyaXB0aW9uOiBcIkRpZSBhbmQgcmVhY2ggTGV2ZWwgMTAgYWdhaW4uXCIsIHJhcml0eTogXCJlcGljXCIgfSxcbiAgICB7IGlkOiBcInJlc2VhcmNoX3Byb2Zlc3NvclwiLCBuYW1lOiBcIlByb2Zlc3NvclwiLCBkZXNjcmlwdGlvbjogXCJDb21wbGV0ZSAyMCBSZXNlYXJjaCBRdWVzdHMuXCIsIHJhcml0eTogXCJlcGljXCIgfSxcbiAgICB7IGlkOiBcImdvbGRfaG9hcmRlclwiLCBuYW1lOiBcIkdvbGQgSG9hcmRlclwiLCBkZXNjcmlwdGlvbjogXCJIb2xkIDIwMDAgZ29sZCBhdCBvbmNlLlwiLCByYXJpdHk6IFwiZXBpY1wiIH0sXG5cbiAgICAvLyDilIDilIDilIAgTEVHRU5EQVJZIChlbmRnYW1lKSDilIDilIDilIBcbiAgICB7IGlkOiBcImFzY2VuZGVkXCIsIG5hbWU6IFwiU2lzeXBodXMgSGFwcHlcIiwgZGVzY3JpcHRpb246IFwiUmVhY2ggTGV2ZWwgNTAuXCIsIHJhcml0eTogXCJsZWdlbmRhcnlcIiB9LFxuICAgIHsgaWQ6IFwiaW1tb3J0YWxcIiwgbmFtZTogXCJJbW1vcnRhbFwiLCBkZXNjcmlwdGlvbjogXCJSZWFjaCBMZXZlbCAyMCB3aXRoIDAgRGVhdGhzLlwiLCByYXJpdHk6IFwibGVnZW5kYXJ5XCIgfSxcbiAgICB7IGlkOiBcImNvbXBsZXRpb25pc3RcIiwgbmFtZTogXCJDb21wbGV0aW9uaXN0XCIsIGRlc2NyaXB0aW9uOiBcIlVubG9jayBhbGwgb3RoZXIgYWNoaWV2ZW1lbnRzLlwiLCByYXJpdHk6IFwibGVnZW5kYXJ5XCIgfSxcbiAgICB7IGlkOiBcIm1hcmF0aG9uXCIsIG5hbWU6IFwiTWFyYXRob25cIiwgZGVzY3JpcHRpb246IFwiTWFpbnRhaW4gYSAzMC1kYXkgc3RyZWFrLlwiLCByYXJpdHk6IFwibGVnZW5kYXJ5XCIgfSxcbiAgICB7IGlkOiBcImdyYW5kX21hc3RlclwiLCBuYW1lOiBcIkdyYW5kIE1hc3RlclwiLCBkZXNjcmlwdGlvbjogXCJIYXZlIDUgc2tpbGxzIGF0IExldmVsIDEwKy5cIiwgcmFyaXR5OiBcImxlZ2VuZGFyeVwiIH0sXG5dO1xuIiwiaW1wb3J0IHsgbW9tZW50IH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgU2lzeXBodXNTZXR0aW5ncywgRGF5TWV0cmljcywgV2Vla2x5UmVwb3J0LCBCb3NzTWlsZXN0b25lLCBTdHJlYWssIEFjaGlldmVtZW50IH0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IHsgQUNISUVWRU1FTlRfREVGSU5JVElPTlMgfSBmcm9tICcuLi9hY2hpZXZlbWVudHMnO1xuXG5leHBvcnQgY2xhc3MgQW5hbHl0aWNzRW5naW5lIHtcbiAgICBzZXR0aW5nczogU2lzeXBodXNTZXR0aW5ncztcbiAgICBhdWRpb0NvbnRyb2xsZXI/OiBhbnk7XG5cbiAgICBjb25zdHJ1Y3RvcihzZXR0aW5nczogU2lzeXBodXNTZXR0aW5ncywgYXVkaW9Db250cm9sbGVyPzogYW55KSB7XG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSBzZXR0aW5ncztcbiAgICAgICAgdGhpcy5hdWRpb0NvbnRyb2xsZXIgPSBhdWRpb0NvbnRyb2xsZXI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRW5zdXJlIGFsbCBhY2hpZXZlbWVudHMgZXhpc3QgaW4gc2V0dGluZ3NcbiAgICAgKi9cbiAgICBpbml0aWFsaXplQWNoaWV2ZW1lbnRzKCkge1xuICAgICAgICAvLyBJZiBhY2hpZXZlbWVudHMgYXJyYXkgaXMgZW1wdHkgb3IgbWlzc2luZyBkZWZpbml0aW9ucywgc3luYyBpdFxuICAgICAgICBpZiAoIXRoaXMuc2V0dGluZ3MuYWNoaWV2ZW1lbnRzKSB0aGlzLnNldHRpbmdzLmFjaGlldmVtZW50cyA9IFtdO1xuXG4gICAgICAgIEFDSElFVkVNRU5UX0RFRklOSVRJT05TLmZvckVhY2goZGVmID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0cyA9IHRoaXMuc2V0dGluZ3MuYWNoaWV2ZW1lbnRzLmZpbmQoYSA9PiBhLmlkID09PSBkZWYuaWQpO1xuICAgICAgICAgICAgaWYgKCFleGlzdHMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzLmFjaGlldmVtZW50cy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgLi4uZGVmLFxuICAgICAgICAgICAgICAgICAgICB1bmxvY2tlZDogZmFsc2VcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgdHJhY2tEYWlseU1ldHJpY3ModHlwZTogJ3F1ZXN0X2NvbXBsZXRlJyB8ICdxdWVzdF9mYWlsJyB8ICd4cCcgfCAnZ29sZCcgfCAnZGFtYWdlJyB8ICdza2lsbF9sZXZlbCcgfCAnY2hhaW5fY29tcGxldGUnLCBhbW91bnQ6IG51bWJlciA9IDEpIHtcbiAgICAgICAgY29uc3QgdG9kYXkgPSBtb21lbnQoKS5mb3JtYXQoXCJZWVlZLU1NLUREXCIpO1xuXG4gICAgICAgIGxldCBtZXRyaWMgPSB0aGlzLnNldHRpbmdzLmRheU1ldHJpY3MuZmluZChtID0+IG0uZGF0ZSA9PT0gdG9kYXkpO1xuICAgICAgICBpZiAoIW1ldHJpYykge1xuICAgICAgICAgICAgbWV0cmljID0geyBkYXRlOiB0b2RheSwgcXVlc3RzQ29tcGxldGVkOiAwLCBxdWVzdHNGYWlsZWQ6IDAsIHhwRWFybmVkOiAwLCBnb2xkRWFybmVkOiAwLCBkYW1hZ2VzVGFrZW46IDAsIHNraWxsc0xldmVsZWQ6IFtdLCBjaGFpbnNDb21wbGV0ZWQ6IDAgfTtcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MuZGF5TWV0cmljcy5wdXNoKG1ldHJpYyk7XG4gICAgICAgIH1cblxuICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgXCJxdWVzdF9jb21wbGV0ZVwiOiBtZXRyaWMucXVlc3RzQ29tcGxldGVkICs9IGFtb3VudDsgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwicXVlc3RfZmFpbFwiOiBtZXRyaWMucXVlc3RzRmFpbGVkICs9IGFtb3VudDsgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwieHBcIjogbWV0cmljLnhwRWFybmVkICs9IGFtb3VudDsgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiZ29sZFwiOiBtZXRyaWMuZ29sZEVhcm5lZCArPSBhbW91bnQ7IGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImRhbWFnZVwiOiBtZXRyaWMuZGFtYWdlc1Rha2VuICs9IGFtb3VudDsgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwic2tpbGxfbGV2ZWxcIjogbWV0cmljLnNraWxsc0xldmVsZWQucHVzaChcIlNraWxsIGxldmVsZWRcIik7IGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImNoYWluX2NvbXBsZXRlXCI6IG1ldHJpYy5jaGFpbnNDb21wbGV0ZWQgKz0gYW1vdW50OyBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFRyaWdnZXIgQWNoaWV2ZW1lbnQgQ2hlY2sgYWZ0ZXIgZXZlcnkgbWV0cmljIHVwZGF0ZVxuICAgICAgICB0aGlzLmNoZWNrQWNoaWV2ZW1lbnRzKCk7XG4gICAgfVxuXG4gICAgdXBkYXRlU3RyZWFrKCkge1xuICAgICAgICBjb25zdCB0b2RheSA9IG1vbWVudCgpLmZvcm1hdChcIllZWVktTU0tRERcIik7XG4gICAgICAgIGNvbnN0IGxhc3REYXRlID0gdGhpcy5zZXR0aW5ncy5zdHJlYWsubGFzdERhdGU7XG5cbiAgICAgICAgaWYgKGxhc3REYXRlICE9PSB0b2RheSkge1xuICAgICAgICAgICAgY29uc3QgeWVzdGVyZGF5ID0gbW9tZW50KCkuc3VidHJhY3QoMSwgJ2RheScpLmZvcm1hdChcIllZWVktTU0tRERcIik7XG4gICAgICAgICAgICBpZiAobGFzdERhdGUgPT09IHllc3RlcmRheSkge1xuICAgICAgICAgICAgICAgIC8vIENvbnRpbnVlZCBmcm9tIHllc3RlcmRheVxuICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3Muc3RyZWFrLmN1cnJlbnQrKztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIWxhc3REYXRlKSB7XG4gICAgICAgICAgICAgICAgLy8gRmlyc3QgZXZlciBxdWVzdFxuICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3Muc3RyZWFrLmN1cnJlbnQgPSAxO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBCcm9rZW4gc3RyZWFrXG4gICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5zdHJlYWsuY3VycmVudCA9IDE7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnNldHRpbmdzLnN0cmVhay5jdXJyZW50ID4gdGhpcy5zZXR0aW5ncy5zdHJlYWsubG9uZ2VzdCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3Muc3RyZWFrLmxvbmdlc3QgPSB0aGlzLnNldHRpbmdzLnN0cmVhay5jdXJyZW50O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzLnN0cmVhay5sYXN0RGF0ZSA9IHRvZGF5O1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQWx3YXlzIGNoZWNrIGFjaGlldmVtZW50c1xuICAgICAgICB0aGlzLmNoZWNrQWNoaWV2ZW1lbnRzKCk7XG4gICAgfVxuXG4gICAgY2hlY2tBY2hpZXZlbWVudHMoKSB7XG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZUFjaGlldmVtZW50cygpO1xuICAgICAgICBjb25zdCBzID0gdGhpcy5zZXR0aW5ncztcbiAgICAgICAgY29uc3QgdG90YWxRdWVzdHMgPSBzLmRheU1ldHJpY3MucmVkdWNlKChzdW0sIG0pID0+IHN1bSArIG0ucXVlc3RzQ29tcGxldGVkLCAwKTtcblxuICAgICAgICAvLyAxLiBGaXJzdCBCbG9vZFxuICAgICAgICBpZiAodG90YWxRdWVzdHMgPj0gMSkgdGhpcy51bmxvY2soXCJmaXJzdF9ibG9vZFwiKTtcblxuICAgICAgICAvLyAyLiBXYXJtIFVwXG4gICAgICAgIGlmICh0b3RhbFF1ZXN0cyA+PSAxMCkgdGhpcy51bmxvY2soXCJ3YXJtX3VwXCIpO1xuXG4gICAgICAgIC8vIDMuIFdlZWsgV2FycmlvclxuICAgICAgICBpZiAocy5zdHJlYWsuY3VycmVudCA+PSA3KSB0aGlzLnVubG9jayhcIndlZWtfd2FycmlvclwiKTtcblxuICAgICAgICAvLyA0LiBTa2lsbCBBZGVwdFxuICAgICAgICBpZiAocy5za2lsbHMuc29tZShza2lsbCA9PiBza2lsbC5sZXZlbCA+PSA1KSkgdGhpcy51bmxvY2soXCJza2lsbF9hZGVwdFwiKTtcblxuICAgICAgICAvLyA1LiBDaGFpbiBHYW5nXG4gICAgICAgIGlmIChzLmNoYWluSGlzdG9yeS5sZW5ndGggPj0gMSkgdGhpcy51bmxvY2soXCJjaGFpbl9nYW5nXCIpO1xuXG4gICAgICAgIC8vIDYuIFJlc2VhcmNoZXJcbiAgICAgICAgaWYgKHMucmVzZWFyY2hTdGF0cy5yZXNlYXJjaENvbXBsZXRlZCA+PSA1KSB0aGlzLnVubG9jayhcInJlc2VhcmNoZXJcIik7XG5cbiAgICAgICAgLy8gNy4gQ2FwaXRhbGlzdFxuICAgICAgICBpZiAocy5nb2xkID49IDUwMCkgdGhpcy51bmxvY2soXCJyaWNoXCIpO1xuXG4gICAgICAgIC8vIDguIEdpYW50IFNsYXllclxuICAgICAgICBpZiAocy5ib3NzTWlsZXN0b25lcy5zb21lKGIgPT4gYi5kZWZlYXRlZCkpIHRoaXMudW5sb2NrKFwiYm9zc19zbGF5ZXJcIik7XG5cbiAgICAgICAgLy8gOS4gQXNjZW5kZWRcbiAgICAgICAgaWYgKHMubGV2ZWwgPj0gNTApIHRoaXMudW5sb2NrKFwiYXNjZW5kZWRcIik7XG5cbiAgICAgICAgLy8gMTAuIEltbW9ydGFsXG4gICAgICAgIGlmIChzLmxldmVsID49IDIwICYmIHMubGVnYWN5LmRlYXRoQ291bnQgPT09IDApIHRoaXMudW5sb2NrKFwiaW1tb3J0YWxcIik7XG4gICAgfVxuXG4gICAgdW5sb2NrKGlkOiBzdHJpbmcpIHtcbiAgICAgICAgY29uc3QgYWNoID0gdGhpcy5zZXR0aW5ncy5hY2hpZXZlbWVudHMuZmluZChhID0+IGEuaWQgPT09IGlkKTtcbiAgICAgICAgaWYgKGFjaCAmJiAhYWNoLnVubG9ja2VkKSB7XG4gICAgICAgICAgICBhY2gudW5sb2NrZWQgPSB0cnVlO1xuICAgICAgICAgICAgYWNoLnVubG9ja2VkQXQgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG4gICAgICAgICAgICBpZiAodGhpcy5hdWRpb0NvbnRyb2xsZXIpIHRoaXMuYXVkaW9Db250cm9sbGVyLnBsYXlTb3VuZChcInN1Y2Nlc3NcIik7XG4gICAgICAgICAgICAvLyBXZSByZXR1cm4gdHJ1ZSBzbyB0aGUgY2FsbGVyIGNhbiBzaG93IGEgbm90aWNlIGlmIHRoZXkgd2FudCwgXG4gICAgICAgICAgICAvLyB0aG91Z2ggdXN1YWxseSB0aGUgTm90aWNlIGlzIGJldHRlciBoYW5kbGVkIGhlcmUgaWYgd2UgaGFkIGFjY2VzcyB0byB0aGF0IEFQSSBlYXNpbHksIFxuICAgICAgICAgICAgLy8gb3IgbGV0IHRoZSBlbmdpbmUgaGFuZGxlIHRoZSBub3RpZmljYXRpb24uXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyAuLi4gKEtlZXAgZXhpc3RpbmcgYm9zcy9yZXBvcnQgbWV0aG9kcyBiZWxvdyBhcyB0aGV5IHdlcmUpIC4uLlxuICAgIGluaXRpYWxpemVCb3NzTWlsZXN0b25lcygpIHtcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuYm9zc01pbGVzdG9uZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzLmJvc3NNaWxlc3RvbmVzID0gW1xuICAgICAgICAgICAgICAgIHsgbGV2ZWw6IDEwLCBuYW1lOiBcIlRoZSBGaXJzdCBUcmlhbFwiLCB1bmxvY2tlZDogZmFsc2UsIGRlZmVhdGVkOiBmYWxzZSwgeHBSZXdhcmQ6IDUwMCB9LFxuICAgICAgICAgICAgICAgIHsgbGV2ZWw6IDIwLCBuYW1lOiBcIlRoZSBOZW1lc2lzIFJldHVybnNcIiwgdW5sb2NrZWQ6IGZhbHNlLCBkZWZlYXRlZDogZmFsc2UsIHhwUmV3YXJkOiAxMDAwIH0sXG4gICAgICAgICAgICAgICAgeyBsZXZlbDogMzAsIG5hbWU6IFwiVGhlIFJlYXBlciBBd2FrZW5zXCIsIHVubG9ja2VkOiBmYWxzZSwgZGVmZWF0ZWQ6IGZhbHNlLCB4cFJld2FyZDogMTUwMCB9LFxuICAgICAgICAgICAgICAgIHsgbGV2ZWw6IDUwLCBuYW1lOiBcIlRoZSBGaW5hbCBBc2NlbnNpb25cIiwgdW5sb2NrZWQ6IGZhbHNlLCBkZWZlYXRlZDogZmFsc2UsIHhwUmV3YXJkOiA1MDAwIH1cbiAgICAgICAgICAgIF07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjaGVja0Jvc3NNaWxlc3RvbmVzKCk6IHN0cmluZ1tdIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZXM6IHN0cmluZ1tdID0gW107XG4gICAgICAgIGlmICghdGhpcy5zZXR0aW5ncy5ib3NzTWlsZXN0b25lcyB8fCB0aGlzLnNldHRpbmdzLmJvc3NNaWxlc3RvbmVzLmxlbmd0aCA9PT0gMCkgdGhpcy5pbml0aWFsaXplQm9zc01pbGVzdG9uZXMoKTtcblxuICAgICAgICB0aGlzLnNldHRpbmdzLmJvc3NNaWxlc3RvbmVzLmZvckVhY2goKGJvc3M6IEJvc3NNaWxlc3RvbmUpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmxldmVsID49IGJvc3MubGV2ZWwgJiYgIWJvc3MudW5sb2NrZWQpIHtcbiAgICAgICAgICAgICAgICBib3NzLnVubG9ja2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBtZXNzYWdlcy5wdXNoKGBCb3NzIFVubG9ja2VkOiAke2Jvc3MubmFtZX0gKExldmVsICR7Ym9zcy5sZXZlbH0pYCk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYXVkaW9Db250cm9sbGVyKSB0aGlzLmF1ZGlvQ29udHJvbGxlci5wbGF5U291bmQoXCJzdWNjZXNzXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2VzO1xuICAgIH1cblxuICAgIGRlZmVhdEJvc3MobGV2ZWw6IG51bWJlcik6IHsgc3VjY2VzczogYm9vbGVhbjsgbWVzc2FnZTogc3RyaW5nOyB4cFJld2FyZDogbnVtYmVyIH0ge1xuICAgICAgICBjb25zdCBib3NzID0gdGhpcy5zZXR0aW5ncy5ib3NzTWlsZXN0b25lcy5maW5kKChiOiBCb3NzTWlsZXN0b25lKSA9PiBiLmxldmVsID09PSBsZXZlbCk7XG4gICAgICAgIGlmICghYm9zcykgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6IFwiQm9zcyBub3QgZm91bmRcIiwgeHBSZXdhcmQ6IDAgfTtcbiAgICAgICAgaWYgKGJvc3MuZGVmZWF0ZWQpIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiBcIkJvc3MgYWxyZWFkeSBkZWZlYXRlZFwiLCB4cFJld2FyZDogMCB9O1xuXG4gICAgICAgIGJvc3MuZGVmZWF0ZWQgPSB0cnVlO1xuICAgICAgICBib3NzLmRlZmVhdGVkQXQgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG4gICAgICAgIHRoaXMuc2V0dGluZ3MueHAgKz0gYm9zcy54cFJld2FyZDtcbiAgICAgICAgaWYgKHRoaXMuYXVkaW9Db250cm9sbGVyKSB0aGlzLmF1ZGlvQ29udHJvbGxlci5wbGF5U291bmQoXCJzdWNjZXNzXCIpO1xuICAgICAgICBpZiAobGV2ZWwgPT09IDUwKSB0aGlzLndpbkdhbWUoKTtcblxuICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBtZXNzYWdlOiBgQm9zcyBEZWZlYXRlZDogJHtib3NzLm5hbWV9ISArJHtib3NzLnhwUmV3YXJkfSBYUGAsIHhwUmV3YXJkOiBib3NzLnhwUmV3YXJkIH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB3aW5HYW1lKCkge1xuICAgICAgICB0aGlzLnNldHRpbmdzLmdhbWVXb24gPSB0cnVlO1xuICAgICAgICB0aGlzLnNldHRpbmdzLmVuZEdhbWVEYXRlID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuICAgICAgICBpZiAodGhpcy5hdWRpb0NvbnRyb2xsZXIpIHRoaXMuYXVkaW9Db250cm9sbGVyLnBsYXlTb3VuZChcInN1Y2Nlc3NcIik7XG4gICAgfVxuXG4gICAgZ2VuZXJhdGVXZWVrbHlSZXBvcnQoKTogV2Vla2x5UmVwb3J0IHtcbiAgICAgICAgY29uc3Qgd2VlayA9IG1vbWVudCgpLndlZWsoKTtcbiAgICAgICAgY29uc3Qgc3RhcnREYXRlID0gbW9tZW50KCkuc3RhcnRPZignd2VlaycpLmZvcm1hdChcIllZWVktTU0tRERcIik7XG4gICAgICAgIGNvbnN0IGVuZERhdGUgPSBtb21lbnQoKS5lbmRPZignd2VlaycpLmZvcm1hdChcIllZWVktTU0tRERcIik7XG5cbiAgICAgICAgY29uc3Qgd2Vla01ldHJpY3MgPSB0aGlzLnNldHRpbmdzLmRheU1ldHJpY3MuZmlsdGVyKChtOiBEYXlNZXRyaWNzKSA9PlxuICAgICAgICAgICAgbW9tZW50KG0uZGF0ZSkuaXNCZXR3ZWVuKG1vbWVudChzdGFydERhdGUpLCBtb21lbnQoZW5kRGF0ZSksIG51bGwsICdbXScpXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgdG90YWxRdWVzdHMgPSB3ZWVrTWV0cmljcy5yZWR1Y2UoKHN1bTogbnVtYmVyLCBtOiBEYXlNZXRyaWNzKSA9PiBzdW0gKyBtLnF1ZXN0c0NvbXBsZXRlZCwgMCk7XG4gICAgICAgIGNvbnN0IHRvdGFsRmFpbGVkID0gd2Vla01ldHJpY3MucmVkdWNlKChzdW06IG51bWJlciwgbTogRGF5TWV0cmljcykgPT4gc3VtICsgbS5xdWVzdHNGYWlsZWQsIDApO1xuICAgICAgICBjb25zdCBzdWNjZXNzUmF0ZSA9IHRvdGFsUXVlc3RzICsgdG90YWxGYWlsZWQgPiAwID8gTWF0aC5yb3VuZCgodG90YWxRdWVzdHMgLyAodG90YWxRdWVzdHMgKyB0b3RhbEZhaWxlZCkpICogMTAwKSA6IDA7XG4gICAgICAgIGNvbnN0IHRvdGFsWHAgPSB3ZWVrTWV0cmljcy5yZWR1Y2UoKHN1bTogbnVtYmVyLCBtOiBEYXlNZXRyaWNzKSA9PiBzdW0gKyBtLnhwRWFybmVkLCAwKTtcbiAgICAgICAgY29uc3QgdG90YWxHb2xkID0gd2Vla01ldHJpY3MucmVkdWNlKChzdW06IG51bWJlciwgbTogRGF5TWV0cmljcykgPT4gc3VtICsgbS5nb2xkRWFybmVkLCAwKTtcblxuICAgICAgICBjb25zdCB0b3BTa2lsbHMgPSBbLi4udGhpcy5zZXR0aW5ncy5za2lsbHNdLnNvcnQoKGE6IGFueSwgYjogYW55KSA9PiAoYi5sZXZlbCAtIGEubGV2ZWwpKS5zbGljZSgwLCAzKS5tYXAoKHM6IGFueSkgPT4gcy5uYW1lKTtcbiAgICAgICAgY29uc3QgYmVzdERheSA9IHdlZWtNZXRyaWNzLmxlbmd0aCA+IDAgPyB3ZWVrTWV0cmljcy5yZWR1Y2UoKG1heDogRGF5TWV0cmljcywgbTogRGF5TWV0cmljcykgPT4gbS5xdWVzdHNDb21wbGV0ZWQgPiBtYXgucXVlc3RzQ29tcGxldGVkID8gbSA6IG1heCkuZGF0ZSA6IHN0YXJ0RGF0ZTtcbiAgICAgICAgY29uc3Qgd29yc3REYXkgPSB3ZWVrTWV0cmljcy5sZW5ndGggPiAwID8gd2Vla01ldHJpY3MucmVkdWNlKChtaW46IERheU1ldHJpY3MsIG06IERheU1ldHJpY3MpID0+IG0ucXVlc3RzRmFpbGVkID4gbWluLnF1ZXN0c0ZhaWxlZCA/IG0gOiBtaW4pLmRhdGUgOiBzdGFydERhdGU7XG5cbiAgICAgICAgY29uc3QgcmVwb3J0OiBXZWVrbHlSZXBvcnQgPSB7IHdlZWssIHN0YXJ0RGF0ZSwgZW5kRGF0ZSwgdG90YWxRdWVzdHMsIHN1Y2Nlc3NSYXRlLCB0b3RhbFhwLCB0b3RhbEdvbGQsIHRvcFNraWxscywgYmVzdERheSwgd29yc3REYXkgfTtcbiAgICAgICAgdGhpcy5zZXR0aW5ncy53ZWVrbHlSZXBvcnRzLnB1c2gocmVwb3J0KTtcbiAgICAgICAgcmV0dXJuIHJlcG9ydDtcbiAgICB9XG5cbiAgICB1bmxvY2tBY2hpZXZlbWVudChhY2hpZXZlbWVudElkOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgLy8gVGhpcyBpcyBhIG1hbnVhbCBvdmVycmlkZSBpZiBuZWVkZWQsIGxvZ2ljIGlzIG1vc3RseSBpbiBjaGVja0FjaGlldmVtZW50cyBub3dcbiAgICAgICAgdGhpcy5jaGVja0FjaGlldmVtZW50cygpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBnZXRHYW1lU3RhdHMoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBsZXZlbDogdGhpcy5zZXR0aW5ncy5sZXZlbCxcbiAgICAgICAgICAgIGN1cnJlbnRTdHJlYWs6IHRoaXMuc2V0dGluZ3Muc3RyZWFrLmN1cnJlbnQsXG4gICAgICAgICAgICBsb25nZXN0U3RyZWFrOiB0aGlzLnNldHRpbmdzLnN0cmVhay5sb25nZXN0LFxuICAgICAgICAgICAgdG90YWxRdWVzdHM6IHRoaXMuc2V0dGluZ3MuZGF5TWV0cmljcy5yZWR1Y2UoKHN1bTogbnVtYmVyLCBtOiBEYXlNZXRyaWNzKSA9PiBzdW0gKyBtLnF1ZXN0c0NvbXBsZXRlZCwgMCksXG4gICAgICAgICAgICB0b3RhbFhwOiB0aGlzLnNldHRpbmdzLmRheU1ldHJpY3MucmVkdWNlKChzdW06IG51bWJlciwgbTogRGF5TWV0cmljcykgPT4gc3VtICsgbS54cEVhcm5lZCwgMCksXG4gICAgICAgICAgICBnYW1lV29uOiB0aGlzLnNldHRpbmdzLmdhbWVXb24sXG4gICAgICAgICAgICBib3NzZXNEZWZlYXRlZDogdGhpcy5zZXR0aW5ncy5ib3NzTWlsZXN0b25lcy5maWx0ZXIoKGI6IEJvc3NNaWxlc3RvbmUpID0+IGIuZGVmZWF0ZWQpLmxlbmd0aCxcbiAgICAgICAgICAgIHRvdGFsQm9zc2VzOiB0aGlzLnNldHRpbmdzLmJvc3NNaWxlc3RvbmVzLmxlbmd0aFxuICAgICAgICB9O1xuICAgIH1cbn1cbiIsImltcG9ydCB7IG1vbWVudCB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IFNpc3lwaHVzU2V0dGluZ3MgfSBmcm9tICcuLi90eXBlcyc7XG5cbi8qKlxuICogRExDIDM6IE1lZGl0YXRpb24gJiBSZWNvdmVyeSBFbmdpbmVcbiAqIEhhbmRsZXMgbG9ja2Rvd24gc3RhdGUsIG1lZGl0YXRpb24gaGVhbGluZywgYW5kIHF1ZXN0IGRlbGV0aW9uIHF1b3RhXG4gKiBcbiAqIElTT0xBVEVEOiBPbmx5IHJlYWRzL3dyaXRlcyB0byBsb2NrZG93blVudGlsLCBpc01lZGl0YXRpbmcsIG1lZGl0YXRpb25DbGlja3NUaGlzTG9ja2Rvd24sIFxuICogICAgICAgICAgIHF1ZXN0RGVsZXRpb25zVG9kYXksIGxhc3REZWxldGlvblJlc2V0XG4gKiBERVBFTkRFTkNJRVM6IG1vbWVudCwgU2lzeXBodXNTZXR0aW5nc1xuICogU0lERSBFRkZFQ1RTOiBQbGF5cyBhdWRpbyAoNDMyIEh6IHRvbmUpXG4gKi9cbmV4cG9ydCBjbGFzcyBNZWRpdGF0aW9uRW5naW5lIHtcbiAgICBzZXR0aW5nczogU2lzeXBodXNTZXR0aW5ncztcbiAgICBhdWRpb0NvbnRyb2xsZXI/OiBhbnk7IC8vIE9wdGlvbmFsIGZvciA0MzIgSHogc291bmRcbiAgICBwcml2YXRlIG1lZGl0YXRpb25Db29sZG93bk1zID0gMzAwMDA7IC8vIDMwIHNlY29uZHNcbiAgICBwcml2YXRlIG1lZGl0YXRpb25BdWRpb0N0eDogQXVkaW9Db250ZXh0IHwgbnVsbCA9IG51bGw7XG5cbiAgICBjb25zdHJ1Y3RvcihzZXR0aW5nczogU2lzeXBodXNTZXR0aW5ncywgYXVkaW9Db250cm9sbGVyPzogYW55KSB7XG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSBzZXR0aW5ncztcbiAgICAgICAgdGhpcy5hdWRpb0NvbnRyb2xsZXIgPSBhdWRpb0NvbnRyb2xsZXI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgaWYgY3VycmVudGx5IGxvY2tlZCBkb3duXG4gICAgICovXG4gICAgaXNMb2NrZWREb3duKCk6IGJvb2xlYW4ge1xuICAgICAgICBpZiAoIXRoaXMuc2V0dGluZ3MubG9ja2Rvd25VbnRpbCkgcmV0dXJuIGZhbHNlO1xuICAgICAgICByZXR1cm4gbW9tZW50KCkuaXNCZWZvcmUobW9tZW50KHRoaXMuc2V0dGluZ3MubG9ja2Rvd25VbnRpbCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBsb2NrZG93biB0aW1lIHJlbWFpbmluZyBpbiBtaW51dGVzXG4gICAgICovXG4gICAgZ2V0TG9ja2Rvd25UaW1lUmVtYWluaW5nKCk6IHsgaG91cnM6IG51bWJlcjsgbWludXRlczogbnVtYmVyOyB0b3RhbE1pbnV0ZXM6IG51bWJlciB9IHtcbiAgICAgICAgaWYgKCF0aGlzLmlzTG9ja2VkRG93bigpKSB7XG4gICAgICAgICAgICByZXR1cm4geyBob3VyczogMCwgbWludXRlczogMCwgdG90YWxNaW51dGVzOiAwIH07XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB0b3RhbE1pbnV0ZXMgPSBtb21lbnQodGhpcy5zZXR0aW5ncy5sb2NrZG93blVudGlsKS5kaWZmKG1vbWVudCgpLCAnbWludXRlcycpO1xuICAgICAgICBjb25zdCBob3VycyA9IE1hdGguZmxvb3IodG90YWxNaW51dGVzIC8gNjApO1xuICAgICAgICBjb25zdCBtaW51dGVzID0gdG90YWxNaW51dGVzICUgNjA7XG5cbiAgICAgICAgcmV0dXJuIHsgaG91cnMsIG1pbnV0ZXMsIHRvdGFsTWludXRlcyB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRyaWdnZXIgbG9ja2Rvd24gYWZ0ZXIgdGFraW5nIDUwKyBkYW1hZ2VcbiAgICAgKi9cbiAgICB0cmlnZ2VyTG9ja2Rvd24oKSB7XG4gICAgICAgIHRoaXMuc2V0dGluZ3MubG9ja2Rvd25VbnRpbCA9IG1vbWVudCgpLmFkZCg2LCAnaG91cnMnKS50b0lTT1N0cmluZygpO1xuICAgICAgICB0aGlzLnNldHRpbmdzLm1lZGl0YXRpb25DbGlja3NUaGlzTG9ja2Rvd24gPSAwO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBlcmZvcm0gb25lIG1lZGl0YXRpb24gY3ljbGUgKGNsaWNrKVxuICAgICAqIFJldHVybnM6IHsgc3VjY2VzcywgY3ljbGVzRG9uZSwgY3ljbGVzUmVtYWluaW5nLCBtZXNzYWdlIH1cbiAgICAgKi9cbiAgICBtZWRpdGF0ZSgpOiB7IHN1Y2Nlc3M6IGJvb2xlYW47IGN5Y2xlc0RvbmU6IG51bWJlcjsgY3ljbGVzUmVtYWluaW5nOiBudW1iZXI7IG1lc3NhZ2U6IHN0cmluZzsgbG9ja2Rvd25SZWR1Y2VkOiBib29sZWFuIH0ge1xuICAgICAgICBpZiAoIXRoaXMuaXNMb2NrZWREb3duKCkpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgY3ljbGVzRG9uZTogMCxcbiAgICAgICAgICAgICAgICBjeWNsZXNSZW1haW5pbmc6IDAsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogXCJOb3QgaW4gbG9ja2Rvd24uIE5vIG5lZWQgdG8gbWVkaXRhdGUuXCIsXG4gICAgICAgICAgICAgICAgbG9ja2Rvd25SZWR1Y2VkOiBmYWxzZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmlzTWVkaXRhdGluZykge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBjeWNsZXNEb25lOiB0aGlzLnNldHRpbmdzLm1lZGl0YXRpb25DbGlja3NUaGlzTG9ja2Rvd24sXG4gICAgICAgICAgICAgICAgY3ljbGVzUmVtYWluaW5nOiBNYXRoLm1heCgwLCAxMCAtIHRoaXMuc2V0dGluZ3MubWVkaXRhdGlvbkNsaWNrc1RoaXNMb2NrZG93biksXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogXCJBbHJlYWR5IG1lZGl0YXRpbmcuIFdhaXQgMzAgc2Vjb25kcy5cIixcbiAgICAgICAgICAgICAgICBsb2NrZG93blJlZHVjZWQ6IGZhbHNlXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zZXR0aW5ncy5pc01lZGl0YXRpbmcgPSB0cnVlO1xuICAgICAgICB0aGlzLnNldHRpbmdzLm1lZGl0YXRpb25DbGlja3NUaGlzTG9ja2Rvd24rKztcblxuICAgICAgICAvLyBQbGF5IGhlYWxpbmcgZnJlcXVlbmN5XG4gICAgICAgIHRoaXMucGxheU1lZGl0YXRpb25Tb3VuZCgpO1xuXG4gICAgICAgIGNvbnN0IHJlbWFpbmluZyA9IDEwIC0gdGhpcy5zZXR0aW5ncy5tZWRpdGF0aW9uQ2xpY2tzVGhpc0xvY2tkb3duO1xuICAgICAgICBsZXQgbG9ja2Rvd25SZWR1Y2VkID0gZmFsc2U7XG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgMTAgY3ljbGVzIGNvbXBsZXRlXG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLm1lZGl0YXRpb25DbGlja3NUaGlzTG9ja2Rvd24gPj0gMTApIHtcbiAgICAgICAgICAgIGNvbnN0IHJlZHVjZWRUaW1lID0gbW9tZW50KHRoaXMuc2V0dGluZ3MubG9ja2Rvd25VbnRpbCkuc3VidHJhY3QoNSwgJ2hvdXJzJyk7XG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzLmxvY2tkb3duVW50aWwgPSByZWR1Y2VkVGltZS50b0lTT1N0cmluZygpO1xuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5tZWRpdGF0aW9uQ2xpY2tzVGhpc0xvY2tkb3duID0gMDtcbiAgICAgICAgICAgIGxvY2tkb3duUmVkdWNlZCA9IHRydWU7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmF1ZGlvQ29udHJvbGxlcj8ucGxheVNvdW5kKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hdWRpb0NvbnRyb2xsZXIucGxheVNvdW5kKFwic3VjY2Vzc1wiKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQXV0by1yZXNldCBtZWRpdGF0aW9uIGZsYWcgYWZ0ZXIgY29vbGRvd25cbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MuaXNNZWRpdGF0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICB9LCB0aGlzLm1lZGl0YXRpb25Db29sZG93bk1zKTtcblxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgICAgIGN5Y2xlc0RvbmU6IDAsXG4gICAgICAgICAgICAgICAgY3ljbGVzUmVtYWluaW5nOiAwLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiTWVkaXRhdGlvbiBjb21wbGV0ZS4gTG9ja2Rvd24gcmVkdWNlZCBieSA1IGhvdXJzLlwiLFxuICAgICAgICAgICAgICAgIGxvY2tkb3duUmVkdWNlZDogdHJ1ZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEF1dG8tcmVzZXQgbWVkaXRhdGlvbiBmbGFnIGFmdGVyIGNvb2xkb3duXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5pc01lZGl0YXRpbmcgPSBmYWxzZTtcbiAgICAgICAgfSwgdGhpcy5tZWRpdGF0aW9uQ29vbGRvd25Ncyk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICBjeWNsZXNEb25lOiB0aGlzLnNldHRpbmdzLm1lZGl0YXRpb25DbGlja3NUaGlzTG9ja2Rvd24sXG4gICAgICAgICAgICBjeWNsZXNSZW1haW5pbmc6IHJlbWFpbmluZyxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGBNZWRpdGF0aW9uICgke3RoaXMuc2V0dGluZ3MubWVkaXRhdGlvbkNsaWNrc1RoaXNMb2NrZG93bn0vMTApIC0gJHtyZW1haW5pbmd9IGN5Y2xlcyBsZWZ0YCxcbiAgICAgICAgICAgIGxvY2tkb3duUmVkdWNlZDogZmFsc2VcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQbGF5IDQzMiBIeiBoZWFsaW5nIGZyZXF1ZW5jeSBmb3IgMSBzZWNvbmRcbiAgICAgKi9cbiAgICBwcml2YXRlIHBsYXlNZWRpdGF0aW9uU291bmQoKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMubWVkaXRhdGlvbkF1ZGlvQ3R4IHx8IHRoaXMubWVkaXRhdGlvbkF1ZGlvQ3R4LnN0YXRlID09PSAnY2xvc2VkJykge1xuICAgICAgICAgICAgICAgIHRoaXMubWVkaXRhdGlvbkF1ZGlvQ3R4ID0gbmV3ICh3aW5kb3cuQXVkaW9Db250ZXh0IHx8ICh3aW5kb3cgYXMgYW55KS53ZWJraXRBdWRpb0NvbnRleHQpKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBhdWRpb0NvbnRleHQgPSB0aGlzLm1lZGl0YXRpb25BdWRpb0N0eDtcbiAgICAgICAgICAgIGNvbnN0IG9zY2lsbGF0b3IgPSBhdWRpb0NvbnRleHQuY3JlYXRlT3NjaWxsYXRvcigpO1xuICAgICAgICAgICAgY29uc3QgZ2Fpbk5vZGUgPSBhdWRpb0NvbnRleHQuY3JlYXRlR2FpbigpO1xuXG4gICAgICAgICAgICBvc2NpbGxhdG9yLmZyZXF1ZW5jeS52YWx1ZSA9IDQzMjtcbiAgICAgICAgICAgIG9zY2lsbGF0b3IudHlwZSA9IFwic2luZVwiO1xuICAgICAgICAgICAgZ2Fpbk5vZGUuZ2Fpbi5zZXRWYWx1ZUF0VGltZSgwLjMsIGF1ZGlvQ29udGV4dC5jdXJyZW50VGltZSk7XG4gICAgICAgICAgICBnYWluTm9kZS5nYWluLmV4cG9uZW50aWFsUmFtcFRvVmFsdWVBdFRpbWUoMC4wMSwgYXVkaW9Db250ZXh0LmN1cnJlbnRUaW1lICsgMSk7XG5cbiAgICAgICAgICAgIG9zY2lsbGF0b3IuY29ubmVjdChnYWluTm9kZSk7XG4gICAgICAgICAgICBnYWluTm9kZS5jb25uZWN0KGF1ZGlvQ29udGV4dC5kZXN0aW5hdGlvbik7XG5cbiAgICAgICAgICAgIG9zY2lsbGF0b3Iuc3RhcnQoYXVkaW9Db250ZXh0LmN1cnJlbnRUaW1lKTtcbiAgICAgICAgICAgIG9zY2lsbGF0b3Iuc3RvcChhdWRpb0NvbnRleHQuY3VycmVudFRpbWUgKyAxKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJBdWRpbyBub3QgYXZhaWxhYmxlIGZvciBtZWRpdGF0aW9uXCIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IG1lZGl0YXRpb24gc3RhdHVzIGZvciBjdXJyZW50IGxvY2tkb3duXG4gICAgICovXG4gICAgZ2V0TWVkaXRhdGlvblN0YXR1cygpOiB7IGN5Y2xlc0RvbmU6IG51bWJlcjsgY3ljbGVzUmVtYWluaW5nOiBudW1iZXI7IHRpbWVSZWR1Y2VkOiBudW1iZXIgfSB7XG4gICAgICAgIGNvbnN0IGN5Y2xlc0RvbmUgPSB0aGlzLnNldHRpbmdzLm1lZGl0YXRpb25DbGlja3NUaGlzTG9ja2Rvd247XG4gICAgICAgIGNvbnN0IGN5Y2xlc1JlbWFpbmluZyA9IE1hdGgubWF4KDAsIDEwIC0gY3ljbGVzRG9uZSk7XG4gICAgICAgIGNvbnN0IHRpbWVSZWR1Y2VkID0gKDEwIC0gY3ljbGVzUmVtYWluaW5nKSAqIDMwOyAvLyAzMCBtaW4gcGVyIGN5Y2xlXG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGN5Y2xlc0RvbmUsXG4gICAgICAgICAgICBjeWNsZXNSZW1haW5pbmcsXG4gICAgICAgICAgICB0aW1lUmVkdWNlZFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlc2V0IGRlbGV0aW9uIHF1b3RhIGlmIG5ldyBkYXlcbiAgICAgKi9cbiAgICBwcml2YXRlIGVuc3VyZURlbGV0aW9uUXVvdGFSZXNldCgpIHtcbiAgICAgICAgY29uc3QgdG9kYXkgPSBtb21lbnQoKS5mb3JtYXQoXCJZWVlZLU1NLUREXCIpO1xuXG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmxhc3REZWxldGlvblJlc2V0ICE9PSB0b2RheSkge1xuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5sYXN0RGVsZXRpb25SZXNldCA9IHRvZGF5O1xuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5xdWVzdERlbGV0aW9uc1RvZGF5ID0gMDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrIGlmIHVzZXIgaGFzIGZyZWUgZGVsZXRpb25zIGxlZnQgdG9kYXlcbiAgICAgKi9cbiAgICBjYW5EZWxldGVRdWVzdEZyZWUoKTogYm9vbGVhbiB7XG4gICAgICAgIHRoaXMuZW5zdXJlRGVsZXRpb25RdW90YVJlc2V0KCk7XG4gICAgICAgIHJldHVybiB0aGlzLnNldHRpbmdzLnF1ZXN0RGVsZXRpb25zVG9kYXkgPCAzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBkZWxldGlvbiBxdW90YSBzdGF0dXNcbiAgICAgKi9cbiAgICBnZXREZWxldGlvblF1b3RhKCk6IHsgZnJlZTogbnVtYmVyOyBwYWlkOiBudW1iZXI7IHJlbWFpbmluZzogbnVtYmVyIH0ge1xuICAgICAgICB0aGlzLmVuc3VyZURlbGV0aW9uUXVvdGFSZXNldCgpO1xuXG4gICAgICAgIGNvbnN0IHJlbWFpbmluZyA9IE1hdGgubWF4KDAsIDMgLSB0aGlzLnNldHRpbmdzLnF1ZXN0RGVsZXRpb25zVG9kYXkpO1xuICAgICAgICBjb25zdCBwYWlkID0gTWF0aC5tYXgoMCwgdGhpcy5zZXR0aW5ncy5xdWVzdERlbGV0aW9uc1RvZGF5IC0gMyk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGZyZWU6IHJlbWFpbmluZyxcbiAgICAgICAgICAgIHBhaWQ6IHBhaWQsXG4gICAgICAgICAgICByZW1haW5pbmc6IHJlbWFpbmluZ1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgY29zdCBvZiB0aGUgbmV4dCBkZWxldGlvbiB3aXRob3V0IG11dGF0aW5nIHN0YXRlLlxuICAgICAqIFVzZSB0aGlzIHRvIGNoZWNrIGFmZm9yZGFiaWxpdHkgYmVmb3JlIGNhbGxpbmcgYXBwbHlEZWxldGlvbkNvc3QuXG4gICAgICovXG4gICAgZ2V0RGVsZXRpb25Db3N0KCk6IHsgY29zdDogbnVtYmVyOyBtZXNzYWdlOiBzdHJpbmcgfSB7XG4gICAgICAgIHRoaXMuZW5zdXJlRGVsZXRpb25RdW90YVJlc2V0KCk7XG5cbiAgICAgICAgbGV0IGNvc3QgPSAwO1xuICAgICAgICBsZXQgbWVzc2FnZSA9IFwiXCI7XG5cbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MucXVlc3REZWxldGlvbnNUb2RheSA+PSAzKSB7XG4gICAgICAgICAgICBjb3N0ID0gMTA7XG4gICAgICAgICAgICBtZXNzYWdlID0gYFF1ZXN0IGRlbGV0ZWQuIENvc3Q6IC0ke2Nvc3R9Z2A7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCByZW1haW5pbmcgPSAzIC0gdGhpcy5zZXR0aW5ncy5xdWVzdERlbGV0aW9uc1RvZGF5O1xuICAgICAgICAgICAgbWVzc2FnZSA9IGBRdWVzdCBkZWxldGVkLiAoJHtyZW1haW5pbmcgLSAxfSBmcmVlIGRlbGV0aW9ucyByZW1haW5pbmcpYDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7IGNvc3QsIG1lc3NhZ2UgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBcHBseSBkZWxldGlvbjogaW5jcmVtZW50IHF1b3RhIGFuZCBjaGFyZ2UgZ29sZC4gQ2FsbCBvbmx5IGFmdGVyIGNoZWNraW5nIGdldERlbGV0aW9uQ29zdCgpLlxuICAgICAqIFJldHVybnM6IHsgY29zdCwgbWVzc2FnZSB9XG4gICAgICovXG4gICAgYXBwbHlEZWxldGlvbkNvc3QoKTogeyBjb3N0OiBudW1iZXI7IG1lc3NhZ2U6IHN0cmluZyB9IHtcbiAgICAgICAgY29uc3QgeyBjb3N0LCBtZXNzYWdlIH0gPSB0aGlzLmdldERlbGV0aW9uQ29zdCgpO1xuICAgICAgICB0aGlzLnNldHRpbmdzLnF1ZXN0RGVsZXRpb25zVG9kYXkrKztcbiAgICAgICAgdGhpcy5zZXR0aW5ncy5nb2xkIC09IGNvc3Q7XG4gICAgICAgIHJldHVybiB7IGNvc3QsIG1lc3NhZ2UgfTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBBcHAsIFRGaWxlLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBTaXN5cGh1c1NldHRpbmdzLCBSZXNlYXJjaFF1ZXN0IH0gZnJvbSAnLi4vdHlwZXMnO1xuXG5leHBvcnQgY2xhc3MgUmVzZWFyY2hFbmdpbmUge1xuICAgIHNldHRpbmdzOiBTaXN5cGh1c1NldHRpbmdzO1xuICAgIGF1ZGlvQ29udHJvbGxlcj86IGFueTtcbiAgICBhcHA6IEFwcDsgLy8gQWRkZWQgQXBwIHJlZmVyZW5jZSBmb3IgZmlsZSBvcGVyYXRpb25zXG5cbiAgICBjb25zdHJ1Y3RvcihzZXR0aW5nczogU2lzeXBodXNTZXR0aW5ncywgYXBwOiBBcHAsIGF1ZGlvQ29udHJvbGxlcj86IGFueSkge1xuICAgICAgICB0aGlzLnNldHRpbmdzID0gc2V0dGluZ3M7XG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xuICAgICAgICB0aGlzLmF1ZGlvQ29udHJvbGxlciA9IGF1ZGlvQ29udHJvbGxlcjtcbiAgICB9XG5cbiAgICBhc3luYyBjcmVhdGVSZXNlYXJjaFF1ZXN0KHRpdGxlOiBzdHJpbmcsIHR5cGU6IFwic3VydmV5XCIgfCBcImRlZXBfZGl2ZVwiLCBsaW5rZWRTa2lsbDogc3RyaW5nLCBsaW5rZWRDb21iYXRRdWVzdDogc3RyaW5nKTogUHJvbWlzZTx7IHN1Y2Nlc3M6IGJvb2xlYW47IG1lc3NhZ2U6IHN0cmluZzsgcXVlc3RJZD86IHN0cmluZyB9PiB7XG4gICAgICAgIC8vIFtGSVhdIEFsbG93IGZpcnN0IHJlc2VhcmNoIHF1ZXN0IGZvciBmcmVlIChDb2xkIFN0YXJ0KSwgb3RoZXJ3aXNlIGVuZm9yY2UgMjoxXG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLnJlc2VhcmNoU3RhdHMudG90YWxSZXNlYXJjaCA+IDAgJiYgIXRoaXMuY2FuQ3JlYXRlUmVzZWFyY2hRdWVzdCgpKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiUkVTRUFSQ0ggQkxPQ0tFRDogQ29tcGxldGUgMiBjb21iYXQgcXVlc3RzIHBlciByZXNlYXJjaCBxdWVzdFwiXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjb25zdCB3b3JkTGltaXQgPSB0eXBlID09PSBcInN1cnZleVwiID8gMjAwIDogNDAwO1xuICAgICAgICBjb25zdCBxdWVzdElkID0gYHJlc2VhcmNoXyR7KHRoaXMuc2V0dGluZ3MubGFzdFJlc2VhcmNoUXVlc3RJZCB8fCAwKSArIDF9YDtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHJlc2VhcmNoUXVlc3Q6IFJlc2VhcmNoUXVlc3QgPSB7XG4gICAgICAgICAgICBpZDogcXVlc3RJZCxcbiAgICAgICAgICAgIHRpdGxlOiB0aXRsZSxcbiAgICAgICAgICAgIHR5cGU6IHR5cGUsXG4gICAgICAgICAgICBsaW5rZWRTa2lsbDogbGlua2VkU2tpbGwsXG4gICAgICAgICAgICB3b3JkTGltaXQ6IHdvcmRMaW1pdCxcbiAgICAgICAgICAgIHdvcmRDb3VudDogMCxcbiAgICAgICAgICAgIGxpbmtlZENvbWJhdFF1ZXN0OiBsaW5rZWRDb21iYXRRdWVzdCxcbiAgICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgY29tcGxldGVkOiBmYWxzZVxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIFtGSVhdIENyZWF0ZSBhY3R1YWwgTWFya2Rvd24gZmlsZVxuICAgICAgICBjb25zdCBmb2xkZXJQYXRoID0gXCJBY3RpdmVfUnVuL1Jlc2VhcmNoXCI7XG4gICAgICAgIGlmICghdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZvbGRlclBhdGgpKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGVGb2xkZXIoZm9sZGVyUGF0aCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBzYWZlVGl0bGUgPSB0aXRsZS5yZXBsYWNlKC9bXmEtejAtOV0vZ2ksICdfJykudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgY29uc3QgZmlsZW5hbWUgPSBgJHtmb2xkZXJQYXRofS8ke3NhZmVUaXRsZX0ubWRgO1xuICAgICAgICBjb25zdCBjb250ZW50ID0gYC0tLVxudHlwZTogcmVzZWFyY2hcbnJlc2VhcmNoX2lkOiAke3F1ZXN0SWR9XG5zdGF0dXM6IGFjdGl2ZVxubGlua2VkX3NraWxsOiAke2xpbmtlZFNraWxsfVxud29yZF9saW1pdDogJHt3b3JkTGltaXR9XG5jcmVhdGVkOiAke25ldyBEYXRlKCkudG9JU09TdHJpbmcoKX1cbi0tLVxuIyDwn5OaICR7dGl0bGV9XG4+IFshSU5GT10gUmVzZWFyY2ggR3VpZGVsaW5lc1xuPiAqKlR5cGU6KiogJHt0eXBlfSB8ICoqVGFyZ2V0OioqICR7d29yZExpbWl0fSB3b3Jkc1xuPiAqKkxpbmtlZCBTa2lsbDoqKiAke2xpbmtlZFNraWxsfVxuXG5Xcml0ZSB5b3VyIHJlc2VhcmNoIGhlcmUuLi5cbmA7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShmaWxlbmFtZSwgY29udGVudCk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJFcnJvciBjcmVhdGluZyByZXNlYXJjaCBmaWxlLiBDaGVjayBjb25zb2xlLlwiKTtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRoaXMuc2V0dGluZ3MucmVzZWFyY2hRdWVzdHMucHVzaChyZXNlYXJjaFF1ZXN0KTtcbiAgICAgICAgdGhpcy5zZXR0aW5ncy5sYXN0UmVzZWFyY2hRdWVzdElkID0gcGFyc2VJbnQocXVlc3RJZC5zcGxpdCgnXycpWzFdKTtcbiAgICAgICAgdGhpcy5zZXR0aW5ncy5yZXNlYXJjaFN0YXRzLnRvdGFsUmVzZWFyY2grKztcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgbWVzc2FnZTogYFJlc2VhcmNoIFF1ZXN0IENyZWF0ZWQ6ICR7dHlwZSA9PT0gXCJzdXJ2ZXlcIiA/IFwiU3VydmV5XCIgOiBcIkRlZXAgRGl2ZVwifWAsXG4gICAgICAgICAgICBxdWVzdElkOiBxdWVzdElkXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgY29tcGxldGVSZXNlYXJjaFF1ZXN0KHF1ZXN0SWQ6IHN0cmluZywgZmluYWxXb3JkQ291bnQ6IG51bWJlcik6IHsgc3VjY2VzczogYm9vbGVhbjsgbWVzc2FnZTogc3RyaW5nOyB4cFJld2FyZDogbnVtYmVyOyBnb2xkUGVuYWx0eTogbnVtYmVyIH0ge1xuICAgICAgICBjb25zdCByZXNlYXJjaFF1ZXN0ID0gdGhpcy5zZXR0aW5ncy5yZXNlYXJjaFF1ZXN0cy5maW5kKHEgPT4gcS5pZCA9PT0gcXVlc3RJZCk7XG4gICAgICAgIGlmICghcmVzZWFyY2hRdWVzdCkgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6IFwiUmVzZWFyY2ggcXVlc3Qgbm90IGZvdW5kXCIsIHhwUmV3YXJkOiAwLCBnb2xkUGVuYWx0eTogMCB9O1xuICAgICAgICBpZiAocmVzZWFyY2hRdWVzdC5jb21wbGV0ZWQpIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiBcIlF1ZXN0IGFscmVhZHkgY29tcGxldGVkXCIsIHhwUmV3YXJkOiAwLCBnb2xkUGVuYWx0eTogMCB9O1xuICAgICAgICBcbiAgICAgICAgY29uc3QgbWluV29yZHMgPSBNYXRoLmNlaWwocmVzZWFyY2hRdWVzdC53b3JkTGltaXQgKiAwLjgpO1xuICAgICAgICBpZiAoZmluYWxXb3JkQ291bnQgPCBtaW5Xb3Jkcykge1xuICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6IGBUb28gc2hvcnQhIE5lZWQgJHttaW5Xb3Jkc30gd29yZHMuYCwgeHBSZXdhcmQ6IDAsIGdvbGRQZW5hbHR5OiAwIH07XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmIChmaW5hbFdvcmRDb3VudCA+IHJlc2VhcmNoUXVlc3Qud29yZExpbWl0ICogMS4yNSkge1xuICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6IGBUb28gbG9uZyEgTWF4ICR7TWF0aC5jZWlsKHJlc2VhcmNoUXVlc3Qud29yZExpbWl0ICogMS4yNSl9IHdvcmRzLmAsIHhwUmV3YXJkOiAwLCBnb2xkUGVuYWx0eTogMCB9O1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBsZXQgeHBSZXdhcmQgPSByZXNlYXJjaFF1ZXN0LnR5cGUgPT09IFwic3VydmV5XCIgPyA1IDogMjA7XG4gICAgICAgIGxldCBnb2xkUGVuYWx0eSA9IDA7XG4gICAgICAgIGlmIChmaW5hbFdvcmRDb3VudCA+IHJlc2VhcmNoUXVlc3Qud29yZExpbWl0KSB7XG4gICAgICAgICAgICBjb25zdCBvdmVyYWdlUGVyY2VudCA9ICgoZmluYWxXb3JkQ291bnQgLSByZXNlYXJjaFF1ZXN0LndvcmRMaW1pdCkgLyByZXNlYXJjaFF1ZXN0LndvcmRMaW1pdCkgKiAxMDA7XG4gICAgICAgICAgICBnb2xkUGVuYWx0eSA9IE1hdGguZmxvb3IoMjAgKiAob3ZlcmFnZVBlcmNlbnQgLyAxMDApKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgY29uc3Qgc2tpbGwgPSB0aGlzLnNldHRpbmdzLnNraWxscy5maW5kKHMgPT4gcy5uYW1lID09PSByZXNlYXJjaFF1ZXN0LmxpbmtlZFNraWxsKTtcbiAgICAgICAgaWYgKHNraWxsKSB7XG4gICAgICAgICAgICBza2lsbC54cCArPSB4cFJld2FyZDtcbiAgICAgICAgICAgIGlmIChza2lsbC54cCA+PSBza2lsbC54cFJlcSkgeyBza2lsbC5sZXZlbCsrOyBza2lsbC54cCA9IDA7IH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdGhpcy5zZXR0aW5ncy5nb2xkIC09IGdvbGRQZW5hbHR5O1xuICAgICAgICByZXNlYXJjaFF1ZXN0LmNvbXBsZXRlZCA9IHRydWU7XG4gICAgICAgIHJlc2VhcmNoUXVlc3QuY29tcGxldGVkQXQgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG4gICAgICAgIHRoaXMuc2V0dGluZ3MucmVzZWFyY2hTdGF0cy5yZXNlYXJjaENvbXBsZXRlZCsrO1xuICAgICAgICBcbiAgICAgICAgaWYgKHRoaXMuYXVkaW9Db250cm9sbGVyPy5wbGF5U291bmQpIHRoaXMuYXVkaW9Db250cm9sbGVyLnBsYXlTb3VuZChcInN1Y2Nlc3NcIik7XG4gICAgICAgIFxuICAgICAgICBsZXQgbWVzc2FnZSA9IGBSZXNlYXJjaCBDb21wbGV0ZSEgKyR7eHBSZXdhcmR9IFhQYDtcbiAgICAgICAgaWYgKGdvbGRQZW5hbHR5ID4gMCkgbWVzc2FnZSArPSBgICgtJHtnb2xkUGVuYWx0eX1nIHRheClgO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgbWVzc2FnZSwgeHBSZXdhcmQsIGdvbGRQZW5hbHR5IH07XG4gICAgfVxuXG4gICAgYXN5bmMgZGVsZXRlUmVzZWFyY2hRdWVzdChxdWVzdElkOiBzdHJpbmcpOiBQcm9taXNlPHsgc3VjY2VzczogYm9vbGVhbjsgbWVzc2FnZTogc3RyaW5nIH0+IHtcbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLnNldHRpbmdzLnJlc2VhcmNoUXVlc3RzLmZpbmRJbmRleChxID0+IHEuaWQgPT09IHF1ZXN0SWQpO1xuICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICBjb25zdCBxdWVzdCA9IHRoaXMuc2V0dGluZ3MucmVzZWFyY2hRdWVzdHNbaW5kZXhdO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBbRklYXSBUcnkgdG8gZmluZCBhbmQgZGVsZXRlIHRoZSBmaWxlXG4gICAgICAgICAgICBjb25zdCBmaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcbiAgICAgICAgICAgIGNvbnN0IGZpbGUgPSBmaWxlcy5maW5kKGYgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNhY2hlID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhY2hlPy5mcm9udG1hdHRlcj8ucmVzZWFyY2hfaWQgPT09IHF1ZXN0SWQ7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKGZpbGUpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5kZWxldGUoZmlsZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MucmVzZWFyY2hRdWVzdHMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgIGlmICghcXVlc3QuY29tcGxldGVkKSB0aGlzLnNldHRpbmdzLnJlc2VhcmNoU3RhdHMudG90YWxSZXNlYXJjaCA9IE1hdGgubWF4KDAsIHRoaXMuc2V0dGluZ3MucmVzZWFyY2hTdGF0cy50b3RhbFJlc2VhcmNoIC0gMSk7XG4gICAgICAgICAgICBlbHNlIHRoaXMuc2V0dGluZ3MucmVzZWFyY2hTdGF0cy5yZXNlYXJjaENvbXBsZXRlZCA9IE1hdGgubWF4KDAsIHRoaXMuc2V0dGluZ3MucmVzZWFyY2hTdGF0cy5yZXNlYXJjaENvbXBsZXRlZCAtIDEpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBtZXNzYWdlOiBcIlJlc2VhcmNoIGRlbGV0ZWRcIiB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiBcIk5vdCBmb3VuZFwiIH07XG4gICAgfVxuXG4gICAgdXBkYXRlUmVzZWFyY2hXb3JkQ291bnQocXVlc3RJZDogc3RyaW5nLCBuZXdXb3JkQ291bnQ6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCByZXNlYXJjaFF1ZXN0ID0gdGhpcy5zZXR0aW5ncy5yZXNlYXJjaFF1ZXN0cy5maW5kKHEgPT4gcS5pZCA9PT0gcXVlc3RJZCk7XG4gICAgICAgIGlmIChyZXNlYXJjaFF1ZXN0KSB7XG4gICAgICAgICAgICByZXNlYXJjaFF1ZXN0LndvcmRDb3VudCA9IG5ld1dvcmRDb3VudDtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBnZXRSZXNlYXJjaFJhdGlvKCkge1xuICAgICAgICBjb25zdCBzdGF0cyA9IHRoaXMuc2V0dGluZ3MucmVzZWFyY2hTdGF0cztcbiAgICAgICAgY29uc3QgcmF0aW8gPSBzdGF0cy50b3RhbENvbWJhdCAvIE1hdGgubWF4KDEsIHN0YXRzLnRvdGFsUmVzZWFyY2gpO1xuICAgICAgICByZXR1cm4geyBjb21iYXQ6IHN0YXRzLnRvdGFsQ29tYmF0LCByZXNlYXJjaDogc3RhdHMudG90YWxSZXNlYXJjaCwgcmF0aW86IHJhdGlvLnRvRml4ZWQoMikgfTtcbiAgICB9XG5cbiAgICBjYW5DcmVhdGVSZXNlYXJjaFF1ZXN0KCk6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCBzdGF0cyA9IHRoaXMuc2V0dGluZ3MucmVzZWFyY2hTdGF0cztcbiAgICAgICAgY29uc3QgcmF0aW8gPSBzdGF0cy50b3RhbENvbWJhdCAvIE1hdGgubWF4KDEsIHN0YXRzLnRvdGFsUmVzZWFyY2gpO1xuICAgICAgICByZXR1cm4gcmF0aW8gPj0gMjtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBTaXN5cGh1c1NldHRpbmdzLCBRdWVzdENoYWluLCBRdWVzdENoYWluUmVjb3JkIH0gZnJvbSAnLi4vdHlwZXMnO1xuXG4vKipcbiAqIERMQyA0OiBRdWVzdCBDaGFpbnMgRW5naW5lXG4gKiBIYW5kbGVzIG11bHRpLXF1ZXN0IHNlcXVlbmNlcyB3aXRoIG9yZGVyaW5nLCBsb2NraW5nLCBhbmQgY29tcGxldGlvbiB0cmFja2luZ1xuICogXG4gKiBJU09MQVRFRDogT25seSByZWFkcy93cml0ZXMgdG8gYWN0aXZlQ2hhaW5zLCBjaGFpbkhpc3RvcnksIGN1cnJlbnRDaGFpbklkLCBjaGFpblF1ZXN0c0NvbXBsZXRlZFxuICogREVQRU5ERU5DSUVTOiBTaXN5cGh1c1NldHRpbmdzIHR5cGVzXG4gKiBJTlRFR1JBVElPTiBQT0lOVFM6IE5lZWRzIHRvIGhvb2sgaW50byBjb21wbGV0ZVF1ZXN0KCkgaW4gbWFpbiBlbmdpbmUgZm9yIGNoYWluIHByb2dyZXNzaW9uXG4gKi9cbmV4cG9ydCBjbGFzcyBDaGFpbnNFbmdpbmUge1xuICAgIHNldHRpbmdzOiBTaXN5cGh1c1NldHRpbmdzO1xuICAgIGF1ZGlvQ29udHJvbGxlcj86IGFueTtcblxuICAgIGNvbnN0cnVjdG9yKHNldHRpbmdzOiBTaXN5cGh1c1NldHRpbmdzLCBhdWRpb0NvbnRyb2xsZXI/OiBhbnkpIHtcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzO1xuICAgICAgICB0aGlzLmF1ZGlvQ29udHJvbGxlciA9IGF1ZGlvQ29udHJvbGxlcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSBuZXcgcXVlc3QgY2hhaW5cbiAgICAgKi9cbiAgICBhc3luYyBjcmVhdGVRdWVzdENoYWluKG5hbWU6IHN0cmluZywgcXVlc3ROYW1lczogc3RyaW5nW10pOiBQcm9taXNlPHsgc3VjY2VzczogYm9vbGVhbjsgbWVzc2FnZTogc3RyaW5nOyBjaGFpbklkPzogc3RyaW5nIH0+IHtcbiAgICAgICAgaWYgKHF1ZXN0TmFtZXMubGVuZ3RoIDwgMikge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkNoYWluIG11c3QgaGF2ZSBhdCBsZWFzdCAyIHF1ZXN0c1wiXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjb25zdCBjaGFpbklkID0gYGNoYWluXyR7RGF0ZS5ub3coKX1gO1xuICAgICAgICBjb25zdCBjaGFpbjogUXVlc3RDaGFpbiA9IHtcbiAgICAgICAgICAgIGlkOiBjaGFpbklkLFxuICAgICAgICAgICAgbmFtZTogbmFtZSxcbiAgICAgICAgICAgIHF1ZXN0czogcXVlc3ROYW1lcyxcbiAgICAgICAgICAgIGN1cnJlbnRJbmRleDogMCxcbiAgICAgICAgICAgIGNvbXBsZXRlZDogZmFsc2UsXG4gICAgICAgICAgICBzdGFydGVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgIGlzQm9zczogcXVlc3ROYW1lc1txdWVzdE5hbWVzLmxlbmd0aCAtIDFdLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoXCJib3NzXCIpXG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICB0aGlzLnNldHRpbmdzLmFjdGl2ZUNoYWlucy5wdXNoKGNoYWluKTtcbiAgICAgICAgdGhpcy5zZXR0aW5ncy5jdXJyZW50Q2hhaW5JZCA9IGNoYWluSWQ7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IGBDaGFpbiBjcmVhdGVkOiAke25hbWV9ICgke3F1ZXN0TmFtZXMubGVuZ3RofSBxdWVzdHMpYCxcbiAgICAgICAgICAgIGNoYWluSWQ6IGNoYWluSWRcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgdGhlIGN1cnJlbnQgYWN0aXZlIGNoYWluXG4gICAgICovXG4gICAgZ2V0QWN0aXZlQ2hhaW4oKTogUXVlc3RDaGFpbiB8IG51bGwge1xuICAgICAgICBpZiAoIXRoaXMuc2V0dGluZ3MuY3VycmVudENoYWluSWQpIHJldHVybiBudWxsO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgY2hhaW4gPSB0aGlzLnNldHRpbmdzLmFjdGl2ZUNoYWlucy5maW5kKGMgPT4gYy5pZCA9PT0gdGhpcy5zZXR0aW5ncy5jdXJyZW50Q2hhaW5JZCk7XG4gICAgICAgIHJldHVybiAoY2hhaW4gJiYgIWNoYWluLmNvbXBsZXRlZCkgPyBjaGFpbiA6IG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBuZXh0IHF1ZXN0IHRoYXQgc2hvdWxkIGJlIGNvbXBsZXRlZCBpbiB0aGUgYWN0aXZlIGNoYWluXG4gICAgICovXG4gICAgZ2V0TmV4dFF1ZXN0SW5DaGFpbigpOiBzdHJpbmcgfCBudWxsIHtcbiAgICAgICAgY29uc3QgY2hhaW4gPSB0aGlzLmdldEFjdGl2ZUNoYWluKCk7XG4gICAgICAgIGlmICghY2hhaW4pIHJldHVybiBudWxsO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIGNoYWluLnF1ZXN0c1tjaGFpbi5jdXJyZW50SW5kZXhdIHx8IG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2sgaWYgYSBxdWVzdCBpcyBwYXJ0IG9mIGFuIGFjdGl2ZSAoaW5jb21wbGV0ZSkgY2hhaW5cbiAgICAgKi9cbiAgICBpc1F1ZXN0SW5DaGFpbihxdWVzdE5hbWU6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCBjaGFpbiA9IHRoaXMuc2V0dGluZ3MuYWN0aXZlQ2hhaW5zLmZpbmQoYyA9PiAhYy5jb21wbGV0ZWQpO1xuICAgICAgICBpZiAoIWNoYWluKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIHJldHVybiBjaGFpbi5xdWVzdHMuaW5jbHVkZXMocXVlc3ROYW1lKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVjayBpZiBhIHF1ZXN0IGNhbiBiZSBzdGFydGVkIChpcyBpdCB0aGUgbmV4dCBxdWVzdCBpbiB0aGUgY2hhaW4/KVxuICAgICAqL1xuICAgIGNhblN0YXJ0UXVlc3QocXVlc3ROYW1lOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgY29uc3QgY2hhaW4gPSB0aGlzLmdldEFjdGl2ZUNoYWluKCk7XG4gICAgICAgIGlmICghY2hhaW4pIHJldHVybiB0cnVlOyAvLyBOb3QgaW4gYSBjaGFpbiwgY2FuIHN0YXJ0IGFueSBxdWVzdFxuICAgICAgICBcbiAgICAgICAgY29uc3QgbmV4dFF1ZXN0ID0gdGhpcy5nZXROZXh0UXVlc3RJbkNoYWluKCk7XG4gICAgICAgIHJldHVybiBuZXh0UXVlc3QgPT09IHF1ZXN0TmFtZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNYXJrIGEgcXVlc3QgYXMgY29tcGxldGVkIGluIHRoZSBjaGFpblxuICAgICAqIEFkdmFuY2VzIGNoYWluIGlmIHN1Y2Nlc3NmdWwsIGF3YXJkcyBib251cyBYUCBpZiBjaGFpbiBjb21wbGV0ZXNcbiAgICAgKi9cbiAgICBhc3luYyBjb21wbGV0ZUNoYWluUXVlc3QocXVlc3ROYW1lOiBzdHJpbmcpOiBQcm9taXNlPHsgc3VjY2VzczogYm9vbGVhbjsgbWVzc2FnZTogc3RyaW5nOyBjaGFpbkNvbXBsZXRlOiBib29sZWFuOyBib251c1hwOiBudW1iZXIgfT4ge1xuICAgICAgICBjb25zdCBjaGFpbiA9IHRoaXMuZ2V0QWN0aXZlQ2hhaW4oKTtcbiAgICAgICAgaWYgKCFjaGFpbikge1xuICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6IFwiTm8gYWN0aXZlIGNoYWluXCIsIGNoYWluQ29tcGxldGU6IGZhbHNlLCBib251c1hwOiAwIH07XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGN1cnJlbnRRdWVzdCA9IGNoYWluLnF1ZXN0c1tjaGFpbi5jdXJyZW50SW5kZXhdO1xuICAgICAgICBpZiAoY3VycmVudFF1ZXN0ICE9PSBxdWVzdE5hbWUpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogXCJRdWVzdCBpcyBub3QgbmV4dCBpbiBjaGFpblwiLFxuICAgICAgICAgICAgICAgIGNoYWluQ29tcGxldGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGJvbnVzWHA6IDBcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNoYWluLmN1cnJlbnRJbmRleCsrO1xuICAgICAgICB0aGlzLnNldHRpbmdzLmNoYWluUXVlc3RzQ29tcGxldGVkKys7XG4gICAgICAgIFxuICAgICAgICAvLyBDaGVjayBpZiBjaGFpbiBpcyBjb21wbGV0ZVxuICAgICAgICBpZiAoY2hhaW4uY3VycmVudEluZGV4ID49IGNoYWluLnF1ZXN0cy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbXBsZXRlQ2hhaW4oY2hhaW4pO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjb25zdCByZW1haW5pbmcgPSBjaGFpbi5xdWVzdHMubGVuZ3RoIC0gY2hhaW4uY3VycmVudEluZGV4O1xuICAgICAgICBjb25zdCBwZXJjZW50ID0gTWF0aC5mbG9vcigoY2hhaW4uY3VycmVudEluZGV4IC8gY2hhaW4ucXVlc3RzLmxlbmd0aCkgKiAxMDApO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBgQ2hhaW4gcHJvZ3Jlc3M6ICR7Y2hhaW4uY3VycmVudEluZGV4fS8ke2NoYWluLnF1ZXN0cy5sZW5ndGh9ICgke3JlbWFpbmluZ30gcmVtYWluaW5nLCAke3BlcmNlbnR9JSBjb21wbGV0ZSlgLFxuICAgICAgICAgICAgY2hhaW5Db21wbGV0ZTogZmFsc2UsXG4gICAgICAgICAgICBib251c1hwOiAwXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ29tcGxldGUgdGhlIGVudGlyZSBjaGFpblxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgY29tcGxldGVDaGFpbihjaGFpbjogUXVlc3RDaGFpbik6IFByb21pc2U8eyBzdWNjZXNzOiBib29sZWFuOyBtZXNzYWdlOiBzdHJpbmc7IGNoYWluQ29tcGxldGU6IGJvb2xlYW47IGJvbnVzWHA6IG51bWJlciB9PiB7XG4gICAgICAgIGNoYWluLmNvbXBsZXRlZCA9IHRydWU7XG4gICAgICAgIGNoYWluLmNvbXBsZXRlZEF0ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgYm9udXNYcCA9IDEwMDtcbiAgICAgICAgdGhpcy5zZXR0aW5ncy54cCArPSBib251c1hwO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgcmVjb3JkOiBRdWVzdENoYWluUmVjb3JkID0ge1xuICAgICAgICAgICAgY2hhaW5JZDogY2hhaW4uaWQsXG4gICAgICAgICAgICBjaGFpbk5hbWU6IGNoYWluLm5hbWUsXG4gICAgICAgICAgICB0b3RhbFF1ZXN0czogY2hhaW4ucXVlc3RzLmxlbmd0aCxcbiAgICAgICAgICAgIGNvbXBsZXRlZEF0OiBjaGFpbi5jb21wbGV0ZWRBdCxcbiAgICAgICAgICAgIHhwRWFybmVkOiBib251c1hwXG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICB0aGlzLnNldHRpbmdzLmNoYWluSGlzdG9yeS5wdXNoKHJlY29yZCk7XG4gICAgICAgIFxuICAgICAgICBpZiAodGhpcy5hdWRpb0NvbnRyb2xsZXI/LnBsYXlTb3VuZCkge1xuICAgICAgICAgICAgdGhpcy5hdWRpb0NvbnRyb2xsZXIucGxheVNvdW5kKFwic3VjY2Vzc1wiKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICBtZXNzYWdlOiBgQ2hhaW4gY29tcGxldGU6ICR7Y2hhaW4ubmFtZX0hICske2JvbnVzWHB9IFhQIEJvbnVzYCxcbiAgICAgICAgICAgIGNoYWluQ29tcGxldGU6IHRydWUsXG4gICAgICAgICAgICBib251c1hwOiBib251c1hwXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQnJlYWsgYW4gYWN0aXZlIGNoYWluXG4gICAgICogS2VlcHMgZWFybmVkIFhQIGZyb20gY29tcGxldGVkIHF1ZXN0c1xuICAgICAqL1xuICAgIGFzeW5jIGJyZWFrQ2hhaW4oKTogUHJvbWlzZTx7IHN1Y2Nlc3M6IGJvb2xlYW47IG1lc3NhZ2U6IHN0cmluZzsgeHBLZXB0OiBudW1iZXIgfT4ge1xuICAgICAgICBjb25zdCBjaGFpbiA9IHRoaXMuZ2V0QWN0aXZlQ2hhaW4oKTtcbiAgICAgICAgaWYgKCFjaGFpbikge1xuICAgICAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6IFwiTm8gYWN0aXZlIGNoYWluIHRvIGJyZWFrXCIsIHhwS2VwdDogMCB9O1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjb25zdCBjb21wbGV0ZWQgPSBjaGFpbi5jdXJyZW50SW5kZXg7XG4gICAgICAgIGNvbnN0IHhwS2VwdCA9IGNvbXBsZXRlZCAqIDEwOyAvLyBBcHByb3hpbWF0ZSBYUCBmcm9tIGVhY2ggcXVlc3RcbiAgICAgICAgXG4gICAgICAgIC8vIFNhdmUgdG8gaGlzdG9yeSBhcyBicm9rZW5cbiAgICAgICAgY29uc3QgcmVjb3JkOiBRdWVzdENoYWluUmVjb3JkID0ge1xuICAgICAgICAgICAgY2hhaW5JZDogY2hhaW4uaWQsXG4gICAgICAgICAgICBjaGFpbk5hbWU6IGNoYWluLm5hbWUsXG4gICAgICAgICAgICB0b3RhbFF1ZXN0czogY2hhaW4ucXVlc3RzLmxlbmd0aCxcbiAgICAgICAgICAgIGNvbXBsZXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICB4cEVhcm5lZDogeHBLZXB0XG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICB0aGlzLnNldHRpbmdzLmNoYWluSGlzdG9yeS5wdXNoKHJlY29yZCk7XG4gICAgICAgIHRoaXMuc2V0dGluZ3MuYWN0aXZlQ2hhaW5zID0gdGhpcy5zZXR0aW5ncy5hY3RpdmVDaGFpbnMuZmlsdGVyKGMgPT4gYy5pZCAhPT0gY2hhaW4uaWQpO1xuICAgICAgICB0aGlzLnNldHRpbmdzLmN1cnJlbnRDaGFpbklkID0gXCJcIjtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgbWVzc2FnZTogYENoYWluIGJyb2tlbjogJHtjaGFpbi5uYW1lfS4gS2VwdCAke2NvbXBsZXRlZH0gcXVlc3QgY29tcGxldGlvbnMgKCR7eHBLZXB0fSBYUCkuYCxcbiAgICAgICAgICAgIHhwS2VwdDogeHBLZXB0XG4gICAgICAgIH07XG4gICAgfVxuICAvKipcbiAgICAgKiBIYW5kbGUgZmlsZSByZW5hbWUgZXZlbnRzIHRvIGtlZXAgY2hhaW5zIGludGFjdFxuICAgICAqIEBwYXJhbSBvbGROYW1lIFRoZSBwcmV2aW91cyBiYXNlbmFtZSBvZiB0aGUgZmlsZVxuICAgICAqIEBwYXJhbSBuZXdOYW1lIFRoZSBuZXcgYmFzZW5hbWUgb2YgdGhlIGZpbGVcbiAgICAgKi9cbiAgICBoYW5kbGVSZW5hbWUob2xkTmFtZTogc3RyaW5nLCBuZXdOYW1lOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgbGV0IGNoYW5nZXNNYWRlID0gZmFsc2U7XG5cbiAgICAgICAgdGhpcy5zZXR0aW5ncy5hY3RpdmVDaGFpbnMuZm9yRWFjaChjaGFpbiA9PiB7XG4gICAgICAgICAgICAvLyBDaGVjayBpZiB0aGlzIGNoYWluIGNvbnRhaW5zIHRoZSBvbGQgcXVlc3QgbmFtZVxuICAgICAgICAgICAgY29uc3QgaW5kZXggPSBjaGFpbi5xdWVzdHMuaW5kZXhPZihvbGROYW1lKTtcbiAgICAgICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAvLyBSZXBsYWNlIHdpdGggbmV3IG5hbWVcbiAgICAgICAgICAgICAgICBjaGFpbi5xdWVzdHNbaW5kZXhdID0gbmV3TmFtZTtcbiAgICAgICAgICAgICAgICBjaGFuZ2VzTWFkZSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEFsc28gY2hlY2sgaGlzdG9yeSAob3B0aW9uYWwsIGJ1dCBnb29kIGZvciBkYXRhIGludGVncml0eSlcbiAgICAgICAgdGhpcy5zZXR0aW5ncy5jaGFpbkhpc3RvcnkuZm9yRWFjaChyZWNvcmQgPT4ge1xuICAgICAgICAgICAgLy8gSWYgeW91IHN0b3JlIHF1ZXN0IGxpc3RzIGluIGhpc3RvcnkgbGF0ZXIsIHVwZGF0ZSB0aGVtIGhlcmUuXG4gICAgICAgICAgICAvLyBDdXJyZW50bHkgaGlzdG9yeSBpcyBqdXN0IHN1bW1hcnkgZGF0YSwgc28gc3RyaWN0bHkgbm90IG5lZWRlZCB5ZXQsXG4gICAgICAgICAgICAvLyBidXQgZ29vZCB0byBrZWVwIGluIG1pbmQuXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChjaGFuZ2VzTWFkZSkge1xuICAgICAgICAgICAgLy8gVXNpbmcgY29uc29sZSBsb2cgZm9yIGRlYnVnLCBOb3RpY2UgbWlnaHQgYmUgdG9vIHNwYW1teSBkdXJpbmcgYmF0Y2ggcmVuYW1lc1xuICAgICAgICAgICAgY29uc29sZS5sb2coYFtTaXN5cGh1c10gVXBkYXRlZCBjaGFpbnMgZm9yIHJlbmFtZTogJHtvbGROYW1lfSAtPiAke25ld05hbWV9YCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgcHJvZ3Jlc3Mgb2YgYWN0aXZlIGNoYWluXG4gICAgICovXG4gICAgZ2V0Q2hhaW5Qcm9ncmVzcygpOiB7IGNvbXBsZXRlZDogbnVtYmVyOyB0b3RhbDogbnVtYmVyOyBwZXJjZW50OiBudW1iZXIgfSB7XG4gICAgICAgIGNvbnN0IGNoYWluID0gdGhpcy5nZXRBY3RpdmVDaGFpbigpO1xuICAgICAgICBpZiAoIWNoYWluKSByZXR1cm4geyBjb21wbGV0ZWQ6IDAsIHRvdGFsOiAwLCBwZXJjZW50OiAwIH07XG4gICAgICAgIFxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY29tcGxldGVkOiBjaGFpbi5jdXJyZW50SW5kZXgsXG4gICAgICAgICAgICB0b3RhbDogY2hhaW4ucXVlc3RzLmxlbmd0aCxcbiAgICAgICAgICAgIHBlcmNlbnQ6IE1hdGguZmxvb3IoKGNoYWluLmN1cnJlbnRJbmRleCAvIGNoYWluLnF1ZXN0cy5sZW5ndGgpICogMTAwKVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBhbGwgY29tcGxldGVkIGNoYWluIHJlY29yZHMgKGhpc3RvcnkpXG4gICAgICovXG4gICAgZ2V0Q2hhaW5IaXN0b3J5KCk6IFF1ZXN0Q2hhaW5SZWNvcmRbXSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldHRpbmdzLmNoYWluSGlzdG9yeTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgYWxsIGFjdGl2ZSBjaGFpbnMgKG5vdCBjb21wbGV0ZWQpXG4gICAgICovXG4gICAgZ2V0QWN0aXZlQ2hhaW5zKCk6IFF1ZXN0Q2hhaW5bXSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldHRpbmdzLmFjdGl2ZUNoYWlucy5maWx0ZXIoYyA9PiAhYy5jb21wbGV0ZWQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldCBkZXRhaWxlZCBzdGF0ZSBvZiBhY3RpdmUgY2hhaW4gKGZvciBVSSByZW5kZXJpbmcpXG4gICAgICovXG4gICAgZ2V0Q2hhaW5EZXRhaWxzKCk6IHtcbiAgICAgICAgY2hhaW46IFF1ZXN0Q2hhaW4gfCBudWxsO1xuICAgICAgICBwcm9ncmVzczogeyBjb21wbGV0ZWQ6IG51bWJlcjsgdG90YWw6IG51bWJlcjsgcGVyY2VudDogbnVtYmVyIH07XG4gICAgICAgIHF1ZXN0U3RhdGVzOiBBcnJheTx7IHF1ZXN0OiBzdHJpbmc7IHN0YXR1czogJ2NvbXBsZXRlZCcgfCAnYWN0aXZlJyB8ICdsb2NrZWQnIH0+O1xuICAgIH0ge1xuICAgICAgICBjb25zdCBjaGFpbiA9IHRoaXMuZ2V0QWN0aXZlQ2hhaW4oKTtcbiAgICAgICAgaWYgKCFjaGFpbikge1xuICAgICAgICAgICAgcmV0dXJuIHsgY2hhaW46IG51bGwsIHByb2dyZXNzOiB7IGNvbXBsZXRlZDogMCwgdG90YWw6IDAsIHBlcmNlbnQ6IDAgfSwgcXVlc3RTdGF0ZXM6IFtdIH07XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHByb2dyZXNzID0gdGhpcy5nZXRDaGFpblByb2dyZXNzKCk7XG4gICAgICAgIGNvbnN0IHF1ZXN0U3RhdGVzID0gY2hhaW4ucXVlc3RzLm1hcCgocXVlc3QsIGlkeCkgPT4ge1xuICAgICAgICAgICAgaWYgKGlkeCA8IGNoYWluLmN1cnJlbnRJbmRleCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHF1ZXN0LCBzdGF0dXM6ICdjb21wbGV0ZWQnIGFzIGNvbnN0IH07XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlkeCA9PT0gY2hhaW4uY3VycmVudEluZGV4KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgcXVlc3QsIHN0YXR1czogJ2FjdGl2ZScgYXMgY29uc3QgfTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgcXVlc3QsIHN0YXR1czogJ2xvY2tlZCcgYXMgY29uc3QgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4geyBjaGFpbiwgcHJvZ3Jlc3MsIHF1ZXN0U3RhdGVzIH07XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBTaXN5cGh1c1NldHRpbmdzLCBDb250ZXh0RmlsdGVyLCBGaWx0ZXJTdGF0ZSwgRW5lcmd5TGV2ZWwsIFF1ZXN0Q29udGV4dCB9IGZyb20gJy4uL3R5cGVzJztcblxuLyoqXG4gKiBETEMgNTogQ29udGV4dCBGaWx0ZXJzIEVuZ2luZVxuICogSGFuZGxlcyBxdWVzdCBmaWx0ZXJpbmcgYnkgZW5lcmd5IGxldmVsLCBsb2NhdGlvbiBjb250ZXh0LCBhbmQgY3VzdG9tIHRhZ3NcbiAqIFxuICogSVNPTEFURUQ6IE9ubHkgcmVhZHMvd3JpdGVzIHRvIHF1ZXN0RmlsdGVycywgZmlsdGVyU3RhdGVcbiAqIERFUEVOREVOQ0lFUzogU2lzeXBodXNTZXR0aW5ncyB0eXBlcywgVEZpbGUgKGZvciBxdWVzdCBtZXRhZGF0YSlcbiAqIE5PVEU6IFRoaXMgaXMgcHJpbWFyaWx5IGEgVklFVyBMQVlFUiBjb25jZXJuLCBidXQga2VlcGluZyBsb2dpYyBpc29sYXRlZCBpcyBnb29kXG4gKi9cbmV4cG9ydCBjbGFzcyBGaWx0ZXJzRW5naW5lIHtcbiAgICBzZXR0aW5nczogU2lzeXBodXNTZXR0aW5ncztcblxuICAgIGNvbnN0cnVjdG9yKHNldHRpbmdzOiBTaXN5cGh1c1NldHRpbmdzKSB7XG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSBzZXR0aW5ncztcbiAgICB9XG4gIC8qKlxuICAgICAqIEhhbmRsZSBmaWxlIHJlbmFtZSBldmVudHMgdG8gcHJlc2VydmUgZmlsdGVyc1xuICAgICAqIEBwYXJhbSBvbGROYW1lIFRoZSBwcmV2aW91cyBiYXNlbmFtZVxuICAgICAqIEBwYXJhbSBuZXdOYW1lIFRoZSBuZXcgYmFzZW5hbWVcbiAgICAgKi9cbiAgICBoYW5kbGVSZW5hbWUob2xkTmFtZTogc3RyaW5nLCBuZXdOYW1lOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgZmlsdGVyRGF0YSA9IHRoaXMuc2V0dGluZ3MucXVlc3RGaWx0ZXJzW29sZE5hbWVdO1xuICAgICAgICBcbiAgICAgICAgaWYgKGZpbHRlckRhdGEpIHtcbiAgICAgICAgICAgIC8vIDEuIEFzc2lnbiBkYXRhIHRvIG5ldyBrZXlcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MucXVlc3RGaWx0ZXJzW25ld05hbWVdID0gZmlsdGVyRGF0YTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gMi4gRGVsZXRlIG9sZCBrZXlcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnNldHRpbmdzLnF1ZXN0RmlsdGVyc1tvbGROYW1lXTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc29sZS5sb2coYFtTaXN5cGh1c10gVHJhbnNmZXJyZWQgZmlsdGVyczogJHtvbGROYW1lfSAtPiAke25ld05hbWV9YCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHYXJiYWdlIENvbGxlY3Rpb246IENsZWFuIHVwIGZpbHRlcnMgZm9yIGZpbGVzIHRoYXQgbm8gbG9uZ2VyIGV4aXN0XG4gICAgICogQ2FsbCB0aGlzIHNwYXJpbmdseSAoZS5nLiwgb24gcGx1Z2luIGxvYWQpXG4gICAgICovXG4gICAgY2xlYW51cE9ycGhhbnMoZXhpc3RpbmdGaWxlTmFtZXM6IHN0cmluZ1tdKSB7XG4gICAgICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyh0aGlzLnNldHRpbmdzLnF1ZXN0RmlsdGVycyk7XG4gICAgICAgIGxldCBkZWxldGVkID0gMDtcbiAgICAgICAgXG4gICAgICAgIGtleXMuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICAgICAgaWYgKCFleGlzdGluZ0ZpbGVOYW1lcy5pbmNsdWRlcyhrZXkpKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuc2V0dGluZ3MucXVlc3RGaWx0ZXJzW2tleV07XG4gICAgICAgICAgICAgICAgZGVsZXRlZCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGlmIChkZWxldGVkID4gMCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coYFtTaXN5cGh1c10gQ2xlYW5lZCB1cCAke2RlbGV0ZWR9IG9ycGhhbmVkIGZpbHRlciBlbnRyaWVzLmApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IGZpbHRlciBmb3IgYSBzcGVjaWZpYyBxdWVzdFxuICAgICAqL1xuICAgIHNldFF1ZXN0RmlsdGVyKHF1ZXN0TmFtZTogc3RyaW5nLCBlbmVyZ3k6IEVuZXJneUxldmVsLCBjb250ZXh0OiBRdWVzdENvbnRleHQsIHRhZ3M6IHN0cmluZ1tdKTogdm9pZCB7XG4gICAgICAgIHRoaXMuc2V0dGluZ3MucXVlc3RGaWx0ZXJzW3F1ZXN0TmFtZV0gPSB7XG4gICAgICAgICAgICBlbmVyZ3lMZXZlbDogZW5lcmd5LFxuICAgICAgICAgICAgY29udGV4dDogY29udGV4dCxcbiAgICAgICAgICAgIHRhZ3M6IHRhZ3NcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgZmlsdGVyIGZvciBhIHNwZWNpZmljIHF1ZXN0XG4gICAgICovXG4gICAgZ2V0UXVlc3RGaWx0ZXIocXVlc3ROYW1lOiBzdHJpbmcpOiBDb250ZXh0RmlsdGVyIHwgbnVsbCB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldHRpbmdzLnF1ZXN0RmlsdGVyc1txdWVzdE5hbWVdIHx8IG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlIHRoZSBhY3RpdmUgZmlsdGVyIHN0YXRlXG4gICAgICovXG4gICAgc2V0RmlsdGVyU3RhdGUoZW5lcmd5OiBFbmVyZ3lMZXZlbCB8IFwiYW55XCIsIGNvbnRleHQ6IFF1ZXN0Q29udGV4dCB8IFwiYW55XCIsIHRhZ3M6IHN0cmluZ1tdKTogdm9pZCB7XG4gICAgICAgIHRoaXMuc2V0dGluZ3MuZmlsdGVyU3RhdGUgPSB7XG4gICAgICAgICAgICBhY3RpdmVFbmVyZ3k6IGVuZXJneSBhcyBhbnksXG4gICAgICAgICAgICBhY3RpdmVDb250ZXh0OiBjb250ZXh0IGFzIGFueSxcbiAgICAgICAgICAgIGFjdGl2ZVRhZ3M6IHRhZ3NcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgY3VycmVudCBmaWx0ZXIgc3RhdGVcbiAgICAgKi9cbiAgICBnZXRGaWx0ZXJTdGF0ZSgpOiBGaWx0ZXJTdGF0ZSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldHRpbmdzLmZpbHRlclN0YXRlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrIGlmIGEgcXVlc3QgbWF0Y2hlcyBjdXJyZW50IGZpbHRlciBzdGF0ZVxuICAgICAqL1xuICAgIHF1ZXN0TWF0Y2hlc0ZpbHRlcihxdWVzdE5hbWU6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCBmaWx0ZXJzID0gdGhpcy5zZXR0aW5ncy5maWx0ZXJTdGF0ZTtcbiAgICAgICAgY29uc3QgcXVlc3RGaWx0ZXIgPSB0aGlzLnNldHRpbmdzLnF1ZXN0RmlsdGVyc1txdWVzdE5hbWVdO1xuICAgICAgICBcbiAgICAgICAgLy8gSWYgbm8gZmlsdGVyIHNldCBmb3IgdGhpcyBxdWVzdCwgYWx3YXlzIHNob3dcbiAgICAgICAgaWYgKCFxdWVzdEZpbHRlcikgcmV0dXJuIHRydWU7XG4gICAgICAgIFxuICAgICAgICAvLyBFbmVyZ3kgZmlsdGVyXG4gICAgICAgIGlmIChmaWx0ZXJzLmFjdGl2ZUVuZXJneSAhPT0gXCJhbnlcIiAmJiBxdWVzdEZpbHRlci5lbmVyZ3lMZXZlbCAhPT0gZmlsdGVycy5hY3RpdmVFbmVyZ3kpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gQ29udGV4dCBmaWx0ZXJcbiAgICAgICAgaWYgKGZpbHRlcnMuYWN0aXZlQ29udGV4dCAhPT0gXCJhbnlcIiAmJiBxdWVzdEZpbHRlci5jb250ZXh0ICE9PSBmaWx0ZXJzLmFjdGl2ZUNvbnRleHQpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gVGFncyBmaWx0ZXIgKHJlcXVpcmVzIEFOWSBvZiB0aGUgYWN0aXZlIHRhZ3MpXG4gICAgICAgIGlmIChmaWx0ZXJzLmFjdGl2ZVRhZ3MubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29uc3QgaGFzVGFnID0gZmlsdGVycy5hY3RpdmVUYWdzLnNvbWUoKHRhZzogc3RyaW5nKSA9PiBxdWVzdEZpbHRlci50YWdzLmluY2x1ZGVzKHRhZykpO1xuICAgICAgICAgICAgaWYgKCFoYXNUYWcpIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRmlsdGVyIGEgbGlzdCBvZiBxdWVzdHMgYmFzZWQgb24gY3VycmVudCBmaWx0ZXIgc3RhdGVcbiAgICAgKi9cbiAgICBmaWx0ZXJRdWVzdHMocXVlc3RzOiBBcnJheTx7IGJhc2VuYW1lPzogc3RyaW5nOyBuYW1lPzogc3RyaW5nIH0+KTogQXJyYXk8eyBiYXNlbmFtZT86IHN0cmluZzsgbmFtZT86IHN0cmluZyB9PiB7XG4gICAgICAgIHJldHVybiBxdWVzdHMuZmlsdGVyKHF1ZXN0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHF1ZXN0TmFtZSA9IHF1ZXN0LmJhc2VuYW1lIHx8IHF1ZXN0Lm5hbWU7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5xdWVzdE1hdGNoZXNGaWx0ZXIocXVlc3ROYW1lKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IHF1ZXN0cyBieSBzcGVjaWZpYyBlbmVyZ3kgbGV2ZWxcbiAgICAgKi9cbiAgICBnZXRRdWVzdHNCeUVuZXJneShlbmVyZ3k6IEVuZXJneUxldmVsLCBxdWVzdHM6IEFycmF5PHsgYmFzZW5hbWU/OiBzdHJpbmc7IG5hbWU/OiBzdHJpbmcgfT4pOiBBcnJheTx7IGJhc2VuYW1lPzogc3RyaW5nOyBuYW1lPzogc3RyaW5nIH0+IHtcbiAgICAgICAgcmV0dXJuIHF1ZXN0cy5maWx0ZXIocSA9PiB7XG4gICAgICAgICAgICBjb25zdCBxdWVzdE5hbWUgPSBxLmJhc2VuYW1lIHx8IHEubmFtZTtcbiAgICAgICAgICAgIGNvbnN0IGZpbHRlciA9IHRoaXMuc2V0dGluZ3MucXVlc3RGaWx0ZXJzW3F1ZXN0TmFtZV07XG4gICAgICAgICAgICByZXR1cm4gZmlsdGVyICYmIGZpbHRlci5lbmVyZ3lMZXZlbCA9PT0gZW5lcmd5O1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgcXVlc3RzIGJ5IHNwZWNpZmljIGNvbnRleHRcbiAgICAgKi9cbiAgICBnZXRRdWVzdHNCeUNvbnRleHQoY29udGV4dDogUXVlc3RDb250ZXh0LCBxdWVzdHM6IEFycmF5PHsgYmFzZW5hbWU/OiBzdHJpbmc7IG5hbWU/OiBzdHJpbmcgfT4pOiBBcnJheTx7IGJhc2VuYW1lPzogc3RyaW5nOyBuYW1lPzogc3RyaW5nIH0+IHtcbiAgICAgICAgcmV0dXJuIHF1ZXN0cy5maWx0ZXIocSA9PiB7XG4gICAgICAgICAgICBjb25zdCBxdWVzdE5hbWUgPSBxLmJhc2VuYW1lIHx8IHEubmFtZTtcbiAgICAgICAgICAgIGNvbnN0IGZpbHRlciA9IHRoaXMuc2V0dGluZ3MucXVlc3RGaWx0ZXJzW3F1ZXN0TmFtZV07XG4gICAgICAgICAgICByZXR1cm4gZmlsdGVyICYmIGZpbHRlci5jb250ZXh0ID09PSBjb250ZXh0O1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgcXVlc3RzIGJ5IHNwZWNpZmljIHRhZ3NcbiAgICAgKi9cbiAgICBnZXRRdWVzdHNCeVRhZ3ModGFnczogc3RyaW5nW10sIHF1ZXN0czogQXJyYXk8eyBiYXNlbmFtZT86IHN0cmluZzsgbmFtZT86IHN0cmluZyB9Pik6IEFycmF5PHsgYmFzZW5hbWU/OiBzdHJpbmc7IG5hbWU/OiBzdHJpbmcgfT4ge1xuICAgICAgICByZXR1cm4gcXVlc3RzLmZpbHRlcihxID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHF1ZXN0TmFtZSA9IHEuYmFzZW5hbWUgfHwgcS5uYW1lO1xuICAgICAgICAgICAgY29uc3QgZmlsdGVyID0gdGhpcy5zZXR0aW5ncy5xdWVzdEZpbHRlcnNbcXVlc3ROYW1lXTtcbiAgICAgICAgICAgIGlmICghZmlsdGVyKSByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICByZXR1cm4gdGFncy5zb21lKHRhZyA9PiBmaWx0ZXIudGFncy5pbmNsdWRlcyh0YWcpKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2xlYXIgYWxsIGFjdGl2ZSBmaWx0ZXJzXG4gICAgICovXG4gICAgY2xlYXJGaWx0ZXJzKCk6IHZvaWQge1xuICAgICAgICB0aGlzLnNldHRpbmdzLmZpbHRlclN0YXRlID0ge1xuICAgICAgICAgICAgYWN0aXZlRW5lcmd5OiBcImFueVwiLFxuICAgICAgICAgICAgYWN0aXZlQ29udGV4dDogXCJhbnlcIixcbiAgICAgICAgICAgIGFjdGl2ZVRhZ3M6IFtdXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0IGFsbCB1bmlxdWUgdGFncyB1c2VkIGFjcm9zcyBhbGwgcXVlc3RzXG4gICAgICovXG4gICAgZ2V0QXZhaWxhYmxlVGFncygpOiBzdHJpbmdbXSB7XG4gICAgICAgIGNvbnN0IHRhZ3MgPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgICAgICAgXG4gICAgICAgIGZvciAoY29uc3QgcXVlc3ROYW1lIGluIHRoaXMuc2V0dGluZ3MucXVlc3RGaWx0ZXJzKSB7XG4gICAgICAgICAgICBjb25zdCBmaWx0ZXIgPSB0aGlzLnNldHRpbmdzLnF1ZXN0RmlsdGVyc1txdWVzdE5hbWVdO1xuICAgICAgICAgICAgKGZpbHRlci50YWdzIHx8IFtdKS5mb3JFYWNoKCh0YWc6IHN0cmluZykgPT4gdGFncy5hZGQodGFnKSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRhZ3MpLnNvcnQoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgc3VtbWFyeSBzdGF0cyBhYm91dCBmaWx0ZXJlZCBzdGF0ZVxuICAgICAqL1xuICAgIGdldEZpbHRlclN0YXRzKGFsbFF1ZXN0czogQXJyYXk8eyBiYXNlbmFtZT86IHN0cmluZzsgbmFtZT86IHN0cmluZyB9Pik6IHtcbiAgICAgICAgdG90YWw6IG51bWJlcjtcbiAgICAgICAgZmlsdGVyZWQ6IG51bWJlcjtcbiAgICAgICAgYWN0aXZlRmlsdGVyc0NvdW50OiBudW1iZXI7XG4gICAgfSB7XG4gICAgICAgIGNvbnN0IGZpbHRlcmVkID0gdGhpcy5maWx0ZXJRdWVzdHMoYWxsUXVlc3RzKTtcbiAgICAgICAgY29uc3QgYWN0aXZlRmlsdGVyc0NvdW50ID0gKHRoaXMuc2V0dGluZ3MuZmlsdGVyU3RhdGUuYWN0aXZlRW5lcmd5ICE9PSBcImFueVwiID8gMSA6IDApICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuc2V0dGluZ3MuZmlsdGVyU3RhdGUuYWN0aXZlQ29udGV4dCAhPT0gXCJhbnlcIiA/IDEgOiAwKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnNldHRpbmdzLmZpbHRlclN0YXRlLmFjdGl2ZVRhZ3MubGVuZ3RoID4gMCA/IDEgOiAwKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0b3RhbDogYWxsUXVlc3RzLmxlbmd0aCxcbiAgICAgICAgICAgIGZpbHRlcmVkOiBmaWx0ZXJlZC5sZW5ndGgsXG4gICAgICAgICAgICBhY3RpdmVGaWx0ZXJzQ291bnQ6IGFjdGl2ZUZpbHRlcnNDb3VudFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRvZ2dsZSBhIHNwZWNpZmljIGZpbHRlciB2YWx1ZVxuICAgICAqIFVzZWZ1bCBmb3IgVUkgdG9nZ2xlIGJ1dHRvbnNcbiAgICAgKi9cbiAgICB0b2dnbGVFbmVyZ3lGaWx0ZXIoZW5lcmd5OiBFbmVyZ3lMZXZlbCB8IFwiYW55XCIpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuZmlsdGVyU3RhdGUuYWN0aXZlRW5lcmd5ID09PSBlbmVyZ3kpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MuZmlsdGVyU3RhdGUuYWN0aXZlRW5lcmd5ID0gXCJhbnlcIjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MuZmlsdGVyU3RhdGUuYWN0aXZlRW5lcmd5ID0gZW5lcmd5IGFzIGFueTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRvZ2dsZSBjb250ZXh0IGZpbHRlclxuICAgICAqL1xuICAgIHRvZ2dsZUNvbnRleHRGaWx0ZXIoY29udGV4dDogUXVlc3RDb250ZXh0IHwgXCJhbnlcIik6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5maWx0ZXJTdGF0ZS5hY3RpdmVDb250ZXh0ID09PSBjb250ZXh0KSB7XG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzLmZpbHRlclN0YXRlLmFjdGl2ZUNvbnRleHQgPSBcImFueVwiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5maWx0ZXJTdGF0ZS5hY3RpdmVDb250ZXh0ID0gY29udGV4dCBhcyBhbnk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUb2dnbGUgYSB0YWcgaW4gdGhlIGFjdGl2ZSB0YWcgbGlzdFxuICAgICAqL1xuICAgIHRvZ2dsZVRhZyh0YWc6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICBjb25zdCBpZHggPSB0aGlzLnNldHRpbmdzLmZpbHRlclN0YXRlLmFjdGl2ZVRhZ3MuaW5kZXhPZih0YWcpO1xuICAgICAgICBpZiAoaWR4ID49IDApIHtcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MuZmlsdGVyU3RhdGUuYWN0aXZlVGFncy5zcGxpY2UoaWR4LCAxKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MuZmlsdGVyU3RhdGUuYWN0aXZlVGFncy5wdXNoKHRhZyk7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCIvKipcbiAqIFB1cmUgZ2FtZSBmb3JtdWxhcyBmb3IgU2lzeXBodXMgRW5naW5lLlxuICogTm8gT2JzaWRpYW4gb3IgcnVudGltZSBkZXBzIOKAlCBzYWZlIHRvIHVuaXQgdGVzdC5cbiAqL1xuXG5leHBvcnQgY29uc3QgQk9TU19EQVRBOiBSZWNvcmQ8bnVtYmVyLCB7IG5hbWU6IHN0cmluZzsgZGVzYzogc3RyaW5nOyBocF9wZW46IG51bWJlciB9PiA9IHtcbiAgMTA6IHsgbmFtZTogXCJUaGUgR2F0ZWtlZXBlclwiLCBkZXNjOiBcIlRoZSBmaXJzdCBtYWpvciBmaWx0ZXIuXCIsIGhwX3BlbjogMjAgfSxcbiAgMjA6IHsgbmFtZTogXCJUaGUgU2hhZG93IFNlbGZcIiwgZGVzYzogXCJZb3VyIG93biBiYWQgaGFiaXRzIG1hbmlmZXN0LlwiLCBocF9wZW46IDMwIH0sXG4gIDMwOiB7IG5hbWU6IFwiVGhlIE1vdW50YWluXCIsIGRlc2M6IFwiVGhlIHBlYWsgaXMgdmlzaWJsZS5cIiwgaHBfcGVuOiA0MCB9LFxuICA1MDogeyBuYW1lOiBcIlNpc3lwaHVzIFByaW1lXCIsIGRlc2M6IFwiT25lIG11c3QgaW1hZ2luZSBTaXN5cGh1cyBoYXBweS5cIiwgaHBfcGVuOiA5OSB9LFxufTtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldERpZmZpY3VsdHlOdW1iZXIoZGlmZkxhYmVsOiBzdHJpbmcpOiBudW1iZXIge1xuICBjb25zdCBtYXA6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7XG4gICAgVHJpdmlhbDogMSxcbiAgICBFYXN5OiAyLFxuICAgIE1lZGl1bTogMyxcbiAgICBIYXJkOiA0LFxuICAgIFNVSUNJREU6IDUsXG4gIH07XG4gIHJldHVybiBtYXBbZGlmZkxhYmVsXSA/PyAzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcXVlc3RSZXdhcmRzQnlEaWZmaWN1bHR5KFxuICBkaWZmOiBudW1iZXIsXG4gIHhwUmVxOiBudW1iZXIsXG4gIGlzQm9zczogYm9vbGVhbixcbiAgaGlnaFN0YWtlczogYm9vbGVhblxuKTogeyB4cFJld2FyZDogbnVtYmVyOyBnb2xkUmV3YXJkOiBudW1iZXI7IGRpZmZMYWJlbDogc3RyaW5nIH0ge1xuICBpZiAoaXNCb3NzKSB7XG4gICAgcmV0dXJuIHsgeHBSZXdhcmQ6IDEwMDAsIGdvbGRSZXdhcmQ6IDEwMDAsIGRpZmZMYWJlbDogXCLimKDvuI8gQk9TU1wiIH07XG4gIH1cbiAgbGV0IHhwUmV3YXJkOiBudW1iZXI7XG4gIGxldCBnb2xkUmV3YXJkOiBudW1iZXI7XG4gIGxldCBkaWZmTGFiZWw6IHN0cmluZztcbiAgc3dpdGNoIChkaWZmKSB7XG4gICAgY2FzZSAxOlxuICAgICAgeHBSZXdhcmQgPSBNYXRoLmZsb29yKHhwUmVxICogMC4wNSk7XG4gICAgICBnb2xkUmV3YXJkID0gMTA7XG4gICAgICBkaWZmTGFiZWwgPSBcIlRyaXZpYWxcIjtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgMjpcbiAgICAgIHhwUmV3YXJkID0gTWF0aC5mbG9vcih4cFJlcSAqIDAuMSk7XG4gICAgICBnb2xkUmV3YXJkID0gMjA7XG4gICAgICBkaWZmTGFiZWwgPSBcIkVhc3lcIjtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgMzpcbiAgICAgIHhwUmV3YXJkID0gTWF0aC5mbG9vcih4cFJlcSAqIDAuMik7XG4gICAgICBnb2xkUmV3YXJkID0gNDA7XG4gICAgICBkaWZmTGFiZWwgPSBcIk1lZGl1bVwiO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSA0OlxuICAgICAgeHBSZXdhcmQgPSBNYXRoLmZsb29yKHhwUmVxICogMC40KTtcbiAgICAgIGdvbGRSZXdhcmQgPSA4MDtcbiAgICAgIGRpZmZMYWJlbCA9IFwiSGFyZFwiO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSA1OlxuICAgICAgeHBSZXdhcmQgPSBNYXRoLmZsb29yKHhwUmVxICogMC42KTtcbiAgICAgIGdvbGRSZXdhcmQgPSAxNTA7XG4gICAgICBkaWZmTGFiZWwgPSBcIlNVSUNJREVcIjtcbiAgICAgIGJyZWFrO1xuICAgIGRlZmF1bHQ6XG4gICAgICB4cFJld2FyZCA9IE1hdGguZmxvb3IoeHBSZXEgKiAwLjIpO1xuICAgICAgZ29sZFJld2FyZCA9IDQwO1xuICAgICAgZGlmZkxhYmVsID0gXCJNZWRpdW1cIjtcbiAgfVxuICBpZiAoaGlnaFN0YWtlcykgZ29sZFJld2FyZCA9IE1hdGguZmxvb3IoZ29sZFJld2FyZCAqIDEuNSk7XG4gIHJldHVybiB7IHhwUmV3YXJkLCBnb2xkUmV3YXJkLCBkaWZmTGFiZWwgfTtcbn1cblxuLyoqXG4gKiBDb21wdXRlIGZhaWwgZGFtYWdlOiBiYXNlICsgcml2YWwsIHRoZW4gYnVmZiBtdWx0LCB0aGVuIGJvc3MgcGVuYWx0eSwgdGhlbiBkZWJ0IGRvdWJsZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbXB1dGVGYWlsRGFtYWdlKFxuICByaXZhbERtZzogbnVtYmVyLFxuICBnb2xkOiBudW1iZXIsXG4gIGRhbWFnZU11bHQ6IG51bWJlcixcbiAgYm9zc0hwUGVuYWx0eTogbnVtYmVyXG4pOiBudW1iZXIge1xuICBsZXQgZCA9IDEwICsgTWF0aC5mbG9vcihyaXZhbERtZyAvIDIpO1xuICBkID0gTWF0aC5mbG9vcihkICogZGFtYWdlTXVsdCk7XG4gIGQgKz0gYm9zc0hwUGVuYWx0eTtcbiAgaWYgKGdvbGQgPCAwKSBkICo9IDI7XG4gIHJldHVybiBkO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0Qm9zc0hwUGVuYWx0eShsZXZlbDogbnVtYmVyKTogbnVtYmVyIHtcbiAgcmV0dXJuIEJPU1NfREFUQVtsZXZlbF0/LmhwX3BlbiA/PyAwO1xufVxuIiwiaW1wb3J0IHsgQXBwLCBURmlsZSwgVEZvbGRlciwgTm90aWNlLCBtb21lbnQgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBTaXN5cGh1c1NldHRpbmdzLCBTa2lsbCwgTW9kaWZpZXIsIERhaWx5TWlzc2lvbiB9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHsgQXVkaW9Db250cm9sbGVyLCBUaW55RW1pdHRlciB9IGZyb20gJy4vdXRpbHMnO1xuaW1wb3J0IHsgQ2hhb3NNb2RhbCB9IGZyb20gJy4vdWkvbW9kYWxzJztcbmltcG9ydCB7IEJvc3NFbmNvdW50ZXJNb2RhbCB9IGZyb20gJy4vdWkvcmV2aWV3JztcbmltcG9ydCB7IEFuYWx5dGljc0VuZ2luZSB9IGZyb20gJy4vZW5naW5lcy9BbmFseXRpY3NFbmdpbmUnO1xuaW1wb3J0IHsgTWVkaXRhdGlvbkVuZ2luZSB9IGZyb20gJy4vZW5naW5lcy9NZWRpdGF0aW9uRW5naW5lJztcbmltcG9ydCB7IFJlc2VhcmNoRW5naW5lIH0gZnJvbSAnLi9lbmdpbmVzL1Jlc2VhcmNoRW5naW5lJztcbmltcG9ydCB7IENoYWluc0VuZ2luZSB9IGZyb20gJy4vZW5naW5lcy9DaGFpbnNFbmdpbmUnO1xuaW1wb3J0IHsgRmlsdGVyc0VuZ2luZSB9IGZyb20gJy4vZW5naW5lcy9GaWx0ZXJzRW5naW5lJztcbmltcG9ydCB7XG4gICAgQk9TU19EQVRBLFxuICAgIGdldERpZmZpY3VsdHlOdW1iZXIgYXMgZ2V0RGlmZmljdWx0eU51bSxcbiAgICBxdWVzdFJld2FyZHNCeURpZmZpY3VsdHksXG4gICAgY29tcHV0ZUZhaWxEYW1hZ2UsXG4gICAgZ2V0Qm9zc0hwUGVuYWx0eSxcbn0gZnJvbSAnLi9tZWNoYW5pY3MnO1xuXG5leHBvcnQgY29uc3QgREVGQVVMVF9NT0RJRklFUjogTW9kaWZpZXIgPSB7IG5hbWU6IFwiQ2xlYXIgU2tpZXNcIiwgZGVzYzogXCJObyBlZmZlY3RzLlwiLCB4cE11bHQ6IDEsIGdvbGRNdWx0OiAxLCBwcmljZU11bHQ6IDEsIGljb246IFwi4piA77iPXCIgfTtcbmV4cG9ydCBjb25zdCBDSEFPU19UQUJMRTogTW9kaWZpZXJbXSA9IFtcbiAgICB7IG5hbWU6IFwiQ2xlYXIgU2tpZXNcIiwgZGVzYzogXCJOb3JtYWwuXCIsIHhwTXVsdDogMSwgZ29sZE11bHQ6IDEsIHByaWNlTXVsdDogMSwgaWNvbjogXCLimIDvuI9cIiB9LFxuICAgIHsgbmFtZTogXCJGbG93IFN0YXRlXCIsIGRlc2M6IFwiKzUwJSBYUC5cIiwgeHBNdWx0OiAxLjUsIGdvbGRNdWx0OiAxLCBwcmljZU11bHQ6IDEsIGljb246IFwi8J+MilwiIH0sXG4gICAgeyBuYW1lOiBcIldpbmRmYWxsXCIsIGRlc2M6IFwiKzUwJSBHb2xkLlwiLCB4cE11bHQ6IDEsIGdvbGRNdWx0OiAxLjUsIHByaWNlTXVsdDogMSwgaWNvbjogXCLwn5KwXCIgfSxcbiAgICB7IG5hbWU6IFwiSW5mbGF0aW9uXCIsIGRlc2M6IFwiUHJpY2VzIDJ4LlwiLCB4cE11bHQ6IDEsIGdvbGRNdWx0OiAxLCBwcmljZU11bHQ6IDIsIGljb246IFwi8J+TiFwiIH0sXG4gICAgeyBuYW1lOiBcIkJyYWluIEZvZ1wiLCBkZXNjOiBcIlhQIDAuNXguXCIsIHhwTXVsdDogMC41LCBnb2xkTXVsdDogMSwgcHJpY2VNdWx0OiAxLCBpY29uOiBcIvCfjKvvuI9cIiB9LFxuICAgIHsgbmFtZTogXCJSaXZhbCBTYWJvdGFnZVwiLCBkZXNjOiBcIkdvbGQgMC41eC5cIiwgeHBNdWx0OiAxLCBnb2xkTXVsdDogMC41LCBwcmljZU11bHQ6IDEsIGljb246IFwi8J+Vte+4j1wiIH0sXG4gICAgeyBuYW1lOiBcIkFkcmVuYWxpbmVcIiwgZGVzYzogXCIyeCBYUCwgLTUgSFAvUS5cIiwgeHBNdWx0OiAyLCBnb2xkTXVsdDogMSwgcHJpY2VNdWx0OiAxLCBpY29uOiBcIvCfkolcIiB9XG5dO1xuZXhwb3J0IGNvbnN0IFBPV0VSX1VQUyA9IFtcbiAgICB7IGlkOiBcImZvY3VzX3BvdGlvblwiLCBuYW1lOiBcIkZvY3VzIFBvdGlvblwiLCBpY29uOiBcIvCfp6pcIiwgZGVzYzogXCIyeCBYUCAoMWgpXCIsIGNvc3Q6IDEwMCwgZHVyYXRpb246IDYwLCBlZmZlY3Q6IHsgeHBNdWx0OiAyIH0gfSxcbiAgICB7IGlkOiBcIm1pZGFzX3RvdWNoXCIsIG5hbWU6IFwiTWlkYXMgVG91Y2hcIiwgaWNvbjogXCLinKhcIiwgZGVzYzogXCIzeCBHb2xkICgzMG0pXCIsIGNvc3Q6IDE1MCwgZHVyYXRpb246IDMwLCBlZmZlY3Q6IHsgZ29sZE11bHQ6IDMgfSB9LFxuICAgIHsgaWQ6IFwiaXJvbl93aWxsXCIsIG5hbWU6IFwiSXJvbiBXaWxsXCIsIGljb246IFwi8J+boe+4j1wiLCBkZXNjOiBcIjUwJSBEbWcgUmVkdWN0ICgyaClcIiwgY29zdDogMjAwLCBkdXJhdGlvbjogMTIwLCBlZmZlY3Q6IHsgZGFtYWdlTXVsdDogMC41IH0gfVxuXTtcblxuY29uc3QgTUlTU0lPTl9QT09MID0gW1xuICAgIHsgaWQ6IFwibW9ybmluZ193aW5cIiwgbmFtZTogXCLimIDvuI8gTW9ybmluZyBXaW5cIiwgZGVzYzogXCJDb21wbGV0ZSAxIFRyaXZpYWwgcXVlc3QgYmVmb3JlIDEwIEFNXCIsIHRhcmdldDogMSwgcmV3YXJkOiB7IHhwOiAwLCBnb2xkOiAxNSB9LCBjaGVjazogXCJtb3JuaW5nX3RyaXZpYWxcIiB9LFxuICAgIHsgaWQ6IFwibW9tZW50dW1cIiwgbmFtZTogXCLwn5SlIE1vbWVudHVtXCIsIGRlc2M6IFwiQ29tcGxldGUgMyBxdWVzdHMgdG9kYXlcIiwgdGFyZ2V0OiAzLCByZXdhcmQ6IHsgeHA6IDIwLCBnb2xkOiAwIH0sIGNoZWNrOiBcInF1ZXN0X2NvdW50XCIgfSxcbiAgICB7IGlkOiBcInplcm9faW5ib3hcIiwgbmFtZTogXCLwn6eYIFplcm8gSW5ib3hcIiwgZGVzYzogXCJQcm9jZXNzIGFsbCBmaWxlcyBpbiAnU2NyYXBzJ1wiLCB0YXJnZXQ6IDEsIHJld2FyZDogeyB4cDogMCwgZ29sZDogMTAgfSwgY2hlY2s6IFwiemVyb19pbmJveFwiIH0sXG4gICAgeyBpZDogXCJzcGVjaWFsaXN0XCIsIG5hbWU6IFwi8J+OryBTcGVjaWFsaXN0XCIsIGRlc2M6IFwiVXNlIHRoZSBzYW1lIHNraWxsIDMgdGltZXNcIiwgdGFyZ2V0OiAzLCByZXdhcmQ6IHsgeHA6IDE1LCBnb2xkOiAwIH0sIGNoZWNrOiBcInNraWxsX3JlcGVhdFwiIH0sXG4gICAgeyBpZDogXCJoaWdoX3N0YWtlc1wiLCBuYW1lOiBcIvCfkqogSGlnaCBTdGFrZXNcIiwgZGVzYzogXCJDb21wbGV0ZSAxIEhpZ2ggU3Rha2VzIHF1ZXN0XCIsIHRhcmdldDogMSwgcmV3YXJkOiB7IHhwOiAwLCBnb2xkOiAzMCB9LCBjaGVjazogXCJoaWdoX3N0YWtlc1wiIH0sXG4gICAgeyBpZDogXCJzcGVlZF9kZW1vblwiLCBuYW1lOiBcIuKaoSBTcGVlZCBEZW1vblwiLCBkZXNjOiBcIkNvbXBsZXRlIHF1ZXN0IHdpdGhpbiAyaCBvZiBjcmVhdGlvblwiLCB0YXJnZXQ6IDEsIHJld2FyZDogeyB4cDogMjUsIGdvbGQ6IDAgfSwgY2hlY2s6IFwiZmFzdF9jb21wbGV0ZVwiIH0sXG4gICAgeyBpZDogXCJzeW5lcmdpc3RcIiwgbmFtZTogXCLwn5SXIFN5bmVyZ2lzdFwiLCBkZXNjOiBcIkNvbXBsZXRlIHF1ZXN0IHdpdGggUHJpbWFyeSArIFNlY29uZGFyeSBza2lsbFwiLCB0YXJnZXQ6IDEsIHJld2FyZDogeyB4cDogMCwgZ29sZDogMTAgfSwgY2hlY2s6IFwic3luZXJneVwiIH0sXG4gICAgeyBpZDogXCJzdXJ2aXZvclwiLCBuYW1lOiBcIvCfm6HvuI8gU3Vydml2b3JcIiwgZGVzYzogXCJEb24ndCB0YWtlIGFueSBkYW1hZ2UgdG9kYXlcIiwgdGFyZ2V0OiAxLCByZXdhcmQ6IHsgeHA6IDAsIGdvbGQ6IDIwIH0sIGNoZWNrOiBcIm5vX2RhbWFnZVwiIH0sXG4gICAgeyBpZDogXCJyaXNrX3Rha2VyXCIsIG5hbWU6IFwi8J+OsiBSaXNrIFRha2VyXCIsIGRlc2M6IFwiQ29tcGxldGUgRGlmZmljdWx0eSA0KyBxdWVzdFwiLCB0YXJnZXQ6IDEsIHJld2FyZDogeyB4cDogMTUsIGdvbGQ6IDAgfSwgY2hlY2s6IFwiaGFyZF9xdWVzdFwiIH1cbl07XG5cbmV4cG9ydCBjbGFzcyBTaXN5cGh1c0VuZ2luZSBleHRlbmRzIFRpbnlFbWl0dGVyIHtcbiAgICBhcHA6IEFwcDtcbiAgICBwbHVnaW46IGFueTtcbiAgICBhdWRpbzogQXVkaW9Db250cm9sbGVyO1xuICAgIGFuYWx5dGljc0VuZ2luZTogQW5hbHl0aWNzRW5naW5lO1xuICAgIG1lZGl0YXRpb25FbmdpbmU6IE1lZGl0YXRpb25FbmdpbmU7XG4gICAgcmVzZWFyY2hFbmdpbmU6IFJlc2VhcmNoRW5naW5lO1xuICAgIGNoYWluc0VuZ2luZTogQ2hhaW5zRW5naW5lO1xuICAgIGZpbHRlcnNFbmdpbmU6IEZpbHRlcnNFbmdpbmU7XG5cbiAgICAvLyBbRkVBVFVSRV0gVW5kbyBCdWZmZXJcbiAgICBwcml2YXRlIGRlbGV0ZWRRdWVzdEJ1ZmZlcjogQXJyYXk8eyBuYW1lOiBzdHJpbmc7IGNvbnRlbnQ6IHN0cmluZzsgcGF0aDogc3RyaW5nOyBkZWxldGVkQXQ6IG51bWJlciB9PiA9IFtdO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogYW55LCBhdWRpbzogQXVkaW9Db250cm9sbGVyKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICAgICAgdGhpcy5hdWRpbyA9IGF1ZGlvO1xuXG4gICAgICAgIHRoaXMuYW5hbHl0aWNzRW5naW5lID0gbmV3IEFuYWx5dGljc0VuZ2luZSh0aGlzLnBsdWdpbi5zZXR0aW5ncywgdGhpcy5hdWRpbyk7XG4gICAgICAgIHRoaXMubWVkaXRhdGlvbkVuZ2luZSA9IG5ldyBNZWRpdGF0aW9uRW5naW5lKHRoaXMucGx1Z2luLnNldHRpbmdzLCB0aGlzLmF1ZGlvKTtcbiAgICAgICAgdGhpcy5yZXNlYXJjaEVuZ2luZSA9IG5ldyBSZXNlYXJjaEVuZ2luZSh0aGlzLnBsdWdpbi5zZXR0aW5ncywgdGhpcy5hcHAsIHRoaXMuYXVkaW8pO1xuICAgICAgICB0aGlzLmNoYWluc0VuZ2luZSA9IG5ldyBDaGFpbnNFbmdpbmUodGhpcy5wbHVnaW4uc2V0dGluZ3MsIHRoaXMuYXVkaW8pO1xuICAgICAgICB0aGlzLmZpbHRlcnNFbmdpbmUgPSBuZXcgRmlsdGVyc0VuZ2luZSh0aGlzLnBsdWdpbi5zZXR0aW5ncyk7XG4gICAgfVxuXG4gICAgZ2V0IHNldHRpbmdzKCk6IFNpc3lwaHVzU2V0dGluZ3MgeyByZXR1cm4gdGhpcy5wbHVnaW4uc2V0dGluZ3M7IH1cbiAgICBzZXQgc2V0dGluZ3ModmFsOiBTaXN5cGh1c1NldHRpbmdzKSB7IHRoaXMucGx1Z2luLnNldHRpbmdzID0gdmFsOyB9XG5cbiAgICBhc3luYyBzYXZlKCkgeyBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTsgdGhpcy50cmlnZ2VyKFwidXBkYXRlXCIpOyB9XG5cbiAgICAvKiogU2FtZSBzYW5pdGl6YXRpb24gYXMgY3JlYXRlUXVlc3Q7IHVzZSBmb3IgbG9va3VwLiAqL1xuICAgIHByaXZhdGUgdG9TYWZlUXVlc3ROYW1lKG5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBuYW1lLnJlcGxhY2UoL1teYS16MC05XS9naSwgJ18nKS50b0xvd2VyQ2FzZSgpO1xuICAgIH1cblxuICAgIC8vIFtGSVhdIFNhZmUgQXJjaGl2ZXI6IEhhbmRsZXMgZHVwbGljYXRlcyBieSByZW5hbWluZyAoUXVlc3QgLT4gUXVlc3QgKDEpKVxuICAgIGFzeW5jIHNhZmVBcmNoaXZlKGZpbGU6IFRGaWxlLCBzdWJmb2xkZXI6IHN0cmluZyA9IFwiQXJjaGl2ZVwiKSB7XG4gICAgICAgIGNvbnN0IHJvb3QgPSBcIkFjdGl2ZV9SdW5cIjtcbiAgICAgICAgY29uc3QgdGFyZ2V0Rm9sZGVyID0gYCR7cm9vdH0vJHtzdWJmb2xkZXJ9YDtcblxuICAgICAgICBpZiAoIXRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChyb290KSkgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlRm9sZGVyKHJvb3QpO1xuICAgICAgICBpZiAoIXRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh0YXJnZXRGb2xkZXIpKSBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGVGb2xkZXIodGFyZ2V0Rm9sZGVyKTtcblxuICAgICAgICBsZXQgdGFyZ2V0UGF0aCA9IGAke3RhcmdldEZvbGRlcn0vJHtmaWxlLm5hbWV9YDtcblxuICAgICAgICAvLyBDb2xsaXNpb24gRGV0ZWN0aW9uIExvb3BcbiAgICAgICAgbGV0IGNvdW50ZXIgPSAxO1xuICAgICAgICB3aGlsZSAodGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHRhcmdldFBhdGgpKSB7XG4gICAgICAgICAgICB0YXJnZXRQYXRoID0gYCR7dGFyZ2V0Rm9sZGVyfS8ke2ZpbGUuYmFzZW5hbWV9ICgke2NvdW50ZXJ9KS4ke2ZpbGUuZXh0ZW5zaW9ufWA7XG4gICAgICAgICAgICBjb3VudGVyKys7XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLmFwcC5maWxlTWFuYWdlci5yZW5hbWVGaWxlKGZpbGUsIHRhcmdldFBhdGgpO1xuICAgIH1cblxuICAgIGFjdGl2YXRlQnVmZihpdGVtOiBhbnkpIHtcbiAgICAgICAgY29uc3QgZXhwaXJlcyA9IG1vbWVudCgpLmFkZChpdGVtLmR1cmF0aW9uLCAnbWludXRlcycpLnRvSVNPU3RyaW5nKCk7XG4gICAgICAgIHRoaXMuc2V0dGluZ3MuYWN0aXZlQnVmZnMucHVzaCh7XG4gICAgICAgICAgICBpZDogaXRlbS5pZCxcbiAgICAgICAgICAgIG5hbWU6IGl0ZW0ubmFtZSxcbiAgICAgICAgICAgIGljb246IGl0ZW0uaWNvbixcbiAgICAgICAgICAgIGV4cGlyZXNBdDogZXhwaXJlcyxcbiAgICAgICAgICAgIGVmZmVjdDogaXRlbS5lZmZlY3RcbiAgICAgICAgfSk7XG4gICAgICAgIG5ldyBOb3RpY2UoYPCfpaQgR3VscCEgJHtpdGVtLm5hbWV9IGFjdGl2ZSBmb3IgJHtpdGVtLmR1cmF0aW9ufW1gKTtcbiAgICB9XG5cbiAgICByb2xsRGFpbHlNaXNzaW9ucygpIHtcbiAgICAgICAgY29uc3QgYXZhaWxhYmxlID0gWy4uLk1JU1NJT05fUE9PTF07XG4gICAgICAgIGNvbnN0IHNlbGVjdGVkOiBEYWlseU1pc3Npb25bXSA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDM7IGkrKykge1xuICAgICAgICAgICAgaWYgKGF2YWlsYWJsZS5sZW5ndGggPT09IDApIGJyZWFrO1xuICAgICAgICAgICAgY29uc3QgaWR4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogYXZhaWxhYmxlLmxlbmd0aCk7XG4gICAgICAgICAgICBjb25zdCBtaXNzaW9uID0gYXZhaWxhYmxlLnNwbGljZShpZHgsIDEpWzBdO1xuICAgICAgICAgICAgc2VsZWN0ZWQucHVzaCh7IC4uLm1pc3Npb24sIGNoZWNrRnVuYzogbWlzc2lvbi5jaGVjaywgcHJvZ3Jlc3M6IDAsIGNvbXBsZXRlZDogZmFsc2UgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXR0aW5ncy5kYWlseU1pc3Npb25zID0gc2VsZWN0ZWQ7XG4gICAgICAgIHRoaXMuc2V0dGluZ3MuZGFpbHlNaXNzaW9uRGF0ZSA9IG1vbWVudCgpLmZvcm1hdChcIllZWVktTU0tRERcIik7XG4gICAgICAgIHRoaXMuc2V0dGluZ3MucXVlc3RzQ29tcGxldGVkVG9kYXkgPSAwO1xuICAgICAgICB0aGlzLnNldHRpbmdzLnNraWxsVXNlc1RvZGF5ID0ge307XG4gICAgfVxuXG4gICAgY2hlY2tEYWlseU1pc3Npb25zKGNvbnRleHQ6IHsgdHlwZT86IHN0cmluZzsgZGlmZmljdWx0eT86IG51bWJlcjsgc2tpbGw/OiBzdHJpbmc7IHNlY29uZGFyeVNraWxsPzogc3RyaW5nOyBoaWdoU3Rha2VzPzogYm9vbGVhbjsgcXVlc3RDcmVhdGVkPzogbnVtYmVyIH0pIHtcbiAgICAgICAgY29uc3Qgbm93ID0gbW9tZW50KCk7XG4gICAgICAgIGxldCBqdXN0RmluaXNoZWRBbGwgPSBmYWxzZTtcblxuICAgICAgICB0aGlzLnNldHRpbmdzLmRhaWx5TWlzc2lvbnMuZm9yRWFjaChtaXNzaW9uID0+IHtcbiAgICAgICAgICAgIGlmIChtaXNzaW9uLmNvbXBsZXRlZCkgcmV0dXJuO1xuICAgICAgICAgICAgc3dpdGNoIChtaXNzaW9uLmNoZWNrRnVuYykge1xuICAgICAgICAgICAgICAgIGNhc2UgXCJ6ZXJvX2luYm94XCI6XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNjcmFwcyA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChcIlNjcmFwc1wiKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNjcmFwcyBpbnN0YW5jZW9mIFRGb2xkZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pc3Npb24ucHJvZ3Jlc3MgPSBzY3JhcHMuY2hpbGRyZW4ubGVuZ3RoID09PSAwID8gMSA6IDA7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtaXNzaW9uLnByb2dyZXNzID0gMTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwibW9ybmluZ190cml2aWFsXCI6IGlmIChjb250ZXh0LnR5cGUgPT09IFwiY29tcGxldGVcIiAmJiBjb250ZXh0LmRpZmZpY3VsdHkgPT09IDEgJiYgbm93LmhvdXIoKSA8IDEwKSBtaXNzaW9uLnByb2dyZXNzKys7IGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJxdWVzdF9jb3VudFwiOiBpZiAoY29udGV4dC50eXBlID09PSBcImNvbXBsZXRlXCIpIG1pc3Npb24ucHJvZ3Jlc3MgPSB0aGlzLnNldHRpbmdzLnF1ZXN0c0NvbXBsZXRlZFRvZGF5OyBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiaGlnaF9zdGFrZXNcIjogaWYgKGNvbnRleHQudHlwZSA9PT0gXCJjb21wbGV0ZVwiICYmIGNvbnRleHQuaGlnaFN0YWtlcykgbWlzc2lvbi5wcm9ncmVzcysrOyBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiZmFzdF9jb21wbGV0ZVwiOiBpZiAoY29udGV4dC50eXBlID09PSBcImNvbXBsZXRlXCIgJiYgY29udGV4dC5xdWVzdENyZWF0ZWQgJiYgbW9tZW50KCkuZGlmZihtb21lbnQoY29udGV4dC5xdWVzdENyZWF0ZWQpLCAnaG91cnMnKSA8PSAyKSBtaXNzaW9uLnByb2dyZXNzKys7IGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJzeW5lcmd5XCI6IGlmIChjb250ZXh0LnR5cGUgPT09IFwiY29tcGxldGVcIiAmJiBjb250ZXh0LnNraWxsICYmIGNvbnRleHQuc2Vjb25kYXJ5U2tpbGwgJiYgY29udGV4dC5zZWNvbmRhcnlTa2lsbCAhPT0gXCJOb25lXCIpIG1pc3Npb24ucHJvZ3Jlc3MrKzsgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcIm5vX2RhbWFnZVwiOiBpZiAoY29udGV4dC50eXBlID09PSBcImRhbWFnZVwiKSBtaXNzaW9uLnByb2dyZXNzID0gMDsgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcImhhcmRfcXVlc3RcIjogaWYgKGNvbnRleHQudHlwZSA9PT0gXCJjb21wbGV0ZVwiICYmIGNvbnRleHQuZGlmZmljdWx0eSAmJiBjb250ZXh0LmRpZmZpY3VsdHkgPj0gNCkgbWlzc2lvbi5wcm9ncmVzcysrOyBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwic2tpbGxfcmVwZWF0XCI6XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb250ZXh0LnR5cGUgPT09IFwiY29tcGxldGVcIiAmJiBjb250ZXh0LnNraWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzLnNraWxsVXNlc1RvZGF5W2NvbnRleHQuc2tpbGxdID0gKHRoaXMuc2V0dGluZ3Muc2tpbGxVc2VzVG9kYXlbY29udGV4dC5za2lsbF0gfHwgMCkgKyAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgbWlzc2lvbi5wcm9ncmVzcyA9IE1hdGgubWF4KDAsIC4uLk9iamVjdC52YWx1ZXModGhpcy5zZXR0aW5ncy5za2lsbFVzZXNUb2RheSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1pc3Npb24ucHJvZ3Jlc3MgPj0gbWlzc2lvbi50YXJnZXQgJiYgIW1pc3Npb24uY29tcGxldGVkKSB7XG4gICAgICAgICAgICAgICAgbWlzc2lvbi5jb21wbGV0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMuZ3JhbnRSZXdhcmRzKG1pc3Npb24ucmV3YXJkLnhwLCBtaXNzaW9uLnJld2FyZC5nb2xkLCBgbWlzc2lvbjoke21pc3Npb24uaWR9YCk7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShg4pyFIE1pc3Npb24gQ29tcGxldGU6ICR7bWlzc2lvbi5uYW1lfWApO1xuICAgICAgICAgICAgICAgIHRoaXMuYXVkaW8ucGxheVNvdW5kKFwic3VjY2Vzc1wiKTtcblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmRhaWx5TWlzc2lvbnMuZXZlcnkobSA9PiBtLmNvbXBsZXRlZCkpIGp1c3RGaW5pc2hlZEFsbCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChqdXN0RmluaXNoZWRBbGwpIHtcbiAgICAgICAgICAgIHRoaXMuZ3JhbnRSZXdhcmRzKDAsIDUwLCAnbWlzc2lvbnM6YWxsX2NvbXBsZXRlX2JvbnVzJyk7XG4gICAgICAgICAgICBuZXcgTm90aWNlKFwi8J+OiSBBbGwgTWlzc2lvbnMgQ29tcGxldGUhICs1MCBCb251cyBHb2xkXCIpO1xuICAgICAgICAgICAgdGhpcy5hdWRpby5wbGF5U291bmQoXCJzdWNjZXNzXCIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0RGlmZmljdWx0eU51bWJlcihkaWZmTGFiZWw6IHN0cmluZyk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiBnZXREaWZmaWN1bHR5TnVtKGRpZmZMYWJlbCk7XG4gICAgfVxuXG5cbiAgICBwcml2YXRlIGdyYW50UmV3YXJkcyh4cDogbnVtYmVyLCBnb2xkOiBudW1iZXIsIHJlYXNvbjogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMucGx1Z2luLmtlcm5lbC5ldmVudHMuZW1pdCgncmV3YXJkOmdyYW50ZWQnLCB7IHhwLCBnb2xkLCByZWFzb24gfSk7XG4gICAgfVxuXG4gICAgYXN5bmMgY2hlY2tEYWlseUxvZ2luKCkge1xuICAgICAgICB0aGlzLnBsdWdpbi5rZXJuZWwuZXZlbnRzLmVtaXQoJ3Nlc3Npb246c3RhcnQnLCB7IG5vdzogbmV3IERhdGUoKS50b0lTT1N0cmluZygpIH0pO1xuICAgIH1cblxuICAgIGFzeW5jIGNvbXBsZXRlUXVlc3QoZmlsZTogVEZpbGUpIHtcbiAgICAgICAgaWYgKHRoaXMubWVkaXRhdGlvbkVuZ2luZS5pc0xvY2tlZERvd24oKSkgeyBuZXcgTm90aWNlKFwiTE9DS0RPV04gQUNUSVZFXCIpOyByZXR1cm47IH1cblxuICAgICAgICAvLyAtLS0gQ09NQk8gU1lTVEVNIC0tLVxuICAgICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgICAgICBjb25zdCB0aW1lRGlmZiA9IG5vdyAtIHRoaXMuc2V0dGluZ3MubGFzdENvbXBsZXRpb25UaW1lO1xuICAgICAgICBjb25zdCBDT01CT19XSU5ET1cgPSAxMCAqIDYwICogMTAwMDsgLy8gMTAgbWludXRlc1xuXG4gICAgICAgIGlmICh0aW1lRGlmZiA8IENPTUJPX1dJTkRPVykge1xuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5jb21ib0NvdW50Kys7XG4gICAgICAgICAgICB0aGlzLmF1ZGlvLnBsYXlTb3VuZChcInN1Y2Nlc3NcIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzLmNvbWJvQ291bnQgPSAxO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2V0dGluZ3MubGFzdENvbXBsZXRpb25UaW1lID0gbm93O1xuICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICAgICAgICBjb25zdCBmbSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpPy5mcm9udG1hdHRlcjtcbiAgICAgICAgaWYgKCFmbSkgcmV0dXJuO1xuICAgICAgICBjb25zdCBxdWVzdE5hbWUgPSBmaWxlLmJhc2VuYW1lO1xuXG4gICAgICAgIGlmICh0aGlzLmNoYWluc0VuZ2luZS5pc1F1ZXN0SW5DaGFpbihxdWVzdE5hbWUpKSB7XG4gICAgICAgICAgICBjb25zdCBjYW5TdGFydCA9IHRoaXMuY2hhaW5zRW5naW5lLmNhblN0YXJ0UXVlc3QocXVlc3ROYW1lKTtcbiAgICAgICAgICAgIGlmICghY2FuU3RhcnQpIHsgbmV3IE5vdGljZShcIkxvY2tlZCBieSBDaGFpbi5cIik7IHJldHVybjsgfVxuXG4gICAgICAgICAgICBjb25zdCBjaGFpblJlc3VsdCA9IGF3YWl0IHRoaXMuY2hhaW5zRW5naW5lLmNvbXBsZXRlQ2hhaW5RdWVzdChxdWVzdE5hbWUpO1xuICAgICAgICAgICAgaWYgKGNoYWluUmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGNoYWluUmVzdWx0Lm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIGlmIChjaGFpblJlc3VsdC5jaGFpbkNvbXBsZXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ3JhbnRSZXdhcmRzKGNoYWluUmVzdWx0LmJvbnVzWHAsIDAsICdjaGFpbjpjb21wbGV0aW9uX2JvbnVzJyk7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYPCfjokgQ2hhaW4gQm9udXM6ICske2NoYWluUmVzdWx0LmJvbnVzWHB9IFhQIWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuYW5hbHl0aWNzRW5naW5lLnRyYWNrRGFpbHlNZXRyaWNzKFwicXVlc3RfY29tcGxldGVcIiwgMSk7XG4gICAgICAgIHRoaXMuc2V0dGluZ3MucmVzZWFyY2hTdGF0cy50b3RhbENvbWJhdCsrO1xuXG4gICAgICAgIC8vIFJld2FyZHNcbiAgICAgICAgbGV0IHhwTXVsdCA9IHRoaXMuc2V0dGluZ3MuZGFpbHlNb2RpZmllci54cE11bHQ7XG4gICAgICAgIGxldCBnb2xkTXVsdCA9IHRoaXMuc2V0dGluZ3MuZGFpbHlNb2RpZmllci5nb2xkTXVsdDtcblxuICAgICAgICB0aGlzLnNldHRpbmdzLmFjdGl2ZUJ1ZmZzLmZvckVhY2goYiA9PiB7XG4gICAgICAgICAgICBpZiAoYi5lZmZlY3QueHBNdWx0KSB4cE11bHQgKj0gYi5lZmZlY3QueHBNdWx0O1xuICAgICAgICAgICAgaWYgKGIuZWZmZWN0LmdvbGRNdWx0KSBnb2xkTXVsdCAqPSBiLmVmZmVjdC5nb2xkTXVsdDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbGV0IHhwID0gKGZtLnhwX3Jld2FyZCB8fCAyMCkgKiB4cE11bHQ7XG4gICAgICAgIGxldCBnb2xkID0gKGZtLmdvbGRfcmV3YXJkIHx8IDApICogZ29sZE11bHQ7XG5cbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuY29tYm9Db3VudCA+IDEpIHtcbiAgICAgICAgICAgIGNvbnN0IGJvbnVzID0gTWF0aC5mbG9vcih4cCAqIDAuMSAqICh0aGlzLnNldHRpbmdzLmNvbWJvQ291bnQgLSAxKSk7XG4gICAgICAgICAgICB4cCArPSBib251cztcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYPCflKUgQ09NQk8geCR7dGhpcy5zZXR0aW5ncy5jb21ib0NvdW50fSEgKyR7Ym9udXN9IEJvbnVzIFhQYCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBza2lsbE5hbWUgPSBmbS5za2lsbCB8fCBcIk5vbmVcIjtcbiAgICAgICAgY29uc3Qgc2Vjb25kYXJ5ID0gZm0uc2Vjb25kYXJ5X3NraWxsIHx8IFwiTm9uZVwiO1xuXG4gICAgICAgIGNvbnN0IGJvc3NNYXRjaCA9IGZtLmlzX2Jvc3MgPyBmaWxlLmJhc2VuYW1lLm1hdGNoKC9CT1NTX0xWTChcXGQrKS8pIDogbnVsbDtcbiAgICAgICAgY29uc3QgYm9zc0xldmVsID0gYm9zc01hdGNoID8gcGFyc2VJbnQoYm9zc01hdGNoWzFdKSA6IG51bGw7XG5cbiAgICAgICAgdGhpcy5wbHVnaW4ua2VybmVsLmV2ZW50cy5lbWl0KCdxdWVzdDpjb21wbGV0ZWQnLCB7XG4gICAgICAgICAgICBxdWVzdElkOiBmaWxlLmJhc2VuYW1lLFxuICAgICAgICAgICAgZGlmZmljdWx0eTogdGhpcy5nZXREaWZmaWN1bHR5TnVtYmVyKGZtLmRpZmZpY3VsdHkpLFxuICAgICAgICAgICAgc2tpbGxOYW1lLFxuICAgICAgICAgICAgc2Vjb25kYXJ5U2tpbGw6IHNlY29uZGFyeSxcbiAgICAgICAgICAgIGhpZ2hTdGFrZXM6ICEhZm0uaGlnaF9zdGFrZXMsXG4gICAgICAgICAgICBpc0Jvc3M6ICEhZm0uaXNfYm9zcyxcbiAgICAgICAgICAgIGJvc3NMZXZlbCxcbiAgICAgICAgICAgIHhwUmV3YXJkOiB4cCxcbiAgICAgICAgICAgIGdvbGRSZXdhcmQ6IGdvbGRcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5hdWRpby5wbGF5U291bmQoXCJzdWNjZXNzXCIpO1xuXG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmhwIDw9IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc2V0dGluZ3MucXVlc3RzQ29tcGxldGVkVG9kYXkrKztcbiAgICAgICAgdGhpcy5hbmFseXRpY3NFbmdpbmUudXBkYXRlU3RyZWFrKCk7XG5cbiAgICAgICAgdGhpcy5jaGVja0RhaWx5TWlzc2lvbnMoe1xuICAgICAgICAgICAgdHlwZTogXCJjb21wbGV0ZVwiLFxuICAgICAgICAgICAgZGlmZmljdWx0eTogdGhpcy5nZXREaWZmaWN1bHR5TnVtYmVyKGZtLmRpZmZpY3VsdHkpLFxuICAgICAgICAgICAgc2tpbGw6IHNraWxsTmFtZSxcbiAgICAgICAgICAgIHNlY29uZGFyeVNraWxsOiBzZWNvbmRhcnksXG4gICAgICAgICAgICBoaWdoU3Rha2VzOiBmbS5oaWdoX3N0YWtlc1xuICAgICAgICB9KTtcblxuICAgICAgICBhd2FpdCB0aGlzLmFwcC5maWxlTWFuYWdlci5wcm9jZXNzRnJvbnRNYXR0ZXIoZmlsZSwgKGYpID0+IHsgZi5zdGF0dXMgPSBcImNvbXBsZXRlZFwiOyBmLmNvbXBsZXRlZF9hdCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTsgfSk7XG5cbiAgICAgICAgLy8gW0ZJWF0gVXNlIFNhZmUgQXJjaGl2ZSB0byBwcmV2ZW50IGR1cGxpY2F0ZXMvem9tYmllc1xuICAgICAgICBhd2FpdCB0aGlzLnNhZmVBcmNoaXZlKGZpbGUsIFwiQXJjaGl2ZVwiKTtcblxuICAgICAgICAvLyAqKiogUkVDVVJSSU5HIFFVRVNUOiBhdXRvLXJlZGVwbG95IGlmIG1hcmtlZCByZWN1cnJpbmcgKioqXG4gICAgICAgIGlmIChmbS5yZWN1cnJpbmcpIHtcbiAgICAgICAgICAgIGNvbnN0IG5leHREZWFkbGluZSA9IHRoaXMuY29tcHV0ZU5leHRSZWN1cnJpbmdEZWFkbGluZShmbS5yZWN1cnJpbmdfaW50ZXJ2YWwgfHwgJ2RhaWx5JywgZm0uZGVhZGxpbmUpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5jcmVhdGVRdWVzdChcbiAgICAgICAgICAgICAgICBmaWxlLmJhc2VuYW1lLFxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0RGlmZmljdWx0eU51bWJlcihmbS5kaWZmaWN1bHR5KSxcbiAgICAgICAgICAgICAgICBmbS5za2lsbCB8fCAnTm9uZScsXG4gICAgICAgICAgICAgICAgZm0uc2Vjb25kYXJ5X3NraWxsIHx8ICdOb25lJyxcbiAgICAgICAgICAgICAgICBuZXh0RGVhZGxpbmUsXG4gICAgICAgICAgICAgICAgISFmbS5oaWdoX3N0YWtlcyxcbiAgICAgICAgICAgICAgICBmbS5wcmlvcml0eSB8fCAnbm9ybWFsJyxcbiAgICAgICAgICAgICAgICAhIWZtLmlzX2Jvc3NcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICAvLyBNYXJrIHRoZSByZS1jcmVhdGVkIHF1ZXN0IGFzIHJlY3VycmluZyBpbiBmcm9udG1hdHRlclxuICAgICAgICAgICAgY29uc3QgbmV3RmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChgQWN0aXZlX1J1bi9RdWVzdHMvJHt0aGlzLnRvU2FmZVF1ZXN0TmFtZShmaWxlLmJhc2VuYW1lKX0ubWRgKTtcbiAgICAgICAgICAgIGlmIChuZXdGaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC5maWxlTWFuYWdlci5wcm9jZXNzRnJvbnRNYXR0ZXIobmV3RmlsZSwgKGYpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZi5yZWN1cnJpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBmLnJlY3VycmluZ19pbnRlcnZhbCA9IGZtLnJlY3VycmluZ19pbnRlcnZhbCB8fCAnZGFpbHknO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlKCk7XG4gICAgfVxuXG4gICAgYXN5bmMgc3Bhd25Cb3NzKGxldmVsOiBudW1iZXIpIHtcbiAgICAgICAgY29uc3QgYm9zcyA9IEJPU1NfREFUQVtsZXZlbF07XG4gICAgICAgIGlmICghYm9zcykgcmV0dXJuO1xuICAgICAgICB0aGlzLmF1ZGlvLnBsYXlTb3VuZChcImhlYXJ0YmVhdFwiKTtcbiAgICAgICAgbmV3IE5vdGljZShcIuKaoO+4jyBBTk9NQUxZIERFVEVDVEVELi4uXCIsIDIwMDApO1xuXG4gICAgICAgIHNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5hdWRpby5wbGF5U291bmQoXCJkZWF0aFwiKTtcbiAgICAgICAgICAgIG5ldyBCb3NzRW5jb3VudGVyTW9kYWwodGhpcy5hcHAsIHRoaXMucGx1Z2luLCBib3NzLm5hbWUsIGxldmVsLCBib3NzLmRlc2MgfHwgJ0EgZm9ybWlkYWJsZSBhZHZlcnNhcnkuJykub3BlbigpO1xuXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmNyZWF0ZVF1ZXN0KFxuICAgICAgICAgICAgICAgIGBCT1NTX0xWTCR7bGV2ZWx9IC0gJHtib3NzLm5hbWV9YCwgNSwgXCJCb3NzXCIsIFwiTm9uZVwiLFxuICAgICAgICAgICAgICAgIG1vbWVudCgpLmFkZCgzLCAnZGF5cycpLnRvSVNPU3RyaW5nKCksIHRydWUsIFwiQ3JpdGljYWxcIiwgdHJ1ZVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgc2V0VGltZW91dChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2FmZU5hbWUgPSB0aGlzLnRvU2FmZVF1ZXN0TmFtZShgQk9TU19MVkwke2xldmVsfSAtICR7Ym9zcy5uYW1lfWApO1xuICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGZpbGUgPSBmaWxlcy5maW5kKGYgPT4gZi5iYXNlbmFtZS50b0xvd2VyQ2FzZSgpID09PSBzYWZlTmFtZSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1heEhwID0gMTAwICsgKGxldmVsICogMjApO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC5maWxlTWFuYWdlci5wcm9jZXNzRnJvbnRNYXR0ZXIoZmlsZSwgKGZtKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmbS5ib3NzX2hwID0gbWF4SHA7XG4gICAgICAgICAgICAgICAgICAgICAgICBmbS5ib3NzX21heF9ocCA9IG1heEhwO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKFwidXBkYXRlXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIDUwMCk7XG4gICAgICAgIH0sIDMwMDApO1xuICAgIH1cblxuICAgIGFzeW5jIGRhbWFnZUJvc3MoZmlsZTogVEZpbGUpIHtcbiAgICAgICAgY29uc3QgZm0gPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKT8uZnJvbnRtYXR0ZXI7XG4gICAgICAgIGlmICghZm0gfHwgIWZtLmlzX2Jvc3MpIHJldHVybjtcblxuICAgICAgICBjb25zdCBkYW1hZ2UgPSAyNTtcbiAgICAgICAgY29uc3QgY3VycmVudEhwID0gZm0uYm9zc19ocCB8fCAxMDA7XG4gICAgICAgIGNvbnN0IG5ld0hwID0gY3VycmVudEhwIC0gZGFtYWdlO1xuXG4gICAgICAgIGlmIChuZXdIcCA8PSAwKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmNvbXBsZXRlUXVlc3QoZmlsZSk7XG4gICAgICAgICAgICBuZXcgTm90aWNlKFwi4pqU77iPIEZJTkFMIEJMT1chIEJvc3MgRGVmZWF0ZWQhXCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAuZmlsZU1hbmFnZXIucHJvY2Vzc0Zyb250TWF0dGVyKGZpbGUsIChmKSA9PiB7XG4gICAgICAgICAgICAgICAgZi5ib3NzX2hwID0gbmV3SHA7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuYXVkaW8ucGxheVNvdW5kKFwiZmFpbFwiKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoYOKalO+4jyBCb3NzIERhbWFnZWQhICR7bmV3SHB9LyR7Zm0uYm9zc19tYXhfaHB9IEhQIHJlbWFpbmluZ2ApO1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLnRyaWdnZXIoXCJ1cGRhdGVcIiksIDIwMCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBmYWlsUXVlc3QoZmlsZTogVEZpbGUsIG1hbnVhbEFib3J0OiBib29sZWFuID0gZmFsc2UpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNSZXN0aW5nKCkgJiYgIW1hbnVhbEFib3J0KSB7IG5ldyBOb3RpY2UoXCJSZXN0IERheSBwcm90ZWN0aW9uLlwiKTsgcmV0dXJuOyB9XG4gICAgICAgIGlmICh0aGlzLmlzU2hpZWxkZWQoKSAmJiAhbWFudWFsQWJvcnQpIHsgbmV3IE5vdGljZShcIlNoaWVsZGVkIVwiKTsgcmV0dXJuOyB9XG5cbiAgICAgICAgbGV0IGRhbWFnZU11bHQgPSAxO1xuICAgICAgICB0aGlzLnNldHRpbmdzLmFjdGl2ZUJ1ZmZzLmZvckVhY2goYiA9PiB7XG4gICAgICAgICAgICBpZiAoYi5lZmZlY3QuZGFtYWdlTXVsdCkgZGFtYWdlTXVsdCAqPSBiLmVmZmVjdC5kYW1hZ2VNdWx0O1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBmbSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpPy5mcm9udG1hdHRlcjtcbiAgICAgICAgbGV0IGJvc3NIcFBlbmFsdHkgPSAwO1xuICAgICAgICBpZiAoZm0/LmlzX2Jvc3MpIHtcbiAgICAgICAgICAgIGNvbnN0IG1hdGNoID0gZmlsZS5iYXNlbmFtZS5tYXRjaCgvQk9TU19MVkwoXFxkKykvKTtcbiAgICAgICAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxldmVsID0gcGFyc2VJbnQobWF0Y2hbMV0pO1xuICAgICAgICAgICAgICAgIGJvc3NIcFBlbmFsdHkgPSBnZXRCb3NzSHBQZW5hbHR5KGxldmVsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGRhbWFnZSA9IGNvbXB1dGVGYWlsRGFtYWdlKFxuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5yaXZhbERtZyxcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MuZ29sZCxcbiAgICAgICAgICAgIGRhbWFnZU11bHQsXG4gICAgICAgICAgICBib3NzSHBQZW5hbHR5XG4gICAgICAgICk7XG5cbiAgICAgICAgdGhpcy5wbHVnaW4ua2VybmVsLmV2ZW50cy5lbWl0KCdxdWVzdDpmYWlsZWQnLCB7XG4gICAgICAgICAgICBxdWVzdElkOiBmaWxlLmJhc2VuYW1lLFxuICAgICAgICAgICAgcmVhc29uOiBtYW51YWxBYm9ydCA/ICdtYW51YWxfYWJvcnQnIDogJ2ZhaWxlZCcsXG4gICAgICAgICAgICBkYW1hZ2UsXG4gICAgICAgICAgICBtYW51YWxBYm9ydCxcbiAgICAgICAgICAgIGJvc3NIcFBlbmFsdHlcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuaHAgPD0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZ3JhdmVQYXRoID0gXCJHcmF2ZXlhcmQvRmFpbHVyZXNcIjtcbiAgICAgICAgaWYgKCF0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZ3JhdmVQYXRoKSkgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlRm9sZGVyKGdyYXZlUGF0aCk7XG5cbiAgICAgICAgYXdhaXQgdGhpcy5hcHAuZmlsZU1hbmFnZXIucmVuYW1lRmlsZShmaWxlLCBgJHtncmF2ZVBhdGh9L1tGQUlMRURdICR7ZmlsZS5uYW1lfWApO1xuICAgICAgICBhd2FpdCB0aGlzLnNhdmUoKTtcbiAgICB9XG5cbiAgICBhc3luYyBjcmVhdGVRdWVzdChuYW1lOiBzdHJpbmcsIGRpZmY6IG51bWJlciwgc2tpbGw6IHN0cmluZywgc2VjU2tpbGw6IHN0cmluZywgZGVhZGxpbmVJc286IHN0cmluZywgaGlnaFN0YWtlczogYm9vbGVhbiwgcHJpb3JpdHk6IHN0cmluZywgaXNCb3NzOiBib29sZWFuKSB7XG4gICAgICAgIGlmICh0aGlzLm1lZGl0YXRpb25FbmdpbmUuaXNMb2NrZWREb3duKCkpIHsgbmV3IE5vdGljZShcIkxPQ0tET1dOIEFDVElWRVwiKTsgcmV0dXJuOyB9XG5cbiAgICAgICAgY29uc3QgeyB4cFJld2FyZCwgZ29sZFJld2FyZCwgZGlmZkxhYmVsIH0gPSBxdWVzdFJld2FyZHNCeURpZmZpY3VsdHkoZGlmZiwgdGhpcy5zZXR0aW5ncy54cFJlcSwgaXNCb3NzLCBoaWdoU3Rha2VzKTtcblxuICAgICAgICBjb25zdCByb290UGF0aCA9IFwiQWN0aXZlX1J1bi9RdWVzdHNcIjtcbiAgICAgICAgaWYgKCF0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgocm9vdFBhdGgpKSBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGVGb2xkZXIocm9vdFBhdGgpO1xuXG4gICAgICAgIGNvbnN0IHNhZmVOYW1lID0gdGhpcy50b1NhZmVRdWVzdE5hbWUobmFtZSk7XG5cbiAgICAgICAgY29uc3QgZXhpc3RpbmdGaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGAke3Jvb3RQYXRofS8ke3NhZmVOYW1lfS5tZGApO1xuICAgICAgICBpZiAoZXhpc3RpbmdGaWxlKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKFwiUXVlc3Qgd2l0aCB0aGF0IG5hbWUgYWxyZWFkeSBleGlzdHMhXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY29udGVudCA9IGAtLS1cbnR5cGU6IHF1ZXN0XG5zdGF0dXM6IGFjdGl2ZVxuZGlmZmljdWx0eTogJHtkaWZmTGFiZWx9XG5wcmlvcml0eTogJHtwcmlvcml0eX1cbnhwX3Jld2FyZDogJHt4cFJld2FyZH1cbmdvbGRfcmV3YXJkOiAke2dvbGRSZXdhcmR9XG5za2lsbDogJHtza2lsbH1cbnNlY29uZGFyeV9za2lsbDogJHtzZWNTa2lsbH1cbmhpZ2hfc3Rha2VzOiAke2hpZ2hTdGFrZXMgPyAndHJ1ZScgOiAnZmFsc2UnfVxuaXNfYm9zczogJHtpc0Jvc3N9XG5jcmVhdGVkOiAke25ldyBEYXRlKCkudG9JU09TdHJpbmcoKX1cbmRlYWRsaW5lOiAke2RlYWRsaW5lSXNvfVxuLS0tXG4jIOKalO+4jyAke25hbWV9YDtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKGAke3Jvb3RQYXRofS8ke3NhZmVOYW1lfS5tZGAsIGNvbnRlbnQpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRmFpbGVkIHRvIGNyZWF0ZSBxdWVzdCBmaWxlXCIsIGUpO1xuICAgICAgICAgICAgbmV3IE5vdGljZShcIkZhaWxlZCB0byBjcmVhdGUgcXVlc3QuIENoZWNrIGNvbnNvbGUgZm9yIGRldGFpbHMuXCIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYXVkaW8ucGxheVNvdW5kKFwiY2xpY2tcIik7XG4gICAgICAgIHRoaXMuc2F2ZSgpO1xuICAgIH1cblxuICAgIGFzeW5jIGRlbGV0ZVF1ZXN0KGZpbGU6IFRGaWxlKSB7XG4gICAgICAgIGNvbnN0IHsgY29zdCB9ID0gdGhpcy5tZWRpdGF0aW9uRW5naW5lLmdldERlbGV0aW9uQ29zdCgpO1xuICAgICAgICBpZiAoY29zdCA+IDAgJiYgdGhpcy5zZXR0aW5ncy5nb2xkIDwgY29zdCkge1xuICAgICAgICAgICAgbmV3IE5vdGljZShcIkluc3VmZmljaWVudCBnb2xkIGZvciBwYWlkIGRlbGV0aW9uIVwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGNvc3RSZXN1bHQgPSB0aGlzLm1lZGl0YXRpb25FbmdpbmUuYXBwbHlEZWxldGlvbkNvc3QoKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoZmlsZSk7XG4gICAgICAgICAgICB0aGlzLmRlbGV0ZWRRdWVzdEJ1ZmZlci5wdXNoKHtcbiAgICAgICAgICAgICAgICBuYW1lOiBmaWxlLm5hbWUsXG4gICAgICAgICAgICAgICAgY29udGVudDogY29udGVudCxcbiAgICAgICAgICAgICAgICBwYXRoOiBmaWxlLnBhdGgsXG4gICAgICAgICAgICAgICAgZGVsZXRlZEF0OiBEYXRlLm5vdygpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICh0aGlzLmRlbGV0ZWRRdWVzdEJ1ZmZlci5sZW5ndGggPiA1KSB0aGlzLmRlbGV0ZWRRdWVzdEJ1ZmZlci5zaGlmdCgpO1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKFwidW5kbzpzaG93XCIsIGZpbGUuYmFzZW5hbWUpO1xuICAgICAgICB9IGNhdGNoIChlKSB7IGNvbnNvbGUuZXJyb3IoXCJCdWZmZXIgZmFpbFwiLCBlKTsgfVxuXG4gICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmRlbGV0ZShmaWxlKTtcbiAgICAgICAgaWYgKGNvc3RSZXN1bHQubWVzc2FnZSkgbmV3IE5vdGljZShjb3N0UmVzdWx0Lm1lc3NhZ2UpO1xuICAgICAgICB0aGlzLnNhdmUoKTtcbiAgICB9XG5cbiAgICBhc3luYyB1bmRvTGFzdERlbGV0aW9uKCkge1xuICAgICAgICBjb25zdCBsYXN0ID0gdGhpcy5kZWxldGVkUXVlc3RCdWZmZXIucG9wKCk7XG4gICAgICAgIGlmICghbGFzdCkgeyBuZXcgTm90aWNlKFwiTm90aGluZyB0byB1bmRvLlwiKTsgcmV0dXJuOyB9XG5cbiAgICAgICAgaWYgKERhdGUubm93KCkgLSBsYXN0LmRlbGV0ZWRBdCA+IDYwMDAwKSB7IG5ldyBOb3RpY2UoXCJUb28gbGF0ZSB0byB1bmRvLlwiKTsgcmV0dXJuOyB9XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShsYXN0LnBhdGgsIGxhc3QuY29udGVudCk7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGBSZXN0b3JlZDogJHtsYXN0Lm5hbWV9YCk7XG5cbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcihcInVwZGF0ZVwiKTtcbiAgICAgICAgICAgIH0sIDEwMCk7XG5cbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgbmV3IE5vdGljZShcIkNvdWxkIG5vdCByZXN0b3JlIGZpbGUgKHBhdGggbWF5IGJlIHRha2VuKS5cIik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBjaGVja0RlYWRsaW5lcygpIHtcbiAgICAgICAgaWYgKCF0aGlzLnBsdWdpbi5rZXJuZWwpIHtcbiAgICAgICAgICAgIGNvbnN0IG5vdyA9IG1vbWVudCgpO1xuICAgICAgICAgICAgY29uc3QgaW5pdGlhbENvdW50ID0gdGhpcy5zZXR0aW5ncy5hY3RpdmVCdWZmcy5sZW5ndGg7XG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzLmFjdGl2ZUJ1ZmZzID0gdGhpcy5zZXR0aW5ncy5hY3RpdmVCdWZmcy5maWx0ZXIoYiA9PiBtb21lbnQoYi5leHBpcmVzQXQpLmlzQWZ0ZXIobm93KSk7XG4gICAgICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5hY3RpdmVCdWZmcy5sZW5ndGggPCBpbml0aWFsQ291bnQpIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiQSBwb3Rpb24gZWZmZWN0IGhhcyB3b3JuIG9mZi5cIik7XG4gICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKFwidXBkYXRlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGZvbGRlciA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChcIkFjdGl2ZV9SdW4vUXVlc3RzXCIpO1xuICAgICAgICBpZiAoIShmb2xkZXIgaW5zdGFuY2VvZiBURm9sZGVyKSkgcmV0dXJuO1xuXG4gICAgICAgIGNvbnN0IHplcm9JbmJveCA9IHRoaXMuc2V0dGluZ3MuZGFpbHlNaXNzaW9ucy5maW5kKG0gPT4gbS5jaGVja0Z1bmMgPT09IFwiemVyb19pbmJveFwiICYmICFtLmNvbXBsZXRlZCk7XG4gICAgICAgIGlmICh6ZXJvSW5ib3gpIHtcbiAgICAgICAgICAgIGNvbnN0IHNjcmFwcyA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChcIlNjcmFwc1wiKTtcbiAgICAgICAgICAgIGlmIChzY3JhcHMgaW5zdGFuY2VvZiBURm9sZGVyICYmIHNjcmFwcy5jaGlsZHJlbi5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNoZWNrRGFpbHlNaXNzaW9ucyh7IHR5cGU6IFwiY2hlY2tcIiB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBmb2xkZXIuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBmbSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpPy5mcm9udG1hdHRlcjtcbiAgICAgICAgICAgICAgICBpZiAoZm0/LmRlYWRsaW5lICYmIG1vbWVudCgpLmlzQWZ0ZXIobW9tZW50KGZtLmRlYWRsaW5lKSkpIGF3YWl0IHRoaXMuZmFpbFF1ZXN0KGZpbGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZSgpO1xuICAgIH1cblxuICAgIGFzeW5jIHJvbGxDaGFvcyhzaG93TW9kYWw6IGJvb2xlYW4gPSBmYWxzZSkge1xuICAgICAgICBjb25zdCByb2xsID0gTWF0aC5yYW5kb20oKTtcbiAgICAgICAgaWYgKHJvbGwgPCAwLjQpIHRoaXMuc2V0dGluZ3MuZGFpbHlNb2RpZmllciA9IERFRkFVTFRfTU9ESUZJRVI7XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgaWR4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKENIQU9TX1RBQkxFLmxlbmd0aCAtIDEpKSArIDE7XG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzLmRhaWx5TW9kaWZpZXIgPSBDSEFPU19UQUJMRVtpZHhdO1xuICAgICAgICB9XG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZSgpO1xuICAgICAgICBpZiAoc2hvd01vZGFsKSBuZXcgQ2hhb3NNb2RhbCh0aGlzLmFwcCwgdGhpcy5zZXR0aW5ncy5kYWlseU1vZGlmaWVyKS5vcGVuKCk7XG4gICAgfVxuXG4gICAgYXN5bmMgYXR0ZW1wdFJlY292ZXJ5KCkge1xuICAgICAgICBpZiAoIXRoaXMubWVkaXRhdGlvbkVuZ2luZS5pc0xvY2tlZERvd24oKSkgeyBuZXcgTm90aWNlKFwiTm90IGluIExvY2tkb3duLlwiKTsgcmV0dXJuOyB9XG4gICAgICAgIGNvbnN0IHsgaG91cnMsIG1pbnV0ZXMgfSA9IHRoaXMubWVkaXRhdGlvbkVuZ2luZS5nZXRMb2NrZG93blRpbWVSZW1haW5pbmcoKTtcbiAgICAgICAgbmV3IE5vdGljZShgUmVjb3ZlcmluZy4uLiAke2hvdXJzfWggJHttaW51dGVzfW0gcmVtYWluaW5nLmApO1xuICAgIH1cblxuICAgIGlzTG9ja2VkRG93bigpIHsgcmV0dXJuIHRoaXMubWVkaXRhdGlvbkVuZ2luZS5pc0xvY2tlZERvd24oKTsgfVxuICAgIGlzUmVzdGluZygpOiBib29sZWFuIHsgcmV0dXJuICEhKHRoaXMuc2V0dGluZ3MucmVzdERheVVudGlsICYmIG1vbWVudCgpLmlzQmVmb3JlKG1vbWVudCh0aGlzLnNldHRpbmdzLnJlc3REYXlVbnRpbCkpKTsgfVxuICAgIGlzU2hpZWxkZWQoKTogYm9vbGVhbiB7IHJldHVybiAhISh0aGlzLnNldHRpbmdzLnNoaWVsZGVkVW50aWwgJiYgbW9tZW50KCkuaXNCZWZvcmUobW9tZW50KHRoaXMuc2V0dGluZ3Muc2hpZWxkZWRVbnRpbCkpKTsgfVxuXG4gICAgYXN5bmMgY3JlYXRlUmVzZWFyY2hRdWVzdCh0aXRsZTogc3RyaW5nLCB0eXBlOiBhbnksIGxpbmtlZFNraWxsOiBzdHJpbmcsIGxpbmtlZENvbWJhdFF1ZXN0OiBzdHJpbmcpOiBQcm9taXNlPHsgc3VjY2VzczogYm9vbGVhbjsgbWVzc2FnZTogc3RyaW5nIH0+IHtcbiAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy5yZXNlYXJjaEVuZ2luZS5jcmVhdGVSZXNlYXJjaFF1ZXN0KHRpdGxlLCB0eXBlLCBsaW5rZWRTa2lsbCwgbGlua2VkQ29tYmF0UXVlc3QpO1xuICAgICAgICBpZiAocmVzLnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UocmVzLm1lc3NhZ2UpO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKHJlcy5tZXNzYWdlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH1cblxuICAgIGNvbXBsZXRlUmVzZWFyY2hRdWVzdChpZDogc3RyaW5nLCB3b3JkczogbnVtYmVyKSB7IHRoaXMucmVzZWFyY2hFbmdpbmUuY29tcGxldGVSZXNlYXJjaFF1ZXN0KGlkLCB3b3Jkcyk7IHRoaXMuc2F2ZSgpOyB9XG4gICAgYXN5bmMgZGVsZXRlUmVzZWFyY2hRdWVzdChpZDogc3RyaW5nKSB7IGF3YWl0IHRoaXMucmVzZWFyY2hFbmdpbmUuZGVsZXRlUmVzZWFyY2hRdWVzdChpZCk7IGF3YWl0IHRoaXMuc2F2ZSgpOyB9XG4gICAgdXBkYXRlUmVzZWFyY2hXb3JkQ291bnQoaWQ6IHN0cmluZywgd29yZHM6IG51bWJlcikge1xuICAgICAgICB0aGlzLnJlc2VhcmNoRW5naW5lLnVwZGF0ZVJlc2VhcmNoV29yZENvdW50KGlkLCB3b3Jkcyk7XG4gICAgICAgIHRoaXMudHJpZ2dlcihcInVwZGF0ZVwiKTtcbiAgICB9XG4gICAgZ2V0UmVzZWFyY2hSYXRpbygpIHsgcmV0dXJuIHRoaXMucmVzZWFyY2hFbmdpbmUuZ2V0UmVzZWFyY2hSYXRpbygpOyB9XG4gICAgY2FuQ3JlYXRlUmVzZWFyY2hRdWVzdCgpIHsgcmV0dXJuIHRoaXMucmVzZWFyY2hFbmdpbmUuY2FuQ3JlYXRlUmVzZWFyY2hRdWVzdCgpOyB9XG5cbiAgICBhc3luYyBzdGFydE1lZGl0YXRpb24oKSB7IGNvbnN0IHIgPSB0aGlzLm1lZGl0YXRpb25FbmdpbmUubWVkaXRhdGUoKTsgbmV3IE5vdGljZShyLm1lc3NhZ2UpOyBhd2FpdCB0aGlzLnNhdmUoKTsgfVxuICAgIGdldE1lZGl0YXRpb25TdGF0dXMoKSB7IHJldHVybiB0aGlzLm1lZGl0YXRpb25FbmdpbmUuZ2V0TWVkaXRhdGlvblN0YXR1cygpOyB9XG4gICAgYXN5bmMgY3JlYXRlU2NyYXAoY29udGVudDogc3RyaW5nKSB7XG4gICAgICAgIGNvbnN0IGZvbGRlclBhdGggPSBcIlNjcmFwc1wiO1xuICAgICAgICBpZiAoIXRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmb2xkZXJQYXRoKSkgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlRm9sZGVyKGZvbGRlclBhdGgpO1xuICAgICAgICBjb25zdCB0aW1lc3RhbXAgPSBtb21lbnQoKS5mb3JtYXQoXCJZWVlZLU1NLUREIEhILW1tLXNzXCIpO1xuICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGUoYCR7Zm9sZGVyUGF0aH0vJHt0aW1lc3RhbXB9Lm1kYCwgY29udGVudCk7XG4gICAgICAgIG5ldyBOb3RpY2UoXCLimqEgU2NyYXAgQ2FwdHVyZWRcIik7IHRoaXMuYXVkaW8ucGxheVNvdW5kKFwiY2xpY2tcIik7XG4gICAgfVxuXG4gICAgYXN5bmMgZ2VuZXJhdGVTa2lsbEdyYXBoKCkge1xuICAgICAgICBjb25zdCBza2lsbHMgPSB0aGlzLnNldHRpbmdzLnNraWxscztcbiAgICAgICAgaWYgKHNraWxscy5sZW5ndGggPT09IDApIHsgbmV3IE5vdGljZShcIk5vIG5ldXJhbCBub2RlcyBmb3VuZC5cIik7IHJldHVybjsgfVxuICAgICAgICBjb25zdCBub2RlczogYW55W10gPSBbXTsgY29uc3QgZWRnZXM6IGFueVtdID0gW107XG4gICAgICAgIGNvbnN0IHdpZHRoID0gMjUwOyBjb25zdCBoZWlnaHQgPSAxNDA7XG4gICAgICAgIGNvbnN0IHJhZGl1cyA9IE1hdGgubWF4KDQwMCwgc2tpbGxzLmxlbmd0aCAqIDYwKTtcbiAgICAgICAgY29uc3QgY2VudGVyWCA9IDA7IGNvbnN0IGNlbnRlclkgPSAwOyBjb25zdCBhbmdsZVN0ZXAgPSAoMiAqIE1hdGguUEkpIC8gc2tpbGxzLmxlbmd0aDtcblxuICAgICAgICBza2lsbHMuZm9yRWFjaCgoc2tpbGwsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBhbmdsZSA9IGluZGV4ICogYW5nbGVTdGVwO1xuICAgICAgICAgICAgY29uc3QgeCA9IGNlbnRlclggKyByYWRpdXMgKiBNYXRoLmNvcyhhbmdsZSk7XG4gICAgICAgICAgICBjb25zdCB5ID0gY2VudGVyWSArIHJhZGl1cyAqIE1hdGguc2luKGFuZ2xlKTtcbiAgICAgICAgICAgIGxldCBjb2xvciA9IFwiNFwiO1xuICAgICAgICAgICAgaWYgKHNraWxsLnJ1c3QgPiAwKSBjb2xvciA9IFwiMVwiOyBlbHNlIGlmIChza2lsbC5sZXZlbCA+PSAxMCkgY29sb3IgPSBcIjZcIjtcbiAgICAgICAgICAgIGNvbnN0IHN0YXR1c0ljb24gPSBza2lsbC5ydXN0ID4gMCA/IFwi4pqg77iPIFJVU1RZXCIgOiBcIvCfn6IgQUNUSVZFXCI7XG4gICAgICAgICAgICBjb25zdCBwcm9ncmVzcyA9IHNraWxsLnhwUmVxID4gMCA/IE1hdGguZmxvb3IoKHNraWxsLnhwIC8gc2tpbGwueHBSZXEpICogMTAwKSA6IDA7XG4gICAgICAgICAgICBjb25zdCB0ZXh0ID0gYCMjICR7c2tpbGwubmFtZX1cXG4qKkx2ICR7c2tpbGwubGV2ZWx9KipcXG4ke3N0YXR1c0ljb259XFxuWFA6ICR7c2tpbGwueHB9LyR7c2tpbGwueHBSZXF9ICgke3Byb2dyZXNzfSUpYDtcbiAgICAgICAgICAgIG5vZGVzLnB1c2goeyBpZDogc2tpbGwubmFtZSwgeDogTWF0aC5mbG9vcih4KSwgeTogTWF0aC5mbG9vcih5KSwgd2lkdGgsIGhlaWdodCwgdHlwZTogXCJ0ZXh0XCIsIHRleHQsIGNvbG9yIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBza2lsbHMuZm9yRWFjaChza2lsbCA9PiB7XG4gICAgICAgICAgICBpZiAoc2tpbGwuY29ubmVjdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBza2lsbC5jb25uZWN0aW9ucy5mb3JFYWNoKHRhcmdldE5hbWUgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2tpbGxzLmZpbmQocyA9PiBzLm5hbWUgPT09IHRhcmdldE5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlZGdlcy5wdXNoKHsgaWQ6IGAke3NraWxsLm5hbWV9LSR7dGFyZ2V0TmFtZX1gLCBmcm9tTm9kZTogc2tpbGwubmFtZSwgZnJvbVNpZGU6IFwicmlnaHRcIiwgdG9Ob2RlOiB0YXJnZXROYW1lLCB0b1NpZGU6IFwibGVmdFwiLCBjb2xvcjogXCI0XCIgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgY2FudmFzRGF0YSA9IHsgbm9kZXMsIGVkZ2VzIH07XG4gICAgICAgIGNvbnN0IHBhdGggPSB0aGlzLnNldHRpbmdzLm5ldXJhbEh1YlBhdGggfHwgXCJBY3RpdmVfUnVuL05ldXJhbF9IdWIuY2FudmFzXCI7XG4gICAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgocGF0aCk7XG4gICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHsgYXdhaXQgdGhpcy5hcHAudmF1bHQubW9kaWZ5KGZpbGUsIEpTT04uc3RyaW5naWZ5KGNhbnZhc0RhdGEsIG51bGwsIDIpKTsgbmV3IE5vdGljZShcIk5ldXJhbCBIdWIgdXBkYXRlZC5cIik7IH1cbiAgICAgICAgZWxzZSB7IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNyZWF0ZShwYXRoLCBKU09OLnN0cmluZ2lmeShjYW52YXNEYXRhLCBudWxsLCAyKSk7IG5ldyBOb3RpY2UoXCJOZXVyYWwgSHViIGNyZWF0ZWQuXCIpOyB9XG4gICAgfVxuXG4gICAgYXN5bmMgY3JlYXRlUXVlc3RDaGFpbihuYW1lOiBzdHJpbmcsIHF1ZXN0czogc3RyaW5nW10pIHsgYXdhaXQgdGhpcy5jaGFpbnNFbmdpbmUuY3JlYXRlUXVlc3RDaGFpbihuYW1lLCBxdWVzdHMpOyBhd2FpdCB0aGlzLnNhdmUoKTsgfVxuICAgIGdldEFjdGl2ZUNoYWluKCkgeyByZXR1cm4gdGhpcy5jaGFpbnNFbmdpbmUuZ2V0QWN0aXZlQ2hhaW4oKTsgfVxuICAgIGdldENoYWluUHJvZ3Jlc3MoKSB7IHJldHVybiB0aGlzLmNoYWluc0VuZ2luZS5nZXRDaGFpblByb2dyZXNzKCk7IH1cbiAgICBhc3luYyBicmVha0NoYWluKCkgeyBhd2FpdCB0aGlzLmNoYWluc0VuZ2luZS5icmVha0NoYWluKCk7IGF3YWl0IHRoaXMuc2F2ZSgpOyB9XG5cbiAgICBzZXRGaWx0ZXJTdGF0ZShlbmVyZ3k6IGFueSwgY29udGV4dDogYW55LCB0YWdzOiBzdHJpbmdbXSkgeyB0aGlzLmZpbHRlcnNFbmdpbmUuc2V0RmlsdGVyU3RhdGUoZW5lcmd5LCBjb250ZXh0LCB0YWdzKTsgdGhpcy5zYXZlKCk7IH1cbiAgICBjbGVhckZpbHRlcnMoKSB7IHRoaXMuZmlsdGVyc0VuZ2luZS5jbGVhckZpbHRlcnMoKTsgdGhpcy5zYXZlKCk7IH1cblxuICAgIGdldEdhbWVTdGF0cygpIHsgcmV0dXJuIHRoaXMuYW5hbHl0aWNzRW5naW5lLmdldEdhbWVTdGF0cygpOyB9XG4gICAgY2hlY2tCb3NzTWlsZXN0b25lcygpIHsgcmV0dXJuIHRoaXMuYW5hbHl0aWNzRW5naW5lLmNoZWNrQm9zc01pbGVzdG9uZXMoKTsgfVxuICAgIGdlbmVyYXRlV2Vla2x5UmVwb3J0KCkgeyByZXR1cm4gdGhpcy5hbmFseXRpY3NFbmdpbmUuZ2VuZXJhdGVXZWVrbHlSZXBvcnQoKTsgfVxuXG4gICAgdGF1bnQodHJpZ2dlcjogc3RyaW5nKSB7XG4gICAgICAgIGNvbnN0IG1zZ3M6IGFueSA9IHtcbiAgICAgICAgICAgIFwiZmFpbFwiOiBbXCJQYXRoZXRpYy5cIiwgXCJUcnkgYWdhaW4uXCIsIFwiSXMgdGhhdCBhbGw/XCJdLFxuICAgICAgICAgICAgXCJsZXZlbF91cFwiOiBbXCJQb3dlciBvdmVyd2hlbG1pbmcuXCIsIFwiQXNjZW5kaW5nLlwiXSxcbiAgICAgICAgICAgIFwibG93X2hwXCI6IFtcIkJsZWVkaW5nIG91dC4uLlwiLCBcIkhvbGQgb24uXCJdXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IG1zZyA9IG1zZ3NbdHJpZ2dlcl0gPyBtc2dzW3RyaWdnZXJdW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIG1zZ3NbdHJpZ2dlcl0ubGVuZ3RoKV0gOiBcIk9ic2VydmUuXCI7XG4gICAgICAgIG5ldyBOb3RpY2UoYFNZU1RFTTogJHttc2d9YCk7XG4gICAgfVxuXG4gICAgcGFyc2VRdWlja0lucHV0KHRleHQ6IHN0cmluZykge1xuICAgICAgICBjb25zdCBtYXRjaCA9IHRleHQubWF0Y2goLyguKz8pXFxzKlxcLyhcXGQpLyk7XG4gICAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICAgICAgY29uc3QgZGlmZiA9IE1hdGgubWluKDUsIE1hdGgubWF4KDEsIHBhcnNlSW50KG1hdGNoWzJdLCAxMCkgfHwgMykpO1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVRdWVzdChtYXRjaFsxXSwgZGlmZiwgXCJOb25lXCIsIFwiTm9uZVwiLCBtb21lbnQoKS5hZGQoMjQsICdob3VycycpLnRvSVNPU3RyaW5nKCksIGZhbHNlLCBcIk5vcm1hbFwiLCBmYWxzZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZVF1ZXN0KHRleHQsIDMsIFwiTm9uZVwiLCBcIk5vbmVcIiwgbW9tZW50KCkuYWRkKDI0LCAnaG91cnMnKS50b0lTT1N0cmluZygpLCBmYWxzZSwgXCJOb3JtYWxcIiwgZmFsc2UpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgdHJpZ2dlckRlYXRoKCkge1xuICAgICAgICBjb25zdCBuZXh0RGVhdGggPSAodGhpcy5zZXR0aW5ncy5sZWdhY3k/LmRlYXRoQ291bnQgfHwgMCkgKyAxO1xuICAgICAgICBjb25zdCBydW5MZXZlbCA9IHRoaXMuc2V0dGluZ3MubGV2ZWw7XG4gICAgICAgIGNvbnN0IHJ1blN0cmVhayA9IHRoaXMuc2V0dGluZ3Muc3RyZWFrPy5sb25nZXN0IHx8IDA7XG4gICAgICAgIGNvbnN0IGJvc3Nlc0RlZmVhdGVkID0gKHRoaXMuc2V0dGluZ3MuYm9zc01pbGVzdG9uZXMgfHwgW10pLmZpbHRlcigoYjogeyBkZWZlYXRlZD86IGJvb2xlYW4gfSkgPT4gYi5kZWZlYXRlZCkubGVuZ3RoO1xuXG4gICAgICAgIGlmICghdGhpcy5zZXR0aW5ncy5zY2FycykgdGhpcy5zZXR0aW5ncy5zY2FycyA9IFtdO1xuICAgICAgICB0aGlzLnNldHRpbmdzLnNjYXJzLnB1c2goe1xuICAgICAgICAgICAgaWQ6IGBkZWF0aF8ke0RhdGUubm93KCl9YCxcbiAgICAgICAgICAgIGxhYmVsOiBcIkRlYXRoXCIsXG4gICAgICAgICAgICB2YWx1ZTogYCMke25leHREZWF0aH0gwrcgTHYgJHtydW5MZXZlbH0gwrcgU3RyZWFrICR7cnVuU3RyZWFrfSDCtyBCb3NzZXMgJHtib3NzZXNEZWZlYXRlZH1gLFxuICAgICAgICAgICAgZWFybmVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBhY3RpdmVGb2xkZXIgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoXCJBY3RpdmVfUnVuL1F1ZXN0c1wiKTtcbiAgICAgICAgY29uc3QgZ3JhdmVGb2xkZXIgPSBcIkdyYXZleWFyZC9EZWF0aHMvXCIgKyBtb21lbnQoKS5mb3JtYXQoXCJZWVlZLU1NLURELUhIbW1cIik7XG4gICAgICAgIGlmICghdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGdyYXZlRm9sZGVyKSkgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlRm9sZGVyKGdyYXZlRm9sZGVyKTtcblxuICAgICAgICBpZiAoYWN0aXZlRm9sZGVyIGluc3RhbmNlb2YgVEZvbGRlcikge1xuICAgICAgICAgICAgZm9yIChjb25zdCBmaWxlIG9mIGFjdGl2ZUZvbGRlci5jaGlsZHJlbikge1xuICAgICAgICAgICAgICAgIGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAuZmlsZU1hbmFnZXIucmVuYW1lRmlsZShmaWxlLCBgJHtncmF2ZUZvbGRlcn0vJHtmaWxlLm5hbWV9YCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zZXR0aW5ncy5sZXZlbCA9IDE7XG4gICAgICAgIHRoaXMuc2V0dGluZ3MuaHAgPSAxMDA7XG4gICAgICAgIHRoaXMuc2V0dGluZ3MubWF4SHAgPSAxMDA7XG4gICAgICAgIHRoaXMuc2V0dGluZ3MuZ29sZCA9IDA7XG4gICAgICAgIHRoaXMuc2V0dGluZ3MueHAgPSAwO1xuICAgICAgICB0aGlzLnNldHRpbmdzLnhwUmVxID0gMTAwO1xuICAgICAgICB0aGlzLnNldHRpbmdzLnJpdmFsRG1nID0gNTtcbiAgICAgICAgdGhpcy5zZXR0aW5ncy5jb21ib0NvdW50ID0gMDtcbiAgICAgICAgdGhpcy5zZXR0aW5ncy5sYXN0Q29tcGxldGlvblRpbWUgPSAwO1xuICAgICAgICB0aGlzLnNldHRpbmdzLnF1ZXN0c0NvbXBsZXRlZFRvZGF5ID0gMDtcbiAgICAgICAgdGhpcy5zZXR0aW5ncy5kYW1hZ2VUYWtlblRvZGF5ID0gMDtcbiAgICAgICAgdGhpcy5zZXR0aW5ncy5hY3RpdmVCdWZmcyA9IFtdO1xuICAgICAgICB0aGlzLnNldHRpbmdzLmFjdGl2ZUNoYWlucyA9IFtdO1xuICAgICAgICB0aGlzLnNldHRpbmdzLnJlc2VhcmNoUXVlc3RzID0gW107XG4gICAgICAgIHRoaXMuc2V0dGluZ3MubG9ja2Rvd25VbnRpbCA9ICcnO1xuICAgICAgICB0aGlzLnNldHRpbmdzLnNoaWVsZGVkVW50aWwgPSAnJztcbiAgICAgICAgdGhpcy5zZXR0aW5ncy5yZXN0RGF5VW50aWwgPSAnJztcbiAgICAgICAgdGhpcy5zZXR0aW5ncy5kYWlseU1vZGlmaWVyID0geyAuLi5ERUZBVUxUX01PRElGSUVSIH07XG4gICAgICAgIHRoaXMuc2V0dGluZ3Muc3RyZWFrID0geyBjdXJyZW50OiAwLCBsb25nZXN0OiB0aGlzLnNldHRpbmdzLnN0cmVhaz8ubG9uZ2VzdCB8fCAwLCBsYXN0RGF0ZTogJycgfTtcbiAgICAgICAgdGhpcy5zZXR0aW5ncy5za2lsbHMgPSBbXTtcbiAgICAgICAgdGhpcy5zZXR0aW5ncy5sZWdhY3kuZGVhdGhDb3VudCA9IG5leHREZWF0aDtcbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlKCk7XG4gICAgfVxuXG4gICAgLyoqIENvbXB1dGUgdGhlIG5leHQgZGVhZGxpbmUgZm9yIGEgcmVjdXJyaW5nIHF1ZXN0ICovXG4gICAgY29tcHV0ZU5leHRSZWN1cnJpbmdEZWFkbGluZShpbnRlcnZhbDogc3RyaW5nLCBjdXJyZW50RGVhZGxpbmU/OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBiYXNlID0gY3VycmVudERlYWRsaW5lID8gbW9tZW50KGN1cnJlbnREZWFkbGluZSkgOiBtb21lbnQoKTtcbiAgICAgICAgbGV0IG5leHQ6IFJldHVyblR5cGU8dHlwZW9mIG1vbWVudD47XG4gICAgICAgIHN3aXRjaCAoaW50ZXJ2YWwpIHtcbiAgICAgICAgICAgIGNhc2UgJ3dlZWtseSc6XG4gICAgICAgICAgICAgICAgbmV4dCA9IGJhc2UuY2xvbmUoKS5hZGQoNywgJ2RheXMnKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ3dlZWtkYXknOlxuICAgICAgICAgICAgICAgIG5leHQgPSBiYXNlLmNsb25lKCkuYWRkKDEsICdkYXknKTtcbiAgICAgICAgICAgICAgICAvLyBTa2lwIHdlZWtlbmRzXG4gICAgICAgICAgICAgICAgd2hpbGUgKG5leHQuZGF5KCkgPT09IDAgfHwgbmV4dC5kYXkoKSA9PT0gNikge1xuICAgICAgICAgICAgICAgICAgICBuZXh0LmFkZCgxLCAnZGF5Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnZGFpbHknOlxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBuZXh0ID0gYmFzZS5jbG9uZSgpLmFkZCgxLCAnZGF5Jyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5leHQudG9JU09TdHJpbmcoKTtcbiAgICB9XG59XG4iLCIvKipcbiAqIFNpc3lwaHVzIENoYXJ0cyB2Mi4wIOKAlCBHaXRIdWIgaGVhdG1hcCwgc3BhcmtsaW5lcywgc2tpbGwgcmFkYXIsIHRpbWUtb2YtZGF5IGNoYXJ0XG4gKi9cbmltcG9ydCB7IG1vbWVudCB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IERheU1ldHJpY3MsIFNraWxsIH0gZnJvbSAnLi4vdHlwZXMnO1xuXG5leHBvcnQgY2xhc3MgQ2hhcnRSZW5kZXJlciB7XG5cbiAgICAvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAgKiAxLiBHSVRIVUItU1RZTEUgMzY1LURBWSBDT05UUklCVVRJT04gSEVBVE1BUFxuICAgICAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xuICAgIHN0YXRpYyByZW5kZXJHaXRIdWJIZWF0bWFwKHBhcmVudDogSFRNTEVsZW1lbnQsIG1ldHJpY3M6IERheU1ldHJpY3NbXSkge1xuICAgICAgICBjb25zdCBDRUxMID0gMTEsIEdBUCA9IDIsIFdFRUtTID0gNTIsIERBWVMgPSA3O1xuICAgICAgICBjb25zdCBXID0gKENFTEwgKyBHQVApICogV0VFS1MgKyAzMDsgLy8gKzMwIGZvciBkYXkgbGFiZWxzXG4gICAgICAgIGNvbnN0IEggPSAoQ0VMTCArIEdBUCkgKiBEQVlTICsgMjA7IC8vICsyMCBmb3IgbW9udGggbGFiZWxzXG5cbiAgICAgICAgY29uc3Qgc3ZnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgXCJzdmdcIik7XG4gICAgICAgIHN2Zy5zZXRBdHRyaWJ1dGUoXCJ2aWV3Qm94XCIsIGAwIDAgJHtXfSAke0h9YCk7XG4gICAgICAgIHN2Zy5zZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiLCBcIjEwMCVcIik7XG4gICAgICAgIHN2Zy5jbGFzc0xpc3QuYWRkKFwic2lzeS1naXRodWItaGVhdG1hcFwiKTtcbiAgICAgICAgcGFyZW50LmFwcGVuZENoaWxkKHN2Zyk7XG5cbiAgICAgICAgLy8gQnVpbGQgbG9va3VwIG1hcFxuICAgICAgICBjb25zdCBsb29rdXAgPSBuZXcgTWFwPHN0cmluZywgbnVtYmVyPigpO1xuICAgICAgICBtZXRyaWNzLmZvckVhY2gobSA9PiBsb29rdXAuc2V0KG0uZGF0ZSwgbS5xdWVzdHNDb21wbGV0ZWQpKTtcblxuICAgICAgICAvLyBDb2xvciBzY2FsZVxuICAgICAgICBjb25zdCBjb2xvclNjYWxlID0gKGNvdW50OiBudW1iZXIpOiBzdHJpbmcgPT4ge1xuICAgICAgICAgICAgaWYgKGNvdW50ID09PSAwKSByZXR1cm4gJ3ZhcigtLXNpc3ktaGVhdC0wLCByZ2JhKDI1NSwyNTUsMjU1LDAuMDYpKSc7XG4gICAgICAgICAgICBpZiAoY291bnQgPD0gMikgcmV0dXJuICd2YXIoLS1zaXN5LWhlYXQtMSwgIzBlNDQyOSknO1xuICAgICAgICAgICAgaWYgKGNvdW50IDw9IDQpIHJldHVybiAndmFyKC0tc2lzeS1oZWF0LTIsICMwMDZkMzIpJztcbiAgICAgICAgICAgIGlmIChjb3VudCA8PSA2KSByZXR1cm4gJ3ZhcigtLXNpc3ktaGVhdC0zLCAjMjZhNjQxKSc7XG4gICAgICAgICAgICByZXR1cm4gJ3ZhcigtLXNpc3ktaGVhdC00LCAjMzlkMzUzKSc7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gRGF5IGxhYmVsc1xuICAgICAgICBjb25zdCBkYXlMYWJlbHMgPSBbJycsICdNb24nLCAnJywgJ1dlZCcsICcnLCAnRnJpJywgJyddO1xuICAgICAgICBkYXlMYWJlbHMuZm9yRWFjaCgobGFiZWwsIGkpID0+IHtcbiAgICAgICAgICAgIGlmICghbGFiZWwpIHJldHVybjtcbiAgICAgICAgICAgIGNvbnN0IHRleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCBcInRleHRcIik7XG4gICAgICAgICAgICB0ZXh0LnNldEF0dHJpYnV0ZShcInhcIiwgXCIwXCIpO1xuICAgICAgICAgICAgdGV4dC5zZXRBdHRyaWJ1dGUoXCJ5XCIsIFN0cmluZygyMCArIGkgKiAoQ0VMTCArIEdBUCkgKyBDRUxMIC8gMiArIDMpKTtcbiAgICAgICAgICAgIHRleHQuc2V0QXR0cmlidXRlKFwiZm9udC1zaXplXCIsIFwiOVwiKTtcbiAgICAgICAgICAgIHRleHQuc2V0QXR0cmlidXRlKFwiZmlsbFwiLCBcInZhcigtLXRleHQtbXV0ZWQpXCIpO1xuICAgICAgICAgICAgdGV4dC50ZXh0Q29udGVudCA9IGxhYmVsO1xuICAgICAgICAgICAgc3ZnLmFwcGVuZENoaWxkKHRleHQpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBEcmF3IGNlbGxzIOKAlCBnbyBiYWNrd2FyZHMgZnJvbSB0b2RheVxuICAgICAgICBjb25zdCB0b2RheSA9IG1vbWVudCgpO1xuICAgICAgICBjb25zdCBzdGFydERheSA9IHRvZGF5LmNsb25lKCkuc3VidHJhY3QoV0VFS1MgKiA3IC0gMSwgJ2RheXMnKTtcbiAgICAgICAgLy8gQWRqdXN0IHRvIHN0YXJ0IG9uIGEgU3VuZGF5XG4gICAgICAgIHN0YXJ0RGF5LnN1YnRyYWN0KHN0YXJ0RGF5LmRheSgpLCAnZGF5cycpO1xuXG4gICAgICAgIGxldCBsYXN0TW9udGggPSAtMTtcbiAgICAgICAgZm9yIChsZXQgd2VlayA9IDA7IHdlZWsgPCBXRUVLUzsgd2VlaysrKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBkYXkgPSAwOyBkYXkgPCBEQVlTOyBkYXkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBzdGFydERheS5jbG9uZSgpLmFkZCh3ZWVrICogNyArIGRheSwgJ2RheXMnKTtcbiAgICAgICAgICAgICAgICBpZiAoZGF0ZS5pc0FmdGVyKHRvZGF5KSkgY29udGludWU7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBkYXRlU3RyID0gZGF0ZS5mb3JtYXQoXCJZWVlZLU1NLUREXCIpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvdW50ID0gbG9va3VwLmdldChkYXRlU3RyKSB8fCAwO1xuICAgICAgICAgICAgICAgIGNvbnN0IHggPSAyOCArIHdlZWsgKiAoQ0VMTCArIEdBUCk7XG4gICAgICAgICAgICAgICAgY29uc3QgeSA9IDE4ICsgZGF5ICogKENFTEwgKyBHQVApO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgcmVjdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIFwicmVjdFwiKTtcbiAgICAgICAgICAgICAgICByZWN0LnNldEF0dHJpYnV0ZShcInhcIiwgU3RyaW5nKHgpKTtcbiAgICAgICAgICAgICAgICByZWN0LnNldEF0dHJpYnV0ZShcInlcIiwgU3RyaW5nKHkpKTtcbiAgICAgICAgICAgICAgICByZWN0LnNldEF0dHJpYnV0ZShcIndpZHRoXCIsIFN0cmluZyhDRUxMKSk7XG4gICAgICAgICAgICAgICAgcmVjdC5zZXRBdHRyaWJ1dGUoXCJoZWlnaHRcIiwgU3RyaW5nKENFTEwpKTtcbiAgICAgICAgICAgICAgICByZWN0LnNldEF0dHJpYnV0ZShcInJ4XCIsIFwiMlwiKTtcbiAgICAgICAgICAgICAgICByZWN0LnNldEF0dHJpYnV0ZShcImZpbGxcIiwgY29sb3JTY2FsZShjb3VudCkpO1xuICAgICAgICAgICAgICAgIHJlY3QuY2xhc3NMaXN0LmFkZChcInNpc3ktaGVhdC1jZWxsLXN2Z1wiKTtcblxuICAgICAgICAgICAgICAgIC8vIFRvb2x0aXBcbiAgICAgICAgICAgICAgICBjb25zdCB0aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIFwidGl0bGVcIik7XG4gICAgICAgICAgICAgICAgdGl0bGUudGV4dENvbnRlbnQgPSBgJHtkYXRlU3RyfTogJHtjb3VudH0gcXVlc3RzYDtcbiAgICAgICAgICAgICAgICByZWN0LmFwcGVuZENoaWxkKHRpdGxlKTtcblxuICAgICAgICAgICAgICAgIHN2Zy5hcHBlbmRDaGlsZChyZWN0KTtcblxuICAgICAgICAgICAgICAgIC8vIE1vbnRoIGxhYmVsc1xuICAgICAgICAgICAgICAgIGlmIChkYXkgPT09IDAgJiYgZGF0ZS5tb250aCgpICE9PSBsYXN0TW9udGgpIHtcbiAgICAgICAgICAgICAgICAgICAgbGFzdE1vbnRoID0gZGF0ZS5tb250aCgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBtb250aFRleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCBcInRleHRcIik7XG4gICAgICAgICAgICAgICAgICAgIG1vbnRoVGV4dC5zZXRBdHRyaWJ1dGUoXCJ4XCIsIFN0cmluZyh4KSk7XG4gICAgICAgICAgICAgICAgICAgIG1vbnRoVGV4dC5zZXRBdHRyaWJ1dGUoXCJ5XCIsIFwiMTJcIik7XG4gICAgICAgICAgICAgICAgICAgIG1vbnRoVGV4dC5zZXRBdHRyaWJ1dGUoXCJmb250LXNpemVcIiwgXCI5XCIpO1xuICAgICAgICAgICAgICAgICAgICBtb250aFRleHQuc2V0QXR0cmlidXRlKFwiZmlsbFwiLCBcInZhcigtLXRleHQtbXV0ZWQpXCIpO1xuICAgICAgICAgICAgICAgICAgICBtb250aFRleHQudGV4dENvbnRlbnQgPSBkYXRlLmZvcm1hdChcIk1NTVwiKTtcbiAgICAgICAgICAgICAgICAgICAgc3ZnLmFwcGVuZENoaWxkKG1vbnRoVGV4dCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgICogMi4gSU5MSU5FIFNQQVJLTElORSAodGlueSA3LWRheSB0cmVuZCBsaW5lKVxuICAgICAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xuICAgIHN0YXRpYyByZW5kZXJTcGFya2xpbmUocGFyZW50OiBIVE1MRWxlbWVudCwgZGF0YTogbnVtYmVyW10sIGNvbG9yOiBzdHJpbmcgPSAndmFyKC0tc2lzeS1ibHVlKScpIHtcbiAgICAgICAgY29uc3QgVyA9IDYwLCBIID0gMTg7XG4gICAgICAgIGNvbnN0IHN2ZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIFwic3ZnXCIpO1xuICAgICAgICBzdmcuc2V0QXR0cmlidXRlKFwidmlld0JveFwiLCBgMCAwICR7V30gJHtIfWApO1xuICAgICAgICBzdmcuc2V0QXR0cmlidXRlKFwid2lkdGhcIiwgU3RyaW5nKFcpKTtcbiAgICAgICAgc3ZnLnNldEF0dHJpYnV0ZShcImhlaWdodFwiLCBTdHJpbmcoSCkpO1xuICAgICAgICBzdmcuY2xhc3NMaXN0LmFkZChcInNpc3ktc3BhcmtsaW5lXCIpO1xuICAgICAgICBwYXJlbnQuYXBwZW5kQ2hpbGQoc3ZnKTtcblxuICAgICAgICBpZiAoZGF0YS5sZW5ndGggPCAyKSByZXR1cm47XG5cbiAgICAgICAgY29uc3QgbWF4ID0gTWF0aC5tYXgoLi4uZGF0YSwgMSk7XG4gICAgICAgIGNvbnN0IHBvaW50cyA9IGRhdGEubWFwKCh2LCBpKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB4ID0gKGkgLyAoZGF0YS5sZW5ndGggLSAxKSkgKiAoVyAtIDQpICsgMjtcbiAgICAgICAgICAgIGNvbnN0IHkgPSBIIC0gMiAtICgodiAvIG1heCkgKiAoSCAtIDQpKTtcbiAgICAgICAgICAgIHJldHVybiBgJHt4fSwke3l9YDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gR3JhZGllbnQgZmlsbCB1bmRlciB0aGUgbGluZVxuICAgICAgICBjb25zdCBkZWZzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgXCJkZWZzXCIpO1xuICAgICAgICBjb25zdCBncmFkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgXCJsaW5lYXJHcmFkaWVudFwiKTtcbiAgICAgICAgZ3JhZC5zZXRBdHRyaWJ1dGUoXCJpZFwiLCBgc3BhcmstZ3JhZC0ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnNsaWNlKDIsIDcpfWApO1xuICAgICAgICBncmFkLnNldEF0dHJpYnV0ZShcIngxXCIsIFwiMFwiKTsgZ3JhZC5zZXRBdHRyaWJ1dGUoXCJ5MVwiLCBcIjBcIik7XG4gICAgICAgIGdyYWQuc2V0QXR0cmlidXRlKFwieDJcIiwgXCIwXCIpOyBncmFkLnNldEF0dHJpYnV0ZShcInkyXCIsIFwiMVwiKTtcbiAgICAgICAgY29uc3QgczEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCBcInN0b3BcIik7XG4gICAgICAgIHMxLnNldEF0dHJpYnV0ZShcIm9mZnNldFwiLCBcIjAlXCIpOyBzMS5zZXRBdHRyaWJ1dGUoXCJzdG9wLWNvbG9yXCIsIGNvbG9yKTsgczEuc2V0QXR0cmlidXRlKFwic3RvcC1vcGFjaXR5XCIsIFwiMC4zXCIpO1xuICAgICAgICBjb25zdCBzMiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIFwic3RvcFwiKTtcbiAgICAgICAgczIuc2V0QXR0cmlidXRlKFwib2Zmc2V0XCIsIFwiMTAwJVwiKTsgczIuc2V0QXR0cmlidXRlKFwic3RvcC1jb2xvclwiLCBjb2xvcik7IHMyLnNldEF0dHJpYnV0ZShcInN0b3Atb3BhY2l0eVwiLCBcIjAuMFwiKTtcbiAgICAgICAgZ3JhZC5hcHBlbmRDaGlsZChzMSk7IGdyYWQuYXBwZW5kQ2hpbGQoczIpO1xuICAgICAgICBkZWZzLmFwcGVuZENoaWxkKGdyYWQpOyBzdmcuYXBwZW5kQ2hpbGQoZGVmcyk7XG5cbiAgICAgICAgLy8gQXJlYSBmaWxsXG4gICAgICAgIGNvbnN0IGFyZWEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCBcInBvbHlnb25cIik7XG4gICAgICAgIGNvbnN0IGZpcnN0WCA9ICgwIC8gKGRhdGEubGVuZ3RoIC0gMSkpICogKFcgLSA0KSArIDI7XG4gICAgICAgIGNvbnN0IGxhc3RYID0gKChkYXRhLmxlbmd0aCAtIDEpIC8gKGRhdGEubGVuZ3RoIC0gMSkpICogKFcgLSA0KSArIDI7XG4gICAgICAgIGFyZWEuc2V0QXR0cmlidXRlKFwicG9pbnRzXCIsIGAke2ZpcnN0WH0sJHtIfSAke3BvaW50cy5qb2luKFwiIFwiKX0gJHtsYXN0WH0sJHtIfWApO1xuICAgICAgICBhcmVhLnNldEF0dHJpYnV0ZShcImZpbGxcIiwgYHVybCgjJHtncmFkLmdldEF0dHJpYnV0ZShcImlkXCIpfSlgKTtcbiAgICAgICAgc3ZnLmFwcGVuZENoaWxkKGFyZWEpO1xuXG4gICAgICAgIC8vIExpbmVcbiAgICAgICAgY29uc3QgcG9seWxpbmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCBcInBvbHlsaW5lXCIpO1xuICAgICAgICBwb2x5bGluZS5zZXRBdHRyaWJ1dGUoXCJwb2ludHNcIiwgcG9pbnRzLmpvaW4oXCIgXCIpKTtcbiAgICAgICAgcG9seWxpbmUuc2V0QXR0cmlidXRlKFwiZmlsbFwiLCBcIm5vbmVcIik7XG4gICAgICAgIHBvbHlsaW5lLnNldEF0dHJpYnV0ZShcInN0cm9rZVwiLCBjb2xvcik7XG4gICAgICAgIHBvbHlsaW5lLnNldEF0dHJpYnV0ZShcInN0cm9rZS13aWR0aFwiLCBcIjEuNVwiKTtcbiAgICAgICAgcG9seWxpbmUuc2V0QXR0cmlidXRlKFwic3Ryb2tlLWxpbmVjYXBcIiwgXCJyb3VuZFwiKTtcbiAgICAgICAgc3ZnLmFwcGVuZENoaWxkKHBvbHlsaW5lKTtcblxuICAgICAgICAvLyBFbmQgZG90XG4gICAgICAgIGNvbnN0IGxhc3RQb2ludCA9IHBvaW50c1twb2ludHMubGVuZ3RoIC0gMV0uc3BsaXQoXCIsXCIpO1xuICAgICAgICBjb25zdCBkb3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCBcImNpcmNsZVwiKTtcbiAgICAgICAgZG90LnNldEF0dHJpYnV0ZShcImN4XCIsIGxhc3RQb2ludFswXSk7IGRvdC5zZXRBdHRyaWJ1dGUoXCJjeVwiLCBsYXN0UG9pbnRbMV0pO1xuICAgICAgICBkb3Quc2V0QXR0cmlidXRlKFwiclwiLCBcIjJcIik7IGRvdC5zZXRBdHRyaWJ1dGUoXCJmaWxsXCIsIGNvbG9yKTtcbiAgICAgICAgc3ZnLmFwcGVuZENoaWxkKGRvdCk7XG4gICAgfVxuXG4gICAgLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgICogMy4gU0tJTEwgUkFEQVIgQ0hBUlQgKHBvbHlnb24pXG4gICAgICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXG4gICAgc3RhdGljIHJlbmRlclJhZGFyKHBhcmVudDogSFRNTEVsZW1lbnQsIHNraWxsczogU2tpbGxbXSwgbWF4TGV2ZWw6IG51bWJlciA9IDIwKSB7XG4gICAgICAgIGNvbnN0IFNJWkUgPSAxNjAsIENYID0gU0laRSAvIDIsIENZID0gU0laRSAvIDIsIFIgPSA2MDtcbiAgICAgICAgY29uc3QgdG9wID0gc2tpbGxzLnNsaWNlKDAsIDYpOyAvLyBtYXggNiBheGVzXG4gICAgICAgIGlmICh0b3AubGVuZ3RoIDwgMykgcmV0dXJuOyAvLyBuZWVkIGF0IGxlYXN0IDMgZm9yIGEgcG9seWdvblxuXG4gICAgICAgIGNvbnN0IHN2ZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIFwic3ZnXCIpO1xuICAgICAgICBzdmcuc2V0QXR0cmlidXRlKFwidmlld0JveFwiLCBgMCAwICR7U0laRX0gJHtTSVpFfWApO1xuICAgICAgICBzdmcuc2V0QXR0cmlidXRlKFwid2lkdGhcIiwgXCIxMDAlXCIpO1xuICAgICAgICBzdmcuY2xhc3NMaXN0LmFkZChcInNpc3ktcmFkYXItY2hhcnRcIik7XG4gICAgICAgIHBhcmVudC5hcHBlbmRDaGlsZChzdmcpO1xuXG4gICAgICAgIGNvbnN0IG4gPSB0b3AubGVuZ3RoO1xuICAgICAgICBjb25zdCBhbmdsZVN0ZXAgPSAoMiAqIE1hdGguUEkpIC8gbjtcblxuICAgICAgICAvLyBHcmlkIHJpbmdzICgzIGxldmVscylcbiAgICAgICAgWzAuMzMsIDAuNjYsIDEuMF0uZm9yRWFjaChwY3QgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmluZ1B0cyA9IFtdO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhbmdsZSA9IGkgKiBhbmdsZVN0ZXAgLSBNYXRoLlBJIC8gMjtcbiAgICAgICAgICAgICAgICByaW5nUHRzLnB1c2goYCR7Q1ggKyBSICogcGN0ICogTWF0aC5jb3MoYW5nbGUpfSwke0NZICsgUiAqIHBjdCAqIE1hdGguc2luKGFuZ2xlKX1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJpbmcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCBcInBvbHlnb25cIik7XG4gICAgICAgICAgICByaW5nLnNldEF0dHJpYnV0ZShcInBvaW50c1wiLCByaW5nUHRzLmpvaW4oXCIgXCIpKTtcbiAgICAgICAgICAgIHJpbmcuc2V0QXR0cmlidXRlKFwiZmlsbFwiLCBcIm5vbmVcIik7XG4gICAgICAgICAgICByaW5nLnNldEF0dHJpYnV0ZShcInN0cm9rZVwiLCBcInZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKVwiKTtcbiAgICAgICAgICAgIHJpbmcuc2V0QXR0cmlidXRlKFwic3Ryb2tlLXdpZHRoXCIsIFwiMC41XCIpO1xuICAgICAgICAgICAgc3ZnLmFwcGVuZENoaWxkKHJpbmcpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBBeGlzIGxpbmVzXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbjsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBhbmdsZSA9IGkgKiBhbmdsZVN0ZXAgLSBNYXRoLlBJIC8gMjtcbiAgICAgICAgICAgIGNvbnN0IGxpbmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCBcImxpbmVcIik7XG4gICAgICAgICAgICBsaW5lLnNldEF0dHJpYnV0ZShcIngxXCIsIFN0cmluZyhDWCkpOyBsaW5lLnNldEF0dHJpYnV0ZShcInkxXCIsIFN0cmluZyhDWSkpO1xuICAgICAgICAgICAgbGluZS5zZXRBdHRyaWJ1dGUoXCJ4MlwiLCBTdHJpbmcoQ1ggKyBSICogTWF0aC5jb3MoYW5nbGUpKSk7XG4gICAgICAgICAgICBsaW5lLnNldEF0dHJpYnV0ZShcInkyXCIsIFN0cmluZyhDWSArIFIgKiBNYXRoLnNpbihhbmdsZSkpKTtcbiAgICAgICAgICAgIGxpbmUuc2V0QXR0cmlidXRlKFwic3Ryb2tlXCIsIFwidmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpXCIpO1xuICAgICAgICAgICAgbGluZS5zZXRBdHRyaWJ1dGUoXCJzdHJva2Utd2lkdGhcIiwgXCIwLjVcIik7XG4gICAgICAgICAgICBzdmcuYXBwZW5kQ2hpbGQobGluZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBEYXRhIHBvbHlnb25cbiAgICAgICAgY29uc3QgZGF0YVB0cyA9IFtdO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG47IGkrKykge1xuICAgICAgICAgICAgY29uc3QgYW5nbGUgPSBpICogYW5nbGVTdGVwIC0gTWF0aC5QSSAvIDI7XG4gICAgICAgICAgICBjb25zdCB2YWwgPSBNYXRoLm1pbih0b3BbaV0ubGV2ZWwgLyBtYXhMZXZlbCwgMSk7XG4gICAgICAgICAgICBkYXRhUHRzLnB1c2goYCR7Q1ggKyBSICogdmFsICogTWF0aC5jb3MoYW5nbGUpfSwke0NZICsgUiAqIHZhbCAqIE1hdGguc2luKGFuZ2xlKX1gKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwb2x5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgXCJwb2x5Z29uXCIpO1xuICAgICAgICBwb2x5LnNldEF0dHJpYnV0ZShcInBvaW50c1wiLCBkYXRhUHRzLmpvaW4oXCIgXCIpKTtcbiAgICAgICAgcG9seS5zZXRBdHRyaWJ1dGUoXCJmaWxsXCIsIFwidmFyKC0tc2lzeS1ibHVlKVwiKTtcbiAgICAgICAgcG9seS5zZXRBdHRyaWJ1dGUoXCJmaWxsLW9wYWNpdHlcIiwgXCIwLjI1XCIpO1xuICAgICAgICBwb2x5LnNldEF0dHJpYnV0ZShcInN0cm9rZVwiLCBcInZhcigtLXNpc3ktYmx1ZSlcIik7XG4gICAgICAgIHBvbHkuc2V0QXR0cmlidXRlKFwic3Ryb2tlLXdpZHRoXCIsIFwiMS41XCIpO1xuICAgICAgICBzdmcuYXBwZW5kQ2hpbGQocG9seSk7XG5cbiAgICAgICAgLy8gRGF0YSBwb2ludHMgKyBsYWJlbHNcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGFuZ2xlID0gaSAqIGFuZ2xlU3RlcCAtIE1hdGguUEkgLyAyO1xuICAgICAgICAgICAgY29uc3QgdmFsID0gTWF0aC5taW4odG9wW2ldLmxldmVsIC8gbWF4TGV2ZWwsIDEpO1xuXG4gICAgICAgICAgICAvLyBQb2ludFxuICAgICAgICAgICAgY29uc3QgZG90ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiwgXCJjaXJjbGVcIik7XG4gICAgICAgICAgICBkb3Quc2V0QXR0cmlidXRlKFwiY3hcIiwgU3RyaW5nKENYICsgUiAqIHZhbCAqIE1hdGguY29zKGFuZ2xlKSkpO1xuICAgICAgICAgICAgZG90LnNldEF0dHJpYnV0ZShcImN5XCIsIFN0cmluZyhDWSArIFIgKiB2YWwgKiBNYXRoLnNpbihhbmdsZSkpKTtcbiAgICAgICAgICAgIGRvdC5zZXRBdHRyaWJ1dGUoXCJyXCIsIFwiM1wiKTtcbiAgICAgICAgICAgIGRvdC5zZXRBdHRyaWJ1dGUoXCJmaWxsXCIsIFwidmFyKC0tc2lzeS1ibHVlKVwiKTtcbiAgICAgICAgICAgIHN2Zy5hcHBlbmRDaGlsZChkb3QpO1xuXG4gICAgICAgICAgICAvLyBMYWJlbFxuICAgICAgICAgICAgY29uc3QgbHggPSBDWCArIChSICsgMTQpICogTWF0aC5jb3MoYW5nbGUpO1xuICAgICAgICAgICAgY29uc3QgbHkgPSBDWSArIChSICsgMTQpICogTWF0aC5zaW4oYW5nbGUpO1xuICAgICAgICAgICAgY29uc3QgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCBcInRleHRcIik7XG4gICAgICAgICAgICBsYWJlbC5zZXRBdHRyaWJ1dGUoXCJ4XCIsIFN0cmluZyhseCkpO1xuICAgICAgICAgICAgbGFiZWwuc2V0QXR0cmlidXRlKFwieVwiLCBTdHJpbmcobHkgKyAzKSk7XG4gICAgICAgICAgICBsYWJlbC5zZXRBdHRyaWJ1dGUoXCJmb250LXNpemVcIiwgXCI4XCIpO1xuICAgICAgICAgICAgbGFiZWwuc2V0QXR0cmlidXRlKFwiZmlsbFwiLCBcInZhcigtLXRleHQtbXV0ZWQpXCIpO1xuICAgICAgICAgICAgbGFiZWwuc2V0QXR0cmlidXRlKFwidGV4dC1hbmNob3JcIiwgXCJtaWRkbGVcIik7XG4gICAgICAgICAgICBsYWJlbC50ZXh0Q29udGVudCA9IGAke3RvcFtpXS5uYW1lfSBMJHt0b3BbaV0ubGV2ZWx9YDtcbiAgICAgICAgICAgIHN2Zy5hcHBlbmRDaGlsZChsYWJlbCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAgKiA0LiBUSU1FLU9GLURBWSBCQVIgQ0hBUlRcbiAgICAgKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cbiAgICBzdGF0aWMgcmVuZGVyVGltZU9mRGF5KHBhcmVudDogSFRNTEVsZW1lbnQsIG1ldHJpY3M6IERheU1ldHJpY3NbXSkge1xuICAgICAgICBjb25zdCBXID0gMjgwLCBIID0gNjA7XG4gICAgICAgIGNvbnN0IGhvdXJseSA9IG5ldyBBcnJheSgyNCkuZmlsbCgwKTtcblxuICAgICAgICAvLyBBZ2dyZWdhdGUgaG91cmx5IGNvbXBsZXRpb25zIGFjcm9zcyBhbGwgZGF5c1xuICAgICAgICBtZXRyaWNzLmZvckVhY2gobSA9PiB7XG4gICAgICAgICAgICBpZiAobS5ob3VybHlDb21wbGV0aW9ucykge1xuICAgICAgICAgICAgICAgIG0uaG91cmx5Q29tcGxldGlvbnMuZm9yRWFjaCgoY291bnQsIGhvdXIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaG91cmx5W2hvdXJdICs9IGNvdW50O1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBtYXggPSBNYXRoLm1heCguLi5ob3VybHksIDEpO1xuXG4gICAgICAgIGNvbnN0IHN2ZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIFwic3ZnXCIpO1xuICAgICAgICBzdmcuc2V0QXR0cmlidXRlKFwidmlld0JveFwiLCBgMCAwICR7V30gJHtIfWApO1xuICAgICAgICBzdmcuc2V0QXR0cmlidXRlKFwid2lkdGhcIiwgXCIxMDAlXCIpO1xuICAgICAgICBzdmcuY2xhc3NMaXN0LmFkZChcInNpc3ktdGltZS1jaGFydFwiKTtcbiAgICAgICAgcGFyZW50LmFwcGVuZENoaWxkKHN2Zyk7XG5cbiAgICAgICAgY29uc3QgYmFyVyA9IChXIC0gMjApIC8gMjQ7XG4gICAgICAgIGhvdXJseS5mb3JFYWNoKChjb3VudCwgaSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgYmFySCA9IChjb3VudCAvIG1heCkgKiAoSCAtIDE1KTtcbiAgICAgICAgICAgIGNvbnN0IHggPSAxMCArIGkgKiBiYXJXO1xuICAgICAgICAgICAgY29uc3QgeSA9IEggLSAxMiAtIGJhckg7XG5cbiAgICAgICAgICAgIGNvbnN0IHJlY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCBcInJlY3RcIik7XG4gICAgICAgICAgICByZWN0LnNldEF0dHJpYnV0ZShcInhcIiwgU3RyaW5nKHggKyAxKSk7XG4gICAgICAgICAgICByZWN0LnNldEF0dHJpYnV0ZShcInlcIiwgU3RyaW5nKHkpKTtcbiAgICAgICAgICAgIHJlY3Quc2V0QXR0cmlidXRlKFwid2lkdGhcIiwgU3RyaW5nKGJhclcgLSAyKSk7XG4gICAgICAgICAgICByZWN0LnNldEF0dHJpYnV0ZShcImhlaWdodFwiLCBTdHJpbmcoTWF0aC5tYXgoYmFySCwgMSkpKTtcbiAgICAgICAgICAgIHJlY3Quc2V0QXR0cmlidXRlKFwicnhcIiwgXCIxXCIpO1xuICAgICAgICAgICAgcmVjdC5zZXRBdHRyaWJ1dGUoXCJmaWxsXCIsIGNvdW50ID4gMCA/ICd2YXIoLS1zaXN5LWJsdWUpJyA6ICd2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlciknKTtcbiAgICAgICAgICAgIHJlY3Quc2V0QXR0cmlidXRlKFwib3BhY2l0eVwiLCBjb3VudCA+IDAgPyBTdHJpbmcoMC40ICsgKGNvdW50IC8gbWF4KSAqIDAuNikgOiBcIjAuM1wiKTtcblxuICAgICAgICAgICAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCBcInRpdGxlXCIpO1xuICAgICAgICAgICAgdGl0bGUudGV4dENvbnRlbnQgPSBgJHtpfTowMCDigJQgJHtjb3VudH0gcXVlc3RzYDtcbiAgICAgICAgICAgIHJlY3QuYXBwZW5kQ2hpbGQodGl0bGUpO1xuICAgICAgICAgICAgc3ZnLmFwcGVuZENoaWxkKHJlY3QpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBIb3VyIGxhYmVscyAoZXZlcnkgNiBob3VycylcbiAgICAgICAgWzAsIDYsIDEyLCAxOF0uZm9yRWFjaChoID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRleHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCBcInRleHRcIik7XG4gICAgICAgICAgICB0ZXh0LnNldEF0dHJpYnV0ZShcInhcIiwgU3RyaW5nKDEwICsgaCAqIGJhclcgKyBiYXJXIC8gMikpO1xuICAgICAgICAgICAgdGV4dC5zZXRBdHRyaWJ1dGUoXCJ5XCIsIFN0cmluZyhIIC0gMikpO1xuICAgICAgICAgICAgdGV4dC5zZXRBdHRyaWJ1dGUoXCJmb250LXNpemVcIiwgXCI3XCIpO1xuICAgICAgICAgICAgdGV4dC5zZXRBdHRyaWJ1dGUoXCJmaWxsXCIsIFwidmFyKC0tdGV4dC1tdXRlZClcIik7XG4gICAgICAgICAgICB0ZXh0LnNldEF0dHJpYnV0ZShcInRleHQtYW5jaG9yXCIsIFwibWlkZGxlXCIpO1xuICAgICAgICAgICAgdGV4dC50ZXh0Q29udGVudCA9IGAke2h9OjAwYDtcbiAgICAgICAgICAgIHN2Zy5hcHBlbmRDaGlsZCh0ZXh0KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgICogNS4gV0VFSy1PVkVSLVdFRUsgQ09NUEFSSVNPTlxuICAgICAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xuICAgIHN0YXRpYyBnZXRXZWVrQ29tcGFyaXNvbihtZXRyaWNzOiBEYXlNZXRyaWNzW10pOiB7IGxhYmVsOiBzdHJpbmc7IHRoaXNXZWVrOiBudW1iZXI7IGxhc3RXZWVrOiBudW1iZXI7IGRlbHRhOiBzdHJpbmc7IHVwOiBib29sZWFuIH1bXSB7XG4gICAgICAgIGNvbnN0IG5vdyA9IG1vbWVudCgpO1xuICAgICAgICBjb25zdCB0aGlzV2Vla1N0YXJ0ID0gbm93LmNsb25lKCkuc3VidHJhY3QoNiwgJ2RheXMnKS5zdGFydE9mKCdkYXknKTtcbiAgICAgICAgY29uc3QgbGFzdFdlZWtTdGFydCA9IG5vdy5jbG9uZSgpLnN1YnRyYWN0KDEzLCAnZGF5cycpLnN0YXJ0T2YoJ2RheScpO1xuICAgICAgICBjb25zdCBsYXN0V2Vla0VuZCA9IG5vdy5jbG9uZSgpLnN1YnRyYWN0KDcsICdkYXlzJykuZW5kT2YoJ2RheScpO1xuXG4gICAgICAgIGNvbnN0IHRoaXNXZWVrID0gbWV0cmljcy5maWx0ZXIobSA9PiBtb21lbnQobS5kYXRlKS5pc0FmdGVyKHRoaXNXZWVrU3RhcnQpKTtcbiAgICAgICAgY29uc3QgbGFzdFdlZWsgPSBtZXRyaWNzLmZpbHRlcihtID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGQgPSBtb21lbnQobS5kYXRlKTtcbiAgICAgICAgICAgIHJldHVybiBkLmlzQWZ0ZXIobGFzdFdlZWtTdGFydCkgJiYgZC5pc0JlZm9yZShsYXN0V2Vla0VuZCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHN1bSA9IChhcnI6IERheU1ldHJpY3NbXSwga2V5OiBrZXlvZiBEYXlNZXRyaWNzKSA9PiBhcnIucmVkdWNlKChzLCBkKSA9PiBzICsgKChkW2tleV0gYXMgbnVtYmVyKSB8fCAwKSwgMCk7XG5cbiAgICAgICAgY29uc3QgY29tcGFyZSA9IChsYWJlbDogc3RyaW5nLCBrZXk6IGtleW9mIERheU1ldHJpY3MpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHR3ID0gc3VtKHRoaXNXZWVrLCBrZXkpO1xuICAgICAgICAgICAgY29uc3QgbHcgPSBzdW0obGFzdFdlZWssIGtleSk7XG4gICAgICAgICAgICBjb25zdCBkaWZmID0gbHcgPiAwID8gTWF0aC5yb3VuZCgoKHR3IC0gbHcpIC8gbHcpICogMTAwKSA6ICh0dyA+IDAgPyAxMDAgOiAwKTtcbiAgICAgICAgICAgIHJldHVybiB7IGxhYmVsLCB0aGlzV2VlazogdHcsIGxhc3RXZWVrOiBsdywgZGVsdGE6IGAke2RpZmYgPj0gMCA/ICfilrInIDogJ+KWvCd9JHtNYXRoLmFicyhkaWZmKX0lYCwgdXA6IGRpZmYgPj0gMCB9O1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICBjb21wYXJlKCdRdWVzdHMnLCAncXVlc3RzQ29tcGxldGVkJyksXG4gICAgICAgICAgICBjb21wYXJlKCdYUCcsICd4cEVhcm5lZCcpLFxuICAgICAgICAgICAgY29tcGFyZSgnR29sZCcsICdnb2xkRWFybmVkJyksXG4gICAgICAgICAgICBjb21wYXJlKCdEYW1hZ2UnLCAnZGFtYWdlc1Rha2VuJyksXG4gICAgICAgIF07XG4gICAgfVxuXG4gICAgLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgICogNi4gTEVHQUNZIExJTkUgQ0hBUlQgKGtlcHQgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkpXG4gICAgICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXG4gICAgc3RhdGljIHJlbmRlckxpbmVDaGFydChwYXJlbnQ6IEhUTUxFbGVtZW50LCBtZXRyaWNzOiBhbnlbXSwgd2lkdGhPdmVycmlkZT86IG51bWJlcikge1xuICAgICAgICBjb25zdCBoZWlnaHQgPSAxMDA7XG4gICAgICAgIGNvbnN0IHdpZHRoID0gd2lkdGhPdmVycmlkZSB8fCBwYXJlbnQuY2xpZW50V2lkdGggfHwgMzAwO1xuICAgICAgICBjb25zdCBwYWRkaW5nID0gNTtcblxuICAgICAgICBjb25zdCBkYXRhOiBudW1iZXJbXSA9IFtdO1xuICAgICAgICBjb25zdCBsYWJlbHM6IHN0cmluZ1tdID0gW107XG4gICAgICAgIGZvciAobGV0IGkgPSA2OyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgY29uc3QgZCA9IG1vbWVudCgpLnN1YnRyYWN0KGksICdkYXlzJykuZm9ybWF0KFwiWVlZWS1NTS1ERFwiKTtcbiAgICAgICAgICAgIGNvbnN0IG0gPSBtZXRyaWNzLmZpbmQoKHg6IGFueSkgPT4geC5kYXRlID09PSBkKTtcbiAgICAgICAgICAgIGRhdGEucHVzaChtID8gbS5xdWVzdHNDb21wbGV0ZWQgOiAwKTtcbiAgICAgICAgICAgIGxhYmVscy5wdXNoKG1vbWVudChkKS5mb3JtYXQoXCJkZGRcIikpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbWF4VmFsID0gTWF0aC5tYXgoLi4uZGF0YSwgNSk7XG4gICAgICAgIGNvbnN0IHBvaW50czogc3RyaW5nW10gPSBbXTtcbiAgICAgICAgY29uc3QgZGl2aXNvciA9IE1hdGgubWF4KDEsIGRhdGEubGVuZ3RoIC0gMSk7XG5cbiAgICAgICAgZGF0YS5mb3JFYWNoKCh2YWwsIGlkeCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgeCA9IChpZHggLyBkaXZpc29yKSAqICh3aWR0aCAtIHBhZGRpbmcgKiAyKSArIHBhZGRpbmc7XG4gICAgICAgICAgICBjb25zdCB5ID0gaGVpZ2h0IC0gKCh2YWwgLyBtYXhWYWwpICogKGhlaWdodCAtIHBhZGRpbmcgKiAyKSkgLSBwYWRkaW5nO1xuICAgICAgICAgICAgcG9pbnRzLnB1c2goYCR7eH0sJHt5fWApO1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBzdmcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCBcInN2Z1wiKTtcbiAgICAgICAgc3ZnLnNldEF0dHJpYnV0ZShcIndpZHRoXCIsIFwiMTAwJVwiKTtcbiAgICAgICAgc3ZnLnNldEF0dHJpYnV0ZShcImhlaWdodFwiLCBcIjEwMCVcIik7XG4gICAgICAgIHN2Zy5zZXRBdHRyaWJ1dGUoXCJ2aWV3Qm94XCIsIGAwIDAgJHt3aWR0aH0gJHtoZWlnaHR9YCk7XG4gICAgICAgIHN2Zy5zZXRBdHRyaWJ1dGUoXCJwcmVzZXJ2ZUFzcGVjdFJhdGlvXCIsIFwibm9uZVwiKTtcbiAgICAgICAgc3ZnLmNsYXNzTGlzdC5hZGQoXCJzaXN5LWNoYXJ0LXN2Z1wiKTtcbiAgICAgICAgcGFyZW50LmFwcGVuZENoaWxkKHN2Zyk7XG5cbiAgICAgICAgY29uc3QgcG9seWxpbmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCBcInBvbHlsaW5lXCIpO1xuICAgICAgICBwb2x5bGluZS5zZXRBdHRyaWJ1dGUoXCJwb2ludHNcIiwgcG9pbnRzLmpvaW4oXCIgXCIpKTtcbiAgICAgICAgcG9seWxpbmUuc2V0QXR0cmlidXRlKFwiZmlsbFwiLCBcIm5vbmVcIik7XG4gICAgICAgIHBvbHlsaW5lLnNldEF0dHJpYnV0ZShcInN0cm9rZVwiLCBcInZhcigtLXNpc3ktYmx1ZSlcIik7XG4gICAgICAgIHBvbHlsaW5lLnNldEF0dHJpYnV0ZShcInN0cm9rZS13aWR0aFwiLCBcIjJcIik7XG4gICAgICAgIHN2Zy5hcHBlbmRDaGlsZChwb2x5bGluZSk7XG5cbiAgICAgICAgcG9pbnRzLmZvckVhY2goKHApID0+IHtcbiAgICAgICAgICAgIGNvbnN0IFtjeCwgY3ldID0gcC5zcGxpdChcIixcIik7XG4gICAgICAgICAgICBjb25zdCBjaXJjbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCBcImNpcmNsZVwiKTtcbiAgICAgICAgICAgIGNpcmNsZS5zZXRBdHRyaWJ1dGUoXCJjeFwiLCBjeCk7XG4gICAgICAgICAgICBjaXJjbGUuc2V0QXR0cmlidXRlKFwiY3lcIiwgY3kpO1xuICAgICAgICAgICAgY2lyY2xlLnNldEF0dHJpYnV0ZShcInJcIiwgXCIzXCIpO1xuICAgICAgICAgICAgY2lyY2xlLnNldEF0dHJpYnV0ZShcImZpbGxcIiwgXCJ2YXIoLS1zaXN5LWJsdWUpXCIpO1xuICAgICAgICAgICAgc3ZnLmFwcGVuZENoaWxkKGNpcmNsZSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKiBMZWdhY3kgaGVhdG1hcCDigJQga2VwdCBmb3IgY29tcGF0aWJpbGl0eSAqL1xuICAgIHN0YXRpYyByZW5kZXJIZWF0bWFwKHBhcmVudDogSFRNTEVsZW1lbnQsIG1ldHJpY3M6IGFueVtdKSB7XG4gICAgICAgIGNvbnN0IGhlYXRtYXAgPSBwYXJlbnQuY3JlYXRlRGl2KHsgY2xzOiBcInNpc3ktaGVhdG1hcFwiIH0pO1xuICAgICAgICBmb3IgKGxldCBpID0gMjc7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICBjb25zdCBkYXRlID0gbW9tZW50KCkuc3VidHJhY3QoaSwgJ2RheXMnKS5mb3JtYXQoXCJZWVlZLU1NLUREXCIpO1xuICAgICAgICAgICAgY29uc3QgbSA9IG1ldHJpY3MuZmluZCgoeDogYW55KSA9PiB4LmRhdGUgPT09IGRhdGUpO1xuICAgICAgICAgICAgY29uc3QgY291bnQgPSBtID8gbS5xdWVzdHNDb21wbGV0ZWQgOiAwO1xuICAgICAgICAgICAgbGV0IGNvbG9yID0gXCJyZ2JhKDI1NSwyNTUsMjU1LDAuMDUpXCI7XG4gICAgICAgICAgICBpZiAoY291bnQgPiAwKSBjb2xvciA9IFwicmdiYSgwLCAxNzYsIDI1NSwgMC4zKVwiO1xuICAgICAgICAgICAgaWYgKGNvdW50ID4gMykgY29sb3IgPSBcInJnYmEoMCwgMTc2LCAyNTUsIDAuNilcIjtcbiAgICAgICAgICAgIGlmIChjb3VudCA+IDYpIGNvbG9yID0gXCJyZ2JhKDAsIDE3NiwgMjU1LCAxLjApXCI7XG4gICAgICAgICAgICBjb25zdCBkYXkgPSBoZWF0bWFwLmNyZWF0ZURpdih7IGNsczogXCJzaXN5LWhlYXQtY2VsbFwiIH0pO1xuICAgICAgICAgICAgZGF5LnN0eWxlLmJhY2tncm91bmQgPSBjb2xvcjtcbiAgICAgICAgICAgIGRheS5zZXRBdHRyaWJ1dGUoXCJ0aXRsZVwiLCBgJHtkYXRlfTogJHtjb3VudH0gcXVlc3RzYCk7XG4gICAgICAgICAgICBpZiAoaSA9PT0gMCkgZGF5LnN0eWxlLmJvcmRlciA9IFwiMXB4IHNvbGlkIHdoaXRlXCI7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQgeyBURmlsZSwgbW9tZW50IH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHR5cGUgeyBQYW5vcHRpY29uVmlldyB9IGZyb20gJy4vdmlldyc7XG5cbmNvbnN0IERJRkZfQ09MT1JTOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICAgICd0cml2aWFsJzogJ3ZhcigtLXNpc3ktZ3JlZW4pJyxcbiAgICAnZWFzeSc6ICcjNGNhZjUwJyxcbiAgICAnbWVkaXVtJzogJ3ZhcigtLXNpc3ktZ29sZCknLFxuICAgICdoYXJkJzogJyNmZjZiMzUnLFxuICAgICdsZWdlbmRhcnknOiAndmFyKC0tc2lzeS1wdXJwbGUpJyxcbn07XG5cbmNvbnN0IFBSSU9SSVRZX0JBREdFUzogUmVjb3JkPHN0cmluZywgeyB0ZXh0OiBzdHJpbmc7IGNsczogc3RyaW5nIH0+ID0ge1xuICAgICdjcml0aWNhbCc6IHsgdGV4dDogJ/CflLQgQ1JJVElDQUwnLCBjbHM6ICdzaXN5LXByaW9yaXR5LWNyaXRpY2FsJyB9LFxuICAgICdoaWdoJzogeyB0ZXh0OiAn8J+foSBISUdIJywgY2xzOiAnc2lzeS1wcmlvcml0eS1oaWdoJyB9LFxuICAgICdub3JtYWwnOiB7IHRleHQ6ICcnLCBjbHM6ICcnIH0sXG4gICAgJ2xvdyc6IHsgdGV4dDogJ+KaqiBMT1cnLCBjbHM6ICdzaXN5LXByaW9yaXR5LWxvdycgfSxcbn07XG5cbmNvbnN0IFNLSUxMX0lDT05TOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICAgICdDb2RpbmcnOiAn8J+SuycsICdXcml0aW5nJzogJ+Kcje+4jycsICdSZXNlYXJjaCc6ICfwn5SsJywgJ0Rlc2lnbic6ICfwn46oJyxcbiAgICAnTWF0aCc6ICfwn5OQJywgJ1JlYWRpbmcnOiAn8J+TmicsICdGaXRuZXNzJzogJ/CfkqonLCAnTXVzaWMnOiAn8J+OtScsXG4gICAgJ0xhbmd1YWdlJzogJ/CfjJAnLCAnQm9zcyc6ICfimKDvuI8nLCAnTm9uZSc6ICfimqEnLFxufTtcblxuZXhwb3J0IGNsYXNzIFF1ZXN0Q2FyZFJlbmRlcmVyIHtcbiAgICBzdGF0aWMgcmVuZGVyKHBhcmVudDogSFRNTEVsZW1lbnQsIGZpbGU6IFRGaWxlLCB2aWV3OiBQYW5vcHRpY29uVmlldykge1xuICAgICAgICBjb25zdCBmbSA9IHZpZXcuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpPy5mcm9udG1hdHRlcjtcbiAgICAgICAgY29uc3QgY2FyZCA9IHBhcmVudC5jcmVhdGVEaXYoeyBjbHM6IFwic2lzeS1jYXJkXCIgfSk7XG5cbiAgICAgICAgLy8gRGlmZmljdWx0eSBjb2xvciBiYW5kIChsZWZ0IGJvcmRlcilcbiAgICAgICAgY29uc3QgZGlmZkxhYmVsID0gKGZtPy5kaWZmaWN1bHR5IHx8ICdtZWRpdW0nKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBjb25zdCBkaWZmQ29sb3IgPSBESUZGX0NPTE9SU1tkaWZmTGFiZWxdIHx8IERJRkZfQ09MT1JTLm1lZGl1bTtcbiAgICAgICAgY2FyZC5zdHlsZS5ib3JkZXJMZWZ0ID0gYDNweCBzb2xpZCAke2RpZmZDb2xvcn1gO1xuXG4gICAgICAgIGlmICh2aWV3LnNlbGVjdE1vZGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGlzU2VsZWN0ZWQgPSB2aWV3LnNlbGVjdGVkUXVlc3RzLmhhcyhmaWxlKTtcbiAgICAgICAgICAgIGlmIChpc1NlbGVjdGVkKSBjYXJkLnN0eWxlLmJvcmRlckNvbG9yID0gXCJ2YXIoLS1zaXN5LWJsdWUpXCI7XG5cbiAgICAgICAgICAgIGNvbnN0IHRvcCA9IGNhcmQuY3JlYXRlRGl2KHsgY2xzOiBcInNpc3ktY2FyZC10b3BcIiB9KTtcbiAgICAgICAgICAgIGNvbnN0IGNiID0gdG9wLmNyZWF0ZUVsKFwiaW5wdXRcIiwgeyB0eXBlOiBcImNoZWNrYm94XCIgfSk7XG4gICAgICAgICAgICBjYi5jaGVja2VkID0gaXNTZWxlY3RlZDtcbiAgICAgICAgICAgIGNiLnN0eWxlLm1hcmdpblJpZ2h0ID0gXCIxMHB4XCI7XG4gICAgICAgICAgICB0b3AuY3JlYXRlRGl2KHsgdGV4dDogZmlsZS5iYXNlbmFtZSwgY2xzOiBcInNpc3ktY2FyZC10aXRsZVwiIH0pO1xuXG4gICAgICAgICAgICBjYXJkLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHZpZXcuc2VsZWN0ZWRRdWVzdHMuaGFzKGZpbGUpKSB2aWV3LnNlbGVjdGVkUXVlc3RzLmRlbGV0ZShmaWxlKTtcbiAgICAgICAgICAgICAgICBlbHNlIHZpZXcuc2VsZWN0ZWRRdWVzdHMuYWRkKGZpbGUpO1xuICAgICAgICAgICAgICAgIHZpZXcucmVmcmVzaCgpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChmbT8uaXNfYm9zcykgY2FyZC5hZGRDbGFzcyhcInNpc3ktY2FyZC1ib3NzXCIpO1xuXG4gICAgICAgICAgICAvLyA9PT0gRFJBRyAmIERST1AgPT09XG4gICAgICAgICAgICBjYXJkLnNldEF0dHJpYnV0ZShcImRyYWdnYWJsZVwiLCBcInRydWVcIik7XG4gICAgICAgICAgICBjYXJkLmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnc3RhcnRcIiwgKGUpID0+IHtcbiAgICAgICAgICAgICAgICB2aWV3LmRyYWdnZWRGaWxlID0gZmlsZTtcbiAgICAgICAgICAgICAgICBjYXJkLnN0eWxlLm9wYWNpdHkgPSBcIjAuNFwiO1xuICAgICAgICAgICAgICAgIGNhcmQuc3R5bGUudHJhbnNmb3JtID0gXCJzY2FsZSgwLjk1KVwiO1xuICAgICAgICAgICAgICAgIGUuZGF0YVRyYW5zZmVyPy5zZXREYXRhKFwidGV4dC9wbGFpblwiLCBmaWxlLnBhdGgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjYXJkLmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnZW5kXCIsICgpID0+IHtcbiAgICAgICAgICAgICAgICBjYXJkLnN0eWxlLm9wYWNpdHkgPSBcIjFcIjtcbiAgICAgICAgICAgICAgICBjYXJkLnN0eWxlLnRyYW5zZm9ybSA9IFwibm9uZVwiO1xuICAgICAgICAgICAgICAgIHZpZXcuZHJhZ2dlZEZpbGUgPSBudWxsO1xuICAgICAgICAgICAgICAgIHBhcmVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnNpc3ktY2FyZFwiKS5mb3JFYWNoKGVsID0+IChlbCBhcyBIVE1MRWxlbWVudCkuc3R5bGUuYm9yZGVyVG9wID0gXCJcIik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNhcmQuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdvdmVyXCIsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGNhcmQuc3R5bGUuYm9yZGVyVG9wID0gXCIzcHggc29saWQgdmFyKC0tc2lzeS1ibHVlKVwiO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjYXJkLmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnbGVhdmVcIiwgKCkgPT4geyBjYXJkLnN0eWxlLmJvcmRlclRvcCA9IFwiXCI7IH0pO1xuICAgICAgICAgICAgY2FyZC5hZGRFdmVudExpc3RlbmVyKFwiZHJvcFwiLCBhc3luYyAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBjYXJkLnN0eWxlLmJvcmRlclRvcCA9IFwiXCI7XG4gICAgICAgICAgICAgICAgaWYgKHZpZXcuZHJhZ2dlZEZpbGUgJiYgdmlldy5kcmFnZ2VkRmlsZSAhPT0gZmlsZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkcmFnZ2VkID0gdmlldy5kcmFnZ2VkRmlsZTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0Rm0gPSB2aWV3LmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKT8uZnJvbnRtYXR0ZXI7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldE9yZGVyID0gdGFyZ2V0Rm0/Lm1hbnVhbF9vcmRlciAhPT0gdW5kZWZpbmVkID8gdGFyZ2V0Rm0ubWFudWFsX29yZGVyIDogbW9tZW50KCkudmFsdWVPZigpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdPcmRlciA9IHRhcmdldE9yZGVyIC0gMTAwO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB2aWV3LnBsdWdpbi5hcHAuZmlsZU1hbmFnZXIucHJvY2Vzc0Zyb250TWF0dGVyKGRyYWdnZWQsIChmOiBhbnkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGYubWFudWFsX29yZGVyID0gbmV3T3JkZXI7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB2aWV3LnBsdWdpbi5lbmdpbmUudHJpZ2dlcihcInVwZGF0ZVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gLS0tIFRPUCBST1cgLS0tXG4gICAgICAgICAgICBjb25zdCB0b3AgPSBjYXJkLmNyZWF0ZURpdih7IGNsczogXCJzaXN5LWNhcmQtdG9wXCIgfSk7XG4gICAgICAgICAgICBjb25zdCB0aXRsZVJvdyA9IHRvcC5jcmVhdGVEaXYoeyBjbHM6IFwic2lzeS1jYXJkLW1ldGFcIiB9KTtcblxuICAgICAgICAgICAgLy8gU2tpbGwgaWNvblxuICAgICAgICAgICAgY29uc3Qgc2tpbGwgPSBmbT8uc2tpbGwgfHwgJ05vbmUnO1xuICAgICAgICAgICAgY29uc3QgaWNvbiA9IFNLSUxMX0lDT05TW3NraWxsXSB8fCAn4pqhJztcbiAgICAgICAgICAgIHRpdGxlUm93LmNyZWF0ZVNwYW4oeyB0ZXh0OiBpY29uLCBjbHM6ICdzaXN5LWNhcmQtc2tpbGwtaWNvbicsIGF0dHI6IHsgdGl0bGU6IHNraWxsIH0gfSk7XG5cbiAgICAgICAgICAgIHRpdGxlUm93LmNyZWF0ZURpdih7IHRleHQ6IGZpbGUuYmFzZW5hbWUsIGNsczogXCJzaXN5LWNhcmQtdGl0bGVcIiB9KTtcblxuICAgICAgICAgICAgLy8gUHJpb3JpdHkgYmFkZ2VcbiAgICAgICAgICAgIGNvbnN0IHByaW9yaXR5ID0gKGZtPy5wcmlvcml0eSB8fCAnbm9ybWFsJykudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIGNvbnN0IHByQmFkZ2UgPSBQUklPUklUWV9CQURHRVNbcHJpb3JpdHldO1xuICAgICAgICAgICAgaWYgKHByQmFkZ2UgJiYgcHJCYWRnZS50ZXh0KSB7XG4gICAgICAgICAgICAgICAgdGl0bGVSb3cuY3JlYXRlRGl2KHsgdGV4dDogcHJCYWRnZS50ZXh0LCBjbHM6IGBzaXN5LXRhZyAke3ByQmFkZ2UuY2xzfWAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFJlY3VycmluZyBiYWRnZVxuICAgICAgICAgICAgaWYgKGZtPy5yZWN1cnJpbmcpIHtcbiAgICAgICAgICAgICAgICB0aXRsZVJvdy5jcmVhdGVEaXYoeyB0ZXh0OiBcIvCflIQgUkVDVVJSSU5HXCIsIGNsczogXCJzaXN5LXJlY3VycmluZy1iYWRnZVwiIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBEZXBlbmRlbmN5IGxvY2tcbiAgICAgICAgICAgIGxldCBpc0xvY2tlZCA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKGZtPy5kZXBlbmRzX29uKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGVwRmlsZSA9IHZpZXcuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChgQWN0aXZlX1J1bi9RdWVzdHMvJHtmbS5kZXBlbmRzX29ufS5tZGApO1xuICAgICAgICAgICAgICAgIGlmIChkZXBGaWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlzTG9ja2VkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGVSb3cuY3JlYXRlRGl2KHsgdGV4dDogXCLwn5SSXCIsIGNsczogXCJzaXN5LXRhZ1wiLCBhdHRyOiB7IHRpdGxlOiBgUmVxdWlyZXM6ICR7Zm0uZGVwZW5kc19vbn1gIH0gfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBEZWFkbGluZSB0aW1lclxuICAgICAgICAgICAgaWYgKGZtPy5kZWFkbGluZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRpZmYgPSBtb21lbnQoZm0uZGVhZGxpbmUpLmRpZmYobW9tZW50KCksICdtaW51dGVzJyk7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IHRvcC5jcmVhdGVEaXYoe1xuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBkaWZmIDwgMCA/IFwiRVhQSVJFRFwiIDogYCR7TWF0aC5mbG9vcihkaWZmIC8gNjApfWggJHtkaWZmICUgNjB9bWAsXG4gICAgICAgICAgICAgICAgICAgIGNsczogXCJzaXN5LXRpbWVyXCJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoZGlmZiA8IDYwKSB0LmFkZENsYXNzKFwic2lzeS10aW1lci1sYXRlXCIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBEZWxldGUgYnV0dG9uXG4gICAgICAgICAgICBjb25zdCB0cmFzaCA9IHRvcC5jcmVhdGVEaXYoeyBjbHM6IFwic2lzeS1idG5cIiwgdGV4dDogXCJYXCIsIGF0dHI6IHsgc3R5bGU6IFwicGFkZGluZzogMnB4IDhweDsgZm9udC1zaXplOiAwLjhlbTtcIiB9IH0pO1xuICAgICAgICAgICAgdHJhc2gub25jbGljayA9IChlKSA9PiB7IGUuc3RvcFByb3BhZ2F0aW9uKCk7IHZpZXcucGx1Z2luLmVuZ2luZS5kZWxldGVRdWVzdChmaWxlKTsgfTtcblxuICAgICAgICAgICAgLy8gLS0tIERFVEFJTCBST1c6IFhQICsgR29sZCBwcmV2aWV3ICsgRGlmZmljdWx0eSBiYWRnZSAtLS1cbiAgICAgICAgICAgIGNvbnN0IGRldGFpbCA9IGNhcmQuY3JlYXRlRGl2KHsgY2xzOiAnc2lzeS1jYXJkLWRldGFpbCcgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IGRpZmZCYWRnZSA9IGRldGFpbC5jcmVhdGVEaXYoeyBjbHM6IGBzaXN5LWRpZmYtYmFkZ2Ugc2lzeS1kaWZmLSR7ZGlmZkxhYmVsfWAgfSk7XG4gICAgICAgICAgICBkaWZmQmFkZ2UudGV4dENvbnRlbnQgPSBkaWZmTGFiZWwudG9VcHBlckNhc2UoKTtcblxuICAgICAgICAgICAgaWYgKGZtPy54cF9yZXdhcmQpIHtcbiAgICAgICAgICAgICAgICBkZXRhaWwuY3JlYXRlU3Bhbih7IHRleHQ6IGDimqEke2ZtLnhwX3Jld2FyZH1gLCBjbHM6ICdzaXN5LWNhcmQtcmV3YXJkIHNpc3ktcmV3YXJkLXhwJyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChmbT8uZ29sZF9yZXdhcmQgJiYgZm0uZ29sZF9yZXdhcmQgPiAwKSB7XG4gICAgICAgICAgICAgICAgZGV0YWlsLmNyZWF0ZVNwYW4oeyB0ZXh0OiBg8J+SsCR7Zm0uZ29sZF9yZXdhcmR9YCwgY2xzOiAnc2lzeS1jYXJkLXJld2FyZCBzaXN5LXJld2FyZC1nb2xkJyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChmbT8uaGlnaF9zdGFrZXMpIHtcbiAgICAgICAgICAgICAgICBkZXRhaWwuY3JlYXRlU3Bhbih7IHRleHQ6ICfwn46yIEhJR0ggU1RBS0VTJywgY2xzOiAnc2lzeS10YWcgc2lzeS10YWctc3Rha2VzJyB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gLS0tIEJPU1MgSFAgQkFSIC0tLVxuICAgICAgICAgICAgaWYgKGZtPy5pc19ib3NzICYmIGZtPy5ib3NzX21heF9ocCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGJhciA9IGNhcmQuY3JlYXRlRGl2KHsgY2xzOiBcInNpc3ktYmFyLWJnXCIgfSk7XG4gICAgICAgICAgICAgICAgY29uc3QgcGN0ID0gKChmbS5ib3NzX2hwID8/IDApIC8gZm0uYm9zc19tYXhfaHApICogMTAwO1xuICAgICAgICAgICAgICAgIGJhci5jcmVhdGVEaXYoeyBjbHM6IFwic2lzeS1iYXItZmlsbCBzaXN5LWZpbGwtcmVkXCIsIGF0dHI6IHsgc3R5bGU6IGB3aWR0aDoke3BjdH0lO2AgfSB9KTtcbiAgICAgICAgICAgICAgICBjYXJkLmNyZWF0ZURpdih7XG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IGAke2ZtLmJvc3NfaHB9LyR7Zm0uYm9zc19tYXhfaHB9IEhQYCxcbiAgICAgICAgICAgICAgICAgICAgYXR0cjogeyBzdHlsZTogXCJ0ZXh0LWFsaWduOmNlbnRlcjsgZm9udC1zaXplOjAuOGVtOyBjb2xvcjp2YXIoLS1zaXN5LXJlZCk7IGZvbnQtd2VpZ2h0OmJvbGQ7XCIgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyAtLS0gUFJPR1JFU1MgQkFSIChtdWx0aS1zdGVwIHF1ZXN0cykgLS0tXG4gICAgICAgICAgICBpZiAoZm0/LnN0ZXBzX3RvdGFsICYmIGZtLnN0ZXBzX3RvdGFsID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRvbmUgPSBmbS5zdGVwc19kb25lIHx8IDA7XG4gICAgICAgICAgICAgICAgY29uc3QgcHJvZ1JvdyA9IGNhcmQuY3JlYXRlRGl2KHsgY2xzOiAnc2lzeS1jYXJkLXByb2dyZXNzJyB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCBwcm9nQmFyID0gcHJvZ1Jvdy5jcmVhdGVEaXYoeyBjbHM6ICdzaXN5LWJhci1iZycgfSk7XG4gICAgICAgICAgICAgICAgcHJvZ0Jhci5jcmVhdGVEaXYoeyBjbHM6ICdzaXN5LWJhci1maWxsIHNpc3ktZmlsbC1ibHVlJywgYXR0cjogeyBzdHlsZTogYHdpZHRoOiR7KGRvbmUgLyBmbS5zdGVwc190b3RhbCkgKiAxMDB9JWAgfSB9KTtcbiAgICAgICAgICAgICAgICBwcm9nUm93LmNyZWF0ZVNwYW4oeyB0ZXh0OiBgJHtkb25lfS8ke2ZtLnN0ZXBzX3RvdGFsfSBzdGVwc2AsIGNsczogJ3Npc3ktY2FyZC1zdGVwcycgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIC0tLSBBQ1RJT04gQlVUVE9OUyAtLS1cbiAgICAgICAgICAgIGNvbnN0IGFjdHMgPSBjYXJkLmNyZWF0ZURpdih7IGNsczogXCJzaXN5LWFjdGlvbnNcIiB9KTtcbiAgICAgICAgICAgIGNvbnN0IGJPayA9IGFjdHMuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuICAgICAgICAgICAgICAgIHRleHQ6IGlzTG9ja2VkID8gXCLwn5SSIExPQ0tFRFwiIDogXCLinJMgQ09NUExFVEVcIixcbiAgICAgICAgICAgICAgICBjbHM6IGBzaXN5LWJ0biAke2lzTG9ja2VkID8gJycgOiAnbW9kLWRvbmUnfSBzaXN5LWFjdGlvbi1idG5gXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChpc0xvY2tlZCkge1xuICAgICAgICAgICAgICAgIGJPay5zdHlsZS5vcGFjaXR5ID0gJzAuNCc7XG4gICAgICAgICAgICAgICAgYk9rLnN0eWxlLmN1cnNvciA9ICdub3QtYWxsb3dlZCc7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGJPay5vbmNsaWNrID0gKGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gQ29uZmV0dGkgYW5pbWF0aW9uXG4gICAgICAgICAgICAgICAgICAgIGNhcmQuY2xhc3NMaXN0LmFkZCgnc2lzeS1jYXJkLWNvbXBsZXRlLWFuaW0nKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB2aWV3LnBsdWdpbi5lbmdpbmUuY29tcGxldGVRdWVzdChmaWxlKSwgMzAwKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBiRmFpbCA9IGFjdHMuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIuKclyBGQUlMXCIsIGNsczogXCJzaXN5LWJ0biBtb2QtZmFpbCBzaXN5LWFjdGlvbi1idG5cIiB9KTtcbiAgICAgICAgICAgIGJGYWlsLm9uY2xpY2sgPSAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgLy8gU2hha2UgYW5pbWF0aW9uXG4gICAgICAgICAgICAgICAgY2FyZC5jbGFzc0xpc3QuYWRkKCdzaXN5LWNhcmQtZmFpbC1hbmltJyk7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB2aWV3LnBsdWdpbi5lbmdpbmUuZmFpbFF1ZXN0KGZpbGUsIHRydWUpLCA0MDApO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsIi8qKlxuICogU2tpbGxUcmVlUmVuZGVyZXIg4oCUIFNWRy1iYXNlZCBza2lsbCBncmlkIHdpdGggY29ubmVjdGlvbnMgYW5kIFhQIGJhcnMuXG4gKi9cbmltcG9ydCB7IFNraWxsIH0gZnJvbSAnLi4vdHlwZXMnO1xuXG5leHBvcnQgY2xhc3MgU2tpbGxUcmVlUmVuZGVyZXIge1xuXG4gICAgc3RhdGljIHJlbmRlcihwYXJlbnQ6IEhUTUxFbGVtZW50LCBza2lsbHM6IFNraWxsW10sIG9uQ2xpY2tTa2lsbDogKGlkeDogbnVtYmVyKSA9PiB2b2lkKSB7XG4gICAgICAgIGlmIChza2lsbHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBwYXJlbnQuY3JlYXRlRGl2KHsgdGV4dDogJ05vIHNraWxscyB1bmxvY2tlZCB5ZXQuJywgY2xzOiAnc2lzeS1lbXB0eS1zdGF0ZScgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBncmlkID0gcGFyZW50LmNyZWF0ZURpdih7IGNsczogJ3Npc3ktc2tpbGwtdHJlZScgfSk7XG5cbiAgICAgICAgc2tpbGxzLmZvckVhY2goKHNraWxsLCBpZHgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5vZGUgPSBncmlkLmNyZWF0ZURpdih7IGNsczogJ3Npc3ktc2tpbGwtbm9kZScgfSk7XG4gICAgICAgICAgICBub2RlLm9uY2xpY2sgPSAoKSA9PiBvbkNsaWNrU2tpbGwoaWR4KTtcblxuICAgICAgICAgICAgLy8gTGV2ZWwtYmFzZWQgZ2xvd1xuICAgICAgICAgICAgaWYgKHNraWxsLmxldmVsID49IDEwKSBub2RlLmFkZENsYXNzKCdzaXN5LXNraWxsLW5vZGUtbWFzdGVyJyk7XG4gICAgICAgICAgICBlbHNlIGlmIChza2lsbC5sZXZlbCA+PSA1KSBub2RlLmFkZENsYXNzKCdzaXN5LXNraWxsLW5vZGUtYWRlcHQnKTtcblxuICAgICAgICAgICAgLy8gVG9wOiBJY29uICsgTmFtZVxuICAgICAgICAgICAgY29uc3QgaGVhZGVyID0gbm9kZS5jcmVhdGVEaXYoeyBjbHM6ICdzaXN5LXNraWxsLW5vZGUtaGVhZGVyJyB9KTtcbiAgICAgICAgICAgIGNvbnN0IGljb25NYXA6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gICAgICAgICAgICAgICAgJ0NvZGluZyc6ICfwn5K7JywgJ1dyaXRpbmcnOiAn4pyN77iPJywgJ1Jlc2VhcmNoJzogJ/CflKwnLCAnRGVzaWduJzogJ/CfjqgnLFxuICAgICAgICAgICAgICAgICdNYXRoJzogJ/Cfk5AnLCAnUmVhZGluZyc6ICfwn5OaJywgJ0ZpdG5lc3MnOiAn8J+SqicsICdNdXNpYyc6ICfwn461JyxcbiAgICAgICAgICAgICAgICAnTGFuZ3VhZ2UnOiAn8J+MkCcsICdCb3NzJzogJ+KYoO+4jycsICdOb25lJzogJ+KaoSdcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBpY29uID0gaWNvbk1hcFtza2lsbC5uYW1lXSB8fCAn4pqhJztcbiAgICAgICAgICAgIGhlYWRlci5jcmVhdGVTcGFuKHsgdGV4dDogaWNvbiwgY2xzOiAnc2lzeS1za2lsbC1pY29uJyB9KTtcbiAgICAgICAgICAgIGhlYWRlci5jcmVhdGVTcGFuKHsgdGV4dDogc2tpbGwubmFtZSwgY2xzOiAnc2lzeS1za2lsbC1uYW1lJyB9KTtcblxuICAgICAgICAgICAgLy8gTGV2ZWwgYmFkZ2VcbiAgICAgICAgICAgIGNvbnN0IGJhZGdlID0gbm9kZS5jcmVhdGVEaXYoeyBjbHM6ICdzaXN5LXNraWxsLWxldmVsLWJhZGdlJyB9KTtcbiAgICAgICAgICAgIGJhZGdlLnRleHRDb250ZW50ID0gYEwke3NraWxsLmxldmVsfWA7XG4gICAgICAgICAgICBpZiAoc2tpbGwubGV2ZWwgPj0gMTApIGJhZGdlLmFkZENsYXNzKCdzaXN5LWxldmVsLW1hc3RlcicpO1xuICAgICAgICAgICAgZWxzZSBpZiAoc2tpbGwubGV2ZWwgPj0gNSkgYmFkZ2UuYWRkQ2xhc3MoJ3Npc3ktbGV2ZWwtYWRlcHQnKTtcblxuICAgICAgICAgICAgLy8gWFAgUHJvZ3Jlc3MgYmFyXG4gICAgICAgICAgICBjb25zdCBiYXJXcmFwID0gbm9kZS5jcmVhdGVEaXYoeyBjbHM6ICdzaXN5LXNraWxsLWJhci13cmFwJyB9KTtcbiAgICAgICAgICAgIGNvbnN0IGJhciA9IGJhcldyYXAuY3JlYXRlRGl2KHsgY2xzOiAnc2lzeS1iYXItYmcnIH0pO1xuICAgICAgICAgICAgY29uc3QgcGN0ID0gc2tpbGwueHBSZXEgPiAwID8gTWF0aC5taW4oKHNraWxsLnhwIC8gc2tpbGwueHBSZXEpICogMTAwLCAxMDApIDogMDtcbiAgICAgICAgICAgIGNvbnN0IGZpbGwgPSBiYXIuY3JlYXRlRGl2KHsgY2xzOiAnc2lzeS1iYXItZmlsbCBzaXN5LWZpbGwtYmx1ZScgfSk7XG4gICAgICAgICAgICBmaWxsLnN0eWxlLndpZHRoID0gYCR7cGN0fSVgO1xuICAgICAgICAgICAgYmFyV3JhcC5jcmVhdGVEaXYoeyB0ZXh0OiBgJHtza2lsbC54cH0vJHtza2lsbC54cFJlcX0gWFBgLCBjbHM6ICdzaXN5LXNraWxsLXhwLWxhYmVsJyB9KTtcblxuICAgICAgICAgICAgLy8gUnVzdCBpbmRpY2F0b3JcbiAgICAgICAgICAgIGlmIChza2lsbC5ydXN0ID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJ1c3QgPSBub2RlLmNyZWF0ZURpdih7IGNsczogJ3Npc3ktc2tpbGwtcnVzdCcgfSk7XG4gICAgICAgICAgICAgICAgcnVzdC50ZXh0Q29udGVudCA9IGDimqDvuI8gUlVTVCAke3NraWxsLnJ1c3R9YDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQ29ubmVjdGlvbnMgaW5kaWNhdG9yXG4gICAgICAgICAgICBpZiAoc2tpbGwuY29ubmVjdGlvbnMgJiYgc2tpbGwuY29ubmVjdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbm4gPSBub2RlLmNyZWF0ZURpdih7IGNsczogJ3Npc3ktc2tpbGwtY29ubmVjdGlvbnMnIH0pO1xuICAgICAgICAgICAgICAgIGNvbm4udGV4dENvbnRlbnQgPSBg8J+UlyAke3NraWxsLmNvbm5lY3Rpb25zLmpvaW4oJywgJyl9YDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gRHJhdyBjb25uZWN0aW9uIGxpbmVzIGJldHdlZW4gbGlua2VkIHNraWxscyB2aWEgU1ZHIG92ZXJsYXlcbiAgICAgICAgU2tpbGxUcmVlUmVuZGVyZXIuZHJhd0Nvbm5lY3Rpb25zKGdyaWQsIHNraWxscyk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzdGF0aWMgZHJhd0Nvbm5lY3Rpb25zKGdyaWQ6IEhUTUxFbGVtZW50LCBza2lsbHM6IFNraWxsW10pIHtcbiAgICAgICAgLy8gRGVmZXIgY29ubmVjdGlvbiBkcmF3aW5nIHVudGlsIGxheW91dCBpcyBjb21wbGV0ZVxuICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgbm9kZXMgPSBncmlkLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zaXN5LXNraWxsLW5vZGUnKTtcbiAgICAgICAgICAgIGlmIChub2Rlcy5sZW5ndGggPCAyKSByZXR1cm47XG5cbiAgICAgICAgICAgIGNvbnN0IHN2ZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIFwic3ZnXCIpO1xuICAgICAgICAgICAgc3ZnLmNsYXNzTGlzdC5hZGQoJ3Npc3ktc2tpbGwtY29ubmVjdGlvbnMtc3ZnJyk7XG4gICAgICAgICAgICBzdmcuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xuICAgICAgICAgICAgc3ZnLnN0eWxlLnRvcCA9ICcwJztcbiAgICAgICAgICAgIHN2Zy5zdHlsZS5sZWZ0ID0gJzAnO1xuICAgICAgICAgICAgc3ZnLnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgICAgICAgICAgc3ZnLnN0eWxlLmhlaWdodCA9ICcxMDAlJztcbiAgICAgICAgICAgIHN2Zy5zdHlsZS5wb2ludGVyRXZlbnRzID0gJ25vbmUnO1xuICAgICAgICAgICAgZ3JpZC5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7XG4gICAgICAgICAgICBncmlkLmluc2VydEJlZm9yZShzdmcsIGdyaWQuZmlyc3RDaGlsZCk7XG5cbiAgICAgICAgICAgIGNvbnN0IGdyaWRSZWN0ID0gZ3JpZC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuICAgICAgICAgICAgc2tpbGxzLmZvckVhY2goKHNraWxsLCBpKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFza2lsbC5jb25uZWN0aW9ucykgcmV0dXJuO1xuICAgICAgICAgICAgICAgIHNraWxsLmNvbm5lY3Rpb25zLmZvckVhY2goY29ubk5hbWUgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBqID0gc2tpbGxzLmZpbmRJbmRleChzID0+IHMubmFtZSA9PT0gY29ubk5hbWUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaiA8IDAgfHwgaiA8PSBpKSByZXR1cm47IC8vIEF2b2lkIGR1cGxpY2F0ZXNcblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBub2RlQSA9IG5vZGVzW2ldIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBub2RlQiA9IG5vZGVzW2pdIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICAgICAgICAgICAgICBpZiAoIW5vZGVBIHx8ICFub2RlQikgcmV0dXJuO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlY3RBID0gbm9kZUEuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlY3RCID0gbm9kZUIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeDEgPSByZWN0QS5sZWZ0ICsgcmVjdEEud2lkdGggLyAyIC0gZ3JpZFJlY3QubGVmdDtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeTEgPSByZWN0QS50b3AgKyByZWN0QS5oZWlnaHQgLyAyIC0gZ3JpZFJlY3QudG9wO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB4MiA9IHJlY3RCLmxlZnQgKyByZWN0Qi53aWR0aCAvIDIgLSBncmlkUmVjdC5sZWZ0O1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB5MiA9IHJlY3RCLnRvcCArIHJlY3RCLmhlaWdodCAvIDIgLSBncmlkUmVjdC50b3A7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGluZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIFwibGluZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgbGluZS5zZXRBdHRyaWJ1dGUoXCJ4MVwiLCBTdHJpbmcoeDEpKTtcbiAgICAgICAgICAgICAgICAgICAgbGluZS5zZXRBdHRyaWJ1dGUoXCJ5MVwiLCBTdHJpbmcoeTEpKTtcbiAgICAgICAgICAgICAgICAgICAgbGluZS5zZXRBdHRyaWJ1dGUoXCJ4MlwiLCBTdHJpbmcoeDIpKTtcbiAgICAgICAgICAgICAgICAgICAgbGluZS5zZXRBdHRyaWJ1dGUoXCJ5MlwiLCBTdHJpbmcoeTIpKTtcbiAgICAgICAgICAgICAgICAgICAgbGluZS5zZXRBdHRyaWJ1dGUoXCJzdHJva2VcIiwgXCJ2YXIoLS1zaXN5LWJsdWUpXCIpO1xuICAgICAgICAgICAgICAgICAgICBsaW5lLnNldEF0dHJpYnV0ZShcInN0cm9rZS13aWR0aFwiLCBcIjFcIik7XG4gICAgICAgICAgICAgICAgICAgIGxpbmUuc2V0QXR0cmlidXRlKFwic3Ryb2tlLW9wYWNpdHlcIiwgXCIwLjNcIik7XG4gICAgICAgICAgICAgICAgICAgIGxpbmUuc2V0QXR0cmlidXRlKFwic3Ryb2tlLWRhc2hhcnJheVwiLCBcIjQsNFwiKTtcbiAgICAgICAgICAgICAgICAgICAgc3ZnLmFwcGVuZENoaWxkKGxpbmUpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbiIsIi8qKlxuICogUml2YWxFbmdpbmUg4oCUIE5hbWVkIHJpdmFsIHdpdGggcGVyc29uYWxpdHksIGNvbnRleHR1YWwgdGF1bnRzLCBhbmQgcHJvZ3Jlc3Npb24uXG4gKi9cbmltcG9ydCB7IFNpc3lwaHVzU2V0dGluZ3MsIFJpdmFsU3RhdGUsIFJpdmFsUGVyc29uYWxpdHkgfSBmcm9tICcuLi90eXBlcyc7XG5pbXBvcnQgeyBzaG93VG9hc3QgfSBmcm9tICcuLi91aS9lZmZlY3RzJztcblxuY29uc3QgUklWQUxfTkFNRVMgPSBbJ0VDSE8tNycsICdXUkFJVEgnLCAnQ0lQSEVSJywgJ1BIQU5UT00nLCAnTkVNRVNJUycsICdTSEFET1cnLCAnT1JBQ0xFLVgnLCAnVk9JRCddO1xuY29uc3QgUklWQUxfQVZBVEFSUyA9IFsn8J+RpCcsICfwn6SWJywgJ/CfkYHvuI8nLCAn8J+SgCcsICfwn46tJywgJ/CfjJEnLCAn4pqhJywgJ/CflK4nXTtcblxuY29uc3QgVEFVTlRTOiBSZWNvcmQ8Uml2YWxQZXJzb25hbGl0eSwgUmVjb3JkPHN0cmluZywgc3RyaW5nW10+PiA9IHtcbiAgICBhZ2dyZXNzaXZlOiB7XG4gICAgICAgIGZhaWw6IFtcIlBBVEhFVElDLiBJIGV4cGVjdGVkIG1vcmUuXCIsIFwiWW91IGNhbGwgdGhhdCBlZmZvcnQ/IExhdWdoYWJsZS5cIiwgXCJFdmVyeSBmYWlsdXJlIGZlZWRzIE1FLlwiXSxcbiAgICAgICAgc2xhY2s6IFtcIlN0aWxsIHJlc3Rpbmc/IEknbSBwdWxsaW5nIGFoZWFkLlwiLCBcIllvdXIgaW5hY3Rpb24gaXMgbXkgcHJvZ3Jlc3MuXCIsIFwiVGljayB0b2NrLiBJIGRvbid0IHNsZWVwLlwiXSxcbiAgICAgICAgbG93X2hwOiBbXCJCbGVlZGluZyBvdXQgYWxyZWFkeT8gU29mdC5cIiwgXCJJIGNhbiBzbWVsbCB5b3VyIHdlYWtuZXNzLlwiLCBcIk9uZSBtb3JlIGhpdCBhbmQgeW91J3JlIERPTkUuXCJdLFxuICAgICAgICByaXZhbF9zdHJvbmdlcjogW1wiSSdtIHN0cm9uZ2VyIG5vdy4gQ2FuIHlvdSBmZWVsIGl0P1wiLCBcIlRoZSBnYXAgd2lkZW5zLiBHaXZlIHVwLlwiLCBcIllvdSdyZSBmYWxsaW5nIGJlaGluZC4gUGVybWFuZW50bHkuXCJdLFxuICAgICAgICBxdWVzdF9jb21wbGV0ZTogW1wiTHVja3kgaGl0LiBXb24ndCBsYXN0LlwiLCBcIk9uZSB3aW4gbWVhbnMgbm90aGluZy5cIiwgXCJJIGNvbXBsZXRlZCBUSFJFRSB3aGlsZSB5b3UgZGlkIG9uZS5cIl0sXG4gICAgfSxcbiAgICBtb2NraW5nOiB7XG4gICAgICAgIGZhaWw6IFtcIk9oIG5vISDwn5iiIFRoYXQgd2FzIFNPIGNsb3NlLiBOb3QgcmVhbGx5LlwiLCBcIk9vcHMhIEJ1dHRlcmZpbmdlcnMhXCIsIFwiTWF5YmUgdHJ5IHNvbWV0aGluZyBlYXNpZXI/IExpa2UgYnJlYXRoaW5nP1wiXSxcbiAgICAgICAgc2xhY2s6IFtcIk5hcCB0aW1lPyBBZG9yYWJsZS5cIiwgXCJJJ2xsIGtlZXAgc2NvcmUgd2hpbGUgeW91IHJlc3Qg8J+Ti1wiLCBcIlp6enpaenp6Li4uIG9oIHNvcnJ5LCB3ZXJlIHlvdSB3b3JraW5nP1wiXSxcbiAgICAgICAgbG93X2hwOiBbXCJNaWdodCB3YW50IHRvIHNlZSBhIGRvY3RvciDwn4+lXCIsIFwiVGhhdCBkb2Vzbid0IGxvb2sgaGVhbHRoeSFcIiwgXCJSZWQgc3VpdHMgeW91LCBhY3R1YWxseS5cIl0sXG4gICAgICAgIHJpdmFsX3N0cm9uZ2VyOiBbXCJHZXR0aW5nLi4uIGtpbmRhIGVhc3kgdXAgaGVyZSDwn5iOXCIsIFwiSSBjYW4gYmFyZWx5IHNlZSB5b3UgZnJvbSB0aGlzIGhpZ2ghXCIsIFwiV2F2ZSB1cCBhdCBtZSEg8J+Ri1wiXSxcbiAgICAgICAgcXVlc3RfY29tcGxldGU6IFtcIkF3dywgZ29vZCBqb2IhIOKtkCBXYW50IGEgc3RpY2tlcj9cIiwgXCJQYXJ0aWNpcGF0aW9uIHRyb3BoeSBpbmNvbWluZyFcIiwgXCJFdmVuIGEgYnJva2VuIGNsb2NrLi4uXCJdLFxuICAgIH0sXG4gICAgY2FsY3VsYXRpbmc6IHtcbiAgICAgICAgZmFpbDogW1wiRmFpbHVyZSBwcm9iYWJpbGl0eTogYXMgcHJlZGljdGVkLlwiLCBcIkRhdGEgcG9pbnQgcmVjb3JkZWQuIFRyZW5kIG5lZ2F0aXZlLlwiLCBcIkVycm9yIHJhdGU6IGluY3JlYXNpbmcuXCJdLFxuICAgICAgICBzbGFjazogW1wiSWRsZSB0aW1lOiBtZWFzdXJhYmxlLiBQcm9ncmVzczogemVyby5cIiwgXCJJbmFjdGl2aXR5IGxvZ2dlZC4gQWR2YW50YWdlOiBtaW5lLlwiLCBcIlRpbWUgZGVjYXkgYXBwbGllZC5cIl0sXG4gICAgICAgIGxvd19ocDogW1wiVml0YWwgc2lnbnM6IGNyaXRpY2FsLiBQcm9nbm9zaXM6IHBvb3IuXCIsIFwiU3lzdGVtIGludGVncml0eTogY29tcHJvbWlzZWQuXCIsIFwiSFAgYmVsb3cgdGhyZXNob2xkLiBJbnRlcnZlbnRpb24gdW5saWtlbHkuXCJdLFxuICAgICAgICByaXZhbF9zdHJvbmdlcjogW1wiRGVsdGEgZXhjZWVkcyByZWNvdmVyeSB0aHJlc2hvbGQuXCIsIFwiUHJvYmFiaWxpdHkgb2YgeW91ciB2aWN0b3J5OiBkZWNsaW5pbmcuXCIsIFwiU3RhdGlzdGljYWwgaXJyZXZlcnNpYmlsaXR5IGFwcHJvYWNoaW5nLlwiXSxcbiAgICAgICAgcXVlc3RfY29tcGxldGU6IFtcIkFub21hbHkgbm90ZWQuIExpa2VseSByZWdyZXNzaW9uIHRvIG1lYW4uXCIsIFwiU2luZ2xlIGRhdGEgcG9pbnQuIEluc3VmZmljaWVudC5cIiwgXCJBY2tub3dsZWRnZWQuIEFkanVzdGluZyBwcm9qZWN0aW9ucy5cIl0sXG4gICAgfSxcbiAgICBzaWxlbnQ6IHtcbiAgICAgICAgZmFpbDogW1wiLi4uXCJdLCBzbGFjazogW1wiLi4uXCJdLCBsb3dfaHA6IFtcIi4uLlwiXSxcbiAgICAgICAgcml2YWxfc3Ryb25nZXI6IFtcIuKalO+4j1wiXSwgcXVlc3RfY29tcGxldGU6IFtcIlwiXSxcbiAgICB9LFxufTtcblxuZXhwb3J0IGNsYXNzIFJpdmFsRW5naW5lIHtcblxuICAgIC8qKiBJbml0aWFsaXplIHJpdmFsIHN0YXRlIGlmIG5vdCBwcmVzZW50ICovXG4gICAgc3RhdGljIGluaXQoc2V0dGluZ3M6IFNpc3lwaHVzU2V0dGluZ3MpOiB2b2lkIHtcbiAgICAgICAgaWYgKCFzZXR0aW5ncy5yaXZhbCB8fCAhc2V0dGluZ3Mucml2YWwubmFtZSkge1xuICAgICAgICAgICAgY29uc3QgaWR4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogUklWQUxfTkFNRVMubGVuZ3RoKTtcbiAgICAgICAgICAgIHNldHRpbmdzLnJpdmFsID0ge1xuICAgICAgICAgICAgICAgIG5hbWU6IFJJVkFMX05BTUVTW2lkeF0sXG4gICAgICAgICAgICAgICAgYXZhdGFyOiBSSVZBTF9BVkFUQVJTW2lkeF0sXG4gICAgICAgICAgICAgICAgcGVyc29uYWxpdHk6IChbJ2FnZ3Jlc3NpdmUnLCAnbW9ja2luZycsICdjYWxjdWxhdGluZyddIGFzIFJpdmFsUGVyc29uYWxpdHlbXSlbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMyldLFxuICAgICAgICAgICAgICAgIGxldmVsOiAxLFxuICAgICAgICAgICAgICAgIHhwOiAwLFxuICAgICAgICAgICAgICAgIHhwUmVxOiAxMDAsXG4gICAgICAgICAgICAgICAgZGFtYWdlRGVhbHQ6IDAsXG4gICAgICAgICAgICAgICAgbGFzdFRhdW50OiAnJyxcbiAgICAgICAgICAgICAgICBsYXN0VGF1bnRUaW1lOiAnJyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKiogUml2YWwgZ2FpbnMgWFAgd2hlbiBwbGF5ZXIgZmFpbHMgb3Igc2xhY2tzICovXG4gICAgc3RhdGljIHJpdmFsR2FpblhQKHNldHRpbmdzOiBTaXN5cGh1c1NldHRpbmdzLCBhbW91bnQ6IG51bWJlcik6IHZvaWQge1xuICAgICAgICBjb25zdCByID0gc2V0dGluZ3Mucml2YWw7XG4gICAgICAgIHIueHAgKz0gYW1vdW50O1xuICAgICAgICB3aGlsZSAoci54cCA+PSByLnhwUmVxKSB7XG4gICAgICAgICAgICByLnhwIC09IHIueHBSZXE7XG4gICAgICAgICAgICByLmxldmVsKys7XG4gICAgICAgICAgICByLnhwUmVxID0gTWF0aC5mbG9vcihyLnhwUmVxICogMS4zKTtcbiAgICAgICAgICAgIHNob3dUb2FzdCh7XG4gICAgICAgICAgICAgICAgaWNvbjogci5hdmF0YXIsXG4gICAgICAgICAgICAgICAgdGl0bGU6IGAke3IubmFtZX0gbGV2ZWxlZCB1cCFgLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGBSaXZhbCBpcyBub3cgTGV2ZWwgJHtyLmxldmVsfS5gLFxuICAgICAgICAgICAgICAgIHZhcmlhbnQ6ICdmYWlsJyxcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogNDAwMCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqIEdldCBhIGNvbnRleHR1YWwgdGF1bnQgKi9cbiAgICBzdGF0aWMgdGF1bnQoc2V0dGluZ3M6IFNpc3lwaHVzU2V0dGluZ3MsIHRyaWdnZXI6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IHIgPSBzZXR0aW5ncy5yaXZhbDtcbiAgICAgICAgY29uc3QgcG9vbCA9IFRBVU5UU1tyLnBlcnNvbmFsaXR5XT8uW3RyaWdnZXJdIHx8IFRBVU5UUy5hZ2dyZXNzaXZlLmZhaWw7XG4gICAgICAgIGNvbnN0IG1zZyA9IHBvb2xbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogcG9vbC5sZW5ndGgpXTtcbiAgICAgICAgci5sYXN0VGF1bnQgPSBtc2c7XG4gICAgICAgIHIubGFzdFRhdW50VGltZSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcbiAgICAgICAgcmV0dXJuIG1zZztcbiAgICB9XG5cbiAgICAvKiogU2hvdyBhIHRhdW50IGFzIGEgdG9hc3QgKi9cbiAgICBzdGF0aWMgc2hvd1RhdW50KHNldHRpbmdzOiBTaXN5cGh1c1NldHRpbmdzLCB0cmlnZ2VyOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgciA9IHNldHRpbmdzLnJpdmFsO1xuICAgICAgICBjb25zdCBtc2cgPSBSaXZhbEVuZ2luZS50YXVudChzZXR0aW5ncywgdHJpZ2dlcik7XG4gICAgICAgIGlmICghbXNnIHx8IG1zZyA9PT0gJycpIHJldHVybjtcblxuICAgICAgICBzaG93VG9hc3Qoe1xuICAgICAgICAgICAgaWNvbjogci5hdmF0YXIsXG4gICAgICAgICAgICB0aXRsZTogci5uYW1lLFxuICAgICAgICAgICAgbWVzc2FnZTogbXNnLFxuICAgICAgICAgICAgdmFyaWFudDogJ2ZhaWwnLFxuICAgICAgICAgICAgZHVyYXRpb246IDUwMDAsXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKiBDaGVjayBpZiByaXZhbCBpcyBzdHJvbmdlciB0aGFuIHBsYXllciBhbmQgdGF1bnQgKi9cbiAgICBzdGF0aWMgY2hlY2tSaXZhbEFkdmFudGFnZShzZXR0aW5nczogU2lzeXBodXNTZXR0aW5ncyk6IHZvaWQge1xuICAgICAgICBjb25zdCByID0gc2V0dGluZ3Mucml2YWw7XG4gICAgICAgIGlmIChyLmxldmVsID4gc2V0dGluZ3MubGV2ZWwpIHtcbiAgICAgICAgICAgIFJpdmFsRW5naW5lLnNob3dUYXVudChzZXR0aW5ncywgJ3JpdmFsX3N0cm9uZ2VyJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKiogUmVuZGVyIHJpdmFsIHNlY3Rpb24gaW4gSFVEICovXG4gICAgc3RhdGljIHJlbmRlclJpdmFsSFVEKHBhcmVudDogSFRNTEVsZW1lbnQsIHNldHRpbmdzOiBTaXN5cGh1c1NldHRpbmdzKTogSFRNTEVsZW1lbnQge1xuICAgICAgICBjb25zdCByID0gc2V0dGluZ3Mucml2YWw7XG4gICAgICAgIGNvbnN0IHNlY3Rpb24gPSBwYXJlbnQuY3JlYXRlRGl2KHsgY2xzOiAnc2lzeS1yaXZhbC1zZWN0aW9uJyB9KTtcblxuICAgICAgICBjb25zdCBoZWFkZXIgPSBzZWN0aW9uLmNyZWF0ZURpdih7IGNsczogJ3Npc3ktcml2YWwtaGVhZGVyJyB9KTtcbiAgICAgICAgaGVhZGVyLmNyZWF0ZVNwYW4oeyB0ZXh0OiBgJHtyLmF2YXRhcn0gJHtyLm5hbWV9YCwgY2xzOiAnc2lzeS1yaXZhbC1uYW1lJyB9KTtcbiAgICAgICAgaGVhZGVyLmNyZWF0ZVNwYW4oeyB0ZXh0OiBgTHYke3IubGV2ZWx9YCwgY2xzOiAnc2lzeS1yaXZhbC1sZXZlbCcgfSk7XG5cbiAgICAgICAgLy8gTGV2ZWwgY29tcGFyaXNvbiBiYXJcbiAgICAgICAgY29uc3QgY29tcEJhciA9IHNlY3Rpb24uY3JlYXRlRGl2KHsgY2xzOiAnc2lzeS1yaXZhbC1jb21wYXJlJyB9KTtcbiAgICAgICAgY29uc3QgcGxheWVyUGN0ID0gTWF0aC5taW4oKHNldHRpbmdzLmxldmVsIC8gKHNldHRpbmdzLmxldmVsICsgci5sZXZlbCkpICogMTAwLCAxMDApO1xuICAgICAgICBjb25zdCByaXZhbFBjdCA9IDEwMCAtIHBsYXllclBjdDtcblxuICAgICAgICBjb25zdCBwbGF5ZXJCYXIgPSBjb21wQmFyLmNyZWF0ZURpdih7IGNsczogJ3Npc3ktcml2YWwtYmFyLXBsYXllcicgfSk7XG4gICAgICAgIHBsYXllckJhci5zdHlsZS53aWR0aCA9IGAke3BsYXllclBjdH0lYDtcbiAgICAgICAgcGxheWVyQmFyLnRleHRDb250ZW50ID0gYFlvdSBMJHtzZXR0aW5ncy5sZXZlbH1gO1xuXG4gICAgICAgIGNvbnN0IHJpdmFsQmFyID0gY29tcEJhci5jcmVhdGVEaXYoeyBjbHM6ICdzaXN5LXJpdmFsLWJhci1yaXZhbCcgfSk7XG4gICAgICAgIHJpdmFsQmFyLnN0eWxlLndpZHRoID0gYCR7cml2YWxQY3R9JWA7XG4gICAgICAgIHJpdmFsQmFyLnRleHRDb250ZW50ID0gYCR7ci5uYW1lfSBMJHtyLmxldmVsfWA7XG5cbiAgICAgICAgLy8gTGFzdCB0YXVudCBidWJibGVcbiAgICAgICAgaWYgKHIubGFzdFRhdW50ICYmIHIubGFzdFRhdW50ICE9PSAnJykge1xuICAgICAgICAgICAgY29uc3QgYnViYmxlID0gc2VjdGlvbi5jcmVhdGVEaXYoeyBjbHM6ICdzaXN5LXJpdmFsLXRhdW50JyB9KTtcbiAgICAgICAgICAgIGJ1YmJsZS50ZXh0Q29udGVudCA9IGBcIiR7ci5sYXN0VGF1bnR9XCJgO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUml2YWwgWFAgYmFyXG4gICAgICAgIGNvbnN0IHhwQmFyID0gc2VjdGlvbi5jcmVhdGVEaXYoeyBjbHM6ICdzaXN5LWJhci1iZycgfSk7XG4gICAgICAgIGNvbnN0IHhwUGN0ID0gci54cFJlcSA+IDAgPyAoci54cCAvIHIueHBSZXEpICogMTAwIDogMDtcbiAgICAgICAgeHBCYXIuY3JlYXRlRGl2KHsgY2xzOiAnc2lzeS1iYXItZmlsbCBzaXN5LWZpbGwtcmVkJywgYXR0cjogeyBzdHlsZTogYHdpZHRoOiR7eHBQY3R9JWAgfSB9KTtcblxuICAgICAgICByZXR1cm4gc2VjdGlvbjtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBJdGVtVmlldywgV29ya3NwYWNlTGVhZiwgVEZpbGUsIFRGb2xkZXIsIG1vbWVudCwgZGVib3VuY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgU2lzeXBodXNQbHVnaW4gZnJvbSAnLi4vbWFpbic7XG5pbXBvcnQgeyBRdWVzdE1vZGFsLCBTaG9wTW9kYWwsIFNraWxsRGV0YWlsTW9kYWwsIFNraWxsTWFuYWdlck1vZGFsLCBTY2Fyc01vZGFsIH0gZnJvbSAnLi9tb2RhbHMnO1xuaW1wb3J0IHsgU2tpbGwsIERhaWx5TWlzc2lvbiB9IGZyb20gJy4uL3R5cGVzJztcbmltcG9ydCB7IENoYXJ0UmVuZGVyZXIgfSBmcm9tICcuL2NoYXJ0cyc7XG5pbXBvcnQgeyBRdWVzdENhcmRSZW5kZXJlciB9IGZyb20gJy4vY2FyZCc7XG5pbXBvcnQgeyByZW5kZXJFbXB0eVN0YXRlLCBzaG93VG9hc3QgfSBmcm9tICcuL2VmZmVjdHMnO1xuaW1wb3J0IHsgU2tpbGxUcmVlUmVuZGVyZXIgfSBmcm9tICcuL3NraWxsdHJlZSc7XG5pbXBvcnQgeyBSaXZhbEVuZ2luZSB9IGZyb20gJy4uL2VuZ2luZXMvUml2YWxFbmdpbmUnO1xuaW1wb3J0IHsgUHJvZmlsZU1vZGFsIH0gZnJvbSAnLi9wcm9maWxlJztcblxuZXhwb3J0IGNvbnN0IFZJRVdfVFlQRV9QQU5PUFRJQ09OID0gXCJzaXN5cGh1cy1wYW5vcHRpY29uXCI7XG5cbmV4cG9ydCBjbGFzcyBQYW5vcHRpY29uVmlldyBleHRlbmRzIEl0ZW1WaWV3IHtcbiAgICBwbHVnaW46IFNpc3lwaHVzUGx1Z2luO1xuICAgIGRyYWdnZWRGaWxlOiBURmlsZSB8IG51bGwgPSBudWxsO1xuICAgIHNlbGVjdE1vZGU6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICBzZWxlY3RlZFF1ZXN0czogU2V0PFRGaWxlPiA9IG5ldyBTZXQoKTtcblxuICAgIHByaXZhdGUgb2JzZXJ2ZXI6IEludGVyc2VjdGlvbk9ic2VydmVyIHwgbnVsbCA9IG51bGw7XG4gICAgcHJpdmF0ZSBjdXJyZW50UXVlc3RMaXN0OiBURmlsZVtdID0gW107XG4gICAgcHJpdmF0ZSByZW5kZXJlZENvdW50OiBudW1iZXIgPSAwO1xuICAgIHByaXZhdGUgcmVhZG9ubHkgQkFUQ0hfU0laRSA9IDIwO1xuXG4gICAgcHJpdmF0ZSBkZWJvdW5jZWRSZWZyZXNoID0gZGVib3VuY2UodGhpcy5yZWZyZXNoLmJpbmQodGhpcyksIDUwLCB0cnVlKTtcbiAgICBwcml2YXRlIGJvdW5kU2hvd1VuZG9Ub2FzdCA9IChuYW1lOiBzdHJpbmcpID0+IHRoaXMuc2hvd1VuZG9Ub2FzdChuYW1lKTtcblxuICAgIC8qKiBDaGVjayBpZiBhIGtlcm5lbCBtb2R1bGUgaXMgZW5hYmxlZCAqL1xuICAgIHByaXZhdGUgaXNNb2RFbmFibGVkKGlkOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGx1Z2luLmtlcm5lbD8uaXNNb2R1bGVFbmFibGVkKGlkKSA/PyBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdHJ1Y3RvcihsZWFmOiBXb3Jrc3BhY2VMZWFmLCBwbHVnaW46IFNpc3lwaHVzUGx1Z2luKSB7XG4gICAgICAgIHN1cGVyKGxlYWYpO1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB9XG5cbiAgICBnZXRWaWV3VHlwZSgpIHsgcmV0dXJuIFZJRVdfVFlQRV9QQU5PUFRJQ09OOyB9XG4gICAgZ2V0RGlzcGxheVRleHQoKSB7IHJldHVybiBcIkV5ZSBTaXN5cGh1c1wiOyB9XG4gICAgZ2V0SWNvbigpIHsgcmV0dXJuIFwic2t1bGxcIjsgfVxuXG4gICAgYXN5bmMgb25PcGVuKCkge1xuICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgdGhpcy5wbHVnaW4uZW5naW5lLm9uKCd1cGRhdGUnLCB0aGlzLmRlYm91bmNlZFJlZnJlc2gpO1xuICAgICAgICB0aGlzLnBsdWdpbi5lbmdpbmUub24oJ3VuZG86c2hvdycsIHRoaXMuYm91bmRTaG93VW5kb1RvYXN0KTtcbiAgICB9XG5cbiAgICBhc3luYyBvbkNsb3NlKCkge1xuICAgICAgICB0aGlzLnBsdWdpbi5lbmdpbmUub2ZmKCd1cGRhdGUnLCB0aGlzLmRlYm91bmNlZFJlZnJlc2gpO1xuICAgICAgICB0aGlzLnBsdWdpbi5lbmdpbmUub2ZmKCd1bmRvOnNob3cnLCB0aGlzLmJvdW5kU2hvd1VuZG9Ub2FzdCk7XG4gICAgICAgIGlmICh0aGlzLm9ic2VydmVyKSB0aGlzLm9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICB9XG5cbiAgICBhc3luYyByZWZyZXNoKCkge1xuICAgICAgICAvLyAxLiBDYXB0dXJlIFN0YXRlICYgRGltZW5zaW9uc1xuICAgICAgICBjb25zdCBzY3JvbGxBcmVhID0gdGhpcy5jb250ZW50RWwucXVlcnlTZWxlY3RvcihcIi5zaXN5LXNjcm9sbC1hcmVhXCIpIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICBsZXQgbGFzdFNjcm9sbCA9IDA7XG4gICAgICAgIGlmIChzY3JvbGxBcmVhKSBsYXN0U2Nyb2xsID0gc2Nyb2xsQXJlYS5zY3JvbGxUb3A7XG5cbiAgICAgICAgLy8gW0ZJWF0gTWVhc3VyZSB3aWR0aCBCRUZPUkUgd2lwaW5nIERPTSBzbyB3ZSBjYW4gZHJhdyBjaGFydHMgb2ZmLXNjcmVlblxuICAgICAgICBjb25zdCBjdXJyZW50V2lkdGggPSB0aGlzLmNvbnRlbnRFbC5jbGllbnRXaWR0aCB8fCAzMDA7XG5cbiAgICAgICAgY29uc3QgaXRlbXNUb1Jlc3RvcmUgPSBNYXRoLm1heCh0aGlzLnJlbmRlcmVkQ291bnQsIHRoaXMuQkFUQ0hfU0laRSk7XG5cbiAgICAgICAgY29uc3QgYWN0aXZlRWwgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50IGFzIEhUTUxFbGVtZW50O1xuICAgICAgICBjb25zdCBpc1F1aWNrSW5wdXQgPSBhY3RpdmVFbCAmJiBhY3RpdmVFbC5jbGFzc0xpc3QuY29udGFpbnMoXCJzaXN5LXF1aWNrLWlucHV0XCIpO1xuICAgICAgICBsZXQgcXVpY2tJbnB1dFZhbHVlID0gXCJcIjtcbiAgICAgICAgaWYgKGlzUXVpY2tJbnB1dCkgcXVpY2tJbnB1dFZhbHVlID0gKGFjdGl2ZUVsIGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlO1xuXG4gICAgICAgIC8vIDIuIENsZWFuICYgUHJlcFxuICAgICAgICBpZiAodGhpcy5vYnNlcnZlcikgeyB0aGlzLm9ic2VydmVyLmRpc2Nvbm5lY3QoKTsgdGhpcy5vYnNlcnZlciA9IG51bGw7IH1cbiAgICAgICAgdGhpcy5wcmVwYXJlUXVlc3RzKCk7XG4gICAgICAgIHRoaXMucmVuZGVyZWRDb3VudCA9IDA7XG5cbiAgICAgICAgLy8gMy4gQnVpbGQgQnVmZmVyXG4gICAgICAgIGNvbnN0IGJ1ZmZlciA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gYnVmZmVyLmNyZWF0ZURpdih7IGNsczogXCJzaXN5LWNvbnRhaW5lclwiIH0pO1xuICAgICAgICBjb25zdCBzY3JvbGwgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiBcInNpc3ktc2Nyb2xsLWFyZWFcIiB9KTtcbiAgICAgICAgc2Nyb2xsLnN0eWxlLnNjcm9sbEJlaGF2aW9yID0gXCJhdXRvXCI7XG5cbiAgICAgICAgLy8gLS0tIFVJIENPTlNUUlVDVElPTiAtLS1cbiAgICAgICAgY29uc3QgaGVhZGVyID0gc2Nyb2xsLmNyZWF0ZURpdih7IGNsczogXCJzaXN5LWhlYWRlclwiIH0pO1xuICAgICAgICBoZWFkZXIuY3JlYXRlRWwoXCJoMlwiLCB7IHRleHQ6IFwiRXllIFNJU1lQSFVTIE9TXCIgfSk7XG4gICAgICAgIGNvbnN0IHNvdW5kQnRuID0gaGVhZGVyLmNyZWF0ZUVsKFwic3BhblwiLCB7IHRleHQ6IHRoaXMucGx1Z2luLnNldHRpbmdzLm11dGVkID8gXCLwn5SHXCIgOiBcIvCflIpcIiwgY2xzOiBcInNpc3ktc291bmQtYnRuXCIgfSk7XG4gICAgICAgIHNvdW5kQnRuLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5tdXRlZCA9ICF0aGlzLnBsdWdpbi5zZXR0aW5ncy5tdXRlZDtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLmF1ZGlvLnNldE11dGVkKHRoaXMucGx1Z2luLnNldHRpbmdzLm11dGVkKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgdGhpcy5kZWJvdW5jZWRSZWZyZXNoKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5yZW5kZXJBbGVydHMoc2Nyb2xsKTtcblxuICAgICAgICBjb25zdCBodWQgPSBzY3JvbGwuY3JlYXRlRGl2KHsgY2xzOiBcInNpc3ktaHVkXCIgfSk7XG4gICAgICAgIGNvbnN0IHdlZWtDb21wID0gQ2hhcnRSZW5kZXJlci5nZXRXZWVrQ29tcGFyaXNvbih0aGlzLnBsdWdpbi5zZXR0aW5ncy5kYXlNZXRyaWNzKTtcbiAgICAgICAgaWYgKHRoaXMuaXNNb2RFbmFibGVkKCdzdXJ2aXZhbCcpKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRXaXRoU3BhcmtsaW5lKGh1ZCwgXCJIRUFMVEhcIiwgYCR7dGhpcy5wbHVnaW4uc2V0dGluZ3MuaHB9LyR7dGhpcy5wbHVnaW4uc2V0dGluZ3MubWF4SHB9YCwgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaHAgPCAzMCA/IFwic2lzeS1jcml0aWNhbFwiIDogXCJcIiwgdW5kZWZpbmVkLCB1bmRlZmluZWQpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmlzTW9kRW5hYmxlZCgnZWNvbm9teScpKSB7XG4gICAgICAgICAgICBjb25zdCBnb2xkQ29tcCA9IHdlZWtDb21wLmZpbmQoYyA9PiBjLmxhYmVsID09PSAnR29sZCcpO1xuICAgICAgICAgICAgdGhpcy5zdGF0V2l0aFNwYXJrbGluZShodWQsIFwiR09MRFwiLCBgJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5nb2xkfWAsIHRoaXMucGx1Z2luLnNldHRpbmdzLmdvbGQgPCAwID8gXCJzaXN5LXZhbC1kZWJ0XCIgOiBcIlwiLFxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0TGFzdDcoZCA9PiBkLmdvbGRFYXJuZWQpLCBnb2xkQ29tcCA/IHsgdGV4dDogZ29sZENvbXAuZGVsdGEsIHVwOiBnb2xkQ29tcC51cCB9IDogdW5kZWZpbmVkLCAndmFyKC0tc2lzeS1nb2xkKScpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmlzTW9kRW5hYmxlZCgncHJvZ3Jlc3Npb24nKSkge1xuICAgICAgICAgICAgY29uc3QgeHBDb21wID0gd2Vla0NvbXAuZmluZChjID0+IGMubGFiZWwgPT09ICdYUCcpO1xuICAgICAgICAgICAgdGhpcy5zdGF0V2l0aFNwYXJrbGluZShodWQsIFwiTEVWRUxcIiwgYCR7dGhpcy5wbHVnaW4uc2V0dGluZ3MubGV2ZWx9YCwgJycsXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRMYXN0NyhkID0+IGQueHBFYXJuZWQpLCB4cENvbXAgPyB7IHRleHQ6IHhwQ29tcC5kZWx0YSwgdXA6IHhwQ29tcC51cCB9IDogdW5kZWZpbmVkLCAndmFyKC0tc2lzeS1ibHVlKScpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmlzTW9kRW5hYmxlZCgnY29tYmF0JykpIHtcbiAgICAgICAgICAgIGNvbnN0IHFDb21wID0gd2Vla0NvbXAuZmluZChjID0+IGMubGFiZWwgPT09ICdRdWVzdHMnKTtcbiAgICAgICAgICAgIHRoaXMuc3RhdFdpdGhTcGFya2xpbmUoaHVkLCBcIlFVRVNUU1wiLCBgJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5xdWVzdHNDb21wbGV0ZWRUb2RheX0gdG9kYXlgLCAnJyxcbiAgICAgICAgICAgICAgICB0aGlzLmdldExhc3Q3KGQgPT4gZC5xdWVzdHNDb21wbGV0ZWQpLCBxQ29tcCA/IHsgdGV4dDogcUNvbXAuZGVsdGEsIHVwOiBxQ29tcC51cCB9IDogdW5kZWZpbmVkLCAndmFyKC0tc2lzeS1ncmVlbiknKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmlzTW9kRW5hYmxlZCgnc3Vydml2YWwnKSkge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJPcmFjbGUoc2Nyb2xsKTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyU2NhcnMoc2Nyb2xsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmlzTW9kRW5hYmxlZCgncHJvZHVjdGl2aXR5JykpIHtcbiAgICAgICAgICAgIHNjcm9sbC5jcmVhdGVEaXYoeyB0ZXh0OiBcIlRPREFZUyBPQkpFQ1RJVkVTXCIsIGNsczogXCJzaXN5LXNlY3Rpb24tdGl0bGVcIiB9KTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyRGFpbHlNaXNzaW9ucyhzY3JvbGwpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY3RybHMgPSBzY3JvbGwuY3JlYXRlRGl2KHsgY2xzOiBcInNpc3ktY29udHJvbHNcIiB9KTtcbiAgICAgICAgY3RybHMuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkRFUExPWVwiLCBjbHM6IFwic2lzeS1idG4gbW9kLWN0YVwiIH0pLm9uY2xpY2sgPSAoKSA9PiBuZXcgUXVlc3RNb2RhbCh0aGlzLmFwcCwgdGhpcy5wbHVnaW4pLm9wZW4oKTtcbiAgICAgICAgaWYgKHRoaXMuaXNNb2RFbmFibGVkKCdlY29ub215JykpIHtcbiAgICAgICAgICAgIGN0cmxzLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJTSE9QXCIsIGNsczogXCJzaXN5LWJ0blwiIH0pLm9uY2xpY2sgPSAoKSA9PiBuZXcgU2hvcE1vZGFsKHRoaXMuYXBwLCB0aGlzLnBsdWdpbikub3BlbigpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGZvY3VzTGFiZWwgPSB0aGlzLnBsdWdpbi5wb21vZG9yby5pc1J1bm5pbmcoKVxuICAgICAgICAgICAgPyBg4o+xICR7dGhpcy5wbHVnaW4ucG9tb2Rvcm8uZm9ybWF0VGltZSgpfWBcbiAgICAgICAgICAgIDogJ0ZPQ1VTJztcbiAgICAgICAgY3RybHMuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogZm9jdXNMYWJlbCwgY2xzOiAnc2lzeS1idG4nIH0pLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5wbHVnaW4ucG9tb2Rvcm8uaXNSdW5uaW5nKCkpIHRoaXMucGx1Z2luLnBvbW9kb3JvLnBhdXNlKCk7XG4gICAgICAgICAgICBlbHNlIHRoaXMucGx1Z2luLnBvbW9kb3JvLnN0YXJ0KCk7XG4gICAgICAgICAgICB0aGlzLmRlYm91bmNlZFJlZnJlc2goKTtcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCBzZWxCdG4gPSBjdHJscy5jcmVhdGVFbChcImJ1dHRvblwiLCB7XG4gICAgICAgICAgICB0ZXh0OiB0aGlzLnNlbGVjdE1vZGUgPyBgQ0FOQ0VMICgke3RoaXMuc2VsZWN0ZWRRdWVzdHMuc2l6ZX0pYCA6IFwiU0VMRUNUXCIsXG4gICAgICAgICAgICBjbHM6IFwic2lzeS1idG5cIlxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0TW9kZSkgc2VsQnRuLmFkZENsYXNzKFwic2lzeS1maWx0ZXItYWN0aXZlXCIpO1xuICAgICAgICBzZWxCdG4ub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0TW9kZSA9ICF0aGlzLnNlbGVjdE1vZGU7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkUXVlc3RzLmNsZWFyKCk7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAodGhpcy5pc01vZEVuYWJsZWQoJ3Byb2R1Y3Rpdml0eScpKSB7XG4gICAgICAgICAgICBzY3JvbGwuY3JlYXRlRGl2KHsgdGV4dDogXCJGSUxURVIgQ09OVFJPTFNcIiwgY2xzOiBcInNpc3ktc2VjdGlvbi10aXRsZVwiIH0pO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJGaWx0ZXJCYXIoc2Nyb2xsKTtcblxuICAgICAgICAgICAgaWYgKHRoaXMucGx1Z2luLmVuZ2luZS5nZXRBY3RpdmVDaGFpbigpKSB7XG4gICAgICAgICAgICAgICAgc2Nyb2xsLmNyZWF0ZURpdih7IHRleHQ6IFwiQUNUSVZFIENIQUlOXCIsIGNsczogXCJzaXN5LXNlY3Rpb24tdGl0bGVcIiB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckNoYWluU2VjdGlvbihzY3JvbGwpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzY3JvbGwuY3JlYXRlRGl2KHsgdGV4dDogXCJSRVNFQVJDSCBMSUJSQVJZXCIsIGNsczogXCJzaXN5LXNlY3Rpb24tdGl0bGVcIiB9KTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyUmVzZWFyY2hTZWN0aW9uKHNjcm9sbCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5pc01vZEVuYWJsZWQoJ2FuYWx5dGljcycpKSB7XG4gICAgICAgICAgICBzY3JvbGwuY3JlYXRlRGl2KHsgdGV4dDogXCJBTkFMWVRJQ1NcIiwgY2xzOiBcInNpc3ktc2VjdGlvbi10aXRsZVwiIH0pO1xuICAgICAgICAgICAgY29uc3QgYW5hbHl0aWNzQ29udGFpbmVyID0gc2Nyb2xsLmNyZWF0ZURpdih7IGNsczogXCJzaXN5LWFuYWx5dGljc1wiIH0pO1xuICAgICAgICAgICAgdGhpcy5zZXR1cEFuYWx5dGljc1N0cnVjdHVyZShhbmFseXRpY3NDb250YWluZXIpO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJBbmFseXRpY3NDaGFydHMoYW5hbHl0aWNzQ29udGFpbmVyLCBjdXJyZW50V2lkdGgpO1xuXG4gICAgICAgICAgICAvLyBHaXRIdWIgSGVhdG1hcFxuICAgICAgICAgICAgYW5hbHl0aWNzQ29udGFpbmVyLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ0NvbnRyaWJ1dGlvbiBIZWF0bWFwICgzNjUgRGF5cyknIH0pO1xuICAgICAgICAgICAgY29uc3QgaGVhdENvbnRhaW5lciA9IGFuYWx5dGljc0NvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdzaXN5LWNoYXJ0LWNvbnRhaW5lci1oZWF0JyB9KTtcbiAgICAgICAgICAgIENoYXJ0UmVuZGVyZXIucmVuZGVyR2l0SHViSGVhdG1hcChoZWF0Q29udGFpbmVyLCB0aGlzLnBsdWdpbi5zZXR0aW5ncy5kYXlNZXRyaWNzKTtcblxuICAgICAgICAgICAgLy8gVGltZS1vZi1kYXkgY2hhcnRcbiAgICAgICAgICAgIGFuYWx5dGljc0NvbnRhaW5lci5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdQcm9kdWN0aXZpdHkgYnkgSG91cicgfSk7XG4gICAgICAgICAgICBjb25zdCB0b2RDb250YWluZXIgPSBhbmFseXRpY3NDb250YWluZXIuY3JlYXRlRGl2KCk7XG4gICAgICAgICAgICBDaGFydFJlbmRlcmVyLnJlbmRlclRpbWVPZkRheSh0b2RDb250YWluZXIsIHRoaXMucGx1Z2luLnNldHRpbmdzLmRheU1ldHJpY3MpO1xuXG4gICAgICAgICAgICAvLyBXZWVrLW92ZXItd2VlayBjb21wYXJpc29uXG4gICAgICAgICAgICBhbmFseXRpY3NDb250YWluZXIuY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnVGhpcyBXZWVrIHZzIExhc3QgV2VlaycgfSk7XG4gICAgICAgICAgICBjb25zdCBjb21wR3JpZCA9IGFuYWx5dGljc0NvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICdzaXN5LXdlZWstY29tcGFyZScgfSk7XG4gICAgICAgICAgICB3ZWVrQ29tcC5mb3JFYWNoKGMgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBjb21wR3JpZC5jcmVhdGVEaXYoeyBjbHM6ICdzaXN5LXdlZWstY29tcGFyZS1pdGVtJyB9KTtcbiAgICAgICAgICAgICAgICBpdGVtLmNyZWF0ZURpdih7IHRleHQ6IGMubGFiZWwsIGNsczogJ3Npc3ktd2Vlay1jb21wYXJlLWxhYmVsJyB9KTtcbiAgICAgICAgICAgICAgICBpdGVtLmNyZWF0ZURpdih7IHRleHQ6IFN0cmluZyhjLnRoaXNXZWVrKSwgY2xzOiAnc2lzeS13ZWVrLWNvbXBhcmUtdmFsJyB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCBkZWx0YSA9IGl0ZW0uY3JlYXRlRGl2KHsgdGV4dDogYy5kZWx0YSwgY2xzOiBgc2lzeS1zdGF0LWRlbHRhICR7Yy51cCA/ICdzaXN5LXN0YXQtZGVsdGEtdXAnIDogJ3Npc3ktc3RhdC1kZWx0YS1kb3duJ31gIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBUcm9waHkgc2hlbGZcbiAgICAgICAgaWYgKHRoaXMuaXNNb2RFbmFibGVkKCdhbmFseXRpY3MnKSkge1xuICAgICAgICAgICAgY29uc3QgdW5sb2NrZWQgPSAodGhpcy5wbHVnaW4uc2V0dGluZ3MuYWNoaWV2ZW1lbnRzIHx8IFtdKS5maWx0ZXIoYSA9PiBhLnVubG9ja2VkKTtcbiAgICAgICAgICAgIGlmICh1bmxvY2tlZC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgc2Nyb2xsLmNyZWF0ZURpdih7IHRleHQ6IGBUUk9QSElFUyAoJHt1bmxvY2tlZC5sZW5ndGh9KWAsIGNsczogJ3Npc3ktc2VjdGlvbi10aXRsZScgfSk7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2hlbGYgPSBzY3JvbGwuY3JlYXRlRGl2KHsgY2xzOiAnc2lzeS10cm9waHktc2hlbGYnIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHNvcnRlZCA9IFsuLi51bmxvY2tlZF0uc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBvcmRlcjogUmVjb3JkPHN0cmluZywgbnVtYmVyPiA9IHsgbGVnZW5kYXJ5OiAwLCBlcGljOiAxLCByYXJlOiAyLCBjb21tb246IDMgfTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChvcmRlclthLnJhcml0eV0gPz8gNCkgLSAob3JkZXJbYi5yYXJpdHldID8/IDQpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHNvcnRlZC5zbGljZSgwLCA4KS5mb3JFYWNoKGFjaCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGljb25zOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0geyBjb21tb246ICfwn4+FJywgcmFyZTogJ/Cfko4nLCBlcGljOiAn8J+RkScsIGxlZ2VuZGFyeTogJ+KtkCcgfTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaXRlbSA9IHNoZWxmLmNyZWF0ZURpdih7IHRleHQ6IGAke2ljb25zW2FjaC5yYXJpdHldIHx8ICfwn4+GJ30gJHthY2gubmFtZX1gLCBjbHM6IGBzaXN5LXRyb3BoeS1pdGVtIHNpc3ktdHJvcGh5LSR7YWNoLnJhcml0eX1gIH0pO1xuICAgICAgICAgICAgICAgICAgICBpdGVtLnNldEF0dHJpYnV0ZSgndGl0bGUnLCBhY2guZGVzY3JpcHRpb24pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gUml2YWwgSFVEXG4gICAgICAgIGlmICh0aGlzLmlzTW9kRW5hYmxlZCgnY29tYmF0JykgJiYgdGhpcy5wbHVnaW4uc2V0dGluZ3Mucml2YWw/Lm5hbWUpIHtcbiAgICAgICAgICAgIHNjcm9sbC5jcmVhdGVEaXYoeyB0ZXh0OiAnUklWQUwnLCBjbHM6ICdzaXN5LXNlY3Rpb24tdGl0bGUnIH0pO1xuICAgICAgICAgICAgUml2YWxFbmdpbmUucmVuZGVyUml2YWxIVUQoc2Nyb2xsLCB0aGlzLnBsdWdpbi5zZXR0aW5ncyk7XG4gICAgICAgIH1cblxuICAgICAgICBzY3JvbGwuY3JlYXRlRGl2KHsgdGV4dDogXCJBQ1RJVkUgVEhSRUFUU1wiLCBjbHM6IFwic2lzeS1zZWN0aW9uLXRpdGxlXCIgfSk7XG4gICAgICAgIGNvbnN0IHF1ZXN0Q29udGFpbmVyID0gc2Nyb2xsLmNyZWF0ZURpdih7IGNsczogXCJzaXN5LXF1ZXN0LWNvbnRhaW5lclwiIH0pO1xuICAgICAgICB0aGlzLnJlbmRlclF1ZXN0QmF0Y2gocXVlc3RDb250YWluZXIsIGl0ZW1zVG9SZXN0b3JlKTtcblxuICAgICAgICBpZiAodGhpcy5pc01vZEVuYWJsZWQoJ3Byb2dyZXNzaW9uJykpIHtcbiAgICAgICAgICAgIHNjcm9sbC5jcmVhdGVEaXYoeyB0ZXh0OiBcIk5FVVJBTCBIVUJcIiwgY2xzOiBcInNpc3ktc2VjdGlvbi10aXRsZVwiIH0pO1xuICAgICAgICAgICAgY29uc3Qgc2tpbGxDb250YWluZXIgPSBzY3JvbGwuY3JlYXRlRGl2KCk7XG4gICAgICAgICAgICBTa2lsbFRyZWVSZW5kZXJlci5yZW5kZXIoc2tpbGxDb250YWluZXIsIHRoaXMucGx1Z2luLnNldHRpbmdzLnNraWxscywgKGlkeCkgPT4ge1xuICAgICAgICAgICAgICAgIG5ldyBTa2lsbERldGFpbE1vZGFsKHRoaXMuYXBwLCB0aGlzLnBsdWdpbiwgaWR4KS5vcGVuKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHNjcm9sbC5jcmVhdGVEaXYoeyB0ZXh0OiBcIisgQWRkIE5vZGVcIiwgY2xzOiBcInNpc3ktYnRuXCIsIGF0dHI6IHsgc3R5bGU6IFwid2lkdGg6MTAwJTsgbWFyZ2luLXRvcDoxMHB4O1wiIH0gfSkub25jbGljayA9ICgpID0+IG5ldyBTa2lsbE1hbmFnZXJNb2RhbCh0aGlzLmFwcCwgdGhpcy5wbHVnaW4pLm9wZW4oKTtcblxuICAgICAgICAgICAgLy8gU2tpbGwgUmFkYXIgQ2hhcnRcbiAgICAgICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5za2lsbHMubGVuZ3RoID49IDMpIHtcbiAgICAgICAgICAgICAgICBzY3JvbGwuY3JlYXRlRGl2KHsgdGV4dDogJ1NLSUxMIFBST0ZJTEUnLCBjbHM6ICdzaXN5LXNlY3Rpb24tdGl0bGUnIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJhZGFyV3JhcCA9IHNjcm9sbC5jcmVhdGVEaXYoeyBjbHM6ICdzaXN5LXByb2ZpbGUtcmFkYXInIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHNvcnRlZCA9IFsuLi50aGlzLnBsdWdpbi5zZXR0aW5ncy5za2lsbHNdLnNvcnQoKGEsIGIpID0+IGIubGV2ZWwgLSBhLmxldmVsKTtcbiAgICAgICAgICAgICAgICBDaGFydFJlbmRlcmVyLnJlbmRlclJhZGFyKHJhZGFyV3JhcCwgc29ydGVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGZvb3RlciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6IFwic2lzeS1xdWljay1jYXB0dXJlXCIgfSk7XG4gICAgICAgIGNvbnN0IGlucHV0ID0gZm9vdGVyLmNyZWF0ZUVsKFwiaW5wdXRcIiwgeyBjbHM6IFwic2lzeS1xdWljay1pbnB1dFwiLCBwbGFjZWhvbGRlcjogXCJNaXNzaW9uIC8xLi4uNVwiIH0pO1xuICAgICAgICBpZiAoaXNRdWlja0lucHV0KSBpbnB1dC52YWx1ZSA9IHF1aWNrSW5wdXRWYWx1ZTtcblxuICAgICAgICBpbnB1dC5vbmtleWRvd24gPSBhc3luYyAoZSkgPT4ge1xuICAgICAgICAgICAgaWYgKGUua2V5ID09PSAnRW50ZXInICYmIGlucHV0LnZhbHVlLnRyaW0oKSkge1xuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLmVuZ2luZS5wYXJzZVF1aWNrSW5wdXQoaW5wdXQudmFsdWUudHJpbSgpKTtcbiAgICAgICAgICAgICAgICBpbnB1dC52YWx1ZSA9IFwiXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5yZW5kZXJCdWxrQmFyKGNvbnRhaW5lcik7XG5cbiAgICAgICAgLy8gNC4gVEhFIFNXQVBcbiAgICAgICAgdGhpcy5jb250ZW50RWwuZW1wdHkoKTtcbiAgICAgICAgdGhpcy5jb250ZW50RWwuYXBwZW5kQ2hpbGQoYnVmZmVyKTtcblxuICAgICAgICAvLyA1LiBSRVNUT1JFXG4gICAgICAgIGlmIChpc1F1aWNrSW5wdXQpIHtcbiAgICAgICAgICAgIGNvbnN0IG5ld0lucHV0ID0gdGhpcy5jb250ZW50RWwucXVlcnlTZWxlY3RvcihcIi5zaXN5LXF1aWNrLWlucHV0XCIpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgICAgICAgICBpZiAobmV3SW5wdXQpIHtcbiAgICAgICAgICAgICAgICBuZXdJbnB1dC5mb2N1cygpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGxlbiA9IG5ld0lucHV0LnZhbHVlLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBuZXdJbnB1dC5zZXRTZWxlY3Rpb25SYW5nZShsZW4sIGxlbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobGFzdFNjcm9sbCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IG5ld1Njcm9sbCA9IHRoaXMuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoXCIuc2lzeS1zY3JvbGwtYXJlYVwiKTtcbiAgICAgICAgICAgIGlmIChuZXdTY3JvbGwpIG5ld1Njcm9sbC5zY3JvbGxUb3AgPSBsYXN0U2Nyb2xsO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJlcGFyZVF1ZXN0cygpIHtcbiAgICAgICAgY29uc3QgZm9sZGVyID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKFwiQWN0aXZlX1J1bi9RdWVzdHNcIik7XG4gICAgICAgIHRoaXMuY3VycmVudFF1ZXN0TGlzdCA9IFtdO1xuXG4gICAgICAgIGlmIChmb2xkZXIgaW5zdGFuY2VvZiBURm9sZGVyKSB7XG4gICAgICAgICAgICBsZXQgZmlsZXMgPSBmb2xkZXIuY2hpbGRyZW4uZmlsdGVyKGYgPT4gZiBpbnN0YW5jZW9mIFRGaWxlKSBhcyBURmlsZVtdO1xuICAgICAgICAgICAgZmlsZXMgPSB0aGlzLnBsdWdpbi5lbmdpbmUuZmlsdGVyc0VuZ2luZS5maWx0ZXJRdWVzdHMoZmlsZXMpLmZpbHRlcigoZik6IGYgaXMgVEZpbGUgPT4gZiBpbnN0YW5jZW9mIFRGaWxlKTtcbiAgICAgICAgICAgIGZpbGVzLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBmbUEgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShhKT8uZnJvbnRtYXR0ZXI7XG4gICAgICAgICAgICAgICAgY29uc3QgZm1CID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoYik/LmZyb250bWF0dGVyO1xuICAgICAgICAgICAgICAgIGNvbnN0IG9yZGVyQSA9IGZtQT8ubWFudWFsX29yZGVyICE9PSB1bmRlZmluZWQgPyBmbUEubWFudWFsX29yZGVyIDogOTk5OTk5OTk5OTk5OTtcbiAgICAgICAgICAgICAgICBjb25zdCBvcmRlckIgPSBmbUI/Lm1hbnVhbF9vcmRlciAhPT0gdW5kZWZpbmVkID8gZm1CLm1hbnVhbF9vcmRlciA6IDk5OTk5OTk5OTk5OTk7XG4gICAgICAgICAgICAgICAgaWYgKG9yZGVyQSAhPT0gb3JkZXJCKSByZXR1cm4gb3JkZXJBIC0gb3JkZXJCO1xuICAgICAgICAgICAgICAgIGlmIChmbUE/LmlzX2Jvc3MgIT09IGZtQj8uaXNfYm9zcykgcmV0dXJuIChmbUI/LmlzX2Jvc3MgPyAxIDogMCkgLSAoZm1BPy5pc19ib3NzID8gMSA6IDApO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGVBID0gZm1BPy5kZWFkbGluZSA/IG1vbWVudChmbUEuZGVhZGxpbmUpLnZhbHVlT2YoKSA6IDk5OTk5OTk5OTk5OTk7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0ZUIgPSBmbUI/LmRlYWRsaW5lID8gbW9tZW50KGZtQi5kZWFkbGluZSkudmFsdWVPZigpIDogOTk5OTk5OTk5OTk5OTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZGF0ZUEgLSBkYXRlQjtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50UXVlc3RMaXN0ID0gZmlsZXM7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZW5kZXJRdWVzdEJhdGNoKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIGJhdGNoU2l6ZTogbnVtYmVyID0gdGhpcy5CQVRDSF9TSVpFKSB7XG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRRdWVzdExpc3QubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICByZW5kZXJFbXB0eVN0YXRlKGNvbnRhaW5lciwgJ3F1ZXN0cycsICdbREVQTE9ZIFFVRVNUXScsICgpID0+IG5ldyBRdWVzdE1vZGFsKHRoaXMuYXBwLCB0aGlzLnBsdWdpbikub3BlbigpKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IG5leHRCYXRjaCA9IHRoaXMuY3VycmVudFF1ZXN0TGlzdC5zbGljZSh0aGlzLnJlbmRlcmVkQ291bnQsIHRoaXMucmVuZGVyZWRDb3VudCArIGJhdGNoU2l6ZSk7XG4gICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBuZXh0QmF0Y2gpIFF1ZXN0Q2FyZFJlbmRlcmVyLnJlbmRlcihjb250YWluZXIsIGZpbGUsIHRoaXMpO1xuICAgICAgICB0aGlzLnJlbmRlcmVkQ291bnQgKz0gbmV4dEJhdGNoLmxlbmd0aDtcblxuICAgICAgICBpZiAodGhpcy5yZW5kZXJlZENvdW50IDwgdGhpcy5jdXJyZW50UXVlc3RMaXN0Lmxlbmd0aCkge1xuICAgICAgICAgICAgY29uc3Qgc2VudGluZWwgPSBjb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiBcInNpc3ktc2VudGluZWxcIiB9KTtcbiAgICAgICAgICAgIHRoaXMub2JzZXJ2ZXIgPSBuZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoKGVudHJpZXMpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoZW50cmllc1swXS5pc0ludGVyc2VjdGluZykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9ic2VydmVyPy5kaXNjb25uZWN0KCk7XG4gICAgICAgICAgICAgICAgICAgIHNlbnRpbmVsLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclF1ZXN0QmF0Y2goY29udGFpbmVyLCB0aGlzLkJBVENIX1NJWkUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIHsgcm9vdDogY29udGFpbmVyLnBhcmVudEVsZW1lbnQsIHRocmVzaG9sZDogMC4xIH0pO1xuICAgICAgICAgICAgdGhpcy5vYnNlcnZlci5vYnNlcnZlKHNlbnRpbmVsKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNldHVwQW5hbHl0aWNzU3RydWN0dXJlKHBhcmVudDogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgY29uc3Qgc3RhdHMgPSB0aGlzLnBsdWdpbi5lbmdpbmUuZ2V0R2FtZVN0YXRzKCk7XG4gICAgICAgIGNvbnN0IGcgPSBwYXJlbnQuY3JlYXRlRGl2KHsgY2xzOiBcInNpc3ktaHVkXCIgfSk7XG4gICAgICAgIHRoaXMuc3RhdChnLCBcIlN0cmVha1wiLCBTdHJpbmcoc3RhdHMuY3VycmVudFN0cmVhaykpO1xuICAgICAgICB0aGlzLnN0YXQoZywgXCJUb2RheVwiLCBTdHJpbmcodGhpcy5wbHVnaW4uc2V0dGluZ3MucXVlc3RzQ29tcGxldGVkVG9kYXkpKTtcblxuICAgICAgICBwYXJlbnQuY3JlYXRlRWwoXCJoNFwiLCB7IHRleHQ6IFwiQWN0aXZpdHkgKDcgRGF5cylcIiB9KTtcbiAgICAgICAgcGFyZW50LmNyZWF0ZURpdih7IGNsczogXCJzaXN5LWNoYXJ0LWNvbnRhaW5lci1saW5lXCIgfSk7XG4gICAgICAgIHBhcmVudC5jcmVhdGVFbChcImg0XCIsIHsgdGV4dDogXCJIZWF0bWFwXCIgfSk7XG4gICAgICAgIHBhcmVudC5jcmVhdGVEaXYoeyBjbHM6IFwic2lzeS1jaGFydC1jb250YWluZXItaGVhdFwiIH0pO1xuICAgIH1cblxuICAgIC8vIFtGSVhdIEFjY2VwdCB3aWR0aE92ZXJyaWRlIHRvIGVuYWJsZSBvZmYtc2NyZWVuIHJlbmRlcmluZ1xuICAgIHJlbmRlckFuYWx5dGljc0NoYXJ0cyhwYXJlbnQ6IEhUTUxFbGVtZW50LCB3aWR0aE92ZXJyaWRlPzogbnVtYmVyKSB7XG4gICAgICAgIGNvbnN0IGxpbmVDb250YWluZXIgPSBwYXJlbnQucXVlcnlTZWxlY3RvcihcIi5zaXN5LWNoYXJ0LWNvbnRhaW5lci1saW5lXCIpIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICBjb25zdCBoZWF0Q29udGFpbmVyID0gcGFyZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2lzeS1jaGFydC1jb250YWluZXItaGVhdFwiKSBhcyBIVE1MRWxlbWVudDtcblxuICAgICAgICBpZiAobGluZUNvbnRhaW5lcikge1xuICAgICAgICAgICAgbGluZUNvbnRhaW5lci5lbXB0eSgpO1xuICAgICAgICAgICAgQ2hhcnRSZW5kZXJlci5yZW5kZXJMaW5lQ2hhcnQobGluZUNvbnRhaW5lciwgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZGF5TWV0cmljcywgd2lkdGhPdmVycmlkZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGhlYXRDb250YWluZXIpIHtcbiAgICAgICAgICAgIGhlYXRDb250YWluZXIuZW1wdHkoKTtcbiAgICAgICAgICAgIENoYXJ0UmVuZGVyZXIucmVuZGVySGVhdG1hcChoZWF0Q29udGFpbmVyLCB0aGlzLnBsdWdpbi5zZXR0aW5ncy5kYXlNZXRyaWNzKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlbmRlckFsZXJ0cyhzY3JvbGw6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hY3RpdmVCdWZmcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBidWZmQmFyID0gc2Nyb2xsLmNyZWF0ZURpdih7IGNsczogXCJzaXN5LWFsZXJ0IHNpc3ktYWxlcnQtYnVmZlwiIH0pO1xuICAgICAgICAgICAgYnVmZkJhci5jcmVhdGVFbChcImgzXCIsIHsgdGV4dDogXCJBQ1RJVkUgRUZGRUNUU1wiLCBhdHRyOiB7IHN0eWxlOiBcImNvbG9yOiB2YXIoLS1zaXN5LXB1cnBsZSk7XCIgfSB9KTtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmFjdGl2ZUJ1ZmZzLmZvckVhY2goYiA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgcm93ID0gYnVmZkJhci5jcmVhdGVEaXYoeyBjbHM6IFwic2lzeS1hbGVydC1yb3dcIiB9KTtcbiAgICAgICAgICAgICAgICByb3cuY3JlYXRlU3Bhbih7IHRleHQ6IGAke2IuaWNvbn0gJHtiLm5hbWV9YCB9KTtcbiAgICAgICAgICAgICAgICByb3cuY3JlYXRlU3Bhbih7IHRleHQ6IGAke21vbWVudChiLmV4cGlyZXNBdCkuZGlmZihtb21lbnQoKSwgJ21pbnV0ZXMnKX1tIGxlZnRgLCBjbHM6IFwic2lzeS1hbGVydC10aW1lclwiIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmdvbGQgPCAwKSB7XG4gICAgICAgICAgICBjb25zdCBkID0gc2Nyb2xsLmNyZWF0ZURpdih7IGNsczogXCJzaXN5LWFsZXJ0IHNpc3ktYWxlcnQtZGVidFwiIH0pO1xuICAgICAgICAgICAgZC5jcmVhdGVFbChcImgzXCIsIHsgdGV4dDogXCLimqDvuI8gREVCVCBDUklTSVNcIiB9KTtcbiAgICAgICAgICAgIGQuY3JlYXRlRWwoXCJwXCIsIHsgdGV4dDogYEJhbGFuY2U6ICR7dGhpcy5wbHVnaW4uc2V0dGluZ3MuZ29sZH1nYCB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlbmRlck9yYWNsZShzY3JvbGw6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IG9yYWNsZSA9IHNjcm9sbC5jcmVhdGVEaXYoeyBjbHM6IFwic2lzeS1vcmFjbGVcIiB9KTtcbiAgICAgICAgb3JhY2xlLmNyZWF0ZUVsKFwiaDRcIiwgeyB0ZXh0OiBcIk9SQUNMRSBQUkVESUNUSU9OXCIgfSk7XG4gICAgICAgIGNvbnN0IHN1cnZpdmFsID0gTWF0aC5mbG9vcih0aGlzLnBsdWdpbi5zZXR0aW5ncy5ocCAvIE1hdGgubWF4KDEsICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5yaXZhbERtZyAqICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5nb2xkIDwgMCA/IDIgOiAxKSkpKTtcbiAgICAgICAgY29uc3Qgc3VydkVsID0gb3JhY2xlLmNyZWF0ZURpdih7IHRleHQ6IGBTdXJ2aXZhbDogJHtzdXJ2aXZhbH0gZGF5c2AsIGNsczogXCJzaXN5LXByZWRpY3Rpb25cIiB9KTtcbiAgICAgICAgaWYgKHN1cnZpdmFsIDwgMikgc3VydkVsLmFkZENsYXNzKFwic2lzeS1wcmVkaWN0aW9uLWJhZFwiKTtcbiAgICB9XG5cbiAgICByZW5kZXJTY2FycyhzY3JvbGw6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IHNjYXJzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2NhcnMgfHwgW107XG4gICAgICAgIGlmIChzY2Fycy5sZW5ndGggPT09IDApIHJldHVybjtcbiAgICAgICAgY29uc3QgZGl2ID0gc2Nyb2xsLmNyZWF0ZURpdih7IGNsczogXCJzaXN5LXNjYXJzXCIgfSk7XG4gICAgICAgIGRpdi5jcmVhdGVFbChcImg0XCIsIHsgdGV4dDogXCLwn6esIFNDQVJTXCIgfSk7XG4gICAgICAgIGNvbnN0IHJlY2VudCA9IHNjYXJzLnNsaWNlKC0zKS5yZXZlcnNlKCk7XG4gICAgICAgIHJlY2VudC5mb3JFYWNoKChzOiB7IGxhYmVsOiBzdHJpbmc7IHZhbHVlOiBzdHJpbmcgfCBudW1iZXIgfSkgPT4ge1xuICAgICAgICAgICAgZGl2LmNyZWF0ZUVsKFwicFwiLCB7IHRleHQ6IGAke3MubGFiZWx9OiAke3MudmFsdWV9YCwgYXR0cjogeyBzdHlsZTogXCJmb250LXNpemU6IDAuOWVtOyBvcGFjaXR5OiAwLjg1O1wiIH0gfSk7XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBidG4gPSBkaXYuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIlZpZXcgYWxsXCIsIGNsczogXCJzaXN5LWJ0blwiIH0pO1xuICAgICAgICBidG4uc3R5bGUubWFyZ2luVG9wID0gXCI2cHhcIjtcbiAgICAgICAgYnRuLm9uY2xpY2sgPSAoKSA9PiBuZXcgU2NhcnNNb2RhbCh0aGlzLmFwcCwgdGhpcy5wbHVnaW4pLm9wZW4oKTtcbiAgICB9XG5cbiAgICByZW5kZXJTa2lsbHMoc2Nyb2xsOiBIVE1MRWxlbWVudCkge1xuICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5za2lsbHMuZm9yRWFjaCgoczogU2tpbGwsIGlkeDogbnVtYmVyKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByb3cgPSBzY3JvbGwuY3JlYXRlRGl2KHsgY2xzOiBcInNpc3ktc2tpbGwtcm93XCIgfSk7XG4gICAgICAgICAgICByb3cub25jbGljayA9ICgpID0+IG5ldyBTa2lsbERldGFpbE1vZGFsKHRoaXMuYXBwLCB0aGlzLnBsdWdpbiwgaWR4KS5vcGVuKCk7XG5cbiAgICAgICAgICAgIGNvbnN0IG1ldGEgPSByb3cuY3JlYXRlRGl2KHsgY2xzOiBcInNpc3ktc2tpbGwtbWV0YVwiIH0pO1xuICAgICAgICAgICAgbWV0YS5jcmVhdGVTcGFuKHsgdGV4dDogYCR7cy5uYW1lfSAoTHZsICR7cy5sZXZlbH0pYCB9KTtcbiAgICAgICAgICAgIGlmIChzLnJ1c3QgPiAwKSBtZXRhLmNyZWF0ZVNwYW4oeyB0ZXh0OiBgUlVTVCAke3MucnVzdH1gLCBjbHM6IFwic2lzeS10ZXh0LXJ1c3RcIiB9KTtcblxuICAgICAgICAgICAgY29uc3QgYmFyID0gcm93LmNyZWF0ZURpdih7IGNsczogXCJzaXN5LWJhci1iZ1wiIH0pO1xuICAgICAgICAgICAgY29uc3QgcGN0ID0gcy54cFJlcSA+IDAgPyAocy54cCAvIHMueHBSZXEpICogMTAwIDogMDtcbiAgICAgICAgICAgIGJhci5jcmVhdGVEaXYoeyBjbHM6IFwic2lzeS1iYXItZmlsbCBzaXN5LWZpbGwtYmx1ZVwiLCBhdHRyOiB7IHN0eWxlOiBgd2lkdGg6ICR7cGN0fSU7YCB9IH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgc2Nyb2xsLmNyZWF0ZURpdih7IHRleHQ6IFwiKyBBZGQgTm9kZVwiLCBjbHM6IFwic2lzeS1idG5cIiwgYXR0cjogeyBzdHlsZTogXCJ3aWR0aDoxMDAlOyBtYXJnaW4tdG9wOjEwcHg7XCIgfSB9KS5vbmNsaWNrID0gKCkgPT4gbmV3IFNraWxsTWFuYWdlck1vZGFsKHRoaXMuYXBwLCB0aGlzLnBsdWdpbikub3BlbigpO1xuICAgIH1cblxuICAgIHJlbmRlckJ1bGtCYXIocGFyZW50OiBIVE1MRWxlbWVudCkge1xuICAgICAgICBpZiAoIXRoaXMuc2VsZWN0TW9kZSB8fCB0aGlzLnNlbGVjdGVkUXVlc3RzLnNpemUgPT09IDApIHJldHVybjtcbiAgICAgICAgY29uc3QgYmFyID0gcGFyZW50LmNyZWF0ZURpdih7IGNsczogXCJzaXN5LWJ1bGstYmFyXCIgfSk7XG4gICAgICAgIGJhci5jcmVhdGVTcGFuKHsgdGV4dDogYCR7dGhpcy5zZWxlY3RlZFF1ZXN0cy5zaXplfSBTZWxlY3RlZGAsIGF0dHI6IHsgc3R5bGU6IFwiYWxpZ24tc2VsZjpjZW50ZXI7IGZvbnQtd2VpZ2h0OmJvbGQ7IGNvbG9yOiB3aGl0ZTtcIiB9IH0pO1xuXG4gICAgICAgIGNvbnN0IGJ0bkMgPSBiYXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkNPTVBMRVRFIEFMTFwiLCBjbHM6IFwic2lzeS1idG4gbW9kLWRvbmVcIiB9KTtcbiAgICAgICAgYnRuQy5vbmNsaWNrID0gYXN5bmMgKCkgPT4geyBmb3IgKGNvbnN0IGYgb2YgdGhpcy5zZWxlY3RlZFF1ZXN0cykgYXdhaXQgdGhpcy5wbHVnaW4uZW5naW5lLmNvbXBsZXRlUXVlc3QoZik7IHRoaXMuc2VsZWN0ZWRRdWVzdHMuY2xlYXIoKTsgdGhpcy5zZWxlY3RNb2RlID0gZmFsc2U7IHRoaXMuZGVib3VuY2VkUmVmcmVzaCgpOyB9O1xuXG4gICAgICAgIGNvbnN0IGJ0bkQgPSBiYXIuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkRFTEVURSBBTExcIiwgY2xzOiBcInNpc3ktYnRuIG1vZC1mYWlsXCIgfSk7XG4gICAgICAgIGJ0bkQub25jbGljayA9IGFzeW5jICgpID0+IHsgZm9yIChjb25zdCBmIG9mIHRoaXMuc2VsZWN0ZWRRdWVzdHMpIGF3YWl0IHRoaXMucGx1Z2luLmVuZ2luZS5kZWxldGVRdWVzdChmKTsgdGhpcy5zZWxlY3RlZFF1ZXN0cy5jbGVhcigpOyB0aGlzLnNlbGVjdE1vZGUgPSBmYWxzZTsgdGhpcy5kZWJvdW5jZWRSZWZyZXNoKCk7IH07XG4gICAgfVxuXG4gICAgcmVuZGVyRGFpbHlNaXNzaW9ucyhwYXJlbnQ6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IG1pc3Npb25zID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZGFpbHlNaXNzaW9ucyB8fCBbXTtcbiAgICAgICAgaWYgKG1pc3Npb25zLmxlbmd0aCA9PT0gMCkgeyByZW5kZXJFbXB0eVN0YXRlKHBhcmVudCwgJ21pc3Npb25zJyk7IHJldHVybjsgfVxuICAgICAgICBjb25zdCBtaXNzaW9uc0RpdiA9IHBhcmVudC5jcmVhdGVEaXYoKTtcbiAgICAgICAgbWlzc2lvbnMuZm9yRWFjaCgobTogRGFpbHlNaXNzaW9uKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjYXJkID0gbWlzc2lvbnNEaXYuY3JlYXRlRGl2KHsgY2xzOiBcInNpc3ktbWlzc2lvbi1jYXJkXCIgfSk7XG4gICAgICAgICAgICBpZiAobS5jb21wbGV0ZWQpIGNhcmQuYWRkQ2xhc3MoXCJzaXN5LW1pc3Npb24tY29tcGxldGVkXCIpO1xuXG4gICAgICAgICAgICBjb25zdCBoID0gY2FyZC5jcmVhdGVEaXYoeyBjbHM6IFwic2lzeS1jYXJkLXRvcFwiIH0pO1xuICAgICAgICAgICAgaC5jcmVhdGVFbChcInNwYW5cIiwgeyB0ZXh0OiBtLm5hbWUsIGNsczogXCJzaXN5LWNhcmQtdGl0bGVcIiB9KTtcbiAgICAgICAgICAgIGguY3JlYXRlRWwoXCJzcGFuXCIsIHsgdGV4dDogYCR7bS5wcm9ncmVzc30vJHttLnRhcmdldH1gLCBhdHRyOiB7IHN0eWxlOiBcImZvbnQtd2VpZ2h0OiBib2xkO1wiIH0gfSk7XG5cbiAgICAgICAgICAgIGNhcmQuY3JlYXRlRGl2KHsgdGV4dDogbS5kZXNjLCBhdHRyOiB7IHN0eWxlOiBcImZvbnQtc2l6ZTogMC44ZW07IG9wYWNpdHk6IDAuNzsgbWFyZ2luLWJvdHRvbTogNXB4O1wiIH0gfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IGJhciA9IGNhcmQuY3JlYXRlRGl2KHsgY2xzOiBcInNpc3ktYmFyLWJnXCIgfSk7XG4gICAgICAgICAgICBjb25zdCBwY3QgPSBtLnRhcmdldCA+IDAgPyAobS5wcm9ncmVzcyAvIG0udGFyZ2V0KSAqIDEwMCA6IDA7XG4gICAgICAgICAgICBiYXIuY3JlYXRlRGl2KHsgY2xzOiBcInNpc3ktYmFyLWZpbGwgc2lzeS1maWxsLWdyZWVuXCIsIGF0dHI6IHsgc3R5bGU6IGB3aWR0aDogJHtwY3R9JTtgIH0gfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHJlbmRlckNoYWluU2VjdGlvbihwYXJlbnQ6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IGNoYWluID0gdGhpcy5wbHVnaW4uZW5naW5lLmdldEFjdGl2ZUNoYWluKCk7XG4gICAgICAgIGlmICghY2hhaW4pIHJldHVybjtcbiAgICAgICAgY29uc3QgZGl2ID0gcGFyZW50LmNyZWF0ZURpdih7IGNsczogXCJzaXN5LWNoYWluLWNvbnRhaW5lclwiIH0pO1xuICAgICAgICBkaXYuY3JlYXRlRWwoXCJoM1wiLCB7IHRleHQ6IGNoYWluLm5hbWUsIGF0dHI6IHsgc3R5bGU6IFwiY29sb3I6IHZhcigtLXNpc3ktZ3JlZW4pO1wiIH0gfSk7XG4gICAgICAgIGNvbnN0IHAgPSB0aGlzLnBsdWdpbi5lbmdpbmUuZ2V0Q2hhaW5Qcm9ncmVzcygpO1xuICAgICAgICBjb25zdCBiID0gZGl2LmNyZWF0ZURpdih7IGNsczogXCJzaXN5LWJhci1iZ1wiIH0pO1xuICAgICAgICBiLmNyZWF0ZURpdih7IGNsczogXCJzaXN5LWJhci1maWxsIHNpc3ktZmlsbC1ncmVlblwiLCBhdHRyOiB7IHN0eWxlOiBgd2lkdGg6JHtwLnBlcmNlbnR9JTtgIH0gfSk7XG5cbiAgICAgICAgY29uc3QgbGlzdCA9IGRpdi5jcmVhdGVEaXYoeyBhdHRyOiB7IHN0eWxlOiBcIm1hcmdpbjogMTBweCAwOyBmb250LXNpemU6IDAuOWVtO1wiIH0gfSk7XG4gICAgICAgIGNoYWluLnF1ZXN0cy5mb3JFYWNoKChxLCBpKSA9PiBsaXN0LmNyZWF0ZUVsKFwicFwiLCB7IHRleHQ6IGBbJHtpIDwgcC5jb21wbGV0ZWQgPyBcIk9LXCIgOiBcIi4uXCJ9XSAke3F9YCwgYXR0cjogeyBzdHlsZTogaSA9PT0gcC5jb21wbGV0ZWQgPyBcImZvbnQtd2VpZ2h0OmJvbGRcIiA6IFwib3BhY2l0eTowLjVcIiB9IH0pKTtcbiAgICAgICAgZGl2LmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJCUkVBSyBDSEFJTlwiLCBjbHM6IFwic2lzeS1idG4gbW9kLWZhaWxcIiwgYXR0cjogeyBzdHlsZTogXCJ3aWR0aDoxMDAlOyBtYXJnaW4tdG9wOjEwcHg7XCIgfSB9KS5vbmNsaWNrID0gYXN5bmMgKCkgPT4geyBhd2FpdCB0aGlzLnBsdWdpbi5lbmdpbmUuYnJlYWtDaGFpbigpOyB0aGlzLmRlYm91bmNlZFJlZnJlc2goKTsgfTtcbiAgICB9XG5cbiAgICByZW5kZXJSZXNlYXJjaFNlY3Rpb24ocGFyZW50OiBIVE1MRWxlbWVudCkge1xuICAgICAgICBjb25zdCByZXNlYXJjaCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnJlc2VhcmNoUXVlc3RzIHx8IFtdO1xuICAgICAgICBjb25zdCBhY3RpdmUgPSByZXNlYXJjaC5maWx0ZXIocSA9PiAhcS5jb21wbGV0ZWQpO1xuICAgICAgICBjb25zdCBzdGF0cyA9IHRoaXMucGx1Z2luLmVuZ2luZS5nZXRSZXNlYXJjaFJhdGlvKCk7XG5cbiAgICAgICAgY29uc3Qgc3RhdHNEaXYgPSBwYXJlbnQuY3JlYXRlRGl2KHsgY2xzOiBcInNpc3ktcmVzZWFyY2gtc3RhdHMgc2lzeS1jYXJkXCIgfSk7XG4gICAgICAgIHN0YXRzRGl2LmNyZWF0ZUVsKFwicFwiLCB7IHRleHQ6IGBSZXNlYXJjaCBSYXRpbzogJHtzdGF0cy5jb21iYXR9OiR7c3RhdHMucmVzZWFyY2h9YCB9KTtcblxuICAgICAgICBpZiAoYWN0aXZlLmxlbmd0aCA9PT0gMCkgcmVuZGVyRW1wdHlTdGF0ZShwYXJlbnQsICdyZXNlYXJjaCcpO1xuICAgICAgICBlbHNlIGFjdGl2ZS5mb3JFYWNoKChxOiBhbnkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNhcmQgPSBwYXJlbnQuY3JlYXRlRGl2KHsgY2xzOiBcInNpc3ktcmVzZWFyY2gtY2FyZFwiIH0pO1xuICAgICAgICAgICAgY29uc3QgaCA9IGNhcmQuY3JlYXRlRGl2KHsgY2xzOiBcInNpc3ktY2FyZC10b3BcIiB9KTtcbiAgICAgICAgICAgIGguY3JlYXRlRWwoXCJzcGFuXCIsIHsgdGV4dDogcS50aXRsZSwgY2xzOiBcInNpc3ktY2FyZC10aXRsZVwiIH0pO1xuICAgICAgICAgICAgY2FyZC5jcmVhdGVFbChcInBcIiwgeyB0ZXh0OiBgV29yZHM6ICR7cS53b3JkQ291bnR9LyR7cS53b3JkTGltaXR9YCB9KTtcbiAgICAgICAgICAgIGNvbnN0IGJhciA9IGNhcmQuY3JlYXRlRGl2KHsgY2xzOiBcInNpc3ktYmFyLWJnXCIgfSk7XG4gICAgICAgICAgICBjb25zdCB3cGN0ID0gcS53b3JkTGltaXQgPiAwID8gTWF0aC5taW4oMTAwLCAocS53b3JkQ291bnQgLyBxLndvcmRMaW1pdCkgKiAxMDApIDogMDtcbiAgICAgICAgICAgIGJhci5jcmVhdGVEaXYoeyBjbHM6IFwic2lzeS1iYXItZmlsbCBzaXN5LWZpbGwtcHVycGxlXCIsIGF0dHI6IHsgc3R5bGU6IGB3aWR0aDoke3dwY3R9JTtgIH0gfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IGFjdHMgPSBjYXJkLmNyZWF0ZURpdih7IGNsczogXCJzaXN5LWFjdGlvbnNcIiB9KTtcbiAgICAgICAgICAgIGFjdHMuY3JlYXRlRWwoXCJidXR0b25cIiwgeyB0ZXh0OiBcIkNPTVBMRVRFXCIsIGNsczogXCJzaXN5LWJ0biBtb2QtZG9uZSBzaXN5LWFjdGlvbi1idG5cIiB9KS5vbmNsaWNrID0gKCkgPT4geyB0aGlzLnBsdWdpbi5lbmdpbmUuY29tcGxldGVSZXNlYXJjaFF1ZXN0KHEuaWQsIHEud29yZENvdW50KTsgdGhpcy5kZWJvdW5jZWRSZWZyZXNoKCk7IH07XG4gICAgICAgICAgICBhY3RzLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJERUxFVEVcIiwgY2xzOiBcInNpc3ktYnRuIG1vZC1mYWlsIHNpc3ktYWN0aW9uLWJ0blwiIH0pLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7IGF3YWl0IHRoaXMucGx1Z2luLmVuZ2luZS5kZWxldGVSZXNlYXJjaFF1ZXN0KHEuaWQpOyB0aGlzLmRlYm91bmNlZFJlZnJlc2goKTsgfTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmVuZGVyRmlsdGVyQmFyKHBhcmVudDogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgY29uc3QgZ2V0RnJlc2hTdGF0ZSA9ICgpID0+IHRoaXMucGx1Z2luLnNldHRpbmdzLmZpbHRlclN0YXRlO1xuICAgICAgICBjb25zdCBkID0gcGFyZW50LmNyZWF0ZURpdih7IGNsczogXCJzaXN5LWZpbHRlci1iYXJcIiB9KTtcblxuICAgICAgICBjb25zdCBhZGRSb3cgPSAobDogc3RyaW5nLCBvcHRzOiBzdHJpbmdbXSwgY3Vycjogc3RyaW5nLCBjYjogYW55KSA9PiB7XG4gICAgICAgICAgICBjb25zdCByID0gZC5jcmVhdGVEaXYoeyBjbHM6IFwic2lzeS1maWx0ZXItcm93XCIgfSk7XG4gICAgICAgICAgICByLmNyZWF0ZVNwYW4oeyB0ZXh0OiBsLCBjbHM6IFwic2lzeS1maWx0ZXItbGFiZWxcIiB9KTtcbiAgICAgICAgICAgIG9wdHMuZm9yRWFjaChvID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBidG4gPSByLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogby50b1VwcGVyQ2FzZSgpLCBjbHM6IFwic2lzeS1maWx0ZXItYnRuXCIgfSk7XG4gICAgICAgICAgICAgICAgaWYgKGN1cnIgPT09IG8pIGJ0bi5hZGRDbGFzcyhcInNpc3ktZmlsdGVyLWFjdGl2ZVwiKTtcbiAgICAgICAgICAgICAgICBidG4ub25jbGljayA9ICgpID0+IGNiKG8pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgZiA9IGdldEZyZXNoU3RhdGUoKTtcbiAgICAgICAgYWRkUm93KFwiRW5lcmd5OlwiLCBbXCJhbnlcIiwgXCJoaWdoXCIsIFwibWVkaXVtXCJdLCBmLmFjdGl2ZUVuZXJneSwgKHY6IGFueSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcyA9IGdldEZyZXNoU3RhdGUoKTtcbiAgICAgICAgICAgIGNvbnN0IG5ld1ZhbCA9IChzLmFjdGl2ZUVuZXJneSA9PT0gdiAmJiB2ICE9PSBcImFueVwiKSA/IFwiYW55XCIgOiB2O1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uZW5naW5lLnNldEZpbHRlclN0YXRlKG5ld1ZhbCwgcy5hY3RpdmVDb250ZXh0LCBzLmFjdGl2ZVRhZ3MpO1xuICAgICAgICAgICAgdGhpcy5kZWJvdW5jZWRSZWZyZXNoKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBhZGRSb3coXCJDb250ZXh0OlwiLCBbXCJhbnlcIiwgXCJob21lXCIsIFwib2ZmaWNlXCJdLCBmLmFjdGl2ZUNvbnRleHQsICh2OiBhbnkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBnZXRGcmVzaFN0YXRlKCk7XG4gICAgICAgICAgICBjb25zdCBuZXdWYWwgPSAocy5hY3RpdmVDb250ZXh0ID09PSB2ICYmIHYgIT09IFwiYW55XCIpID8gXCJhbnlcIiA6IHY7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5lbmdpbmUuc2V0RmlsdGVyU3RhdGUocy5hY3RpdmVFbmVyZ3ksIG5ld1ZhbCwgcy5hY3RpdmVUYWdzKTtcbiAgICAgICAgICAgIHRoaXMuZGVib3VuY2VkUmVmcmVzaCgpO1xuICAgICAgICB9KTtcblxuICAgICAgICBkLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJDTEVBUlwiLCBjbHM6IFwic2lzeS1idG4gbW9kLWZhaWxcIiwgYXR0cjogeyBzdHlsZTogXCJ3aWR0aDoxMDAlOyBtYXJnaW4tdG9wOjVweDtcIiB9IH0pLm9uY2xpY2sgPSAoKSA9PiB7IHRoaXMucGx1Z2luLmVuZ2luZS5jbGVhckZpbHRlcnMoKTsgdGhpcy5kZWJvdW5jZWRSZWZyZXNoKCk7IH07XG4gICAgfVxuXG4gICAgc3RhdChwOiBIVE1MRWxlbWVudCwgbGFiZWw6IHN0cmluZywgdmFsOiBzdHJpbmcsIGNsczogc3RyaW5nID0gXCJcIikge1xuICAgICAgICBjb25zdCBiID0gcC5jcmVhdGVEaXYoeyBjbHM6IFwic2lzeS1zdGF0LWJveFwiIH0pO1xuICAgICAgICBpZiAoY2xzKSBiLmFkZENsYXNzKGNscyk7XG4gICAgICAgIGIuY3JlYXRlRGl2KHsgdGV4dDogbGFiZWwsIGNsczogXCJzaXN5LXN0YXQtbGFiZWxcIiB9KTtcbiAgICAgICAgYi5jcmVhdGVEaXYoeyB0ZXh0OiB2YWwsIGNsczogXCJzaXN5LXN0YXQtdmFsXCIgfSk7XG4gICAgfVxuXG4gICAgLyoqIFN0YXQgYm94IHdpdGggb3B0aW9uYWwgc3BhcmtsaW5lIGFuZCB3ZWVrLW92ZXItd2VlayBkZWx0YSAqL1xuICAgIHN0YXRXaXRoU3BhcmtsaW5lKHA6IEhUTUxFbGVtZW50LCBsYWJlbDogc3RyaW5nLCB2YWw6IHN0cmluZywgY2xzOiBzdHJpbmcgPSAnJyxcbiAgICAgICAgc3BhcmtEYXRhPzogbnVtYmVyW10sIGRlbHRhPzogeyB0ZXh0OiBzdHJpbmc7IHVwOiBib29sZWFuIH0sIHNwYXJrQ29sb3I/OiBzdHJpbmcpIHtcbiAgICAgICAgY29uc3QgYiA9IHAuY3JlYXRlRGl2KHsgY2xzOiAnc2lzeS1zdGF0LWJveCcgfSk7XG4gICAgICAgIGlmIChjbHMpIGIuYWRkQ2xhc3MoY2xzKTtcbiAgICAgICAgYi5jcmVhdGVEaXYoeyB0ZXh0OiBsYWJlbCwgY2xzOiAnc2lzeS1zdGF0LWxhYmVsJyB9KTtcbiAgICAgICAgYi5jcmVhdGVEaXYoeyB0ZXh0OiB2YWwsIGNsczogJ3Npc3ktc3RhdC12YWwnIH0pO1xuICAgICAgICBpZiAoZGVsdGEpIHtcbiAgICAgICAgICAgIGIuY3JlYXRlRGl2KHsgdGV4dDogZGVsdGEudGV4dCwgY2xzOiBgc2lzeS1zdGF0LWRlbHRhICR7ZGVsdGEudXAgPyAnc2lzeS1zdGF0LWRlbHRhLXVwJyA6ICdzaXN5LXN0YXQtZGVsdGEtZG93bid9YCB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3BhcmtEYXRhICYmIHNwYXJrRGF0YS5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICBjb25zdCBzcGFya1dyYXAgPSBiLmNyZWF0ZURpdih7IGNsczogJ3Npc3ktc3RhdC1zcGFya2xpbmUnIH0pO1xuICAgICAgICAgICAgQ2hhcnRSZW5kZXJlci5yZW5kZXJTcGFya2xpbmUoc3BhcmtXcmFwLCBzcGFya0RhdGEsIHNwYXJrQ29sb3IgfHwgJ3ZhcigtLXNpc3ktYmx1ZSknKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKiBHZXQgbGFzdCA3IGRheXMgb2YgYSBtZXRyaWMgKi9cbiAgICBnZXRMYXN0NyhhY2Nlc3NvcjogKGQ6IGFueSkgPT4gbnVtYmVyKTogbnVtYmVyW10ge1xuICAgICAgICBjb25zdCByZXN1bHQ6IG51bWJlcltdID0gW107XG4gICAgICAgIGZvciAobGV0IGkgPSA2OyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgY29uc3QgZGF0ZSA9IG1vbWVudCgpLnN1YnRyYWN0KGksICdkYXlzJykuZm9ybWF0KCdZWVlZLU1NLUREJyk7XG4gICAgICAgICAgICBjb25zdCBtID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZGF5TWV0cmljcy5maW5kKCh4OiBhbnkpID0+IHguZGF0ZSA9PT0gZGF0ZSk7XG4gICAgICAgICAgICByZXN1bHQucHVzaChtID8gYWNjZXNzb3IobSkgOiAwKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIHNob3dVbmRvVG9hc3QocXVlc3ROYW1lOiBzdHJpbmcpIHtcbiAgICAgICAgc2hvd1RvYXN0KHtcbiAgICAgICAgICAgIGljb246ICfwn5eR77iPJyxcbiAgICAgICAgICAgIHRpdGxlOiBgRGVsZXRlZDogJHtxdWVzdE5hbWV9YCxcbiAgICAgICAgICAgIHZhcmlhbnQ6ICdmYWlsJyxcbiAgICAgICAgICAgIGR1cmF0aW9uOiA4MDAwLFxuICAgICAgICAgICAgYWN0aW9uOiB7XG4gICAgICAgICAgICAgICAgbGFiZWw6ICdVTkRPJyxcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogKCkgPT4gdGhpcy5wbHVnaW4uZW5naW5lLnVuZG9MYXN0RGVsZXRpb24oKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBTaXN5cGh1c1NldHRpbmdzIH0gZnJvbSAnLi4vdHlwZXMnO1xuXG5leHBvcnQgY29uc3QgQ09ORklHX1ZFUlNJT04gPSAxO1xuZXhwb3J0IGNvbnN0IFNUQVRFX1ZFUlNJT04gPSAxO1xuXG5leHBvcnQgY29uc3QgS05PV05fTU9EVUxFX0lEUyA9IFtcbiAgICAnc3Vydml2YWwnLFxuICAgICdwcm9ncmVzc2lvbicsXG4gICAgJ2Vjb25vbXknLFxuICAgICdjb21iYXQnLFxuICAgICdwcm9kdWN0aXZpdHknLFxuICAgICdhbmFseXRpY3MnLFxuICAgICdyZWNvdmVyeScsXG4gICAgJ2RhaWx5X2xpZmVjeWNsZSdcbl0gYXMgY29uc3Q7XG5cbmV4cG9ydCB0eXBlIEdhbWVNb2RlID0gJ2Z1bGwnIHwgJ3BhY2lmaXN0JyB8ICd6ZW4nIHwgJ2hhcmRjb3JlJyB8ICdjdXN0b20nO1xuXG5leHBvcnQgY29uc3QgR0FNRV9NT0RFX1BSRVNFVFM6IFJlY29yZDxFeGNsdWRlPEdhbWVNb2RlLCAnY3VzdG9tJz4sIHJlYWRvbmx5IHN0cmluZ1tdPiA9IHtcbiAgICBmdWxsOiBLTk9XTl9NT0RVTEVfSURTLFxuICAgIHBhY2lmaXN0OiBbJ3N1cnZpdmFsJywgJ3Byb2dyZXNzaW9uJywgJ2Vjb25vbXknLCAncHJvZHVjdGl2aXR5JywgJ2FuYWx5dGljcycsICdyZWNvdmVyeScsICdkYWlseV9saWZlY3ljbGUnXSxcbiAgICB6ZW46IFsncHJvZHVjdGl2aXR5JywgJ2FuYWx5dGljcycsICdkYWlseV9saWZlY3ljbGUnXSxcbiAgICBoYXJkY29yZTogWydzdXJ2aXZhbCcsICdwcm9ncmVzc2lvbicsICdjb21iYXQnLCAncHJvZHVjdGl2aXR5JywgJ2FuYWx5dGljcycsICdyZWNvdmVyeScsICdkYWlseV9saWZlY3ljbGUnXSxcbn07XG5cbmV4cG9ydCBjb25zdCBHQU1FX01PREVfREVTQ1JJUFRJT05TOiBSZWNvcmQ8R2FtZU1vZGUsIHN0cmluZz4gPSB7XG4gICAgZnVsbDogJ0FsbCBzeXN0ZW1zIGFjdGl2ZSDigJQgdGhlIGNvbXBsZXRlIFNpc3lwaHVzIGV4cGVyaWVuY2UuJyxcbiAgICBwYWNpZmlzdDogJ05vIGJvc3Nlcywgbm8gcml2YWwgZGFtYWdlLiBGb2N1cyBvbiBxdWVzdHMgJiBwcm9ncmVzc2lvbi4nLFxuICAgIHplbjogJ1B1cmUgdHJhY2tpbmcuIE5vIEhQLCBnb2xkLCBvciBnYW1pZmljYXRpb24uJyxcbiAgICBoYXJkY29yZTogJ05vIGVjb25vbXkvc2hvcC4gRWFybiBldmVyeXRoaW5nIHRocm91Z2ggcHVyZSBlZmZvcnQuJyxcbiAgICBjdXN0b206ICdNaXggYW5kIG1hdGNoIG1vZHVsZXMgdG8geW91ciBsaWtpbmcuJyxcbn07XG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZUVuYWJsZWRNb2R1bGVzKHJhd0lkczogdW5rbm93bik6IHN0cmluZ1tdIHtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkocmF3SWRzKSkgcmV0dXJuIFsuLi5LTk9XTl9NT0RVTEVfSURTXTtcblxuICAgIGNvbnN0IGFsbG93ZWQgPSBuZXcgU2V0PHN0cmluZz4oS05PV05fTU9EVUxFX0lEUyk7XG4gICAgY29uc3Qgbm9ybWFsaXplZCA9IHJhd0lkc1xuICAgICAgICAuZmlsdGVyKChpZCk6IGlkIGlzIHN0cmluZyA9PiB0eXBlb2YgaWQgPT09ICdzdHJpbmcnKVxuICAgICAgICAuZmlsdGVyKChpZCkgPT4gYWxsb3dlZC5oYXMoaWQpKTtcblxuICAgIHJldHVybiBub3JtYWxpemVkLmxlbmd0aCA+IDAgPyBbLi4ubmV3IFNldChub3JtYWxpemVkKV0gOiBbLi4uS05PV05fTU9EVUxFX0lEU107XG59XG5cbmZ1bmN0aW9uIGRldGVjdEdhbWVNb2RlKGVuYWJsZWRNb2R1bGVzOiBzdHJpbmdbXSk6IEdhbWVNb2RlIHtcbiAgICBjb25zdCBzb3J0ZWQgPSBbLi4uZW5hYmxlZE1vZHVsZXNdLnNvcnQoKTtcbiAgICBmb3IgKGNvbnN0IFttb2RlLCBwcmVzZXRdIG9mIE9iamVjdC5lbnRyaWVzKEdBTUVfTU9ERV9QUkVTRVRTKSBhcyBbRXhjbHVkZTxHYW1lTW9kZSwgJ2N1c3RvbSc+LCByZWFkb25seSBzdHJpbmdbXV1bXSkge1xuICAgICAgICBjb25zdCBwcmVzZXRTb3J0ZWQgPSBbLi4ucHJlc2V0XS5zb3J0KCk7XG4gICAgICAgIGlmIChzb3J0ZWQubGVuZ3RoID09PSBwcmVzZXRTb3J0ZWQubGVuZ3RoICYmIHNvcnRlZC5ldmVyeSgoaWQsIGkpID0+IGlkID09PSBwcmVzZXRTb3J0ZWRbaV0pKSB7XG4gICAgICAgICAgICByZXR1cm4gbW9kZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gJ2N1c3RvbSc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgR2xvYmFsQ29uZmlnIHtcbiAgICBlbmFibGVkTW9kdWxlczogc3RyaW5nW107XG4gICAgZ2FtZU1vZGU6IEdhbWVNb2RlO1xuICAgIGRpZmZpY3VsdHlTY2FsZTogbnVtYmVyO1xuICAgIG11dGVBdWRpbzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQZXJzaXN0ZWRTdGF0ZSB7XG4gICAgY29uZmlnVmVyc2lvbjogbnVtYmVyO1xuICAgIHN0YXRlVmVyc2lvbjogbnVtYmVyO1xuICAgIGNvbmZpZzogR2xvYmFsQ29uZmlnO1xuICAgIHN0YXRlOiBTaXN5cGh1c1NldHRpbmdzO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1pZ3JhdGlvblJlc3VsdCB7XG4gICAgY29uZmlnOiBHbG9iYWxDb25maWc7XG4gICAgc3RhdGU6IFNpc3lwaHVzU2V0dGluZ3M7XG4gICAgbWlncmF0ZWQ6IGJvb2xlYW47XG59XG5cbmNvbnN0IERFRkFVTFRfQ09ORklHOiBHbG9iYWxDb25maWcgPSB7XG4gICAgZW5hYmxlZE1vZHVsZXM6IFsuLi5LTk9XTl9NT0RVTEVfSURTXSxcbiAgICBnYW1lTW9kZTogJ2Z1bGwnLFxuICAgIGRpZmZpY3VsdHlTY2FsZTogMSxcbiAgICBtdXRlQXVkaW86IGZhbHNlXG59O1xuXG5mdW5jdGlvbiBpc1BlcnNpc3RlZFN0YXRlKHZhbHVlOiB1bmtub3duKTogdmFsdWUgaXMgUGFydGlhbDxQZXJzaXN0ZWRTdGF0ZT4ge1xuICAgIGlmICghdmFsdWUgfHwgdHlwZW9mIHZhbHVlICE9PSAnb2JqZWN0JykgcmV0dXJuIGZhbHNlO1xuXG4gICAgY29uc3QgY2FuZGlkYXRlID0gdmFsdWUgYXMgUGFydGlhbDxQZXJzaXN0ZWRTdGF0ZT47XG4gICAgcmV0dXJuICEhY2FuZGlkYXRlLmNvbmZpZyAmJiAhIWNhbmRpZGF0ZS5zdGF0ZTtcbn1cblxuZXhwb3J0IGNsYXNzIFN0YXRlTWFuYWdlciB7XG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSByZWFkb25seSBkZWZhdWx0U3RhdGU6IFNpc3lwaHVzU2V0dGluZ3MpIHsgfVxuXG4gICAgbWlncmF0ZShyYXdEYXRhOiB1bmtub3duKTogTWlncmF0aW9uUmVzdWx0IHtcbiAgICAgICAgaWYgKGlzUGVyc2lzdGVkU3RhdGUocmF3RGF0YSkpIHtcbiAgICAgICAgICAgIGNvbnN0IG5leHRDb25maWc6IEdsb2JhbENvbmZpZyA9IHtcbiAgICAgICAgICAgICAgICAuLi5ERUZBVUxUX0NPTkZJRyxcbiAgICAgICAgICAgICAgICAuLi5yYXdEYXRhLmNvbmZpZyxcbiAgICAgICAgICAgICAgICBlbmFibGVkTW9kdWxlczogbm9ybWFsaXplRW5hYmxlZE1vZHVsZXMocmF3RGF0YS5jb25maWc/LmVuYWJsZWRNb2R1bGVzKSxcbiAgICAgICAgICAgICAgICBnYW1lTW9kZTogcmF3RGF0YS5jb25maWc/LmdhbWVNb2RlID8/IGRldGVjdEdhbWVNb2RlKG5vcm1hbGl6ZUVuYWJsZWRNb2R1bGVzKHJhd0RhdGEuY29uZmlnPy5lbmFibGVkTW9kdWxlcykpXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGNvbmZpZzogbmV4dENvbmZpZyxcbiAgICAgICAgICAgICAgICBzdGF0ZTogT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5kZWZhdWx0U3RhdGUsIHJhd0RhdGEuc3RhdGUpLFxuICAgICAgICAgICAgICAgIG1pZ3JhdGVkOiByYXdEYXRhLmNvbmZpZ1ZlcnNpb24gIT09IENPTkZJR19WRVJTSU9OIHx8IHJhd0RhdGEuc3RhdGVWZXJzaW9uICE9PSBTVEFURV9WRVJTSU9OXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbGVnYWN5U3RhdGUgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLmRlZmF1bHRTdGF0ZSwgKHJhd0RhdGEgPz8ge30pIGFzIFBhcnRpYWw8U2lzeXBodXNTZXR0aW5ncz4pO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjb25maWc6IHtcbiAgICAgICAgICAgICAgICAuLi5ERUZBVUxUX0NPTkZJRyxcbiAgICAgICAgICAgICAgICBtdXRlQXVkaW86IGxlZ2FjeVN0YXRlLm11dGVkID8/IERFRkFVTFRfQ09ORklHLm11dGVBdWRpbyxcbiAgICAgICAgICAgICAgICBlbmFibGVkTW9kdWxlczogbm9ybWFsaXplRW5hYmxlZE1vZHVsZXModW5kZWZpbmVkKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN0YXRlOiBsZWdhY3lTdGF0ZSxcbiAgICAgICAgICAgIG1pZ3JhdGVkOiB0cnVlXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgdG9QZXJzaXN0ZWRTdGF0ZShjb25maWc6IEdsb2JhbENvbmZpZywgc3RhdGU6IFNpc3lwaHVzU2V0dGluZ3MpOiBQZXJzaXN0ZWRTdGF0ZSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjb25maWdWZXJzaW9uOiBDT05GSUdfVkVSU0lPTixcbiAgICAgICAgICAgIHN0YXRlVmVyc2lvbjogU1RBVEVfVkVSU0lPTixcbiAgICAgICAgICAgIGNvbmZpZzoge1xuICAgICAgICAgICAgICAgIC4uLkRFRkFVTFRfQ09ORklHLFxuICAgICAgICAgICAgICAgIC4uLmNvbmZpZyxcbiAgICAgICAgICAgICAgICBlbmFibGVkTW9kdWxlczogbm9ybWFsaXplRW5hYmxlZE1vZHVsZXMoY29uZmlnLmVuYWJsZWRNb2R1bGVzKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN0YXRlXG4gICAgICAgIH07XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgQXBwLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgU2lzeXBodXNQbHVnaW4gZnJvbSAnLi9tYWluJztcbmltcG9ydCB7IFRlbXBsYXRlTWFuYWdlck1vZGFsIH0gZnJvbSAnLi91aS9tb2RhbHMnO1xuaW1wb3J0IHsgU3RhdGVNYW5hZ2VyLCBHQU1FX01PREVfUFJFU0VUUywgR0FNRV9NT0RFX0RFU0NSSVBUSU9OUywgR2FtZU1vZGUgfSBmcm9tICcuL2NvcmUvU3RhdGVNYW5hZ2VyJztcblxuZXhwb3J0IGNsYXNzIFNpc3lwaHVzU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuICAgIHBsdWdpbjogU2lzeXBodXNQbHVnaW47XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBTaXN5cGh1c1BsdWdpbikge1xuICAgICAgICBzdXBlcihhcHAsIHBsdWdpbik7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgIH1cblxuICAgIGRpc3BsYXkoKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRhaW5lckVsLmVtcHR5KCk7XG5cbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnU2lzeXBodXMgRW5naW5lIFNldHRpbmdzJyB9KTtcblxuICAgICAgICAvLyAtLS0gR0FNRSBNT0RFIFNFQ1RJT04gLS0tXG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0dhbWUgTW9kZScgfSk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnQWN0aXZlIE1vZGUnKVxuICAgICAgICAgICAgLnNldERlc2MoR0FNRV9NT0RFX0RFU0NSSVBUSU9OU1t0aGlzLnBsdWdpbi5jb25maWcuZ2FtZU1vZGVdKVxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1vZGVzOiBHYW1lTW9kZVtdID0gWydmdWxsJywgJ3BhY2lmaXN0JywgJ3plbicsICdoYXJkY29yZScsICdjdXN0b20nXTtcbiAgICAgICAgICAgICAgICBtb2Rlcy5mb3JFYWNoKChtb2RlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGRyb3Bkb3duLmFkZE9wdGlvbihtb2RlLCBtb2RlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgbW9kZS5zbGljZSgxKSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZHJvcGRvd24uc2V0VmFsdWUodGhpcy5wbHVnaW4uY29uZmlnLmdhbWVNb2RlKTtcbiAgICAgICAgICAgICAgICBkcm9wZG93bi5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbW9kZSA9IHZhbHVlIGFzIEdhbWVNb2RlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5jb25maWcuZ2FtZU1vZGUgPSBtb2RlO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChtb2RlICE9PSAnY3VzdG9tJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJlc2V0ID0gR0FNRV9NT0RFX1BSRVNFVFNbbW9kZSBhcyBFeGNsdWRlPEdhbWVNb2RlLCAnY3VzdG9tJz5dO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJlc2V0U2V0ID0gbmV3IFNldChwcmVzZXQpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBEaXNhYmxlIGFsbCwgdGhlbiBlbmFibGUgcHJlc2V0IG1vZHVsZXNcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLmtlcm5lbC5tb2R1bGVzLmdldEFsbCgpLmZvckVhY2goKG0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJlc2V0U2V0LmhhcyhtLmlkKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkgeyB0aGlzLnBsdWdpbi5rZXJuZWwubW9kdWxlcy5lbmFibGUobS5pZCk7IH0gY2F0Y2ggKF8pIHsgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7IHRoaXMucGx1Z2luLmtlcm5lbC5tb2R1bGVzLmRpc2FibGUobS5pZCk7IH0gY2F0Y2ggKF8pIHsgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5jb25maWcuZW5hYmxlZE1vZHVsZXMgPSBbLi4ucHJlc2V0XTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5lbmdpbmUudHJpZ2dlcigndXBkYXRlJyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpOyAvLyBSZWZyZXNoIHRvIHVwZGF0ZSB0b2dnbGUgc3RhdGVzIGFuZCBkZXNjcmlwdGlvblxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gLS0tIE1PRFVMRVMgU0VDVElPTiAtLS1cbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnTW9kdWxlcycgfSk7XG5cbiAgICAgICAgY29uc3QgbW9kdWxlcyA9IHRoaXMucGx1Z2luLmtlcm5lbD8ubW9kdWxlcy5nZXRBbGwoKSA/PyBbXTtcbiAgICAgICAgbW9kdWxlcy5mb3JFYWNoKChtb2R1bGUpID0+IHtcbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgICAgIC5zZXROYW1lKG1vZHVsZS5uYW1lKVxuICAgICAgICAgICAgICAgIC5zZXREZXNjKG1vZHVsZS5kZXNjcmlwdGlvbilcbiAgICAgICAgICAgICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZW5hYmxlZCA9IHRoaXMucGx1Z2luLmtlcm5lbC5tb2R1bGVzLmlzRW5hYmxlZChtb2R1bGUuaWQpO1xuICAgICAgICAgICAgICAgICAgICB0b2dnbGVcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShlbmFibGVkKVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4ua2VybmVsLm1vZHVsZXMuZW5hYmxlKG1vZHVsZS5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5rZXJuZWwubW9kdWxlcy5kaXNhYmxlKG1vZHVsZS5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbmFibGVkSWRzID0gdGhpcy5wbHVnaW4ua2VybmVsLm1vZHVsZXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5nZXRBbGwoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcigoZW50cnkpID0+IHRoaXMucGx1Z2luLmtlcm5lbC5tb2R1bGVzLmlzRW5hYmxlZChlbnRyeS5pZCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKChlbnRyeSkgPT4gZW50cnkuaWQpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLmNvbmZpZy5lbmFibGVkTW9kdWxlcyA9IGVuYWJsZWRJZHM7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQXV0by1zd2l0Y2ggdG8gJ2N1c3RvbScgd2hlbiBtYW51YWxseSB0b2dnbGluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5jb25maWcuZ2FtZU1vZGUgPSAnY3VzdG9tJztcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uZW5naW5lLnRyaWdnZXIoJ3VwZGF0ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTsgLy8gUmVmcmVzaCB0byBzaG93IHVwZGF0ZWQgbW9kZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYEZhaWxlZCB0byB0b2dnbGUgbW9kdWxlICcke21vZHVsZS5uYW1lfScuYCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gUmVuZGVyIHBlci1tb2R1bGUgc2V0dGluZ3MgZm9yIGVuYWJsZWQgbW9kdWxlc1xuICAgICAgICBtb2R1bGVzLmZvckVhY2goKG1vZHVsZSkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMucGx1Z2luLmtlcm5lbC5tb2R1bGVzLmlzRW5hYmxlZChtb2R1bGUuaWQpKSB7XG4gICAgICAgICAgICAgICAgbW9kdWxlLnJlbmRlclNldHRpbmdzKGNvbnRhaW5lckVsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gLS0tIEdBTUVQTEFZIFNFQ1RJT04gLS0tXG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0dhbWVwbGF5JyB9KTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdTdGFydGluZyBIUCcpXG4gICAgICAgICAgICAuc2V0RGVzYygnQmFzZSBIUCBmb3IgYSBuZXcgcnVuIChEZWZhdWx0OiAxMDApJylcbiAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PlxuICAgICAgICAgICAgICAgIHRleHQuc2V0VmFsdWUoU3RyaW5nKHRoaXMucGx1Z2luLnNldHRpbmdzLm1heEhwKSkub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG51bSA9IHBhcnNlSW50KHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubWF4SHAgPSBOdW1iZXIuaXNOYU4obnVtKSA/IDEwMCA6IG51bTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnRGlmZmljdWx0eSBTY2FsaW5nIChSaXZhbCBEYW1hZ2UpJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdTdGFydGluZyBkYW1hZ2UgcHVuaXNobWVudCBmb3IgZmFpbGVkIHF1ZXN0cyAoRGVmYXVsdDogMTApJylcbiAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PlxuICAgICAgICAgICAgICAgIHRleHQuc2V0VmFsdWUoU3RyaW5nKHRoaXMucGx1Z2luLnNldHRpbmdzLnJpdmFsRG1nKSkub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG51bSA9IHBhcnNlSW50KHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Mucml2YWxEbWcgPSBOdW1iZXIuaXNOYU4obnVtKSA/IDEwIDogbnVtO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdRdWVzdCBUZW1wbGF0ZXMnKVxuICAgICAgICAgICAgLnNldERlc2MoJ0NyZWF0ZSBvciBkZWxldGUgcXVpY2stZGVwbG95IHRlbXBsYXRlcy4nKVxuICAgICAgICAgICAgLmFkZEJ1dHRvbigoYnRuKSA9PlxuICAgICAgICAgICAgICAgIGJ0bi5zZXRCdXR0b25UZXh0KCdNYW5hZ2UgVGVtcGxhdGVzJykub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBUZW1wbGF0ZU1hbmFnZXJNb2RhbCh0aGlzLmFwcCwgdGhpcy5wbHVnaW4pLm9wZW4oKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAvLyAtLS0gQVVESU8gU0VDVElPTiAtLS1cbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnQXVkaW8nIH0pO1xuXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ011dGUgQWxsIFNvdW5kcycpXG4gICAgICAgICAgICAuc2V0RGVzYygnRGlzYWJsZSBzb3VuZCBlZmZlY3RzIGFuZCBhbWJpZW50IG5vaXNlJylcbiAgICAgICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT5cbiAgICAgICAgICAgICAgICB0b2dnbGUuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubXV0ZWQpLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5tdXRlZCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5hdWRpby5zZXRNdXRlZCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApO1xuXG4gICAgICAgIC8vIC0tLSBEQVRBIE1BTkFHRU1FTlQgU0VDVElPTiAtLS1cbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnRGF0YSBNYW5hZ2VtZW50JyB9KTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdFeHBvcnQgRnVsbCBEYXRhJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdEb3dubG9hZCBjb25maWcgYW5kIGZ1bGwgZ2FtZSBzdGF0ZSBhcyBhIEpTT04gZmlsZS4nKVxuICAgICAgICAgICAgLmFkZEJ1dHRvbigoYnRuKSA9PlxuICAgICAgICAgICAgICAgIGJ0bi5zZXRCdXR0b25UZXh0KCdFeHBvcnQgQmFja3VwJykub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0YXRlTWFuYWdlciA9IG5ldyBTdGF0ZU1hbmFnZXIodGhpcy5wbHVnaW4uc2V0dGluZ3MpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXlsb2FkID0gc3RhdGVNYW5hZ2VyLnRvUGVyc2lzdGVkU3RhdGUodGhpcy5wbHVnaW4uY29uZmlnLCB0aGlzLnBsdWdpbi5zZXR0aW5ncyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGpzb24gPSBKU09OLnN0cmluZ2lmeShwYXlsb2FkLCBudWxsLCAyKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFtqc29uXSwgeyB0eXBlOiAnYXBwbGljYXRpb24vanNvbicgfSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYW5jaG9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgICAgICAgICAgICAgICAgICBhbmNob3IuaHJlZiA9IHVybDtcbiAgICAgICAgICAgICAgICAgICAgYW5jaG9yLmRvd25sb2FkID0gYHNpc3lwaHVzX2JhY2t1cF8ke0RhdGUubm93KCl9Lmpzb25gO1xuICAgICAgICAgICAgICAgICAgICBhbmNob3IuY2xpY2soKTtcbiAgICAgICAgICAgICAgICAgICAgVVJMLnJldm9rZU9iamVjdFVSTCh1cmwpO1xuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdCYWNrdXAgZG93bmxvYWRlZC4nKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKTtcblxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdJbXBvcnQgRGF0YScpXG4gICAgICAgICAgICAuc2V0RGVzYygnUmVzdG9yZSBmcm9tIGJhY2t1cCBmaWxlLiDimqDvuI8gV0FSTklORzogT3ZlcndyaXRlcyBjdXJyZW50IHByb2dyZXNzIScpXG4gICAgICAgICAgICAuYWRkQnV0dG9uKChidG4pID0+XG4gICAgICAgICAgICAgICAgYnRuXG4gICAgICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KCdJbXBvcnQgQmFja3VwJylcbiAgICAgICAgICAgICAgICAgICAgLnNldFdhcm5pbmcoKVxuICAgICAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dC50eXBlID0gJ2ZpbGUnO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQuYWNjZXB0ID0gJy5qc29uJztcblxuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQub25jaGFuZ2UgPSBhc3luYyAoZXZlbnQ6IEV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlsZSA9IHRhcmdldC5maWxlcz8uWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZmlsZSkgcmV0dXJuO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGV4dCA9IGF3YWl0IGZpbGUudGV4dCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZSh0ZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3RhdGVNYW5hZ2VyID0gbmV3IFN0YXRlTWFuYWdlcih0aGlzLnBsdWdpbi5zZXR0aW5ncyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1pZ3JhdGVkID0gc3RhdGVNYW5hZ2VyLm1pZ3JhdGUoZGF0YSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uY29uZmlnID0gbWlncmF0ZWQuY29uZmlnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncyA9IG1pZ3JhdGVkLnN0YXRlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEtlZXAgcnVudGltZSByZWZlcmVuY2VzIGluIHN5bmNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4ua2VybmVsLmNvbmZpZyA9IHRoaXMucGx1Z2luLmNvbmZpZztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4ua2VybmVsLnN0YXRlID0gdGhpcy5wbHVnaW4uc2V0dGluZ3M7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZW5hYmxlZCA9IG5ldyBTZXQodGhpcy5wbHVnaW4uY29uZmlnLmVuYWJsZWRNb2R1bGVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4ua2VybmVsLm1vZHVsZXMuZ2V0QWxsKCkuZm9yRWFjaCgobW9kdWxlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW5hYmxlZC5oYXMobW9kdWxlLmlkKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLmtlcm5lbC5tb2R1bGVzLmVuYWJsZShtb2R1bGUuaWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5rZXJuZWwubW9kdWxlcy5kaXNhYmxlKG1vZHVsZS5pZCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5lbmdpbmUudHJpZ2dlcigndXBkYXRlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdEYXRhIGltcG9ydGVkIHN1Y2Nlc3NmdWxseSEnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdFcnJvciBpbXBvcnRpbmcgZGF0YS4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQuY2xpY2soKTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICk7XG4gICAgfVxufVxuIiwiZXhwb3J0IHR5cGUgRXZlbnRNYXAgPSBvYmplY3Q7XG5cbnR5cGUgRXZlbnRIYW5kbGVyPFQ+ID0gKHBheWxvYWQ6IFQpID0+IHZvaWQ7XG5cbmV4cG9ydCBjbGFzcyBFdmVudEJ1czxURXZlbnRzIGV4dGVuZHMgRXZlbnRNYXA+IHtcbiAgICBwcml2YXRlIGxpc3RlbmVycyA9IG5ldyBNYXA8a2V5b2YgVEV2ZW50cywgU2V0PEV2ZW50SGFuZGxlcjxhbnk+Pj4oKTtcblxuICAgIG9uPFRLZXkgZXh0ZW5kcyBrZXlvZiBURXZlbnRzPihldmVudDogVEtleSwgaGFuZGxlcjogRXZlbnRIYW5kbGVyPFRFdmVudHNbVEtleV0+KTogKCkgPT4gdm9pZCB7XG4gICAgICAgIGNvbnN0IGhhbmRsZXJzID0gdGhpcy5saXN0ZW5lcnMuZ2V0KGV2ZW50KSA/PyBuZXcgU2V0KCk7XG4gICAgICAgIGhhbmRsZXJzLmFkZChoYW5kbGVyKTtcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMuc2V0KGV2ZW50LCBoYW5kbGVycyk7XG5cbiAgICAgICAgcmV0dXJuICgpID0+IHRoaXMub2ZmKGV2ZW50LCBoYW5kbGVyKTtcbiAgICB9XG5cbiAgICBvZmY8VEtleSBleHRlbmRzIGtleW9mIFRFdmVudHM+KGV2ZW50OiBUS2V5LCBoYW5kbGVyOiBFdmVudEhhbmRsZXI8VEV2ZW50c1tUS2V5XT4pOiB2b2lkIHtcbiAgICAgICAgY29uc3QgaGFuZGxlcnMgPSB0aGlzLmxpc3RlbmVycy5nZXQoZXZlbnQpO1xuICAgICAgICBpZiAoIWhhbmRsZXJzKSByZXR1cm47XG5cbiAgICAgICAgaGFuZGxlcnMuZGVsZXRlKGhhbmRsZXIpO1xuICAgICAgICBpZiAoaGFuZGxlcnMuc2l6ZSA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5saXN0ZW5lcnMuZGVsZXRlKGV2ZW50KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGVtaXQ8VEtleSBleHRlbmRzIGtleW9mIFRFdmVudHM+KGV2ZW50OiBUS2V5LCBwYXlsb2FkOiBURXZlbnRzW1RLZXldKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IGhhbmRsZXJzID0gdGhpcy5saXN0ZW5lcnMuZ2V0KGV2ZW50KTtcbiAgICAgICAgaWYgKCFoYW5kbGVycyB8fCBoYW5kbGVycy5zaXplID09PSAwKSByZXR1cm47XG5cbiAgICAgICAgaGFuZGxlcnMuZm9yRWFjaCgocmVnaXN0ZXJlZEhhbmRsZXIpID0+IHJlZ2lzdGVyZWRIYW5kbGVyKHBheWxvYWQpKTtcbiAgICB9XG5cbiAgICBjbGVhcigpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMuY2xlYXIoKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBHYW1lTW9kdWxlIH0gZnJvbSAnLi9HYW1lTW9kdWxlJztcblxuZXhwb3J0IGNsYXNzIE1vZHVsZU1hbmFnZXIge1xuICAgIHByaXZhdGUgcmVhZG9ubHkgbW9kdWxlcyA9IG5ldyBNYXA8c3RyaW5nLCBHYW1lTW9kdWxlPigpO1xuICAgIHByaXZhdGUgcmVhZG9ubHkgZW5hYmxlZE1vZHVsZXMgPSBuZXcgU2V0PHN0cmluZz4oKTtcblxuICAgIHJlZ2lzdGVyKG1vZHVsZTogR2FtZU1vZHVsZSk6IHZvaWQge1xuICAgICAgICB0aGlzLm1vZHVsZXMuc2V0KG1vZHVsZS5pZCwgbW9kdWxlKTtcbiAgICB9XG5cbiAgICBnZXRBbGwoKTogR2FtZU1vZHVsZVtdIHtcbiAgICAgICAgcmV0dXJuIFsuLi50aGlzLm1vZHVsZXMudmFsdWVzKCldO1xuICAgIH1cblxuICAgIGdldEJ5SWQobW9kdWxlSWQ6IHN0cmluZyk6IEdhbWVNb2R1bGUgfCBudWxsIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubW9kdWxlcy5nZXQobW9kdWxlSWQpID8/IG51bGw7XG4gICAgfVxuXG4gICAgaXNFbmFibGVkKG1vZHVsZUlkOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5hYmxlZE1vZHVsZXMuaGFzKG1vZHVsZUlkKTtcbiAgICB9XG5cbiAgICBlbmFibGUobW9kdWxlSWQ6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICBjb25zdCBtb2R1bGUgPSB0aGlzLm1vZHVsZXMuZ2V0KG1vZHVsZUlkKTtcbiAgICAgICAgaWYgKCFtb2R1bGUgfHwgdGhpcy5lbmFibGVkTW9kdWxlcy5oYXMobW9kdWxlSWQpKSByZXR1cm47XG5cbiAgICAgICAgY29uc3Qgc29ydGVkRGVwZW5kZW5jaWVzID0gdGhpcy5yZXNvbHZlRGVwZW5kZW5jaWVzKG1vZHVsZUlkKTtcbiAgICAgICAgc29ydGVkRGVwZW5kZW5jaWVzLmZvckVhY2goKGlkKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5lbmFibGVkTW9kdWxlcy5oYXMoaWQpKSByZXR1cm47XG4gICAgICAgICAgICBjb25zdCBkZXBlbmRlbmN5ID0gdGhpcy5tb2R1bGVzLmdldChpZCk7XG4gICAgICAgICAgICBpZiAoIWRlcGVuZGVuY3kpIHJldHVybjtcblxuICAgICAgICAgICAgZGVwZW5kZW5jeS5vbkVuYWJsZSgpO1xuICAgICAgICAgICAgdGhpcy5lbmFibGVkTW9kdWxlcy5hZGQoaWQpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBkaXNhYmxlKG1vZHVsZUlkOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgaWYgKCF0aGlzLmVuYWJsZWRNb2R1bGVzLmhhcyhtb2R1bGVJZCkpIHJldHVybjtcblxuICAgICAgICBjb25zdCBkZXBlbmRlbnRzID0gdGhpcy5maW5kRGVwZW5kZW50cyhtb2R1bGVJZCk7XG4gICAgICAgIGRlcGVuZGVudHMuZm9yRWFjaCgoZGVwZW5kZW50SWQpID0+IHRoaXMuZGlzYWJsZShkZXBlbmRlbnRJZCkpO1xuXG4gICAgICAgIGNvbnN0IG1vZHVsZSA9IHRoaXMubW9kdWxlcy5nZXQobW9kdWxlSWQpO1xuICAgICAgICBpZiAoIW1vZHVsZSkgcmV0dXJuO1xuXG4gICAgICAgIG1vZHVsZS5vbkRpc2FibGUoKTtcbiAgICAgICAgdGhpcy5lbmFibGVkTW9kdWxlcy5kZWxldGUobW9kdWxlSWQpO1xuICAgIH1cblxuICAgIGRpc2FibGVBbGwoKTogdm9pZCB7XG4gICAgICAgIFsuLi50aGlzLmVuYWJsZWRNb2R1bGVzXS5mb3JFYWNoKChtb2R1bGVJZCkgPT4gdGhpcy5kaXNhYmxlKG1vZHVsZUlkKSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZXNvbHZlRGVwZW5kZW5jaWVzKG1vZHVsZUlkOiBzdHJpbmcpOiBzdHJpbmdbXSB7XG4gICAgICAgIGNvbnN0IHNvcnRlZDogc3RyaW5nW10gPSBbXTtcbiAgICAgICAgY29uc3QgdmlzaXRpbmcgPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgICAgICAgY29uc3QgdmlzaXRlZCA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuXG4gICAgICAgIGNvbnN0IHZpc2l0ID0gKGlkOiBzdHJpbmcpOiB2b2lkID0+IHtcbiAgICAgICAgICAgIGlmICh2aXNpdGVkLmhhcyhpZCkpIHJldHVybjtcbiAgICAgICAgICAgIGlmICh2aXNpdGluZy5oYXMoaWQpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDaXJjdWxhciBtb2R1bGUgZGVwZW5kZW5jeSBkZXRlY3RlZCBmb3IgbW9kdWxlOiAke2lkfWApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2aXNpdGluZy5hZGQoaWQpO1xuICAgICAgICAgICAgY29uc3QgbW9kdWxlID0gdGhpcy5tb2R1bGVzLmdldChpZCk7XG4gICAgICAgICAgICBpZiAoIW1vZHVsZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgTWlzc2luZyBkZXBlbmRlbmN5IG1vZHVsZTogJHtpZH1gKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbW9kdWxlLmRlcGVuZGVuY2llcy5mb3JFYWNoKChkZXBlbmRlbmN5SWQpID0+IHZpc2l0KGRlcGVuZGVuY3lJZCkpO1xuICAgICAgICAgICAgdmlzaXRpbmcuZGVsZXRlKGlkKTtcbiAgICAgICAgICAgIHZpc2l0ZWQuYWRkKGlkKTtcbiAgICAgICAgICAgIHNvcnRlZC5wdXNoKGlkKTtcbiAgICAgICAgfTtcblxuICAgICAgICB2aXNpdChtb2R1bGVJZCk7XG4gICAgICAgIHJldHVybiBzb3J0ZWQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBmaW5kRGVwZW5kZW50cyhtb2R1bGVJZDogc3RyaW5nKTogc3RyaW5nW10ge1xuICAgICAgICBjb25zdCBkZXBlbmRlbnRzOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgICB0aGlzLm1vZHVsZXMuZm9yRWFjaCgobW9kdWxlKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuZW5hYmxlZE1vZHVsZXMuaGFzKG1vZHVsZS5pZCkpIHJldHVybjtcbiAgICAgICAgICAgIGlmIChtb2R1bGUuZGVwZW5kZW5jaWVzLmluY2x1ZGVzKG1vZHVsZUlkKSkge1xuICAgICAgICAgICAgICAgIGRlcGVuZGVudHMucHVzaChtb2R1bGUuaWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGRlcGVuZGVudHM7XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgU2lzeXBodXNTZXR0aW5ncyB9IGZyb20gJy4uL3R5cGVzJztcbmltcG9ydCB7IEV2ZW50QnVzIH0gZnJvbSAnLi9FdmVudEJ1cyc7XG5pbXBvcnQgeyBHYW1lTW9kdWxlIH0gZnJvbSAnLi9HYW1lTW9kdWxlJztcbmltcG9ydCB7IEdsb2JhbENvbmZpZywgU3RhdGVNYW5hZ2VyIH0gZnJvbSAnLi9TdGF0ZU1hbmFnZXInO1xuaW1wb3J0IHsgTW9kdWxlTWFuYWdlciB9IGZyb20gJy4vTW9kdWxlTWFuYWdlcic7XG5pbXBvcnQgeyBLZXJuZWxTZXJ2aWNlTWFwIH0gZnJvbSAnLi9zZXJ2aWNlcyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgS2VybmVsRXZlbnRzIHtcbiAgICAnY2xvY2s6dGljayc6IHsgbm93OiBzdHJpbmcgfTtcbiAgICAnc2Vzc2lvbjpzdGFydCc6IHsgbm93OiBzdHJpbmcgfTtcbiAgICAncXVlc3Q6Y29tcGxldGVkJzoge1xuICAgICAgICBxdWVzdElkOiBzdHJpbmc7XG4gICAgICAgIGRpZmZpY3VsdHk6IG51bWJlcjtcbiAgICAgICAgc2tpbGxOYW1lOiBzdHJpbmc7XG4gICAgICAgIHNlY29uZGFyeVNraWxsOiBzdHJpbmc7XG4gICAgICAgIGhpZ2hTdGFrZXM6IGJvb2xlYW47XG4gICAgICAgIGlzQm9zczogYm9vbGVhbjtcbiAgICAgICAgYm9zc0xldmVsOiBudW1iZXIgfCBudWxsO1xuICAgICAgICB4cFJld2FyZDogbnVtYmVyO1xuICAgICAgICBnb2xkUmV3YXJkOiBudW1iZXI7XG4gICAgfTtcbiAgICAncmV3YXJkOmdyYW50ZWQnOiB7XG4gICAgICAgIHhwOiBudW1iZXI7XG4gICAgICAgIGdvbGQ6IG51bWJlcjtcbiAgICAgICAgcmVhc29uOiBzdHJpbmc7XG4gICAgfTtcbiAgICAncXVlc3Q6ZmFpbGVkJzoge1xuICAgICAgICBxdWVzdElkOiBzdHJpbmc7XG4gICAgICAgIHJlYXNvbj86IHN0cmluZztcbiAgICAgICAgZGFtYWdlOiBudW1iZXI7XG4gICAgICAgIG1hbnVhbEFib3J0OiBib29sZWFuO1xuICAgICAgICBib3NzSHBQZW5hbHR5OiBudW1iZXI7XG4gICAgfTtcbiAgICAnZmlsZTptb2RpZmllZCc6IHsgcGF0aDogc3RyaW5nIH07XG59XG5cbmludGVyZmFjZSBLZXJuZWxDb250ZXh0IHtcbiAgICBjb25maWc6IEdsb2JhbENvbmZpZztcbiAgICBzdGF0ZTogU2lzeXBodXNTZXR0aW5ncztcbiAgICBzYXZlOiAoY29uZmlnOiBHbG9iYWxDb25maWcsIHN0YXRlOiBTaXN5cGh1c1NldHRpbmdzKSA9PiBQcm9taXNlPHZvaWQ+O1xuICAgIHNlcnZpY2VzPzogUGFydGlhbDxLZXJuZWxTZXJ2aWNlTWFwPjtcbn1cblxuZXhwb3J0IGNsYXNzIFNpc3lwaHVzS2VybmVsIHtcbiAgICByZWFkb25seSBldmVudHMgPSBuZXcgRXZlbnRCdXM8S2VybmVsRXZlbnRzPigpO1xuICAgIHJlYWRvbmx5IG1vZHVsZXMgPSBuZXcgTW9kdWxlTWFuYWdlcigpO1xuICAgIHJlYWRvbmx5IHN0YXRlTWFuYWdlcjogU3RhdGVNYW5hZ2VyO1xuXG4gICAgcHJpdmF0ZSByZWFkb25seSBzZXJ2aWNlczogUGFydGlhbDxLZXJuZWxTZXJ2aWNlTWFwPjtcblxuICAgIGNvbmZpZzogR2xvYmFsQ29uZmlnO1xuICAgIHN0YXRlOiBTaXN5cGh1c1NldHRpbmdzO1xuXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSByZWFkb25seSBjb250ZXh0OiBLZXJuZWxDb250ZXh0KSB7XG4gICAgICAgIHRoaXMuY29uZmlnID0gY29udGV4dC5jb25maWc7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBjb250ZXh0LnN0YXRlO1xuICAgICAgICB0aGlzLnN0YXRlTWFuYWdlciA9IG5ldyBTdGF0ZU1hbmFnZXIodGhpcy5zdGF0ZSk7XG4gICAgICAgIHRoaXMuc2VydmljZXMgPSB7IC4uLihjb250ZXh0LnNlcnZpY2VzID8/IHt9KSB9O1xuICAgIH1cblxuXG4gICAgc2V0U2VydmljZTxLIGV4dGVuZHMga2V5b2YgS2VybmVsU2VydmljZU1hcD4obmFtZTogSywgc2VydmljZTogS2VybmVsU2VydmljZU1hcFtLXSk6IHZvaWQge1xuICAgICAgICB0aGlzLnNlcnZpY2VzW25hbWVdID0gc2VydmljZTtcbiAgICB9XG5cbiAgICBnZXRTZXJ2aWNlPEsgZXh0ZW5kcyBrZXlvZiBLZXJuZWxTZXJ2aWNlTWFwPihuYW1lOiBLKTogS2VybmVsU2VydmljZU1hcFtLXSB8IG51bGwge1xuICAgICAgICByZXR1cm4gKHRoaXMuc2VydmljZXNbbmFtZV0gYXMgS2VybmVsU2VydmljZU1hcFtLXSB8IHVuZGVmaW5lZCkgPz8gbnVsbDtcbiAgICB9XG5cbiAgICByZWdpc3Rlck1vZHVsZShtb2R1bGU6IEdhbWVNb2R1bGUpOiB2b2lkIHtcbiAgICAgICAgbW9kdWxlLm9uTG9hZCh0aGlzKTtcbiAgICAgICAgdGhpcy5tb2R1bGVzLnJlZ2lzdGVyKG1vZHVsZSk7XG4gICAgfVxuXG4gICAgZW5hYmxlQ29uZmlndXJlZE1vZHVsZXMoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuY29uZmlnLmVuYWJsZWRNb2R1bGVzLmZvckVhY2goKG1vZHVsZUlkKSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRoaXMubW9kdWxlcy5lbmFibGUobW9kdWxlSWQpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBbU2lzeXBodXNLZXJuZWxdIENvdWxkIG5vdCBlbmFibGUgbW9kdWxlICcke21vZHVsZUlkfScuYCwgZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBhc3luYyBwZXJzaXN0KCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBhd2FpdCB0aGlzLmNvbnRleHQuc2F2ZSh0aGlzLmNvbmZpZywgdGhpcy5zdGF0ZSk7XG4gICAgfVxuXG4gICAgc2h1dGRvd24oKTogdm9pZCB7XG4gICAgICAgIHRoaXMubW9kdWxlcy5kaXNhYmxlQWxsKCk7XG4gICAgICAgIHRoaXMubW9kdWxlcy5nZXRBbGwoKS5mb3JFYWNoKChtb2R1bGUpID0+IG1vZHVsZS5vblVubG9hZCgpKTtcbiAgICAgICAgdGhpcy5ldmVudHMuY2xlYXIoKTtcbiAgICB9XG5cbiAgICBpc01vZHVsZUVuYWJsZWQobW9kdWxlSWQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5tb2R1bGVzLmlzRW5hYmxlZChtb2R1bGVJZCk7XG4gICAgfVxufVxuIiwiLyoqXG4gKiBBY2hpZXZlbWVudEVuZ2luZSDigJQgQ2hlY2tzIGFuZCB1bmxvY2tzIGFjaGlldmVtZW50cyBiYXNlZCBvbiBnYW1lIHN0YXRlLlxuICovXG5pbXBvcnQgeyBTaXN5cGh1c1NldHRpbmdzLCBBY2hpZXZlbWVudCB9IGZyb20gJy4uL3R5cGVzJztcbmltcG9ydCB7IEFDSElFVkVNRU5UX0RFRklOSVRJT05TIH0gZnJvbSAnLi4vYWNoaWV2ZW1lbnRzJztcbmltcG9ydCB7IHNob3dUb2FzdCwgZmxvYXRSZXdhcmQgfSBmcm9tICcuLi91aS9lZmZlY3RzJztcblxuZXhwb3J0IGNsYXNzIEFjaGlldmVtZW50RW5naW5lIHtcblxuICAgIC8qKiBJbml0aWFsaXplIGFjaGlldmVtZW50cyBpZiBub3QgcHJlc2VudCAqL1xuICAgIHN0YXRpYyBpbml0KHNldHRpbmdzOiBTaXN5cGh1c1NldHRpbmdzKTogdm9pZCB7XG4gICAgICAgIGlmICghc2V0dGluZ3MuYWNoaWV2ZW1lbnRzIHx8IHNldHRpbmdzLmFjaGlldmVtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHNldHRpbmdzLmFjaGlldmVtZW50cyA9IEFDSElFVkVNRU5UX0RFRklOSVRJT05TLm1hcChkZWYgPT4gKHtcbiAgICAgICAgICAgICAgICAuLi5kZWYsXG4gICAgICAgICAgICAgICAgdW5sb2NrZWQ6IGZhbHNlLFxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIC8vIEFkZCBhbnkgbmV3IGRlZmluaXRpb25zIG5vdCB5ZXQgaW4gc2V0dGluZ3NcbiAgICAgICAgY29uc3QgZXhpc3RpbmdJZHMgPSBuZXcgU2V0KHNldHRpbmdzLmFjaGlldmVtZW50cy5tYXAoYSA9PiBhLmlkKSk7XG4gICAgICAgIEFDSElFVkVNRU5UX0RFRklOSVRJT05TLmZvckVhY2goZGVmID0+IHtcbiAgICAgICAgICAgIGlmICghZXhpc3RpbmdJZHMuaGFzKGRlZi5pZCkpIHtcbiAgICAgICAgICAgICAgICBzZXR0aW5ncy5hY2hpZXZlbWVudHMucHVzaCh7IC4uLmRlZiwgdW5sb2NrZWQ6IGZhbHNlIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKiogQ2hlY2sgYWxsIGFjaGlldmVtZW50cywgdW5sb2NrIGFueSBuZXdseSBtZXQgKi9cbiAgICBzdGF0aWMgY2hlY2tBbGwoc2V0dGluZ3M6IFNpc3lwaHVzU2V0dGluZ3MpOiBBY2hpZXZlbWVudFtdIHtcbiAgICAgICAgY29uc3QgbmV3bHlVbmxvY2tlZDogQWNoaWV2ZW1lbnRbXSA9IFtdO1xuXG4gICAgICAgIHNldHRpbmdzLmFjaGlldmVtZW50cy5mb3JFYWNoKGFjaCA9PiB7XG4gICAgICAgICAgICBpZiAoYWNoLnVubG9ja2VkKSByZXR1cm47XG4gICAgICAgICAgICBpZiAodGhpcy5ldmFsdWF0ZShhY2guaWQsIHNldHRpbmdzKSkge1xuICAgICAgICAgICAgICAgIGFjaC51bmxvY2tlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgYWNoLnVubG9ja2VkQXQgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgbmV3bHlVbmxvY2tlZC5wdXNoKGFjaCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFNob3cgY2VsZWJyYXRpb25zIGZvciBuZXdseSB1bmxvY2tlZFxuICAgICAgICBuZXdseVVubG9ja2VkLmZvckVhY2goYWNoID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJhcml0eUNvbG9yczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgICAgICAgICAgICAgICBjb21tb246ICd2YXIoLS1zaXN5LWdyZWVuKScsXG4gICAgICAgICAgICAgICAgcmFyZTogJ3ZhcigtLXNpc3ktYmx1ZSknLFxuICAgICAgICAgICAgICAgIGVwaWM6ICd2YXIoLS1zaXN5LXB1cnBsZSknLFxuICAgICAgICAgICAgICAgIGxlZ2VuZGFyeTogJ3ZhcigtLXNpc3ktZ29sZCknLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHJhcml0eUljb25zOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICAgICAgICAgICAgICAgIGNvbW1vbjogJ/Cfj4UnLFxuICAgICAgICAgICAgICAgIHJhcmU6ICfwn5KOJyxcbiAgICAgICAgICAgICAgICBlcGljOiAn8J+RkScsXG4gICAgICAgICAgICAgICAgbGVnZW5kYXJ5OiAn4q2QJyxcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHNob3dUb2FzdCh7XG4gICAgICAgICAgICAgICAgaWNvbjogcmFyaXR5SWNvbnNbYWNoLnJhcml0eV0gfHwgJ/Cfj4YnLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBgQWNoaWV2ZW1lbnQgVW5sb2NrZWQhYCxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBgJHthY2gubmFtZX0g4oCUICR7YWNoLmRlc2NyaXB0aW9ufWAsXG4gICAgICAgICAgICAgICAgdmFyaWFudDogYWNoLnJhcml0eSA9PT0gJ2xlZ2VuZGFyeScgPyAnbGV2ZWwnIDogYWNoLnJhcml0eSA9PT0gJ2VwaWMnID8gJ3hwJyA6ICdzdWNjZXNzJyxcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogYWNoLnJhcml0eSA9PT0gJ2xlZ2VuZGFyeScgPyA4MDAwIDogNTAwMCxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBmbG9hdFJld2FyZChg8J+PhiAke2FjaC5uYW1lfWAsICd4cCcpO1xuXG4gICAgICAgICAgICAvLyBGdWxsLXNjcmVlbiBvdmVybGF5IGZvciBlcGljKyBhY2hpZXZlbWVudHNcbiAgICAgICAgICAgIGlmIChhY2gucmFyaXR5ID09PSAnZXBpYycgfHwgYWNoLnJhcml0eSA9PT0gJ2xlZ2VuZGFyeScpIHtcbiAgICAgICAgICAgICAgICBBY2hpZXZlbWVudEVuZ2luZS5zaG93VW5sb2NrT3ZlcmxheShhY2gsIHJhcml0eUNvbG9yc1thY2gucmFyaXR5XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBuZXdseVVubG9ja2VkO1xuICAgIH1cblxuICAgIC8qKiBFdmFsdWF0ZSBhIHNpbmdsZSBhY2hpZXZlbWVudCBjb25kaXRpb24gKi9cbiAgICBwcml2YXRlIHN0YXRpYyBldmFsdWF0ZShpZDogc3RyaW5nLCBzOiBTaXN5cGh1c1NldHRpbmdzKTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IHRvdGFsUXVlc3RzID0gcy5kYXlNZXRyaWNzLnJlZHVjZSgoc3VtLCBkKSA9PiBzdW0gKyBkLnF1ZXN0c0NvbXBsZXRlZCwgMCk7XG4gICAgICAgIGNvbnN0IHRvdGFsUmVzZWFyY2hlcyA9IHMucmVzZWFyY2hRdWVzdHMuZmlsdGVyKHIgPT4gci5jb21wbGV0ZWQpLmxlbmd0aDtcbiAgICAgICAgY29uc3QgYm9zc2VzRGVmZWF0ZWQgPSAocy5ib3NzTWlsZXN0b25lcyB8fCBbXSkuZmlsdGVyKGIgPT4gYi5kZWZlYXRlZCkubGVuZ3RoO1xuICAgICAgICBjb25zdCBtYXhTa2lsbExldmVsID0gcy5za2lsbHMubGVuZ3RoID4gMCA/IE1hdGgubWF4KC4uLnMuc2tpbGxzLm1hcChzayA9PiBzay5sZXZlbCkpIDogMDtcbiAgICAgICAgY29uc3QgY2hhaW5zRG9uZSA9IChzLmNoYWluSGlzdG9yeSB8fCBbXSkubGVuZ3RoO1xuXG4gICAgICAgIHN3aXRjaCAoaWQpIHtcbiAgICAgICAgICAgIC8vIENvbW1vblxuICAgICAgICAgICAgY2FzZSAnZmlyc3RfYmxvb2QnOiByZXR1cm4gdG90YWxRdWVzdHMgPj0gMTtcbiAgICAgICAgICAgIGNhc2UgJ3dlZWtfd2Fycmlvcic6IHJldHVybiAocy5zdHJlYWs/LmN1cnJlbnQgfHwgMCkgPj0gNztcbiAgICAgICAgICAgIGNhc2UgJ3dhcm1fdXAnOiByZXR1cm4gdG90YWxRdWVzdHMgPj0gMTA7XG4gICAgICAgICAgICBjYXNlICduaWdodF9vd2wnOiByZXR1cm4gdGhpcy5oYXNOaWdodE93bChzKTtcbiAgICAgICAgICAgIGNhc2UgJ2Vhcmx5X2JpcmQnOiByZXR1cm4gdGhpcy5oYXNFYXJseUJpcmQocyk7XG4gICAgICAgICAgICBjYXNlICd0cmlwbGVfdGhyZWF0JzogcmV0dXJuIHMucXVlc3RzQ29tcGxldGVkVG9kYXkgPj0gMztcblxuICAgICAgICAgICAgLy8gUmFyZVxuICAgICAgICAgICAgY2FzZSAnc2tpbGxfYWRlcHQnOiByZXR1cm4gbWF4U2tpbGxMZXZlbCA+PSA1O1xuICAgICAgICAgICAgY2FzZSAnY2hhaW5fZ2FuZyc6IHJldHVybiBjaGFpbnNEb25lID49IDE7XG4gICAgICAgICAgICBjYXNlICdyZXNlYXJjaGVyJzogcmV0dXJuIHRvdGFsUmVzZWFyY2hlcyA+PSA1O1xuICAgICAgICAgICAgY2FzZSAncmljaCc6IHJldHVybiBzLmdvbGQgPj0gNTAwO1xuICAgICAgICAgICAgY2FzZSAnY29tYm9fa2luZyc6IHJldHVybiBzLmNvbWJvQ291bnQgPj0gNTtcbiAgICAgICAgICAgIGNhc2UgJ3NwZWVkX2RlbW9uJzogcmV0dXJuIHRoaXMuaGFzU3BlZWREZW1vbihzKTtcbiAgICAgICAgICAgIGNhc2UgJ3BlcmZlY3Rpb25pc3QnOiByZXR1cm4gdGhpcy5oYXNQZXJmZWN0V2VlayhzKTtcbiAgICAgICAgICAgIGNhc2UgJ2lyb25fc3RyZWFrJzogcmV0dXJuIChzLnN0cmVhaz8uY3VycmVudCB8fCAwKSA+PSAxNDtcblxuICAgICAgICAgICAgLy8gRXBpY1xuICAgICAgICAgICAgY2FzZSAnYm9zc19zbGF5ZXInOiByZXR1cm4gYm9zc2VzRGVmZWF0ZWQgPj0gMTtcbiAgICAgICAgICAgIGNhc2UgJ3NraWxsX21hc3Rlcic6IHJldHVybiBtYXhTa2lsbExldmVsID49IDEwO1xuICAgICAgICAgICAgY2FzZSAnY2VudHVyeSc6IHJldHVybiB0b3RhbFF1ZXN0cyA+PSAxMDA7XG4gICAgICAgICAgICBjYXNlICdwaG9lbml4JzogcmV0dXJuIHMubGVnYWN5LmRlYXRoQ291bnQgPj0gMSAmJiBzLmxldmVsID49IDEwO1xuICAgICAgICAgICAgY2FzZSAncmVzZWFyY2hfcHJvZmVzc29yJzogcmV0dXJuIHRvdGFsUmVzZWFyY2hlcyA+PSAyMDtcbiAgICAgICAgICAgIGNhc2UgJ2dvbGRfaG9hcmRlcic6IHJldHVybiBzLmdvbGQgPj0gMjAwMDtcblxuICAgICAgICAgICAgLy8gTGVnZW5kYXJ5XG4gICAgICAgICAgICBjYXNlICdhc2NlbmRlZCc6IHJldHVybiBzLmxldmVsID49IDUwO1xuICAgICAgICAgICAgY2FzZSAnaW1tb3J0YWwnOiByZXR1cm4gcy5sZXZlbCA+PSAyMCAmJiBzLmxlZ2FjeS5kZWF0aENvdW50ID09PSAwO1xuICAgICAgICAgICAgY2FzZSAnY29tcGxldGlvbmlzdCc6IHJldHVybiBzLmFjaGlldmVtZW50cy5maWx0ZXIoYSA9PiBhLnVubG9ja2VkICYmIGEucmFyaXR5ICE9PSAnbGVnZW5kYXJ5JykubGVuZ3RoID49IChzLmFjaGlldmVtZW50cy5sZW5ndGggLSAzKTtcbiAgICAgICAgICAgIGNhc2UgJ21hcmF0aG9uJzogcmV0dXJuIChzLnN0cmVhaz8uY3VycmVudCB8fCAwKSA+PSAzMDtcbiAgICAgICAgICAgIGNhc2UgJ2dyYW5kX21hc3Rlcic6IHJldHVybiBzLnNraWxscy5maWx0ZXIoc2sgPT4gc2subGV2ZWwgPj0gMTApLmxlbmd0aCA+PSA1O1xuXG4gICAgICAgICAgICBkZWZhdWx0OiByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHN0YXRpYyBoYXNOaWdodE93bChzOiBTaXN5cGh1c1NldHRpbmdzKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBzLmRheU1ldHJpY3Muc29tZShkID0+IGQuaG91cmx5Q29tcGxldGlvbnMgJiYgKGQuaG91cmx5Q29tcGxldGlvbnNbMjJdID4gMCB8fCBkLmhvdXJseUNvbXBsZXRpb25zWzIzXSA+IDAgfHwgZC5ob3VybHlDb21wbGV0aW9uc1swXSA+IDApKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHN0YXRpYyBoYXNFYXJseUJpcmQoczogU2lzeXBodXNTZXR0aW5ncyk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gcy5kYXlNZXRyaWNzLnNvbWUoZCA9PiBkLmhvdXJseUNvbXBsZXRpb25zICYmIChkLmhvdXJseUNvbXBsZXRpb25zWzVdID4gMCB8fCBkLmhvdXJseUNvbXBsZXRpb25zWzZdID4gMCkpO1xuICAgIH1cblxuICAgIHByaXZhdGUgc3RhdGljIGhhc1NwZWVkRGVtb24oczogU2lzeXBodXNTZXR0aW5ncyk6IGJvb2xlYW4ge1xuICAgICAgICAvLyBDb21wbGV0ZWQgNSsgcXVlc3RzIGluIG9uZSBkYXlcbiAgICAgICAgcmV0dXJuIHMuZGF5TWV0cmljcy5zb21lKGQgPT4gZC5xdWVzdHNDb21wbGV0ZWQgPj0gNSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzdGF0aWMgaGFzUGVyZmVjdFdlZWsoczogU2lzeXBodXNTZXR0aW5ncyk6IGJvb2xlYW4ge1xuICAgICAgICAvLyA3IGNvbnNlY3V0aXZlIGRheXMgd2l0aCBhdCBsZWFzdCAxIHF1ZXN0LCAwIGZhaWx1cmVzXG4gICAgICAgIGNvbnN0IHNvcnRlZCA9IFsuLi5zLmRheU1ldHJpY3NdLnNvcnQoKGEsIGIpID0+IGEuZGF0ZS5sb2NhbGVDb21wYXJlKGIuZGF0ZSkpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8PSBzb3J0ZWQubGVuZ3RoIC0gNzsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBzbGljZSA9IHNvcnRlZC5zbGljZShpLCBpICsgNyk7XG4gICAgICAgICAgICBpZiAoc2xpY2UuZXZlcnkoZCA9PiBkLnF1ZXN0c0NvbXBsZXRlZCA+IDAgJiYgZC5xdWVzdHNGYWlsZWQgPT09IDApKSByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLyoqIEZ1bGwtc2NyZWVuIGFjaGlldmVtZW50IHVubG9jayBvdmVybGF5ICovXG4gICAgc3RhdGljIHNob3dVbmxvY2tPdmVybGF5KGFjaDogQWNoaWV2ZW1lbnQsIGNvbG9yOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBvdmVybGF5LmNsYXNzTmFtZSA9ICdzaXN5LWFjaGlldmVtZW50LW92ZXJsYXknO1xuICAgICAgICBvdmVybGF5LnN0eWxlLnNldFByb3BlcnR5KCctLWFjaC1jb2xvcicsIGNvbG9yKTtcblxuICAgICAgICBvdmVybGF5LmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzaXN5LWFjaGlldmVtZW50LW92ZXJsYXktY29udGVudFwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzaXN5LWFjaGlldmVtZW50LXJhcml0eVwiPiR7YWNoLnJhcml0eS50b1VwcGVyQ2FzZSgpfTwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzaXN5LWFjaGlldmVtZW50LWljb25cIj7wn4+GPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInNpc3ktYWNoaWV2ZW1lbnQtbmFtZVwiPiR7YWNoLm5hbWV9PC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInNpc3ktYWNoaWV2ZW1lbnQtZGVzY1wiPiR7YWNoLmRlc2NyaXB0aW9ufTwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIGA7XG5cbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChvdmVybGF5KTtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBvdmVybGF5LmNsYXNzTGlzdC5hZGQoJ3Npc3ktYWNoaWV2ZW1lbnQtb3ZlcmxheS1leGl0Jyk7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IG92ZXJsYXkucmVtb3ZlKCksIDUwMCk7XG4gICAgICAgIH0sIDMwMDApO1xuICAgIH1cbn1cbiIsIi8qKlxuICogQ2hhcmFjdGVyIFNoZWV0IC8gUHJvZmlsZSBNb2RhbCDigJQgRnVsbCBzdGF0cyBvdmVydmlldy5cbiAqL1xuaW1wb3J0IHsgQXBwLCBNb2RhbCwgbW9tZW50IH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IFNpc3lwaHVzUGx1Z2luIGZyb20gJy4uL21haW4nO1xuaW1wb3J0IHsgQ2hhcnRSZW5kZXJlciB9IGZyb20gJy4vY2hhcnRzJztcblxuZXhwb3J0IGNsYXNzIFByb2ZpbGVNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgICBwbHVnaW46IFNpc3lwaHVzUGx1Z2luO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogU2lzeXBodXNQbHVnaW4pIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgfVxuXG4gICAgb25PcGVuKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgY29uc3QgcyA9IHRoaXMucGx1Z2luLnNldHRpbmdzO1xuICAgICAgICBjb250ZW50RWwuYWRkQ2xhc3MoJ3Npc3ktcHJvZmlsZScpO1xuXG4gICAgICAgIC8vIC0tLSBIRUFERVIgLS0tXG4gICAgICAgIGNvbnN0IGhlcm8gPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnc2lzeS1wcm9maWxlLWhlcm8nIH0pO1xuICAgICAgICBjb25zdCB0b3BTa2lsbCA9IHMuc2tpbGxzLmxlbmd0aCA+IDAgPyBbLi4ucy5za2lsbHNdLnNvcnQoKGEsIGIpID0+IGIubGV2ZWwgLSBhLmxldmVsKVswXSA6IG51bGw7XG4gICAgICAgIGNvbnN0IGNsYXNzVGl0bGUgPSB0b3BTa2lsbCA/IHRoaXMuZGVyaXZlQ2xhc3ModG9wU2tpbGwubmFtZSwgdG9wU2tpbGwubGV2ZWwpIDogJ1VudHJhaW5lZCc7XG4gICAgICAgIGNvbnN0IGFjaGlldmVtZW50Q291bnQgPSBzLmFjaGlldmVtZW50cz8uZmlsdGVyKGEgPT4gYS51bmxvY2tlZCkubGVuZ3RoIHx8IDA7XG4gICAgICAgIGNvbnN0IHRpdGxlRnJvbUFjaCA9IHRoaXMuZGVyaXZlVGl0bGUoYWNoaWV2ZW1lbnRDb3VudCwgcy5sZXZlbCk7XG5cbiAgICAgICAgaGVyby5jcmVhdGVEaXYoeyB0ZXh0OiBg4pqU77iPYCwgY2xzOiAnc2lzeS1wcm9maWxlLWF2YXRhcicgfSk7XG4gICAgICAgIGhlcm8uY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiB0aXRsZUZyb21BY2gsIGNsczogJ3Npc3ktcHJvZmlsZS10aXRsZScgfSk7XG4gICAgICAgIGhlcm8uY3JlYXRlRGl2KHsgdGV4dDogYENsYXNzOiAke2NsYXNzVGl0bGV9YCwgY2xzOiAnc2lzeS1wcm9maWxlLWNsYXNzJyB9KTtcbiAgICAgICAgaGVyby5jcmVhdGVEaXYoeyB0ZXh0OiBgTGV2ZWwgJHtzLmxldmVsfSDCtyBSdW4gIyR7cy5ydW5Db3VudCArIDF9IMK3ICR7cy5sZWdhY3kuZGVhdGhDb3VudH0gRGVhdGhzYCwgY2xzOiAnc2lzeS1wcm9maWxlLXN1YnRpdGxlJyB9KTtcblxuICAgICAgICAvLyAtLS0gU1RBVCBHUklEIC0tLVxuICAgICAgICBjb25zdCBzdGF0cyA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6ICdzaXN5LXByb2ZpbGUtc3RhdHMnIH0pO1xuICAgICAgICB0aGlzLnN0YXRCb3goc3RhdHMsICfinaTvuI8nLCAnSFAnLCBgJHtzLmhwfS8ke3MubWF4SHB9YCk7XG4gICAgICAgIHRoaXMuc3RhdEJveChzdGF0cywgJ+KaoScsICdYUCcsIGAke3MueHB9LyR7cy54cFJlcX1gKTtcbiAgICAgICAgdGhpcy5zdGF0Qm94KHN0YXRzLCAn8J+SsCcsICdHb2xkJywgU3RyaW5nKHMuZ29sZCkpO1xuICAgICAgICB0aGlzLnN0YXRCb3goc3RhdHMsICfwn5SlJywgJ1N0cmVhaycsIFN0cmluZyhzLnN0cmVhaz8uY3VycmVudCB8fCAwKSk7XG4gICAgICAgIHRoaXMuc3RhdEJveChzdGF0cywgJ+KalO+4jycsICdDb21ibycsIGB4JHtzLmNvbWJvQ291bnR9YCk7XG4gICAgICAgIHRoaXMuc3RhdEJveChzdGF0cywgJ/Cfj4YnLCAnVHJvcGhpZXMnLCBgJHthY2hpZXZlbWVudENvdW50fWApO1xuICAgICAgICB0aGlzLnN0YXRCb3goc3RhdHMsICfwn5KAJywgJ0RlYXRocycsIFN0cmluZyhzLmxlZ2FjeS5kZWF0aENvdW50KSk7XG4gICAgICAgIHRoaXMuc3RhdEJveChzdGF0cywgJ/Cfk4onLCAnVG90YWwgUXVlc3RzJywgU3RyaW5nKHMuZGF5TWV0cmljcy5yZWR1Y2UoKHN1bSwgZCkgPT4gc3VtICsgZC5xdWVzdHNDb21wbGV0ZWQsIDApKSk7XG5cbiAgICAgICAgLy8gLS0tIEFDVElWRSBCVUZGUyAtLS1cbiAgICAgICAgaWYgKHMuYWN0aXZlQnVmZnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ+KaoSBBQ1RJVkUgRUZGRUNUUycgfSk7XG4gICAgICAgICAgICBjb25zdCBidWZmcyA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6ICdzaXN5LXByb2ZpbGUtYnVmZnMnIH0pO1xuICAgICAgICAgICAgcy5hY3RpdmVCdWZmcy5mb3JFYWNoKGIgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlbWFpbmluZyA9IG1vbWVudChiLmV4cGlyZXNBdCkuZGlmZihtb21lbnQoKSwgJ21pbnV0ZXMnKTtcbiAgICAgICAgICAgICAgICBpZiAocmVtYWluaW5nID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjaGlwID0gYnVmZnMuY3JlYXRlRGl2KHsgY2xzOiAnc2lzeS1wcm9maWxlLWJ1ZmYtY2hpcCcgfSk7XG4gICAgICAgICAgICAgICAgICAgIGNoaXAudGV4dENvbnRlbnQgPSBgJHtiLmljb259ICR7Yi5uYW1lfSAoJHtyZW1haW5pbmd9bSlgO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gLS0tIFNLSUxMIFJBREFSIC0tLVxuICAgICAgICBpZiAocy5za2lsbHMubGVuZ3RoID49IDMpIHtcbiAgICAgICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICfwn6egIFNLSUxMIFBST0ZJTEUnIH0pO1xuICAgICAgICAgICAgY29uc3QgcmFkYXJDb250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnc2lzeS1wcm9maWxlLXJhZGFyJyB9KTtcbiAgICAgICAgICAgIGNvbnN0IHNvcnRlZCA9IFsuLi5zLnNraWxsc10uc29ydCgoYSwgYikgPT4gYi5sZXZlbCAtIGEubGV2ZWwpO1xuICAgICAgICAgICAgQ2hhcnRSZW5kZXJlci5yZW5kZXJSYWRhcihyYWRhckNvbnRhaW5lciwgc29ydGVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIC0tLSBBQ0hJRVZFTUVOVCBTSE9XQ0FTRSAtLS1cbiAgICAgICAgY29uc3QgdW5sb2NrZWQgPSAocy5hY2hpZXZlbWVudHMgfHwgW10pLmZpbHRlcihhID0+IGEudW5sb2NrZWQpO1xuICAgICAgICBpZiAodW5sb2NrZWQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ/Cfj4YgQUNISUVWRU1FTlRTJyB9KTtcbiAgICAgICAgICAgIGNvbnN0IGFjaEdyaWQgPSBjb250ZW50RWwuY3JlYXRlRGl2KHsgY2xzOiAnc2lzeS1wcm9maWxlLWFjaGlldmVtZW50cycgfSk7XG4gICAgICAgICAgICBjb25zdCBzb3J0ZWQgPSBbLi4udW5sb2NrZWRdLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBvcmRlciA9IHsgbGVnZW5kYXJ5OiAwLCBlcGljOiAxLCByYXJlOiAyLCBjb21tb246IDMgfTtcbiAgICAgICAgICAgICAgICByZXR1cm4gKG9yZGVyW2EucmFyaXR5XSA/PyA0KSAtIChvcmRlcltiLnJhcml0eV0gPz8gNCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHNvcnRlZC5zbGljZSgwLCAxMikuZm9yRWFjaChhY2ggPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNhcmQgPSBhY2hHcmlkLmNyZWF0ZURpdih7IGNsczogYHNpc3ktYWNoaWV2ZW1lbnQtY2FyZCBzaXN5LWFjaC0ke2FjaC5yYXJpdHl9YCB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCByYXJpdHlJY29uczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHsgY29tbW9uOiAn8J+PhScsIHJhcmU6ICfwn5KOJywgZXBpYzogJ/CfkZEnLCBsZWdlbmRhcnk6ICfirZAnIH07XG4gICAgICAgICAgICAgICAgY2FyZC5jcmVhdGVEaXYoeyB0ZXh0OiByYXJpdHlJY29uc1thY2gucmFyaXR5XSB8fCAn8J+PhicsIGNsczogJ3Npc3ktYWNoLWljb24nIH0pO1xuICAgICAgICAgICAgICAgIGNhcmQuY3JlYXRlRGl2KHsgdGV4dDogYWNoLm5hbWUsIGNsczogJ3Npc3ktYWNoLW5hbWUnIH0pO1xuICAgICAgICAgICAgICAgIGNhcmQuY3JlYXRlRGl2KHsgdGV4dDogYWNoLmRlc2NyaXB0aW9uLCBjbHM6ICdzaXN5LWFjaC1kZXNjJyB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gLS0tIFJVTiBISVNUT1JZIC0tLVxuICAgICAgICBpZiAocy5zY2FycyAmJiBzLnNjYXJzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICfwn6esIFNDQVJTICYgSElTVE9SWScgfSk7XG4gICAgICAgICAgICBjb25zdCBzY2FyTGlzdCA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6ICdzaXN5LXByb2ZpbGUtc2NhcnMnIH0pO1xuICAgICAgICAgICAgcy5zY2Fycy5zbGljZSgtNSkucmV2ZXJzZSgpLmZvckVhY2goc2NhciA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgcm93ID0gc2Nhckxpc3QuY3JlYXRlRGl2KHsgY2xzOiAnc2lzeS1wcm9maWxlLXNjYXItcm93JyB9KTtcbiAgICAgICAgICAgICAgICByb3cuY3JlYXRlU3Bhbih7IHRleHQ6IGAke3NjYXIubGFiZWx9OiAke3NjYXIudmFsdWV9YCB9KTtcbiAgICAgICAgICAgICAgICByb3cuY3JlYXRlU3Bhbih7IHRleHQ6IG1vbWVudChzY2FyLmVhcm5lZEF0KS5mcm9tTm93KCksIGNsczogJ3Npc3ktdGV4dC1tdXRlZCcgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIC0tLSBMRUdBQ1kgLS0tXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICfwn5G7IExFR0FDWScgfSk7XG4gICAgICAgIGNvbnN0IGxlZ2FjeSA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoeyBjbHM6ICdzaXN5LXByb2ZpbGUtc3RhdHMnIH0pO1xuICAgICAgICB0aGlzLnN0YXRCb3gobGVnYWN5LCAn8J+RuycsICdTb3VscycsIFN0cmluZyhzLmxlZ2FjeS5zb3VscykpO1xuICAgICAgICB0aGlzLnN0YXRCb3gobGVnYWN5LCAn8J+SsCcsICdTdGFydCBHb2xkJywgYCske3MubGVnYWN5LnBlcmtzLnN0YXJ0R29sZH1gKTtcbiAgICAgICAgdGhpcy5zdGF0Qm94KGxlZ2FjeSwgJ/Cfp6wnLCAnUmVsaWNzJywgU3RyaW5nKHMubGVnYWN5LnJlbGljcy5sZW5ndGgpKTtcblxuICAgICAgICAvLyAtLS0gQ0xPU0UgLS0tXG4gICAgICAgIGNvbnN0IGNsb3NlID0gY29udGVudEVsLmNyZWF0ZURpdih7IGNsczogJ3Npc3ktcG9tb2Rvcm8tY29udHJvbHMnIH0pO1xuICAgICAgICBjbG9zZS5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnRElTTUlTUycsIGNsczogJ3Npc3ktYnRuIG1vZC1jdGEnIH0pLm9uY2xpY2sgPSAoKSA9PiB0aGlzLmNsb3NlKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzdGF0Qm94KHBhcmVudDogSFRNTEVsZW1lbnQsIGljb246IHN0cmluZywgbGFiZWw6IHN0cmluZywgdmFsdWU6IHN0cmluZykge1xuICAgICAgICBjb25zdCBib3ggPSBwYXJlbnQuY3JlYXRlRGl2KHsgY2xzOiAnc2lzeS1wcm9maWxlLXN0YXQtYm94JyB9KTtcbiAgICAgICAgYm94LmNyZWF0ZURpdih7IHRleHQ6IGljb24sIGNsczogJ3Npc3ktcHJvZmlsZS1zdGF0LWljb24nIH0pO1xuICAgICAgICBib3guY3JlYXRlRGl2KHsgdGV4dDogdmFsdWUsIGNsczogJ3Npc3ktcHJvZmlsZS1zdGF0LXZhbCcgfSk7XG4gICAgICAgIGJveC5jcmVhdGVEaXYoeyB0ZXh0OiBsYWJlbCwgY2xzOiAnc2lzeS1wcm9maWxlLXN0YXQtbGFiZWwnIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgZGVyaXZlQ2xhc3Moc2tpbGxOYW1lOiBzdHJpbmcsIGxldmVsOiBudW1iZXIpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCB0aWVyID0gbGV2ZWwgPj0gMTAgPyAnTWFzdGVyJyA6IGxldmVsID49IDUgPyAnQWRlcHQnIDogJ0FwcHJlbnRpY2UnO1xuICAgICAgICByZXR1cm4gYCR7dGllcn0gJHtza2lsbE5hbWV9YDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGRlcml2ZVRpdGxlKGFjaGlldmVtZW50Q291bnQ6IG51bWJlciwgbGV2ZWw6IG51bWJlcik6IHN0cmluZyB7XG4gICAgICAgIGlmIChsZXZlbCA+PSA1MCkgcmV0dXJuICfinKggU2lzeXBodXMsIFRyYW5zY2VuZGVkJztcbiAgICAgICAgaWYgKGxldmVsID49IDMwKSByZXR1cm4gJ/CfjJ8gQ2hhbXBpb24gb2YgdGhlIFN1bW1pdCc7XG4gICAgICAgIGlmIChsZXZlbCA+PSAyMCkgcmV0dXJuICfimqEgVmV0ZXJhbiBvZiB0aGUgQm91bGRlcic7XG4gICAgICAgIGlmIChsZXZlbCA+PSAxMCkgcmV0dXJuICfwn5SlIFdhcnJpb3Igb2YgdGhlIENsaW1iJztcbiAgICAgICAgaWYgKGFjaGlldmVtZW50Q291bnQgPj0gNSkgcmV0dXJuICfwn5uh77iPIFByb3ZlbiBTZWVrZXInO1xuICAgICAgICByZXR1cm4gJ/Cfl6HvuI8gSW5pdGlhdGUnO1xuICAgIH1cblxuICAgIG9uQ2xvc2UoKSB7IHRoaXMuY29udGVudEVsLmVtcHR5KCk7IH1cbn1cbiIsImltcG9ydCB7IFNpc3lwaHVzS2VybmVsIH0gZnJvbSAnLi9LZXJuZWwnO1xuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgR2FtZU1vZHVsZSB7XG4gICAgYWJzdHJhY3QgcmVhZG9ubHkgaWQ6IHN0cmluZztcbiAgICBhYnN0cmFjdCByZWFkb25seSBuYW1lOiBzdHJpbmc7XG4gICAgYWJzdHJhY3QgcmVhZG9ubHkgZGVzY3JpcHRpb246IHN0cmluZztcbiAgICByZWFkb25seSBkZXBlbmRlbmNpZXM6IHN0cmluZ1tdID0gW107XG5cbiAgICBwcm90ZWN0ZWQga2VybmVsOiBTaXN5cGh1c0tlcm5lbCB8IG51bGwgPSBudWxsO1xuXG4gICAgb25Mb2FkKGtlcm5lbDogU2lzeXBodXNLZXJuZWwpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5rZXJuZWwgPSBrZXJuZWw7XG4gICAgfVxuXG4gICAgYWJzdHJhY3Qgb25FbmFibGUoKTogdm9pZDtcbiAgICBhYnN0cmFjdCBvbkRpc2FibGUoKTogdm9pZDtcblxuICAgIG9uVW5sb2FkKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmtlcm5lbCA9IG51bGw7XG4gICAgfVxuXG4gICAgcmVuZGVyU2V0dGluZ3MoX2NvbnRhaW5lcjogSFRNTEVsZW1lbnQpOiB2b2lkIHtcbiAgICAgICAgLy8gT3B0aW9uYWwgb3ZlcnJpZGUgZm9yIG1vZHVsZS1zcGVjaWZpYyBzZXR0aW5nc1xuICAgIH1cbn1cbiIsImltcG9ydCB7IE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IEdhbWVNb2R1bGUgfSBmcm9tICcuLi8uLi9jb3JlL0dhbWVNb2R1bGUnO1xuXG5leHBvcnQgY2xhc3MgUHJvZ3Jlc3Npb25Nb2R1bGUgZXh0ZW5kcyBHYW1lTW9kdWxlIHtcbiAgICByZWFkb25seSBpZCA9ICdwcm9ncmVzc2lvbic7XG4gICAgcmVhZG9ubHkgbmFtZSA9ICdQcm9ncmVzc2lvbic7XG4gICAgcmVhZG9ubHkgZGVzY3JpcHRpb24gPSAnWFAsIGxldmVsaW5nLCBhbmQgc2tpbGwgZ3Jvd3RoIGZyb20gY29tcGxldGVkIHF1ZXN0cy4nO1xuXG4gICAgcHJpdmF0ZSB1bnN1YnNjcmliZVF1ZXN0Q29tcGxldGVkOiAoKCkgPT4gdm9pZCkgfCBudWxsID0gbnVsbDtcbiAgICBwcml2YXRlIHVuc3Vic2NyaWJlUmV3YXJkR3JhbnRlZDogKCgpID0+IHZvaWQpIHwgbnVsbCA9IG51bGw7XG5cbiAgICBvbkVuYWJsZSgpOiB2b2lkIHtcbiAgICAgICAgaWYgKCF0aGlzLmtlcm5lbCkgcmV0dXJuO1xuXG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmVRdWVzdENvbXBsZXRlZCA9IHRoaXMua2VybmVsLmV2ZW50cy5vbigncXVlc3Q6Y29tcGxldGVkJywgKHBheWxvYWQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHNldHRpbmdzID0gdGhpcy5rZXJuZWwhLnN0YXRlO1xuICAgICAgICAgICAgY29uc3QgZW5naW5lID0gdGhpcy5rZXJuZWwhLmdldFNlcnZpY2UoJ2VuZ2luZScpO1xuXG4gICAgICAgICAgICBsZXQgeHAgPSBwYXlsb2FkLnhwUmV3YXJkO1xuICAgICAgICAgICAgY29uc3Qgc2tpbGwgPSBzZXR0aW5ncy5za2lsbHMuZmluZCgoZW50cnkpID0+IGVudHJ5Lm5hbWUgPT09IHBheWxvYWQuc2tpbGxOYW1lKTtcbiAgICAgICAgICAgIGlmIChza2lsbCkge1xuICAgICAgICAgICAgICAgIHNraWxsLnJ1c3QgPSAwO1xuICAgICAgICAgICAgICAgIHNraWxsLnhwUmVxID0gTWF0aC5tYXgoMSwgTWF0aC5mbG9vcihza2lsbC54cFJlcSAvIDEuMSkpO1xuICAgICAgICAgICAgICAgIHNraWxsLmxhc3RVc2VkID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuICAgICAgICAgICAgICAgIHNraWxsLnhwICs9IDE7XG4gICAgICAgICAgICAgICAgaWYgKHNraWxsLnhwID49IHNraWxsLnhwUmVxKSB7XG4gICAgICAgICAgICAgICAgICAgIHNraWxsLmxldmVsKys7XG4gICAgICAgICAgICAgICAgICAgIHNraWxsLnhwID0gMDtcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShg8J+noCAke3NraWxsLm5hbWV9IExldmVsZWQgVXAhYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAocGF5bG9hZC5zZWNvbmRhcnlTa2lsbCAmJiBwYXlsb2FkLnNlY29uZGFyeVNraWxsICE9PSAnTm9uZScpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzZWNvbmRhcnlTa2lsbCA9IHNldHRpbmdzLnNraWxscy5maW5kKChlbnRyeSkgPT4gZW50cnkubmFtZSA9PT0gcGF5bG9hZC5zZWNvbmRhcnlTa2lsbCk7XG4gICAgICAgICAgICAgICAgaWYgKHNlY29uZGFyeVNraWxsICYmIHNraWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghc2tpbGwuY29ubmVjdGlvbnMpIHNraWxsLmNvbm5lY3Rpb25zID0gW107XG4gICAgICAgICAgICAgICAgICAgIGlmICghc2tpbGwuY29ubmVjdGlvbnMuaW5jbHVkZXMocGF5bG9hZC5zZWNvbmRhcnlTa2lsbCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNraWxsLmNvbm5lY3Rpb25zLnB1c2gocGF5bG9hZC5zZWNvbmRhcnlTa2lsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCfwn5SXIE5ldXJhbCBMaW5rIEVzdGFibGlzaGVkJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB4cCArPSBNYXRoLmZsb29yKHNlY29uZGFyeVNraWxsLmxldmVsICogMC41KTtcbiAgICAgICAgICAgICAgICAgICAgc2Vjb25kYXJ5U2tpbGwueHAgKz0gMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNldHRpbmdzLnhwICs9IHhwO1xuXG4gICAgICAgICAgICBpZiAoc2V0dGluZ3MueHAgPj0gc2V0dGluZ3MueHBSZXEpIHtcbiAgICAgICAgICAgICAgICBzZXR0aW5ncy5sZXZlbCsrO1xuICAgICAgICAgICAgICAgIHNldHRpbmdzLnhwID0gMDtcbiAgICAgICAgICAgICAgICBzZXR0aW5ncy54cFJlcSA9IE1hdGguZmxvb3Ioc2V0dGluZ3MueHBSZXEgKiAxLjEpO1xuICAgICAgICAgICAgICAgIHNldHRpbmdzLm1heEhwID0gMTAwICsgKHNldHRpbmdzLmxldmVsICogNSk7XG4gICAgICAgICAgICAgICAgc2V0dGluZ3MuaHAgPSBzZXR0aW5ncy5tYXhIcDtcblxuICAgICAgICAgICAgICAgIGlmIChlbmdpbmU/LnRhdW50KSBlbmdpbmUudGF1bnQoJ2xldmVsX3VwJyk7XG4gICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZXMgPSBlbmdpbmU/LmFuYWx5dGljc0VuZ2luZT8uY2hlY2tCb3NzTWlsZXN0b25lcz8uKCkgPz8gW107XG4gICAgICAgICAgICAgICAgbWVzc2FnZXMuZm9yRWFjaCgobWVzc2FnZTogc3RyaW5nKSA9PiBuZXcgTm90aWNlKG1lc3NhZ2UpKTtcblxuICAgICAgICAgICAgICAgIGlmIChbMTAsIDIwLCAzMCwgNTBdLmluY2x1ZGVzKHNldHRpbmdzLmxldmVsKSAmJiBlbmdpbmU/LnNwYXduQm9zcykge1xuICAgICAgICAgICAgICAgICAgICB2b2lkIGVuZ2luZS5zcGF3bkJvc3Moc2V0dGluZ3MubGV2ZWwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy51bnN1YnNjcmliZVJld2FyZEdyYW50ZWQgPSB0aGlzLmtlcm5lbC5ldmVudHMub24oJ3Jld2FyZDpncmFudGVkJywgKHBheWxvYWQpID0+IHtcbiAgICAgICAgICAgIHRoaXMua2VybmVsIS5zdGF0ZS54cCArPSBwYXlsb2FkLnhwO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBvbkRpc2FibGUoKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLnVuc3Vic2NyaWJlUXVlc3RDb21wbGV0ZWQpIHtcbiAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmVRdWVzdENvbXBsZXRlZCgpO1xuICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZVF1ZXN0Q29tcGxldGVkID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy51bnN1YnNjcmliZVJld2FyZEdyYW50ZWQpIHtcbiAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmVSZXdhcmRHcmFudGVkKCk7XG4gICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlUmV3YXJkR3JhbnRlZCA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQgeyBHYW1lTW9kdWxlIH0gZnJvbSAnLi4vLi4vY29yZS9HYW1lTW9kdWxlJztcblxuZXhwb3J0IGNsYXNzIEVjb25vbXlNb2R1bGUgZXh0ZW5kcyBHYW1lTW9kdWxlIHtcbiAgICByZWFkb25seSBpZCA9ICdlY29ub215JztcbiAgICByZWFkb25seSBuYW1lID0gJ0Vjb25vbXknO1xuICAgIHJlYWRvbmx5IGRlc2NyaXB0aW9uID0gJ0FwcGxpZXMgZ29sZCByZXdhcmRzIGZyb20gcXVlc3QgY29tcGxldGlvbnMuJztcblxuICAgIHByaXZhdGUgdW5zdWJzY3JpYmVRdWVzdENvbXBsZXRlZDogKCgpID0+IHZvaWQpIHwgbnVsbCA9IG51bGw7XG4gICAgcHJpdmF0ZSB1bnN1YnNjcmliZVJld2FyZEdyYW50ZWQ6ICgoKSA9PiB2b2lkKSB8IG51bGwgPSBudWxsO1xuXG4gICAgb25FbmFibGUoKTogdm9pZCB7XG4gICAgICAgIGlmICghdGhpcy5rZXJuZWwpIHJldHVybjtcblxuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlUXVlc3RDb21wbGV0ZWQgPSB0aGlzLmtlcm5lbC5ldmVudHMub24oJ3F1ZXN0OmNvbXBsZXRlZCcsIChwYXlsb2FkKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmtlcm5lbCEuc3RhdGUuZ29sZCArPSBwYXlsb2FkLmdvbGRSZXdhcmQ7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmVSZXdhcmRHcmFudGVkID0gdGhpcy5rZXJuZWwuZXZlbnRzLm9uKCdyZXdhcmQ6Z3JhbnRlZCcsIChwYXlsb2FkKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmtlcm5lbCEuc3RhdGUuZ29sZCArPSBwYXlsb2FkLmdvbGQ7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIG9uRGlzYWJsZSgpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMudW5zdWJzY3JpYmVRdWVzdENvbXBsZXRlZCkge1xuICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZVF1ZXN0Q29tcGxldGVkKCk7XG4gICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlUXVlc3RDb21wbGV0ZWQgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnVuc3Vic2NyaWJlUmV3YXJkR3JhbnRlZCkge1xuICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZVJld2FyZEdyYW50ZWQoKTtcbiAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmVSZXdhcmRHcmFudGVkID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbn1cbiIsImltcG9ydCB7IE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7IERlYXRoTW9kYWwgfSBmcm9tICcuLi8uLi91aS9tb2RhbHMnO1xuaW1wb3J0IHsgR2FtZU1vZHVsZSB9IGZyb20gJy4uLy4uL2NvcmUvR2FtZU1vZHVsZSc7XG5cbmV4cG9ydCBjbGFzcyBTdXJ2aXZhbE1vZHVsZSBleHRlbmRzIEdhbWVNb2R1bGUge1xuICAgIHJlYWRvbmx5IGlkID0gJ3N1cnZpdmFsJztcbiAgICByZWFkb25seSBuYW1lID0gJ1N1cnZpdmFsJztcbiAgICByZWFkb25seSBkZXNjcmlwdGlvbiA9ICdIUCBkYW1hZ2UsIGxvY2tkb3duLCBhbmQgZGVhdGggaGFuZGxpbmcgZm9yIGZhaWxlZCBxdWVzdHMuJztcblxuICAgIHByaXZhdGUgdW5zdWJzY3JpYmVRdWVzdEZhaWxlZDogKCgpID0+IHZvaWQpIHwgbnVsbCA9IG51bGw7XG4gICAgcHJpdmF0ZSB1bnN1YnNjcmliZVF1ZXN0Q29tcGxldGVkOiAoKCkgPT4gdm9pZCkgfCBudWxsID0gbnVsbDtcblxuICAgIG9uRW5hYmxlKCk6IHZvaWQge1xuICAgICAgICBpZiAoIXRoaXMua2VybmVsKSByZXR1cm47XG5cbiAgICAgICAgdGhpcy51bnN1YnNjcmliZVF1ZXN0RmFpbGVkID0gdGhpcy5rZXJuZWwuZXZlbnRzLm9uKCdxdWVzdDpmYWlsZWQnLCAocGF5bG9hZCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc2V0dGluZ3MgPSB0aGlzLmtlcm5lbCEuc3RhdGU7XG4gICAgICAgICAgICBjb25zdCBlbmdpbmUgPSB0aGlzLmtlcm5lbCEuZ2V0U2VydmljZSgnZW5naW5lJyk7XG4gICAgICAgICAgICBjb25zdCBhcHAgPSB0aGlzLmtlcm5lbCEuZ2V0U2VydmljZSgnYXBwJyk7XG4gICAgICAgICAgICBjb25zdCBwbHVnaW4gPSB0aGlzLmtlcm5lbCEuZ2V0U2VydmljZSgncGx1Z2luJyk7XG4gICAgICAgICAgICBjb25zdCBhdWRpbyA9IHRoaXMua2VybmVsIS5nZXRTZXJ2aWNlKCdhdWRpbycpO1xuXG4gICAgICAgICAgICBzZXR0aW5ncy5ocCAtPSBwYXlsb2FkLmRhbWFnZTtcbiAgICAgICAgICAgIHNldHRpbmdzLmRhbWFnZVRha2VuVG9kYXkgKz0gcGF5bG9hZC5kYW1hZ2U7XG4gICAgICAgICAgICBpZiAoIXBheWxvYWQubWFudWFsQWJvcnQpIHNldHRpbmdzLnJpdmFsRG1nICs9IDE7XG5cbiAgICAgICAgICAgIGlmIChhdWRpbz8ucGxheVNvdW5kKSBhdWRpby5wbGF5U291bmQoJ2ZhaWwnKTtcbiAgICAgICAgICAgIGlmIChlbmdpbmU/LmNoZWNrRGFpbHlNaXNzaW9ucykgZW5naW5lLmNoZWNrRGFpbHlNaXNzaW9ucyh7IHR5cGU6ICdkYW1hZ2UnIH0pO1xuXG4gICAgICAgICAgICBpZiAoc2V0dGluZ3MuZGFtYWdlVGFrZW5Ub2RheSA+IDUwKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVuZ2luZT8ubWVkaXRhdGlvbkVuZ2luZT8udHJpZ2dlckxvY2tkb3duKSBlbmdpbmUubWVkaXRhdGlvbkVuZ2luZS50cmlnZ2VyTG9ja2Rvd24oKTtcbiAgICAgICAgICAgICAgICBpZiAoZW5naW5lPy50cmlnZ2VyKSBlbmdpbmUudHJpZ2dlcignbG9ja2Rvd24nKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHNldHRpbmdzLmhwIDw9IDApIHtcbiAgICAgICAgICAgICAgICBpZiAoYXBwICYmIHBsdWdpbikgbmV3IERlYXRoTW9kYWwoYXBwLCBwbHVnaW4pLm9wZW4oKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChwYXlsb2FkLmJvc3NIcFBlbmFsdHkgPiAwKSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShg4pig77iPIEJvc3MgQ3J1c2g6ICske3BheWxvYWQuYm9zc0hwUGVuYWx0eX0gRGFtYWdlYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmVRdWVzdENvbXBsZXRlZCA9IHRoaXMua2VybmVsLmV2ZW50cy5vbigncXVlc3Q6Y29tcGxldGVkJywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc2V0dGluZ3MgPSB0aGlzLmtlcm5lbCEuc3RhdGU7XG4gICAgICAgICAgICBjb25zdCBlbmdpbmUgPSB0aGlzLmtlcm5lbCEuZ2V0U2VydmljZSgnZW5naW5lJyk7XG4gICAgICAgICAgICBjb25zdCBhcHAgPSB0aGlzLmtlcm5lbCEuZ2V0U2VydmljZSgnYXBwJyk7XG4gICAgICAgICAgICBjb25zdCBwbHVnaW4gPSB0aGlzLmtlcm5lbCEuZ2V0U2VydmljZSgncGx1Z2luJyk7XG5cbiAgICAgICAgICAgIGlmIChzZXR0aW5ncy5kYWlseU1vZGlmaWVyLm5hbWUgIT09ICdBZHJlbmFsaW5lJykgcmV0dXJuO1xuXG4gICAgICAgICAgICBzZXR0aW5ncy5ocCAtPSA1O1xuICAgICAgICAgICAgc2V0dGluZ3MuZGFtYWdlVGFrZW5Ub2RheSArPSA1O1xuXG4gICAgICAgICAgICBpZiAoc2V0dGluZ3MuZGFtYWdlVGFrZW5Ub2RheSA+IDUwKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVuZ2luZT8ubWVkaXRhdGlvbkVuZ2luZT8udHJpZ2dlckxvY2tkb3duKSBlbmdpbmUubWVkaXRhdGlvbkVuZ2luZS50cmlnZ2VyTG9ja2Rvd24oKTtcbiAgICAgICAgICAgICAgICBpZiAoZW5naW5lPy50cmlnZ2VyKSBlbmdpbmUudHJpZ2dlcignbG9ja2Rvd24nKTtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdPdmVyZXhlcnRpb24hIExPQ0tET1dOIElOSVRJQVRFRC4nKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHNldHRpbmdzLmhwIDw9IDApIHtcbiAgICAgICAgICAgICAgICBpZiAoYXBwICYmIHBsdWdpbikgbmV3IERlYXRoTW9kYWwoYXBwLCBwbHVnaW4pLm9wZW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICB9XG5cbiAgICBvbkRpc2FibGUoKTogdm9pZCB7XG4gICAgICAgIGlmICh0aGlzLnVuc3Vic2NyaWJlUXVlc3RGYWlsZWQpIHtcbiAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmVRdWVzdEZhaWxlZCgpO1xuICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZVF1ZXN0RmFpbGVkID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy51bnN1YnNjcmliZVF1ZXN0Q29tcGxldGVkKSB7XG4gICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlUXVlc3RDb21wbGV0ZWQoKTtcbiAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmVRdWVzdENvbXBsZXRlZCA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQgeyBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBHYW1lTW9kdWxlIH0gZnJvbSAnLi4vLi4vY29yZS9HYW1lTW9kdWxlJztcbmltcG9ydCB7IFZpY3RvcnlNb2RhbCB9IGZyb20gJy4uLy4uL3VpL21vZGFscyc7XG5cbmV4cG9ydCBjbGFzcyBDb21iYXRNb2R1bGUgZXh0ZW5kcyBHYW1lTW9kdWxlIHtcbiAgICByZWFkb25seSBpZCA9ICdjb21iYXQnO1xuICAgIHJlYWRvbmx5IG5hbWUgPSAnQ29tYmF0JztcbiAgICByZWFkb25seSBkZXNjcmlwdGlvbiA9ICdCb3NzIGRlZmVhdCBwcm9jZXNzaW5nIGFuZCB2aWN0b3J5IGNoZWNrcy4nO1xuXG4gICAgcHJpdmF0ZSB1bnN1YnNjcmliZVF1ZXN0Q29tcGxldGVkOiAoKCkgPT4gdm9pZCkgfCBudWxsID0gbnVsbDtcblxuICAgIG9uRW5hYmxlKCk6IHZvaWQge1xuICAgICAgICBpZiAoIXRoaXMua2VybmVsKSByZXR1cm47XG5cbiAgICAgICAgdGhpcy51bnN1YnNjcmliZVF1ZXN0Q29tcGxldGVkID0gdGhpcy5rZXJuZWwuZXZlbnRzLm9uKCdxdWVzdDpjb21wbGV0ZWQnLCAocGF5bG9hZCkgPT4ge1xuICAgICAgICAgICAgaWYgKCFwYXlsb2FkLmlzQm9zcyB8fCBwYXlsb2FkLmJvc3NMZXZlbCA9PT0gbnVsbCkgcmV0dXJuO1xuXG4gICAgICAgICAgICBjb25zdCBlbmdpbmUgPSB0aGlzLmtlcm5lbCEuZ2V0U2VydmljZSgnZW5naW5lJyk7XG4gICAgICAgICAgICBjb25zdCBhcHAgPSB0aGlzLmtlcm5lbCEuZ2V0U2VydmljZSgnYXBwJyk7XG4gICAgICAgICAgICBjb25zdCBwbHVnaW4gPSB0aGlzLmtlcm5lbCEuZ2V0U2VydmljZSgncGx1Z2luJyk7XG4gICAgICAgICAgICBpZiAoIWFwcCB8fCAhcGx1Z2luKSByZXR1cm47XG5cbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGVuZ2luZT8uYW5hbHl0aWNzRW5naW5lPy5kZWZlYXRCb3NzPy4ocGF5bG9hZC5ib3NzTGV2ZWwpO1xuXG4gICAgICAgICAgICBpZiAocmVzdWx0Py5tZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShyZXN1bHQubWVzc2FnZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmtlcm5lbCEuc3RhdGUuZ2FtZVdvbikge1xuICAgICAgICAgICAgICAgIG5ldyBWaWN0b3J5TW9kYWwoYXBwLCBwbHVnaW4pLm9wZW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgb25EaXNhYmxlKCk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy51bnN1YnNjcmliZVF1ZXN0Q29tcGxldGVkKSB7XG4gICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlUXVlc3RDb21wbGV0ZWQoKTtcbiAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmVRdWVzdENvbXBsZXRlZCA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQgeyBHYW1lTW9kdWxlIH0gZnJvbSAnLi4vLi4vY29yZS9HYW1lTW9kdWxlJztcblxuZXhwb3J0IGNsYXNzIFByb2R1Y3Rpdml0eU1vZHVsZSBleHRlbmRzIEdhbWVNb2R1bGUge1xuICAgIHJlYWRvbmx5IGlkID0gJ3Byb2R1Y3Rpdml0eSc7XG4gICAgcmVhZG9ubHkgbmFtZSA9ICdQcm9kdWN0aXZpdHknO1xuICAgIHJlYWRvbmx5IGRlc2NyaXB0aW9uID0gJ1F1ZXN0IGNvbXBsZXRpb24gY291bnRlcnMsIHN0cmVha3MsIGFuZCBtaXNzaW9uIHByb2dyZXNzaW9uLic7XG5cbiAgICBwcml2YXRlIHVuc3Vic2NyaWJlUXVlc3RDb21wbGV0ZWQ6ICgoKSA9PiB2b2lkKSB8IG51bGwgPSBudWxsO1xuXG4gICAgb25FbmFibGUoKTogdm9pZCB7XG4gICAgICAgIGlmICghdGhpcy5rZXJuZWwpIHJldHVybjtcblxuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlUXVlc3RDb21wbGV0ZWQgPSB0aGlzLmtlcm5lbC5ldmVudHMub24oJ3F1ZXN0OmNvbXBsZXRlZCcsIChwYXlsb2FkKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzZXR0aW5ncyA9IHRoaXMua2VybmVsIS5zdGF0ZTtcbiAgICAgICAgICAgIGNvbnN0IGVuZ2luZSA9IHRoaXMua2VybmVsIS5nZXRTZXJ2aWNlKCdlbmdpbmUnKTtcblxuICAgICAgICAgICAgc2V0dGluZ3MucXVlc3RzQ29tcGxldGVkVG9kYXkgKz0gMTtcbiAgICAgICAgICAgIGVuZ2luZT8uYW5hbHl0aWNzRW5naW5lPy51cGRhdGVTdHJlYWs/LigpO1xuXG4gICAgICAgICAgICBlbmdpbmU/LmNoZWNrRGFpbHlNaXNzaW9ucz8uKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnY29tcGxldGUnLFxuICAgICAgICAgICAgICAgIGRpZmZpY3VsdHk6IHBheWxvYWQuZGlmZmljdWx0eSxcbiAgICAgICAgICAgICAgICBza2lsbDogcGF5bG9hZC5za2lsbE5hbWUsXG4gICAgICAgICAgICAgICAgc2Vjb25kYXJ5U2tpbGw6IHBheWxvYWQuc2Vjb25kYXJ5U2tpbGwsXG4gICAgICAgICAgICAgICAgaGlnaFN0YWtlczogcGF5bG9hZC5oaWdoU3Rha2VzXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgb25EaXNhYmxlKCk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy51bnN1YnNjcmliZVF1ZXN0Q29tcGxldGVkKSB7XG4gICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlUXVlc3RDb21wbGV0ZWQoKTtcbiAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmVRdWVzdENvbXBsZXRlZCA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG59XG4iLCJpbXBvcnQgeyBHYW1lTW9kdWxlIH0gZnJvbSAnLi4vLi4vY29yZS9HYW1lTW9kdWxlJztcblxuZXhwb3J0IGNsYXNzIEFuYWx5dGljc01vZHVsZSBleHRlbmRzIEdhbWVNb2R1bGUge1xuICAgIHJlYWRvbmx5IGlkID0gJ2FuYWx5dGljcyc7XG4gICAgcmVhZG9ubHkgbmFtZSA9ICdBbmFseXRpY3MnO1xuICAgIHJlYWRvbmx5IGRlc2NyaXB0aW9uID0gJ1RyYWNrcyBnYW1lcGxheSB0ZWxlbWV0cnkgZnJvbSBkb21haW4gZXZlbnRzLic7XG5cbiAgICBwcml2YXRlIHVuc3Vic2NyaWJlUXVlc3RDb21wbGV0ZWQ6ICgoKSA9PiB2b2lkKSB8IG51bGwgPSBudWxsO1xuICAgIHByaXZhdGUgdW5zdWJzY3JpYmVRdWVzdEZhaWxlZDogKCgpID0+IHZvaWQpIHwgbnVsbCA9IG51bGw7XG5cbiAgICBvbkVuYWJsZSgpOiB2b2lkIHtcbiAgICAgICAgaWYgKCF0aGlzLmtlcm5lbCkgcmV0dXJuO1xuXG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmVRdWVzdENvbXBsZXRlZCA9IHRoaXMua2VybmVsLmV2ZW50cy5vbigncXVlc3Q6Y29tcGxldGVkJywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc2V0dGluZ3MgPSB0aGlzLmtlcm5lbCEuc3RhdGU7XG4gICAgICAgICAgICBjb25zdCBlbmdpbmUgPSB0aGlzLmtlcm5lbCEuZ2V0U2VydmljZSgnZW5naW5lJyk7XG5cbiAgICAgICAgICAgIGVuZ2luZT8uYW5hbHl0aWNzRW5naW5lPy50cmFja0RhaWx5TWV0cmljcz8uKCdxdWVzdF9jb21wbGV0ZScsIDEpO1xuICAgICAgICAgICAgc2V0dGluZ3MucmVzZWFyY2hTdGF0cy50b3RhbENvbWJhdCArPSAxO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlUXVlc3RGYWlsZWQgPSB0aGlzLmtlcm5lbC5ldmVudHMub24oJ3F1ZXN0OmZhaWxlZCcsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGVuZ2luZSA9IHRoaXMua2VybmVsIS5nZXRTZXJ2aWNlKCdlbmdpbmUnKTtcbiAgICAgICAgICAgIGVuZ2luZT8uYW5hbHl0aWNzRW5naW5lPy50cmFja0RhaWx5TWV0cmljcz8uKCdxdWVzdF9mYWlsJywgMSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIG9uRGlzYWJsZSgpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMudW5zdWJzY3JpYmVRdWVzdENvbXBsZXRlZCkge1xuICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZVF1ZXN0Q29tcGxldGVkKCk7XG4gICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlUXVlc3RDb21wbGV0ZWQgPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMudW5zdWJzY3JpYmVRdWVzdEZhaWxlZCkge1xuICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZVF1ZXN0RmFpbGVkKCk7XG4gICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlUXVlc3RGYWlsZWQgPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgTm90aWNlLCBtb21lbnQgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBHYW1lTW9kdWxlIH0gZnJvbSAnLi4vLi4vY29yZS9HYW1lTW9kdWxlJztcblxuZXhwb3J0IGNsYXNzIFJlY292ZXJ5TW9kdWxlIGV4dGVuZHMgR2FtZU1vZHVsZSB7XG4gICAgcmVhZG9ubHkgaWQgPSAncmVjb3ZlcnknO1xuICAgIHJlYWRvbmx5IG5hbWUgPSAnUmVjb3ZlcnknO1xuICAgIHJlYWRvbmx5IGRlc2NyaXB0aW9uID0gJ0hhbmRsZXMgdGltZWQgcmVjb3ZlcnkgZWZmZWN0cyBzdWNoIGFzIGJ1ZmYgZXhwaXJhdGlvbi4nO1xuXG4gICAgcHJpdmF0ZSB1bnN1YnNjcmliZUNsb2NrVGljazogKCgpID0+IHZvaWQpIHwgbnVsbCA9IG51bGw7XG5cbiAgICBvbkVuYWJsZSgpOiB2b2lkIHtcbiAgICAgICAgaWYgKCF0aGlzLmtlcm5lbCkgcmV0dXJuO1xuXG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmVDbG9ja1RpY2sgPSB0aGlzLmtlcm5lbC5ldmVudHMub24oJ2Nsb2NrOnRpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzZXR0aW5ncyA9IHRoaXMua2VybmVsIS5zdGF0ZTtcbiAgICAgICAgICAgIGNvbnN0IGVuZ2luZSA9IHRoaXMua2VybmVsIS5nZXRTZXJ2aWNlKCdlbmdpbmUnKTtcbiAgICAgICAgICAgIGNvbnN0IG5vdyA9IG1vbWVudCgpO1xuICAgICAgICAgICAgY29uc3QgaW5pdGlhbENvdW50ID0gc2V0dGluZ3MuYWN0aXZlQnVmZnMubGVuZ3RoO1xuXG4gICAgICAgICAgICBzZXR0aW5ncy5hY3RpdmVCdWZmcyA9IHNldHRpbmdzLmFjdGl2ZUJ1ZmZzLmZpbHRlcigoYnVmZikgPT4gbW9tZW50KGJ1ZmYuZXhwaXJlc0F0KS5pc0FmdGVyKG5vdykpO1xuXG4gICAgICAgICAgICBpZiAoc2V0dGluZ3MuYWN0aXZlQnVmZnMubGVuZ3RoIDwgaW5pdGlhbENvdW50KSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnQSBwb3Rpb24gZWZmZWN0IGhhcyB3b3JuIG9mZi4nKTtcbiAgICAgICAgICAgICAgICBlbmdpbmU/LnRyaWdnZXI/LigndXBkYXRlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIG9uRGlzYWJsZSgpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMudW5zdWJzY3JpYmVDbG9ja1RpY2spIHtcbiAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmVDbG9ja1RpY2soKTtcbiAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmVDbG9ja1RpY2sgPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiaW1wb3J0IHsgTm90aWNlLCBtb21lbnQgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBEZWF0aE1vZGFsIH0gZnJvbSAnLi4vLi4vdWkvbW9kYWxzJztcbmltcG9ydCB7IEdhbWVNb2R1bGUgfSBmcm9tICcuLi8uLi9jb3JlL0dhbWVNb2R1bGUnO1xuXG5leHBvcnQgY2xhc3MgRGFpbHlMaWZlY3ljbGVNb2R1bGUgZXh0ZW5kcyBHYW1lTW9kdWxlIHtcbiAgICByZWFkb25seSBpZCA9ICdkYWlseV9saWZlY3ljbGUnO1xuICAgIHJlYWRvbmx5IG5hbWUgPSAnRGFpbHkgTGlmZWN5Y2xlJztcbiAgICByZWFkb25seSBkZXNjcmlwdGlvbiA9ICdIYW5kbGVzIGRhaWx5IGxvZ2luIHJlc2V0LCByb3QgZGFtYWdlLCBhbmQgZGFpbHkgY2hhb3Mgcm9sbC4nO1xuXG4gICAgcHJpdmF0ZSB1bnN1YnNjcmliZVNlc3Npb25TdGFydDogKCgpID0+IHZvaWQpIHwgbnVsbCA9IG51bGw7XG5cbiAgICBvbkVuYWJsZSgpOiB2b2lkIHtcbiAgICAgICAgaWYgKCF0aGlzLmtlcm5lbCkgcmV0dXJuO1xuXG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmVTZXNzaW9uU3RhcnQgPSB0aGlzLmtlcm5lbC5ldmVudHMub24oJ3Nlc3Npb246c3RhcnQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzZXR0aW5ncyA9IHRoaXMua2VybmVsIS5zdGF0ZTtcbiAgICAgICAgICAgIGNvbnN0IGFwcCA9IHRoaXMua2VybmVsIS5nZXRTZXJ2aWNlKCdhcHAnKTtcbiAgICAgICAgICAgIGNvbnN0IHBsdWdpbiA9IHRoaXMua2VybmVsIS5nZXRTZXJ2aWNlKCdwbHVnaW4nKTtcbiAgICAgICAgICAgIGNvbnN0IGVuZ2luZSA9IHRoaXMua2VybmVsIS5nZXRTZXJ2aWNlKCdlbmdpbmUnKTtcbiAgICAgICAgICAgIGlmICghYXBwIHx8ICFwbHVnaW4pIHJldHVybjtcblxuICAgICAgICAgICAgY29uc3QgdG9kYXkgPSBtb21lbnQoKS5mb3JtYXQoJ1lZWVktTU0tREQnKTtcbiAgICAgICAgICAgIGlmIChzZXR0aW5ncy5sYXN0TG9naW4pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXlzRGlmZiA9IG1vbWVudCgpLmRpZmYobW9tZW50KHNldHRpbmdzLmxhc3RMb2dpbiksICdkYXlzJyk7XG4gICAgICAgICAgICAgICAgaWYgKGRheXNEaWZmID4gMikge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByb3REYW1hZ2UgPSAoZGF5c0RpZmYgLSAxKSAqIDEwO1xuICAgICAgICAgICAgICAgICAgICBpZiAocm90RGFtYWdlID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3MuaHAgLT0gcm90RGFtYWdlO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3MuaGlzdG9yeS5wdXNoKHsgZGF0ZTogdG9kYXksIHN0YXR1czogJ3JvdCcsIHhwRWFybmVkOiAtcm90RGFtYWdlIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzLmhwIDw9IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBEZWF0aE1vZGFsKGFwcCwgcGx1Z2luKS5vcGVuKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBlbmdpbmU/LnNhdmU/LigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoc2V0dGluZ3MubGFzdExvZ2luICE9PSB0b2RheSkge1xuICAgICAgICAgICAgICAgIHNldHRpbmdzLm1heEhwID0gMTAwICsgKHNldHRpbmdzLmxldmVsICogNSk7XG4gICAgICAgICAgICAgICAgc2V0dGluZ3MuaHAgPSBNYXRoLm1pbihzZXR0aW5ncy5tYXhIcCwgc2V0dGluZ3MuaHAgKyAyMCk7XG4gICAgICAgICAgICAgICAgc2V0dGluZ3MuZGFtYWdlVGFrZW5Ub2RheSA9IDA7XG4gICAgICAgICAgICAgICAgc2V0dGluZ3MubG9ja2Rvd25VbnRpbCA9ICcnO1xuICAgICAgICAgICAgICAgIHNldHRpbmdzLmxhc3RMb2dpbiA9IHRvZGF5O1xuXG4gICAgICAgICAgICAgICAgY29uc3QgdG9kYXlNb21lbnQgPSBtb21lbnQoKTtcbiAgICAgICAgICAgICAgICBzZXR0aW5ncy5za2lsbHMuZm9yRWFjaCgoc2tpbGwpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNraWxsLmxhc3RVc2VkICYmIHRvZGF5TW9tZW50LmRpZmYobW9tZW50KHNraWxsLmxhc3RVc2VkKSwgJ2RheXMnKSA+IDMgJiYgIWVuZ2luZT8uaXNSZXN0aW5nPy4oKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2tpbGwucnVzdCA9IE1hdGgubWluKDEwLCAoc2tpbGwucnVzdCB8fCAwKSArIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2tpbGwueHBSZXEgPSBNYXRoLmZsb29yKHNraWxsLnhwUmVxICogMS4xKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzLmRhaWx5TWlzc2lvbkRhdGUgIT09IHRvZGF5KSB7XG4gICAgICAgICAgICAgICAgICAgIGVuZ2luZT8ucm9sbERhaWx5TWlzc2lvbnM/LigpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGF3YWl0IGVuZ2luZT8ucm9sbENoYW9zPy4odHJ1ZSk7XG4gICAgICAgICAgICAgICAgYXdhaXQgZW5naW5lPy5zYXZlPy4oKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGF3YWl0IGVuZ2luZT8uc2F2ZT8uKCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIG9uRGlzYWJsZSgpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMudW5zdWJzY3JpYmVTZXNzaW9uU3RhcnQpIHtcbiAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmVTZXNzaW9uU3RhcnQoKTtcbiAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmVTZXNzaW9uU3RhcnQgPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwiLyoqXG4gKiBQb21vZG9ybyBGb2N1cyBUaW1lciDigJQgSW50ZWdyYXRlZCB0aW1lciB3aXRoIHdvcmsvYnJlYWsgY3ljbGVzLlxuICogUmVwbGFjZXMgdGhlIGJhc2ljIGJyb3duIG5vaXNlIHRvZ2dsZSB3aXRoIGEgZnVsbCBQb21vZG9ybyBzeXN0ZW0uXG4gKi9cbmltcG9ydCB7IFRpbnlFbWl0dGVyLCBBdWRpb0NvbnRyb2xsZXIgfSBmcm9tICcuLi91dGlscyc7XG5pbXBvcnQgeyBzaG93VG9hc3QsIGZsb2F0UmV3YXJkIH0gZnJvbSAnLi4vdWkvZWZmZWN0cyc7XG5cbmV4cG9ydCB0eXBlIFBvbW9kb3JvUGhhc2UgPSAnaWRsZScgfCAnd29yaycgfCAnYnJlYWsnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFBvbW9kb3JvU3RhdGUge1xuICAgIHBoYXNlOiBQb21vZG9yb1BoYXNlO1xuICAgIHJlbWFpbmluZzogbnVtYmVyOyAvLyBzZWNvbmRzIHJlbWFpbmluZ1xuICAgIHRvdGFsV29yazogbnVtYmVyOyAvLyB0b3RhbCBzZWNvbmRzIG9mIHdvcmsgcGhhc2VcbiAgICB0b3RhbEJyZWFrOiBudW1iZXI7IC8vIHRvdGFsIHNlY29uZHMgb2YgYnJlYWsgcGhhc2VcbiAgICBjeWNsZXNDb21wbGV0ZWQ6IG51bWJlcjtcbn1cblxuY29uc3QgREVGQVVMVF9XT1JLX0RVUkFUSU9OID0gMjUgKiA2MDsgLy8gMjUgbWludXRlc1xuY29uc3QgREVGQVVMVF9CUkVBS19EVVJBVElPTiA9IDUgKiA2MDsgIC8vIDUgbWludXRlc1xuXG5leHBvcnQgY2xhc3MgUG9tb2Rvcm9UaW1lciB7XG4gICAgc3RhdGU6IFBvbW9kb3JvU3RhdGU7XG4gICAgcHJpdmF0ZSBpbnRlcnZhbElkOiBudW1iZXIgfCBudWxsID0gbnVsbDtcbiAgICBwcml2YXRlIGF1ZGlvOiBBdWRpb0NvbnRyb2xsZXI7XG4gICAgZXZlbnRzOiBUaW55RW1pdHRlcjtcblxuICAgIGNvbnN0cnVjdG9yKGF1ZGlvOiBBdWRpb0NvbnRyb2xsZXIpIHtcbiAgICAgICAgdGhpcy5hdWRpbyA9IGF1ZGlvO1xuICAgICAgICB0aGlzLmV2ZW50cyA9IG5ldyBUaW55RW1pdHRlcigpO1xuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgcGhhc2U6ICdpZGxlJyxcbiAgICAgICAgICAgIHJlbWFpbmluZzogREVGQVVMVF9XT1JLX0RVUkFUSU9OLFxuICAgICAgICAgICAgdG90YWxXb3JrOiBERUZBVUxUX1dPUktfRFVSQVRJT04sXG4gICAgICAgICAgICB0b3RhbEJyZWFrOiBERUZBVUxUX0JSRUFLX0RVUkFUSU9OLFxuICAgICAgICAgICAgY3ljbGVzQ29tcGxldGVkOiAwLFxuICAgICAgICB9O1xuICAgIH1cblxuICAgIHN0YXJ0KCk6IHZvaWQge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS5waGFzZSA9PT0gJ2lkbGUnKSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlLnBoYXNlID0gJ3dvcmsnO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZS5yZW1haW5pbmcgPSB0aGlzLnN0YXRlLnRvdGFsV29yaztcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5pbnRlcnZhbElkKSByZXR1cm47XG4gICAgICAgIHRoaXMuaW50ZXJ2YWxJZCA9IHdpbmRvdy5zZXRJbnRlcnZhbCgoKSA9PiB0aGlzLnRpY2soKSwgMTAwMCk7XG4gICAgICAgIHRoaXMuYXVkaW8udG9nZ2xlQnJvd25Ob2lzZSgpOyAvLyBTdGFydCBmb2N1cyBhdWRpb1xuICAgICAgICB0aGlzLmV2ZW50cy50cmlnZ2VyKCd1cGRhdGUnLCB0aGlzLnN0YXRlKTtcbiAgICB9XG5cbiAgICBwYXVzZSgpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMuaW50ZXJ2YWxJZCkge1xuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsSWQpO1xuICAgICAgICAgICAgdGhpcy5pbnRlcnZhbElkID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmV2ZW50cy50cmlnZ2VyKCd1cGRhdGUnLCB0aGlzLnN0YXRlKTtcbiAgICB9XG5cbiAgICByZXNldCgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5wYXVzZSgpO1xuICAgICAgICBpZiAodGhpcy5hdWRpbykge1xuICAgICAgICAgICAgLy8gU3RvcCBicm93biBub2lzZSBpZiBwbGF5aW5nXG4gICAgICAgICAgICB0cnkgeyB0aGlzLmF1ZGlvLnRvZ2dsZUJyb3duTm9pc2UoKTsgfSBjYXRjaCAoXykgeyB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdGF0ZS5waGFzZSA9ICdpZGxlJztcbiAgICAgICAgdGhpcy5zdGF0ZS5yZW1haW5pbmcgPSB0aGlzLnN0YXRlLnRvdGFsV29yaztcbiAgICAgICAgdGhpcy5ldmVudHMudHJpZ2dlcigndXBkYXRlJywgdGhpcy5zdGF0ZSk7XG4gICAgfVxuXG4gICAgc2tpcCgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy50cmFuc2l0aW9uUGhhc2UoKTtcbiAgICB9XG5cbiAgICBpc1J1bm5pbmcoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLmludGVydmFsSWQgIT09IG51bGw7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB0aWNrKCk6IHZvaWQge1xuICAgICAgICB0aGlzLnN0YXRlLnJlbWFpbmluZy0tO1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS5yZW1haW5pbmcgPD0gMCkge1xuICAgICAgICAgICAgdGhpcy50cmFuc2l0aW9uUGhhc2UoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmV2ZW50cy50cmlnZ2VyKCd1cGRhdGUnLCB0aGlzLnN0YXRlKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHRyYW5zaXRpb25QaGFzZSgpOiB2b2lkIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUucGhhc2UgPT09ICd3b3JrJykge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZS5jeWNsZXNDb21wbGV0ZWQrKztcbiAgICAgICAgICAgIHRoaXMuc3RhdGUucGhhc2UgPSAnYnJlYWsnO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZS5yZW1haW5pbmcgPSB0aGlzLnN0YXRlLnRvdGFsQnJlYWs7XG4gICAgICAgICAgICB0aGlzLmF1ZGlvLnBsYXlTb3VuZCgnc3VjY2VzcycpO1xuICAgICAgICAgICAgc2hvd1RvYXN0KHtcbiAgICAgICAgICAgICAgICBpY29uOiAn4piVJyxcbiAgICAgICAgICAgICAgICB0aXRsZTogYEZvY3VzIGN5Y2xlICR7dGhpcy5zdGF0ZS5jeWNsZXNDb21wbGV0ZWR9IGNvbXBsZXRlIWAsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ1RpbWUgZm9yIGEgYnJlYWsuJyxcbiAgICAgICAgICAgICAgICB2YXJpYW50OiAnc3VjY2VzcycsXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IDUwMDAsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGZsb2F0UmV3YXJkKGArMSDwn42FYCwgJ3hwJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlLnBoYXNlID0gJ3dvcmsnO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZS5yZW1haW5pbmcgPSB0aGlzLnN0YXRlLnRvdGFsV29yaztcbiAgICAgICAgICAgIHRoaXMuYXVkaW8ucGxheVNvdW5kKCdjbGljaycpO1xuICAgICAgICAgICAgc2hvd1RvYXN0KHtcbiAgICAgICAgICAgICAgICBpY29uOiAn4pqhJyxcbiAgICAgICAgICAgICAgICB0aXRsZTogJ0JyZWFrIG92ZXIhJyxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnQmFjayB0byB3b3JrLicsXG4gICAgICAgICAgICAgICAgdmFyaWFudDogJ3hwJyxcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogMzAwMCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZXZlbnRzLnRyaWdnZXIoJ3BoYXNlJywgdGhpcy5zdGF0ZSk7XG4gICAgfVxuXG4gICAgZm9ybWF0VGltZSgpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBtID0gTWF0aC5mbG9vcih0aGlzLnN0YXRlLnJlbWFpbmluZyAvIDYwKTtcbiAgICAgICAgY29uc3QgcyA9IHRoaXMuc3RhdGUucmVtYWluaW5nICUgNjA7XG4gICAgICAgIHJldHVybiBgJHttLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKX06JHtzLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKX1gO1xuICAgIH1cblxuICAgIGRlc3Ryb3koKTogdm9pZCB7XG4gICAgICAgIHRoaXMucGF1c2UoKTtcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBOb3RpY2UsIFBsdWdpbiwgVEZpbGUsIFdvcmtzcGFjZUxlYWYsIGRlYm91bmNlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgU2lzeXBodXNTZXR0aW5ncyB9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHsgc2hvd1RvYXN0LCBmbG9hdFJld2FyZCB9IGZyb20gJy4vdWkvZWZmZWN0cyc7XG5pbXBvcnQgeyBTaXN5cGh1c0VuZ2luZSwgREVGQVVMVF9NT0RJRklFUiB9IGZyb20gJy4vZW5naW5lJztcbmltcG9ydCB7IEF1ZGlvQ29udHJvbGxlciB9IGZyb20gJy4vdXRpbHMnO1xuaW1wb3J0IHsgUGFub3B0aWNvblZpZXcsIFZJRVdfVFlQRV9QQU5PUFRJQ09OIH0gZnJvbSBcIi4vdWkvdmlld1wiO1xuaW1wb3J0IHsgU2lzeXBodXNTZXR0aW5nVGFiIH0gZnJvbSAnLi9zZXR0aW5ncyc7XG5pbXBvcnQgeyBSZXNlYXJjaFF1ZXN0TW9kYWwsIENoYWluQnVpbGRlck1vZGFsLCBSZXNlYXJjaExpc3RNb2RhbCwgUXVpY2tDYXB0dXJlTW9kYWwsIFF1ZXN0VGVtcGxhdGVNb2RhbCwgUXVlc3RNb2RhbCwgU2NhcnNNb2RhbCB9IGZyb20gXCIuL3VpL21vZGFsc1wiO1xuaW1wb3J0IHsgU2lzeXBodXNLZXJuZWwgfSBmcm9tICcuL2NvcmUvS2VybmVsJztcbmltcG9ydCB7IEdsb2JhbENvbmZpZywgU3RhdGVNYW5hZ2VyIH0gZnJvbSAnLi9jb3JlL1N0YXRlTWFuYWdlcic7XG5pbXBvcnQgeyBBY2hpZXZlbWVudEVuZ2luZSB9IGZyb20gJy4vZW5naW5lcy9BY2hpZXZlbWVudEVuZ2luZSc7XG5pbXBvcnQgeyBSaXZhbEVuZ2luZSB9IGZyb20gJy4vZW5naW5lcy9SaXZhbEVuZ2luZSc7XG5pbXBvcnQgeyBQcm9maWxlTW9kYWwgfSBmcm9tICcuL3VpL3Byb2ZpbGUnO1xuaW1wb3J0IHsgUHJvZ3Jlc3Npb25Nb2R1bGUgfSBmcm9tICcuL21vZHVsZXMvcHJvZ3Jlc3Npb24vUHJvZ3Jlc3Npb25Nb2R1bGUnO1xuaW1wb3J0IHsgRWNvbm9teU1vZHVsZSB9IGZyb20gJy4vbW9kdWxlcy9lY29ub215L0Vjb25vbXlNb2R1bGUnO1xuaW1wb3J0IHsgU3Vydml2YWxNb2R1bGUgfSBmcm9tICcuL21vZHVsZXMvc3Vydml2YWwvU3Vydml2YWxNb2R1bGUnO1xuaW1wb3J0IHsgQ29tYmF0TW9kdWxlIH0gZnJvbSAnLi9tb2R1bGVzL2NvbWJhdC9Db21iYXRNb2R1bGUnO1xuaW1wb3J0IHsgUHJvZHVjdGl2aXR5TW9kdWxlIH0gZnJvbSAnLi9tb2R1bGVzL3Byb2R1Y3Rpdml0eS9Qcm9kdWN0aXZpdHlNb2R1bGUnO1xuaW1wb3J0IHsgQW5hbHl0aWNzTW9kdWxlIH0gZnJvbSAnLi9tb2R1bGVzL2FuYWx5dGljcy9BbmFseXRpY3NNb2R1bGUnO1xuaW1wb3J0IHsgUmVjb3ZlcnlNb2R1bGUgfSBmcm9tICcuL21vZHVsZXMvcmVjb3ZlcnkvUmVjb3ZlcnlNb2R1bGUnO1xuaW1wb3J0IHsgRGFpbHlMaWZlY3ljbGVNb2R1bGUgfSBmcm9tICcuL21vZHVsZXMvcmVjb3ZlcnkvRGFpbHlMaWZlY3ljbGVNb2R1bGUnO1xuaW1wb3J0IHsgUG9tb2Rvcm9UaW1lciB9IGZyb20gJy4vZW5naW5lcy9Qb21vZG9yb1RpbWVyJztcbmltcG9ydCB7IFdlZWtseVJldmlld01vZGFsLCBCb3NzRW5jb3VudGVyTW9kYWwgfSBmcm9tICcuL3VpL3Jldmlldyc7XG5cbmNvbnN0IERFRkFVTFRfU0VUVElOR1M6IFNpc3lwaHVzU2V0dGluZ3MgPSB7XG4gICAgLy8gW05FV10gRGVmYXVsdCBUZW1wbGF0ZXNcbiAgICBxdWVzdFRlbXBsYXRlczogW1xuICAgICAgICB7IG5hbWU6IFwiTW9ybmluZyBSb3V0aW5lXCIsIGRpZmY6IDEsIHNraWxsOiBcIkRpc2NpcGxpbmVcIiwgZGVhZGxpbmU6IFwiMTA6MDBcIiB9LFxuICAgICAgICB7IG5hbWU6IFwiRGVlcCBXb3JrIEJsb2NrXCIsIGRpZmY6IDMsIHNraWxsOiBcIkZvY3VzXCIsIGRlYWRsaW5lOiBcIisyaFwiIH0sXG4gICAgICAgIHsgbmFtZTogXCJRdWljayBFeGVyY2lzZVwiLCBkaWZmOiAyLCBza2lsbDogXCJIZWFsdGhcIiwgZGVhZGxpbmU6IFwiKzEyaFwiIH1cbiAgICBdLCAvLyBDb21tYSBoZXJlLCBOTyBjbG9zaW5nIGJyYWNlIHlldCFcbiAgICAvLyBbTkVXXSBEZWZhdWx0c1xuICAgIGNvbWJvQ291bnQ6IDAsXG4gICAgbGFzdENvbXBsZXRpb25UaW1lOiAwLFxuICAgIC8vIFtORVddXG4gICAgYWN0aXZlQnVmZnM6IFtdLFxuXG4gICAgaHA6IDEwMCwgbWF4SHA6IDEwMCwgeHA6IDAsIGdvbGQ6IDAsIHhwUmVxOiAxMDAsIGxldmVsOiAxLCByaXZhbERtZzogMTAsXG4gICAgbGFzdExvZ2luOiBcIlwiLCBzaGllbGRlZFVudGlsOiBcIlwiLCByZXN0RGF5VW50aWw6IFwiXCIsIHNraWxsczogW10sXG4gICAgZGFpbHlNb2RpZmllcjogREVGQVVMVF9NT0RJRklFUixcbiAgICBsZWdhY3k6IHsgc291bHM6IDAsIHBlcmtzOiB7IHN0YXJ0R29sZDogMCwgc3RhcnRTa2lsbFBvaW50czogMCwgcml2YWxEZWxheTogMCB9LCByZWxpY3M6IFtdLCBkZWF0aENvdW50OiAwIH0sXG4gICAgbXV0ZWQ6IGZhbHNlLCBoaXN0b3J5OiBbXSwgcnVuQ291bnQ6IDEsIGxvY2tkb3duVW50aWw6IFwiXCIsIGRhbWFnZVRha2VuVG9kYXk6IDAsXG4gICAgZGFpbHlNaXNzaW9uczogW10sXG4gICAgZGFpbHlNaXNzaW9uRGF0ZTogXCJcIixcbiAgICBxdWVzdHNDb21wbGV0ZWRUb2RheTogMCxcbiAgICBza2lsbFVzZXNUb2RheToge30sXG4gICAgcmVzZWFyY2hRdWVzdHM6IFtdLFxuICAgIHJlc2VhcmNoU3RhdHM6IHsgdG90YWxSZXNlYXJjaDogMCwgdG90YWxDb21iYXQ6IDAsIHJlc2VhcmNoQ29tcGxldGVkOiAwLCBjb21iYXRDb21wbGV0ZWQ6IDAgfSxcbiAgICBsYXN0UmVzZWFyY2hRdWVzdElkOiAwLFxuICAgIG1lZGl0YXRpb25DeWNsZXNDb21wbGV0ZWQ6IDAsXG4gICAgcXVlc3REZWxldGlvbnNUb2RheTogMCxcbiAgICBsYXN0RGVsZXRpb25SZXNldDogXCJcIixcbiAgICBpc01lZGl0YXRpbmc6IGZhbHNlLFxuICAgIG1lZGl0YXRpb25DbGlja3NUaGlzTG9ja2Rvd246IDAsXG4gICAgYWN0aXZlQ2hhaW5zOiBbXSxcbiAgICBjaGFpbkhpc3Rvcnk6IFtdLFxuICAgIGN1cnJlbnRDaGFpbklkOiBcIlwiLFxuICAgIGNoYWluUXVlc3RzQ29tcGxldGVkOiAwLFxuICAgIHF1ZXN0RmlsdGVyczoge30sXG4gICAgZmlsdGVyU3RhdGU6IHsgYWN0aXZlRW5lcmd5OiBcImFueVwiLCBhY3RpdmVDb250ZXh0OiBcImFueVwiLCBhY3RpdmVUYWdzOiBbXSB9LFxuICAgIGRheU1ldHJpY3M6IFtdLFxuICAgIHdlZWtseVJlcG9ydHM6IFtdLFxuICAgIGJvc3NNaWxlc3RvbmVzOiBbXSxcbiAgICBzdHJlYWs6IHsgY3VycmVudDogMCwgbG9uZ2VzdDogMCwgbGFzdERhdGU6IFwiXCIgfSxcbiAgICBhY2hpZXZlbWVudHM6IFtdLFxuICAgIGdhbWVXb246IGZhbHNlLFxuICAgIHNjYXJzOiBbXSxcbiAgICBuZXVyYWxIdWJQYXRoOiBcIkFjdGl2ZV9SdW4vTmV1cmFsX0h1Yi5jYW52YXNcIixcbiAgICByaXZhbDogeyBuYW1lOiAnJywgYXZhdGFyOiAnJywgcGVyc29uYWxpdHk6ICdhZ2dyZXNzaXZlJyBhcyBhbnksIGxldmVsOiAxLCB4cDogMCwgeHBSZXE6IDEwMCwgZGFtYWdlRGVhbHQ6IDAsIGxhc3RUYXVudDogJycsIGxhc3RUYXVudFRpbWU6ICcnIH0sXG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNpc3lwaHVzUGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcbiAgICBzZXR0aW5nczogU2lzeXBodXNTZXR0aW5ncztcbiAgICBjb25maWc6IEdsb2JhbENvbmZpZztcbiAgICBzdGF0dXNCYXJJdGVtOiBIVE1MRWxlbWVudDtcbiAgICBlbmdpbmU6IFNpc3lwaHVzRW5naW5lO1xuICAgIGtlcm5lbDogU2lzeXBodXNLZXJuZWw7XG4gICAgYXVkaW86IEF1ZGlvQ29udHJvbGxlcjtcbiAgICBwb21vZG9ybzogUG9tb2Rvcm9UaW1lcjtcblxuICAgIGFzeW5jIG9ubG9hZCgpIHtcbiAgICAgICAgLy8gLS0tIEVWRU5UIExJU1RFTkVSOiBGSUxFIFJFTkFNRSAtLS1cbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KHRoaXMuYXBwLnZhdWx0Lm9uKCdyZW5hbWUnLCAoZmlsZSwgb2xkUGF0aCkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmVuZ2luZSkgcmV0dXJuO1xuICAgICAgICAgICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSAmJiBmaWxlLmV4dGVuc2lvbiA9PT0gJ21kJykge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld05hbWUgPSBmaWxlLmJhc2VuYW1lO1xuXG4gICAgICAgICAgICAgICAgLy8gRXh0cmFjdCBvbGQgYmFzZW5hbWUgZnJvbSB0aGUgb2xkIHBhdGhcbiAgICAgICAgICAgICAgICAvLyBvbGRQYXRoIGxvb2tzIGxpa2UgXCJBY3RpdmVfUnVuL1F1ZXN0cy9PbGROYW1lLm1kXCJcbiAgICAgICAgICAgICAgICBjb25zdCBwYXRoUGFydHMgPSBvbGRQYXRoLnNwbGl0KCcvJyk7XG4gICAgICAgICAgICAgICAgY29uc3Qgb2xkRmlsZU5hbWUgPSBwYXRoUGFydHNbcGF0aFBhcnRzLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgICAgIGNvbnN0IG9sZE5hbWUgPSBvbGRGaWxlTmFtZS5yZXBsYWNlKC9cXC5tZCQvLCAnJyk7IC8vIFJlbW92ZSBleHRlbnNpb25cblxuICAgICAgICAgICAgICAgIGlmIChvbGROYW1lICE9PSBuZXdOYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFByb3BhZ2F0ZSByZW5hbWUgdG8gZW5naW5lc1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVuZ2luZS5jaGFpbnNFbmdpbmUuaGFuZGxlUmVuYW1lKG9sZE5hbWUsIG5ld05hbWUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVuZ2luZS5maWx0ZXJzRW5naW5lLmhhbmRsZVJlbmFtZShvbGROYW1lLCBuZXdOYW1lKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBGb3JjZSBzYXZlIHRvIHBlcnNpc3QgY2hhbmdlc1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVuZ2luZS5zYXZlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG5cbiAgICAgICAgYXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcblxuICAgICAgICB0aGlzLmxvYWRTdHlsZXMoKTtcbiAgICAgICAgdGhpcy5hdWRpbyA9IG5ldyBBdWRpb0NvbnRyb2xsZXIodGhpcy5jb25maWcubXV0ZUF1ZGlvKTtcbiAgICAgICAgdGhpcy5wb21vZG9ybyA9IG5ldyBQb21vZG9yb1RpbWVyKHRoaXMuYXVkaW8pO1xuICAgICAgICB0aGlzLmVuZ2luZSA9IG5ldyBTaXN5cGh1c0VuZ2luZSh0aGlzLmFwcCwgdGhpcywgdGhpcy5hdWRpbyk7XG4gICAgICAgIHRoaXMua2VybmVsID0gbmV3IFNpc3lwaHVzS2VybmVsKHtcbiAgICAgICAgICAgIGNvbmZpZzogdGhpcy5jb25maWcsXG4gICAgICAgICAgICBzdGF0ZTogdGhpcy5zZXR0aW5ncyxcbiAgICAgICAgICAgIHNhdmU6IGFzeW5jIChjb25maWcsIHN0YXRlKSA9PiB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlRGF0YSh7IGNvbmZpZywgc3RhdGUgfSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2VydmljZXM6IHtcbiAgICAgICAgICAgICAgICBhcHA6IHRoaXMuYXBwLFxuICAgICAgICAgICAgICAgIGVuZ2luZTogdGhpcy5lbmdpbmUsXG4gICAgICAgICAgICAgICAgYXVkaW86IHRoaXMuYXVkaW8sXG4gICAgICAgICAgICAgICAgcGx1Z2luOiB0aGlzXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmtlcm5lbC5yZWdpc3Rlck1vZHVsZShuZXcgU3Vydml2YWxNb2R1bGUoKSk7XG4gICAgICAgIHRoaXMua2VybmVsLnJlZ2lzdGVyTW9kdWxlKG5ldyBQcm9ncmVzc2lvbk1vZHVsZSgpKTtcbiAgICAgICAgdGhpcy5rZXJuZWwucmVnaXN0ZXJNb2R1bGUobmV3IEVjb25vbXlNb2R1bGUoKSk7XG4gICAgICAgIHRoaXMua2VybmVsLnJlZ2lzdGVyTW9kdWxlKG5ldyBDb21iYXRNb2R1bGUoKSk7XG4gICAgICAgIHRoaXMua2VybmVsLnJlZ2lzdGVyTW9kdWxlKG5ldyBQcm9kdWN0aXZpdHlNb2R1bGUoKSk7XG4gICAgICAgIHRoaXMua2VybmVsLnJlZ2lzdGVyTW9kdWxlKG5ldyBBbmFseXRpY3NNb2R1bGUoKSk7XG4gICAgICAgIHRoaXMua2VybmVsLnJlZ2lzdGVyTW9kdWxlKG5ldyBSZWNvdmVyeU1vZHVsZSgpKTtcbiAgICAgICAgdGhpcy5rZXJuZWwucmVnaXN0ZXJNb2R1bGUobmV3IERhaWx5TGlmZWN5Y2xlTW9kdWxlKCkpO1xuICAgICAgICB0aGlzLmtlcm5lbC5lbmFibGVDb25maWd1cmVkTW9kdWxlcygpO1xuXG4gICAgICAgIHRoaXMucmVnaXN0ZXJWaWV3KFZJRVdfVFlQRV9QQU5PUFRJQ09OLCAobGVhZikgPT4gbmV3IFBhbm9wdGljb25WaWV3KGxlYWYsIHRoaXMpKTtcblxuICAgICAgICB0aGlzLnN0YXR1c0Jhckl0ZW0gPSB0aGlzLmFkZFN0YXR1c0Jhckl0ZW0oKTtcbiAgICAgICAgKHdpbmRvdyBhcyBhbnkpLnNpc3lwaHVzRW5naW5lID0gdGhpcy5lbmdpbmU7XG5cbiAgICAgICAgYXdhaXQgdGhpcy5lbmdpbmUuY2hlY2tEYWlseUxvZ2luKCk7XG4gICAgICAgIHRoaXMudXBkYXRlU3RhdHVzQmFyKCk7XG5cbiAgICAgICAgLy8gLS0tIFJFV0FSRCBWSVNVQUwgRUZGRUNUUyB2aWEgS0VSTkVMIEVWRU5UUyAtLS1cbiAgICAgICAgdGhpcy5rZXJuZWwuZXZlbnRzLm9uKCdyZXdhcmQ6Z3JhbnRlZCcsIChkYXRhOiB7IHhwOiBudW1iZXI7IGdvbGQ6IG51bWJlcjsgcmVhc29uOiBzdHJpbmcgfSkgPT4ge1xuICAgICAgICAgICAgaWYgKGRhdGEueHAgPiAwKSBmbG9hdFJld2FyZChgKyR7ZGF0YS54cH0gWFBgLCAneHAnKTtcbiAgICAgICAgICAgIGlmIChkYXRhLmdvbGQgPiAwKSBmbG9hdFJld2FyZChgKyR7ZGF0YS5nb2xkfSBHYCwgJ2dvbGQnKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMua2VybmVsLmV2ZW50cy5vbigncXVlc3Q6Y29tcGxldGVkJywgKGRhdGE6IHsgcXVlc3RJZDogc3RyaW5nOyB4cFJld2FyZDogbnVtYmVyOyBnb2xkUmV3YXJkOiBudW1iZXIgfSkgPT4ge1xuICAgICAgICAgICAgc2hvd1RvYXN0KHsgaWNvbjogJ+KalO+4jycsIHRpdGxlOiAnUXVlc3QgQ29tcGxldGUhJywgbWVzc2FnZTogYCR7ZGF0YS5xdWVzdElkfSDigJQgKyR7ZGF0YS54cFJld2FyZH1YUCwgKyR7ZGF0YS5nb2xkUmV3YXJkfUdgLCB2YXJpYW50OiAnc3VjY2VzcycgfSk7XG4gICAgICAgICAgICAvLyBBY2hpZXZlbWVudCBjaGVja1xuICAgICAgICAgICAgQWNoaWV2ZW1lbnRFbmdpbmUuY2hlY2tBbGwodGhpcy5zZXR0aW5ncyk7XG4gICAgICAgICAgICAvLyBSaXZhbCByZWFjdHMgdG8gcGxheWVyIHN1Y2Nlc3NcbiAgICAgICAgICAgIGlmICh0aGlzLnNldHRpbmdzLnJpdmFsPy5uYW1lKSB7XG4gICAgICAgICAgICAgICAgUml2YWxFbmdpbmUuc2hvd1RhdW50KHRoaXMuc2V0dGluZ3MsICdxdWVzdF9jb21wbGV0ZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gVHJhY2sgaG91cmx5IGNvbXBsZXRpb25cbiAgICAgICAgICAgIHRoaXMudHJhY2tIb3VybHlDb21wbGV0aW9uKCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmtlcm5lbC5ldmVudHMub24oJ3F1ZXN0OmZhaWxlZCcsIChkYXRhOiB7IHF1ZXN0SWQ6IHN0cmluZzsgZGFtYWdlOiBudW1iZXIgfSkgPT4ge1xuICAgICAgICAgICAgaWYgKGRhdGEuZGFtYWdlID4gMCkgZmxvYXRSZXdhcmQoYC0ke2RhdGEuZGFtYWdlfSBIUGAsICdkYW1hZ2UnKTtcbiAgICAgICAgICAgIC8vIFJpdmFsIGdhaW5zIFhQIG9uIHBsYXllciBmYWlsdXJlXG4gICAgICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5yaXZhbD8ubmFtZSkge1xuICAgICAgICAgICAgICAgIFJpdmFsRW5naW5lLnJpdmFsR2FpblhQKHRoaXMuc2V0dGluZ3MsIDE1KTtcbiAgICAgICAgICAgICAgICBSaXZhbEVuZ2luZS5zaG93VGF1bnQodGhpcy5zZXR0aW5ncywgJ2ZhaWwnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEhQIGNyaXRpY2FsIHZpZ25ldHRlXG4gICAgICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5ocCA8PSAyMCkgdGhpcy5zaG93SFBWaWduZXR0ZSgpO1xuICAgICAgICB9KTtcblxuXG4gICAgICAgIC8vIC0tLSBDT01NQU5EUyAtLS1cbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHsgaWQ6ICdvcGVuLXBhbm9wdGljb24nLCBuYW1lOiAnT3BlbiBQYW5vcHRpY29uJywgY2FsbGJhY2s6ICgpID0+IHRoaXMuYWN0aXZhdGVWaWV3KCkgfSk7XG4gICAgICAgIHRoaXMuYWRkQ29tbWFuZCh7IGlkOiAndG9nZ2xlLWZvY3VzJywgbmFtZTogJ1RvZ2dsZSBGb2N1cyBBdWRpbycsIGNhbGxiYWNrOiAoKSA9PiB0aGlzLmF1ZGlvLnRvZ2dsZUJyb3duTm9pc2UoKSB9KTtcbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAncG9tb2Rvcm8tc3RhcnQnLCBuYW1lOiAnUG9tb2Rvcm86IFN0YXJ0L1BhdXNlJywgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wb21vZG9yby5pc1J1bm5pbmcoKSkgdGhpcy5wb21vZG9yby5wYXVzZSgpO1xuICAgICAgICAgICAgICAgIGVsc2UgdGhpcy5wb21vZG9yby5zdGFydCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHsgaWQ6ICdwb21vZG9yby1yZXNldCcsIG5hbWU6ICdQb21vZG9ybzogUmVzZXQnLCBjYWxsYmFjazogKCkgPT4gdGhpcy5wb21vZG9yby5yZXNldCgpIH0pO1xuICAgICAgICB0aGlzLmFkZENvbW1hbmQoeyBpZDogJ3dlZWtseS1yZXZpZXcnLCBuYW1lOiAnV2Vla2x5IFJldmlldycsIGhvdGtleXM6IFt7IG1vZGlmaWVyczogW1wiTW9kXCIsIFwiU2hpZnRcIl0sIGtleTogXCJ3XCIgfV0sIGNhbGxiYWNrOiAoKSA9PiBuZXcgV2Vla2x5UmV2aWV3TW9kYWwodGhpcy5hcHAsIHRoaXMpLm9wZW4oKSB9KTtcbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHsgaWQ6ICdjcmVhdGUtcmVzZWFyY2gnLCBuYW1lOiAnUmVzZWFyY2g6IENyZWF0ZSBRdWVzdCcsIGNhbGxiYWNrOiAoKSA9PiBuZXcgUmVzZWFyY2hRdWVzdE1vZGFsKHRoaXMuYXBwLCB0aGlzKS5vcGVuKCkgfSk7XG4gICAgICAgIHRoaXMuYWRkQ29tbWFuZCh7IGlkOiAndmlldy1yZXNlYXJjaCcsIG5hbWU6ICdSZXNlYXJjaDogVmlldyBMaWJyYXJ5JywgY2FsbGJhY2s6ICgpID0+IG5ldyBSZXNlYXJjaExpc3RNb2RhbCh0aGlzLmFwcCwgdGhpcykub3BlbigpIH0pO1xuICAgICAgICB0aGlzLmFkZENvbW1hbmQoeyBpZDogJ21lZGl0YXRlJywgbmFtZTogJ01lZGl0YXRpb246IFN0YXJ0JywgY2FsbGJhY2s6ICgpID0+IHRoaXMuZW5naW5lLnN0YXJ0TWVkaXRhdGlvbigpIH0pO1xuICAgICAgICB0aGlzLmFkZENvbW1hbmQoeyBpZDogJ2NyZWF0ZS1jaGFpbicsIG5hbWU6ICdDaGFpbnM6IENyZWF0ZScsIGNhbGxiYWNrOiAoKSA9PiBuZXcgQ2hhaW5CdWlsZGVyTW9kYWwodGhpcy5hcHAsIHRoaXMpLm9wZW4oKSB9KTtcbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHsgaWQ6ICd2aWV3LWNoYWlucycsIG5hbWU6ICdDaGFpbnM6IFZpZXcgQWN0aXZlJywgY2FsbGJhY2s6ICgpID0+IHsgY29uc3QgYyA9IHRoaXMuZW5naW5lLmdldEFjdGl2ZUNoYWluKCk7IG5ldyBOb3RpY2UoYyA/IGBBY3RpdmU6ICR7Yy5uYW1lfWAgOiBcIk5vIGFjdGl2ZSBjaGFpblwiKTsgfSB9KTtcbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHsgaWQ6ICdmaWx0ZXItaGlnaCcsIG5hbWU6ICdGaWx0ZXJzOiBIaWdoIEVuZXJneScsIGNhbGxiYWNrOiAoKSA9PiB0aGlzLmVuZ2luZS5zZXRGaWx0ZXJTdGF0ZShcImhpZ2hcIiwgXCJhbnlcIiwgW10pIH0pO1xuICAgICAgICB0aGlzLmFkZENvbW1hbmQoeyBpZDogJ2NsZWFyLWZpbHRlcnMnLCBuYW1lOiAnRmlsdGVyczogQ2xlYXInLCBjYWxsYmFjazogKCkgPT4gdGhpcy5lbmdpbmUuY2xlYXJGaWx0ZXJzKCkgfSk7XG4gICAgICAgIHRoaXMuYWRkQ29tbWFuZCh7IGlkOiAnZ2FtZS1zdGF0cycsIG5hbWU6ICdBbmFseXRpY3M6IFN0YXRzJywgY2FsbGJhY2s6ICgpID0+IHsgY29uc3QgcyA9IHRoaXMuZW5naW5lLmdldEdhbWVTdGF0cygpOyBuZXcgTm90aWNlKGBMdmwgJHtzLmxldmVsfSB8IFN0cmVhayAke3MuY3VycmVudFN0cmVha31gKTsgfSB9KTtcbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHsgaWQ6ICdzY2FycycsIG5hbWU6ICdTY2FyczogVmlldycsIGNhbGxiYWNrOiAoKSA9PiBuZXcgU2NhcnNNb2RhbCh0aGlzLmFwcCwgdGhpcykub3BlbigpIH0pO1xuICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6ICdjaGFyYWN0ZXItcHJvZmlsZScsXG4gICAgICAgICAgICBuYW1lOiAnQ2hhcmFjdGVyIFByb2ZpbGUnLFxuICAgICAgICAgICAgaG90a2V5czogW3sgbW9kaWZpZXJzOiBbXCJNb2RcIiwgXCJTaGlmdFwiXSwga2V5OiBcInBcIiB9XSxcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiBuZXcgUHJvZmlsZU1vZGFsKHRoaXMuYXBwLCB0aGlzKS5vcGVuKClcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAncXVlc3QtdGVtcGxhdGVzJyxcbiAgICAgICAgICAgIG5hbWU6ICdEZXBsb3kgUXVlc3QgZnJvbSBUZW1wbGF0ZScsXG4gICAgICAgICAgICBjYWxsYmFjazogKCkgPT4gbmV3IFF1ZXN0VGVtcGxhdGVNb2RhbCh0aGlzLmFwcCwgdGhpcykub3BlbigpXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6ICdkZXBsb3ktcXVlc3QtaG90a2V5JyxcbiAgICAgICAgICAgIG5hbWU6ICdEZXBsb3kgUXVlc3QnLFxuICAgICAgICAgICAgaG90a2V5czogW3sgbW9kaWZpZXJzOiBbXCJNb2RcIl0sIGtleTogXCJkXCIgfV0sXG4gICAgICAgICAgICBjYWxsYmFjazogKCkgPT4gbmV3IFF1ZXN0TW9kYWwodGhpcy5hcHAsIHRoaXMpLm9wZW4oKVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAndW5kby1xdWVzdC1kZWxldGUnLFxuICAgICAgICAgICAgbmFtZTogJ1VuZG8gTGFzdCBRdWVzdCBEZWxldGlvbicsXG4gICAgICAgICAgICBob3RrZXlzOiBbeyBtb2RpZmllcnM6IFtcIk1vZFwiLCBcIlNoaWZ0XCJdLCBrZXk6IFwielwiIH1dLFxuICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHRoaXMuZW5naW5lLnVuZG9MYXN0RGVsZXRpb24oKVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAnY29tcGxldGUtdG9wLXF1ZXN0JyxcbiAgICAgICAgICAgIG5hbWU6ICdDb21wbGV0ZSBUb3AgUXVlc3QnLFxuICAgICAgICAgICAgaG90a2V5czogW3sgbW9kaWZpZXJzOiBbXCJNb2RcIiwgXCJTaGlmdFwiXSwga2V5OiBcImNcIiB9XSxcbiAgICAgICAgICAgIGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZm9sZGVyID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKFwiQWN0aXZlX1J1bi9RdWVzdHNcIik7XG4gICAgICAgICAgICAgICAgaWYgKGZvbGRlciBpbnN0YW5jZW9mIFRGaWxlKSB7IG5ldyBOb3RpY2UoJ05vIGFjdGl2ZSBxdWVzdHMuJyk7IHJldHVybjsgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVzID0gKGZvbGRlciBhcyBhbnkpPy5jaGlsZHJlbj8uZmlsdGVyKChmOiBhbnkpID0+IGYgaW5zdGFuY2VvZiBURmlsZSAmJiBmLmV4dGVuc2lvbiA9PT0gJ21kJykgPz8gW107XG4gICAgICAgICAgICAgICAgaWYgKGZpbGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5lbmdpbmUuY29tcGxldGVRdWVzdChmaWxlc1swXSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW5naW5lLnRyaWdnZXIoJ3VwZGF0ZScpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ05vIGFjdGl2ZSBxdWVzdHMgdG8gY29tcGxldGUuJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAnc3RhcnQtbWVkaXRhdGlvbi1ob3RrZXknLFxuICAgICAgICAgICAgbmFtZTogJ1N0YXJ0IE1lZGl0YXRpb24nLFxuICAgICAgICAgICAgaG90a2V5czogW3sgbW9kaWZpZXJzOiBbXCJNb2RcIiwgXCJTaGlmdFwiXSwga2V5OiBcIm1cIiB9XSxcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB0aGlzLmVuZ2luZS5zdGFydE1lZGl0YXRpb24oKVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAncXVpY2stY2FwdHVyZS1ob3RrZXknLFxuICAgICAgICAgICAgbmFtZTogJ1F1aWNrIENhcHR1cmUnLFxuICAgICAgICAgICAgaG90a2V5czogW3sgbW9kaWZpZXJzOiBbXCJNb2RcIiwgXCJTaGlmdFwiXSwga2V5OiBcInhcIiB9XSxcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiBuZXcgUXVpY2tDYXB0dXJlTW9kYWwodGhpcy5hcHAsIHRoaXMpLm9wZW4oKVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAnZXhwb3J0LXN0YXRzJyxcbiAgICAgICAgICAgIG5hbWU6ICdBbmFseXRpY3M6IEV4cG9ydCBTdGF0cyBKU09OJyxcbiAgICAgICAgICAgIGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RhdHMgPSB0aGlzLmVuZ2luZS5nZXRHYW1lU3RhdHMoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXRoID0gYFNpc3lwaHVzX1N0YXRzXyR7RGF0ZS5ub3coKX0uanNvbmA7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKHBhdGgsIEpTT04uc3RyaW5naWZ5KHN0YXRzLCBudWxsLCAyKSk7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShgU3RhdHMgZXhwb3J0ZWQgdG8gJHtwYXRofWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgIGlkOiAnYWNjZXB0LWRlYXRoJyxcbiAgICAgICAgICAgIG5hbWU6ICdBQ0NFUFQgREVBVEggKFJlc2V0IFJ1biknLFxuICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHRoaXMuZW5naW5lLnRyaWdnZXJEZWF0aCgpXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6ICdyZXJvbGwtY2hhb3MnLFxuICAgICAgICAgICAgbmFtZTogJ1Jlcm9sbCBDaGFvcycsXG4gICAgICAgICAgICBjYWxsYmFjazogKCkgPT4gdGhpcy5lbmdpbmUucm9sbENoYW9zKHRydWUpXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6ICdxdWljay1jYXB0dXJlJyxcbiAgICAgICAgICAgIG5hbWU6ICdRdWljayBDYXB0dXJlIChTY3JhcCknLFxuICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IG5ldyBRdWlja0NhcHR1cmVNb2RhbCh0aGlzLmFwcCwgdGhpcykub3BlbigpXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xuICAgICAgICAgICAgaWQ6ICdnZW5lcmF0ZS1za2lsbC1ncmFwaCcsXG4gICAgICAgICAgICBuYW1lOiAnTmV1cmFsIEh1YjogR2VuZXJhdGUgU2tpbGwgR3JhcGgnLFxuICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHRoaXMuZW5naW5lLmdlbmVyYXRlU2tpbGxHcmFwaCgpXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuYWRkUmliYm9uSWNvbignc2t1bGwnLCAnU2lzeXBodXMgU2lkZWJhcicsICgpID0+IHRoaXMuYWN0aXZhdGVWaWV3KCkpO1xuICAgICAgICAvLyAuLi4gcHJldmlvdXMgY29kZSAuLi5cblxuICAgICAgICAvLyAtLS0gU0VUVElOR1MgVEFCIC0tLVxuICAgICAgICB0aGlzLmFkZFNldHRpbmdUYWIobmV3IFNpc3lwaHVzU2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xuXG4gICAgICAgIHRoaXMucmVnaXN0ZXJJbnRlcnZhbCh3aW5kb3cuc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMua2VybmVsKSB0aGlzLmtlcm5lbC5ldmVudHMuZW1pdCgnY2xvY2s6dGljaycsIHsgbm93OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkgfSk7XG4gICAgICAgICAgICB2b2lkIHRoaXMuZW5naW5lLmNoZWNrRGVhZGxpbmVzKCk7XG4gICAgICAgIH0sIDYwMDAwKSk7XG5cblxuICAgICAgICAvLyBbRklYXSBEZWJvdW5jZWQgV29yZCBDb3VudGVyIChUeXBld3JpdGVyIEZpeClcbiAgICAgICAgY29uc3QgZGVib3VuY2VkVXBkYXRlID0gZGVib3VuY2UoKGZpbGU6IFRGaWxlLCBjb250ZW50OiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgIC8vIDEuIENoZWNrIGlmIGZpbGUgc3RpbGwgZXhpc3RzIHRvIHByZXZlbnQgcmFjZSBjb25kaXRpb24gZXJyb3JzXG4gICAgICAgICAgICBpZiAoIWZpbGUgfHwgIWZpbGUucGF0aCkgcmV0dXJuO1xuICAgICAgICAgICAgY29uc3QgZXhpc3RzID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGUucGF0aCk7XG4gICAgICAgICAgICBpZiAoIWV4aXN0cykgcmV0dXJuO1xuXG4gICAgICAgICAgICBjb25zdCBjYWNoZSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpO1xuICAgICAgICAgICAgaWYgKGNhY2hlPy5mcm9udG1hdHRlcj8ucmVzZWFyY2hfaWQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB3b3JkcyA9IGNvbnRlbnQudHJpbSgpLnNwbGl0KC9cXHMrLykubGVuZ3RoO1xuICAgICAgICAgICAgICAgIHRoaXMuZW5naW5lLnVwZGF0ZVJlc2VhcmNoV29yZENvdW50KGNhY2hlLmZyb250bWF0dGVyLnJlc2VhcmNoX2lkLCB3b3Jkcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIDEwMDAsIHRydWUpO1xuXG4gICAgICAgIC8vIFJlZ2lzdGVyIHRoZSBldmVudCBsaXN0ZW5lciB0byBhY3R1YWxseSBVU0UgdGhlIGRlYm91bmNlIGZ1bmN0aW9uXG4gICAgICAgIHRoaXMucmVnaXN0ZXJFdmVudCh0aGlzLmFwcC53b3Jrc3BhY2Uub24oJ2VkaXRvci1jaGFuZ2UnLCAoZWRpdG9yLCBpbmZvKSA9PiB7XG4gICAgICAgICAgICBpZiAoaW5mbyAmJiBpbmZvLmZpbGUpIHtcbiAgICAgICAgICAgICAgICBkZWJvdW5jZWRVcGRhdGUoaW5mby5maWxlLCBlZGl0b3IuZ2V0VmFsdWUoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICB9IC8vIDwtLS0gVEhJUyBCUkFDRSBXQVMgTUlTU0lOR1xuXG4gICAgYXN5bmMgbG9hZFN0eWxlcygpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGRpciA9ICh0aGlzLm1hbmlmZXN0ICYmICh0aGlzLm1hbmlmZXN0IGFzIHsgZGlyPzogc3RyaW5nIH0pLmRpcikgfHwgXCJcIjtcbiAgICAgICAgICAgIGNvbnN0IHBhdGggPSBkaXIgPyBgJHtkaXJ9L3N0eWxlcy5jc3NgIDogXCJzdHlsZXMuY3NzXCI7XG4gICAgICAgICAgICBjb25zdCBjc3NGaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHBhdGgpO1xuICAgICAgICAgICAgaWYgKGNzc0ZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNzcyA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoY3NzRmlsZSk7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XG4gICAgICAgICAgICAgICAgc3R5bGUuaWQgPSBcInNpc3lwaHVzLXN0eWxlc1wiO1xuICAgICAgICAgICAgICAgIHN0eWxlLmlubmVySFRNTCA9IGNzcztcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZSkgeyBjb25zb2xlLmVycm9yKFwiQ291bGQgbm90IGxvYWQgc3R5bGVzLmNzc1wiLCBlKTsgfVxuICAgIH1cblxuICAgIG9udW5sb2FkKCkge1xuICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2UuZGV0YWNoTGVhdmVzT2ZUeXBlKFZJRVdfVFlQRV9QQU5PUFRJQ09OKTtcbiAgICAgICAgaWYgKHRoaXMua2VybmVsKSB0aGlzLmtlcm5lbC5zaHV0ZG93bigpO1xuICAgICAgICBpZiAodGhpcy5hdWRpbz8uYXVkaW9DdHgpIHtcbiAgICAgICAgICAgIHRoaXMuYXVkaW8uYXVkaW9DdHguY2xvc2UoKS5jYXRjaCgoKSA9PiB7IH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHN0eWxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzaXN5cGh1cy1zdHlsZXNcIik7XG4gICAgICAgIGlmIChzdHlsZSkgc3R5bGUucmVtb3ZlKCk7XG4gICAgfVxuXG4gICAgYXN5bmMgYWN0aXZhdGVWaWV3KCkge1xuICAgICAgICBjb25zdCB7IHdvcmtzcGFjZSB9ID0gdGhpcy5hcHA7XG4gICAgICAgIGxldCBsZWFmOiBXb3Jrc3BhY2VMZWFmIHwgbnVsbCA9IG51bGw7XG4gICAgICAgIGNvbnN0IGxlYXZlcyA9IHdvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFX1BBTk9QVElDT04pO1xuICAgICAgICBpZiAobGVhdmVzLmxlbmd0aCA+IDApIGxlYWYgPSBsZWF2ZXNbMF07XG4gICAgICAgIGVsc2UgeyBsZWFmID0gd29ya3NwYWNlLmdldFJpZ2h0TGVhZihmYWxzZSk7IGF3YWl0IGxlYWYuc2V0Vmlld1N0YXRlKHsgdHlwZTogVklFV19UWVBFX1BBTk9QVElDT04sIGFjdGl2ZTogdHJ1ZSB9KTsgfVxuICAgICAgICB3b3Jrc3BhY2UucmV2ZWFsTGVhZihsZWFmKTtcbiAgICB9XG5cbiAgICB1cGRhdGVTdGF0dXNCYXIoKSB7XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLnNldHRpbmdzO1xuICAgICAgICBjb25zdCBzaGllbGQgPSAodGhpcy5lbmdpbmUuaXNTaGllbGRlZCgpIHx8IHRoaXMuZW5naW5lLmlzUmVzdGluZygpKSA/ICh0aGlzLmVuZ2luZS5pc1Jlc3RpbmcoKSA/ICfwn5KkJyA6ICfwn5uh77iPJykgOiAnJztcbiAgICAgICAgY29uc3QgbUNvdW50ID0gcy5kYWlseU1pc3Npb25zLmZpbHRlcihtID0+IG0uY29tcGxldGVkKS5sZW5ndGg7XG4gICAgICAgIGNvbnN0IGNvbWJvID0gcy5jb21ib0NvdW50ID4gMSA/IGAg8J+UpXgke3MuY29tYm9Db3VudH1gIDogJyc7XG4gICAgICAgIGNvbnN0IHN0cmVhayA9IHMuc3RyZWFrPy5jdXJyZW50ID4gMCA/IGAg4pqhJHtzLnN0cmVhay5jdXJyZW50fWAgOiAnJztcblxuICAgICAgICBjb25zdCBocFBjdCA9IE1hdGgucm91bmQoKHMuaHAgLyBzLm1heEhwKSAqIDEwMCk7XG4gICAgICAgIGNvbnN0IGhwQ29sb3IgPSBocFBjdCA8IDMwID8gJ3ZhcigtLXNpc3ktcmVkKScgOiBocFBjdCA8IDYwID8gJ3ZhcigtLXNpc3ktZ29sZCknIDogJ3ZhcigtLXNpc3ktZ3JlZW4pJztcblxuICAgICAgICB0aGlzLnN0YXR1c0Jhckl0ZW0uZW1wdHkoKTtcbiAgICAgICAgdGhpcy5zdGF0dXNCYXJJdGVtLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG4gICAgICAgIHRoaXMuc3RhdHVzQmFySXRlbS5zdHlsZS5hbGlnbkl0ZW1zID0gJ2NlbnRlcic7XG4gICAgICAgIHRoaXMuc3RhdHVzQmFySXRlbS5zdHlsZS5nYXAgPSAnNnB4JztcbiAgICAgICAgdGhpcy5zdGF0dXNCYXJJdGVtLnN0eWxlLmZvbnRTaXplID0gJzAuODVlbSc7XG5cbiAgICAgICAgLy8gU2hpZWxkL1Jlc3QgaW5kaWNhdG9yXG4gICAgICAgIGlmIChzaGllbGQpIHtcbiAgICAgICAgICAgIGNvbnN0IHNoaWVsZEVsID0gdGhpcy5zdGF0dXNCYXJJdGVtLmNyZWF0ZVNwYW4oeyB0ZXh0OiBzaGllbGQgfSk7XG4gICAgICAgICAgICBzaGllbGRFbC5zdHlsZS5mb250U2l6ZSA9ICcxLjFlbSc7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBIUCB3aXRoIGlubGluZSBtaW5pIGJhclxuICAgICAgICBjb25zdCBocFdyYXAgPSB0aGlzLnN0YXR1c0Jhckl0ZW0uY3JlYXRlU3BhbigpO1xuICAgICAgICBocFdyYXAuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcbiAgICAgICAgaHBXcmFwLnN0eWxlLmFsaWduSXRlbXMgPSAnY2VudGVyJztcbiAgICAgICAgaHBXcmFwLnN0eWxlLmdhcCA9ICczcHgnO1xuICAgICAgICBocFdyYXAuY3JlYXRlU3Bhbih7IHRleHQ6ICfimaUnIH0pLnN0eWxlLmNvbG9yID0gaHBDb2xvcjtcbiAgICAgICAgY29uc3QgaHBCYXIgPSBocFdyYXAuY3JlYXRlU3BhbigpO1xuICAgICAgICBocEJhci5zdHlsZS53aWR0aCA9ICczMHB4JztcbiAgICAgICAgaHBCYXIuc3R5bGUuaGVpZ2h0ID0gJzRweCc7XG4gICAgICAgIGhwQmFyLnN0eWxlLmJhY2tncm91bmQgPSAndmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpJztcbiAgICAgICAgaHBCYXIuc3R5bGUuYm9yZGVyUmFkaXVzID0gJzJweCc7XG4gICAgICAgIGhwQmFyLnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XG4gICAgICAgIGhwQmFyLnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lLWJsb2NrJztcbiAgICAgICAgY29uc3QgaHBGaWxsID0gaHBCYXIuY3JlYXRlU3BhbigpO1xuICAgICAgICBocEZpbGwuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgIGhwRmlsbC5zdHlsZS5oZWlnaHQgPSAnMTAwJSc7XG4gICAgICAgIGhwRmlsbC5zdHlsZS53aWR0aCA9IGAke2hwUGN0fSVgO1xuICAgICAgICBocEZpbGwuc3R5bGUuYmFja2dyb3VuZCA9IGhwQ29sb3I7XG4gICAgICAgIGhwRmlsbC5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnMnB4JztcbiAgICAgICAgaHBXcmFwLmNyZWF0ZVNwYW4oeyB0ZXh0OiBgJHtzLmhwfWAgfSkuc3R5bGUuZm9udEZhbWlseSA9ICd2YXIoLS1mb250LW1vbm9zcGFjZSknO1xuXG4gICAgICAgIC8vIExldmVsXG4gICAgICAgIGNvbnN0IGx2bCA9IHRoaXMuc3RhdHVzQmFySXRlbS5jcmVhdGVTcGFuKHsgdGV4dDogYEx2JHtzLmxldmVsfWAgfSk7XG4gICAgICAgIGx2bC5zdHlsZS5jb2xvciA9ICd2YXIoLS1zaXN5LXB1cnBsZSknO1xuICAgICAgICBsdmwuc3R5bGUuZm9udFdlaWdodCA9ICc3MDAnO1xuXG4gICAgICAgIC8vIEdvbGRcbiAgICAgICAgY29uc3QgZ29sZCA9IHRoaXMuc3RhdHVzQmFySXRlbS5jcmVhdGVTcGFuKHsgdGV4dDogYPCfkrAke3MuZ29sZH1gIH0pO1xuICAgICAgICBnb2xkLnN0eWxlLmNvbG9yID0gcy5nb2xkIDwgMCA/ICd2YXIoLS1zaXN5LXJlZCknIDogJ3ZhcigtLXNpc3ktZ29sZCknO1xuXG4gICAgICAgIC8vIE1pc3Npb25zXG4gICAgICAgIHRoaXMuc3RhdHVzQmFySXRlbS5jcmVhdGVTcGFuKHsgdGV4dDogYPCfk4ske21Db3VudH0vM2AgfSk7XG5cbiAgICAgICAgLy8gU3RyZWFrICsgY29tYm9cbiAgICAgICAgaWYgKHN0cmVhayB8fCBjb21ibykge1xuICAgICAgICAgICAgdGhpcy5zdGF0dXNCYXJJdGVtLmNyZWF0ZVNwYW4oeyB0ZXh0OiBgJHtzdHJlYWt9JHtjb21ib31gIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2hhb3MgbW9kaWZpZXIgaWNvblxuICAgICAgICB0aGlzLnN0YXR1c0Jhckl0ZW0uY3JlYXRlU3Bhbih7IHRleHQ6IHMuZGFpbHlNb2RpZmllci5pY29uIH0pO1xuICAgIH1cblxuICAgIGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcbiAgICAgICAgY29uc3Qgc3RhdGVNYW5hZ2VyID0gbmV3IFN0YXRlTWFuYWdlcihERUZBVUxUX1NFVFRJTkdTKTtcbiAgICAgICAgY29uc3QgbWlncmF0aW9uID0gc3RhdGVNYW5hZ2VyLm1pZ3JhdGUoYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcbiAgICAgICAgdGhpcy5jb25maWcgPSBtaWdyYXRpb24uY29uZmlnO1xuICAgICAgICB0aGlzLnNldHRpbmdzID0gbWlncmF0aW9uLnN0YXRlO1xuXG4gICAgICAgIGlmIChtaWdyYXRpb24ubWlncmF0ZWQpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZURhdGEoc3RhdGVNYW5hZ2VyLnRvUGVyc2lzdGVkU3RhdGUodGhpcy5jb25maWcsIHRoaXMuc2V0dGluZ3MpKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcbiAgICAgICAgY29uc3Qgc3RhdGVNYW5hZ2VyID0gbmV3IFN0YXRlTWFuYWdlcihERUZBVUxUX1NFVFRJTkdTKTtcbiAgICAgICAgdGhpcy5jb25maWcubXV0ZUF1ZGlvID0gdGhpcy5zZXR0aW5ncy5tdXRlZDtcbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlRGF0YShzdGF0ZU1hbmFnZXIudG9QZXJzaXN0ZWRTdGF0ZSh0aGlzLmNvbmZpZywgdGhpcy5zZXR0aW5ncykpO1xuICAgIH1cblxuICAgIC8qKiBUcmFjayBxdWVzdCBjb21wbGV0aW9uIGhvdXIgZm9yIHRpbWUtb2YtZGF5IGFuYWx5dGljcyAqL1xuICAgIHRyYWNrSG91cmx5Q29tcGxldGlvbigpIHtcbiAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICAgICAgY29uc3QgdG9kYXlTdHIgPSBub3cudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdO1xuICAgICAgICBsZXQgbWV0cmljID0gdGhpcy5zZXR0aW5ncy5kYXlNZXRyaWNzLmZpbmQoKGQ6IGFueSkgPT4gZC5kYXRlID09PSB0b2RheVN0cik7XG4gICAgICAgIGlmIChtZXRyaWMpIHtcbiAgICAgICAgICAgIGlmICghbWV0cmljLmhvdXJseUNvbXBsZXRpb25zKSBtZXRyaWMuaG91cmx5Q29tcGxldGlvbnMgPSBuZXcgQXJyYXkoMjQpLmZpbGwoMCk7XG4gICAgICAgICAgICBtZXRyaWMuaG91cmx5Q29tcGxldGlvbnNbbm93LmdldEhvdXJzKCldKys7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKiogU2hvdyByZWQgdmlnbmV0dGUgb3ZlcmxheSB3aGVuIEhQIGlzIGNyaXRpY2FsbHkgbG93ICovXG4gICAgc2hvd0hQVmlnbmV0dGUoKSB7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNpc3ktaHAtY3JpdGljYWwtdmlnbmV0dGUnKTtcbiAgICAgICAgaWYgKGV4aXN0aW5nKSByZXR1cm47IC8vIEFscmVhZHkgc2hvd2luZ1xuICAgICAgICBjb25zdCBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBlbC5jbGFzc05hbWUgPSAnc2lzeS1ocC1jcml0aWNhbC12aWduZXR0ZSc7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZWwpO1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IGVsLnJlbW92ZSgpLCA2MDAwKTtcbiAgICB9XG59XG4iXSwibmFtZXMiOlsiTm90aWNlIiwiTW9kYWwiLCJtb21lbnQiLCJTZXR0aW5nIiwiVEZvbGRlciIsIlRGaWxlIiwiZ2V0RGlmZmljdWx0eU51bSIsIkl0ZW1WaWV3IiwiZGVib3VuY2UiLCJQbHVnaW5TZXR0aW5nVGFiIiwiUGx1Z2lu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RUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLEVBQUUsT0FBTyxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUM7U0FDL0UsQ0FBQSxDQUFDLENBQUM7O1FBR0gsU0FBUyxDQUFDLFFBQVEsQ0FBQyxJQUFJLEVBQUUsRUFBRSxJQUFJLEVBQUUsWUFBWSxFQUFFLENBQUMsQ0FBQztBQUNqRCxRQUFBLE1BQU0sS0FBSyxHQUFHO0FBQ1YsWUFBQSxFQUFFLEVBQUUsRUFBRSxjQUFjLEVBQUUsSUFBSSxFQUFFLGNBQWMsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxZQUFZLEVBQUUsSUFBSSxFQUFFLEdBQUcsRUFBRSxRQUFRLEVBQUUsRUFBRSxFQUFFLE1BQU0sRUFBRSxFQUFFLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtBQUM1SCxZQUFBLEVBQUUsRUFBRSxFQUFFLGFBQWEsRUFBRSxJQUFJLEVBQUUsYUFBYSxFQUFFLElBQUksRUFBRSxHQUFHLEVBQUUsSUFBSSxFQUFFLGVBQWUsRUFBRSxJQUFJLEVBQUUsR0FBRyxFQUFFLFFBQVEsRUFBRSxFQUFFLEVBQUUsTUFBTSxFQUFFLEVBQUUsUUFBUSxFQUFFLENBQUMsRUFBRSxFQUFFO0FBQzlILFlBQUEsRUFBRSxFQUFFLEVBQUUsV0FBVyxFQUFFLElBQUksRUFBRSxXQUFXLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUscUJBQXFCLEVBQUUsSUFBSSxFQUFFLEdBQUcsRUFBRSxRQUFRLEVBQUUsR0FBRyxFQUFFLE1BQU0sRUFBRSxFQUFFLFVBQVUsRUFBRSxHQUFHLEVBQUUsRUFBRTtTQUMxSSxDQUFDO0FBRUYsUUFBQSxLQUFLLENBQUMsT0FBTyxDQUFDLElBQUksSUFBRztZQUNqQixJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUEsQ0FBQSxFQUFJLElBQUksQ0FBQyxJQUFJLENBQUUsQ0FBQSxFQUFFLElBQUksQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLElBQUksRUFBRSxN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QUEsRUFBQSxDQUFDLENBQUMsU0FBUyxDQUFJLENBQUEsRUFBQSxDQUFDLENBQUMsU0FBUyxDQUFFLENBQUEsQ0FBQyxDQUFDO0FBQ2hILGdCQUFBLElBQUksQ0FBQyxZQUFZLENBQUMsT0FBTyxFQUFFLGlDQUFpQyxDQUFDLENBQUM7QUFDOUQsZ0JBQUEsTUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFDO0FBQUMsZ0JBQUEsT0FBTyxDQUFDLFlBQVksQ0FBQyxPQUFPLEVBQUUsMkNBQTJDLENBQUMsQ0FBQztBQUM3RyxnQkFBQSxNQUFNLFdBQVcsR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLFFBQVEsRUFBRSxFQUFFLElBQUksRUFBRSxVQUFVLEVBQUUsQ0FBQyxDQUFDO0FBQUMsZ0JBQUEsV0FBVyxDQUFDLFlBQVksQ0FBQyxPQUFPLEVBQUUsNEdBQTRHLENBQUMsQ0FBQztBQUFDLGdCQUFBLFdBQVcsQ0FBQyxPQUFPLEdBQUcsTUFBSyxFQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLHFCQUFxQixDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxDQUFDLEVBQUUsQ0FBQztBQUNsVSxnQkFBQSxNQUFNLFNBQVMsR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLFFBQVEsRUFBRSxFQUFFLElBQUksRUFBRSxRQUFRLEVBQUUsQ0FBQyxDQUFDO0FBQUMsZ0JBQUEsU0FBUyxDQUFDLFlBQVksQ0FBQyxPQUFPLEVBQUUsMEdBQTBHLENBQUMsQ0FBQztBQUFDLGdCQUFBLFNBQVMsQ0FBQyxPQUFPLEdBQUcsTUFBVyxTQUFBLENBQUEsSUFBQSxFQUFBLEtBQUEsQ0FBQSxFQUFBLEtBQUEsQ0FBQSxFQUFBLGFBQUEsRUFBRyxNQUFNLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLG1CQUFtQixDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLEVB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QyxJQUFJLENBQUMsS0FBSyxJQUFJLEtBQUssQ0FBQyxLQUFLLElBQUksQ0FBQyxDQUFDO0FBQUUsWUFBQSxJQUFJLENBQUMsTUFBTSxDQUFDLGFBQWEsQ0FBQyxDQUFDOztBQUd6RSxRQUFBLElBQUksQ0FBQyxDQUFDLFlBQVksQ0FBQyxNQUFNLElBQUksQ0FBQztBQUFFLFlBQUEsSUFBSSxDQUFDLE1BQU0sQ0FBQyxZQUFZLENBQUMsQ0FBQzs7QUFHMUQsUUFBQSxJQUFJLENBQUMsQ0FBQyxhQUFhLENBQUMsaUJBQWlCLElBQUksQ0FBQztBQUFFLFlBQUEsSUFBSSxDQUFDLE1BQU0sQ0FBQyxZQUFZLENBQUMsQ0FBQzs7QUFHdEUsUUFBQSxJQUFJLENBQUMsQ0FBQyxJQUFJLElBQUksR0FBRztBQUFFLFlBQUEsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQzs7QUFHdkMsUUFBQSxJQUFJLENBQUMsQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsUUFBUSxDQUFDO0FBQUUsWUFBQSxJQUFJLENBQUMsTUFBTSxDQUFDLGFBQWEsQ0FBQyxDQUFDOztBQUd2RSxRQUFBLElBQUksQ0FBQyxDQUFDLEtBQUssSUFBSSxFQUFFO0FBQUUsWUFBQSxJQUFJLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDOztBQUczQyxRQUFBLElBQUksQ0FBQyxDQUFDLEtBQUssSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDLE1BQU0sQ0FBQyxVQUFVLEtBQUssQ0FBQztBQUFFLFlBQUEsSUFBSSxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQztLQUMzRTtBQUVELElBQUEsTUFBTSxDQUFDLEVBQVUsRUFBQTtRQUNiLE1BQU0sR0FBRyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQztBQUM5RCxRQUFBLElBQUksR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLFFB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QUFFLENBQUMsUUFBUSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUUsQ0FBQSxDQUFDLENBQUM7QUFDaEYsUUFBQSxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksRUFBRSxHQUFHLENBQUMsQ0FBQztBQUFDLFFBQUEsSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLEVBQUUsR0FBRyxDQUFDLENBQUM7QUFDM0QsUUFBQSxJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksRUFBRSxHQUFHLENBQUMsQ0FBQztBQUFDLFFBQUEsSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLEVBQUUsR0FBRyxDQUFDLENBQUM7UUFDM0QsTUFBTSxFQUFFLEdBQUcsUUFBUSxDQUFDLGVBQWUsQ0FBQyw0QkFBNEIsRUFBRSxNQUFNLENBQUMsQ0FBQztBQUMxRSxRQUFBLEVBQUUsQ0FBQyxZQUFZLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxDQUFDO0FBQUMsUUFBQSxFQUFFLENBQUMsWUFBWSxDQUFDLFlBQVksRUFBRSxLQUFLLENBQUMsQ0FBQztBQUFDLFFBQUEsRUFBRSxDQUFDLFlBQVksQ0FBQyxjQUFjLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFDOUcsTUFBTSxFQUFFLEdBQUcsUUFBUSxDQUFDLGVBQWUsQ0FBQyw0QkFBNEIsRUFBRSxNQUFNLENBQUMsQ0FBQztBQUMxRSxRQUFBLEVBQUUsQ0FBQyxZQUFZLENBQUMsUUFBUSxFQUFFLE1BQU0sQ0FBQyxDQUFDO0FBQUMsUUFBQSxFQUFFLENBQUMsWUFBWSxDQUFDLFlBQVksRUFBRSxLQUFLLENBQUMsQ0FBQztBQUFDLFFBQUEsRUFBRSxDQUFDLFlBQVksQ0FBQyxjQUFjLEVBQUUsS0FBSyxDQUFDLENBQUM7QUFDaEgsUUFBQSxJQUFJLENBQUMsV0FBVyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQUMsUUFBQSxJQUFJLENBQUMsV0FBVyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQzNDLFFBQUEsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUFDLFFBQUEsR0FBRyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQzs7UUFHOUMsTUFBTSxJQUFJLEdBQUcsUUFBUSxDQUFDLGVBQWUsQ0FBQyw0QkFBNEIsRUFBRSxTQUFTLENBQUMsQ0FBQztRQUMvRSxNQUFNLE1BQU0sR0FBRyxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDckQsTUFBTSxLQUFLLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxLQUFLLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNwRSxJQUFJLENBQUMsWUFBWSxDQUFDLFFBQVEsRUFBRSxDQUFHLEVBQUEsTUFBTSxDQUFJLENBQUEsRUFBQSxDQUFDLENBQUksQ0FBQSxFQUFBLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUEsQ0FBQSxFQUFJLEtBQUssQ0FBSSxDQUFBLEVBQUEsQ0FBQyxDQUFFLENBQUEsQ0FBQyxDQUFDO0FBQ2hGLFFBQUEsSUFBSSxDQUFDLFlBQVksQ0FBQyxNQUFNLEVBQUUsQ0FBUSxLQUFBLEVBQUEsSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsQ0FBQSxDQUFBLENBQUcsQ0FBQyxDQUFDO0FBQzlELFFBQUEsR0FBRyxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsQ0FBQzs7UUFHdEIsTUFBTSxRQUFRLEdBQUcsUUFBUSxDQUFDLGVBQWUsQ0FBQyw0QkFBNEIsRUFBRSxVQUFVLENBQUMsQ0FBQztBQUNwRixRQUFBLFFBQVEsQ0FBQyxZQUFZLENBQUMsUUFBUSxFQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztBQUNsRCxRQUFBLFFBQVEsQ0FBQyxZQUFZLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxDQUFDO0FBQ3RDLFFBQUEsUUFBUSxDQUFDLFlBQVksQ0FBQyxRQUFRLEVBQUUsS0FBSyxDQUFDLENBQUM7QUFDdkMsUUFBQSxRQUFRLENBQUMsWUFBWSxDQUFDLGNBQWMsRUFBRSxLQUFLLENBQUMsQ0FBQztBQUM3QyxRQUFBLFFBQVEsQ0FBQyxZQUFZLENBQUMsZ0JBQWdCLEVBQUUsT0FBTyxDQUFDLENBQUM7QUFDakQsUUFBQSxHQUFHLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxDQUFDOztBQUcxQixRQUFBLE1BQU0sU0FBUyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUN2RCxNQUFNLEdBQUcsR0FBRyxRQUFRLENBQUMsZUFBZSxDQUFDLDRCQUE0QixFQUFFLFFBQVEsQ0FBQyxDQUFDO1FBQzdFLEdBQUcsQ0FBQyxZQUFZLENBQUMsSUFBSSxFQUFFLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQUMsR0FBRyxDQUFDLFlBQVksQ0FBQyxJQUFJLEVBQUUsU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDM0UsUUFBQSxHQUFHLENBQUMsWUFBWSxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQztBQUFDLFFBQUEsR0FBRyxDQUFDLFlBQVksQ0FBQyxNQUFNLEVBQUUsS0FBSyxDQUFDLENBQUM7QUFDNUQsUUFBQSxHQUFHLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0tBQ3hCO0FBRUQ7O0FBRWtFO0lBQ2xFLE9BQU8sV0FBVyxDQUFDLE1BQW1CLEVBQUUsTUFBZSxFQUFFLFdBQW1CLEVBQUUsRUFBQTtBQUMxRSxRQUFBLE1BQU0sSUFBSSxHQUFHLEdBQUcsRUFBRSxFQUFFLEdBQUcsSUFBSSxHQUFHLENBQUMsRUFBRSxFQUFFLEdBQUcsSUFBSSxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsRUFBRSxDQUFDO0FBQ3ZELFFBQUEsTUFBTSxHQUFHLEdBQUcsTUFBTSxDQUFDLEtB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LFNBQVMsR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUMsU0FBUyxHQUFHLENBQUMsQ0FBQyxTQUFTLElBQUksR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQ3BGLGdCQUFBLEdBQUcsQ0FBQyxTQUFTLENBQUMsRUFBRSxHQUFHLEVBQUUsZ0NBQWdDLEVBQUUsSUFBSSxFQUFFLEVBQUUsS0FBSyxFQUFFLENBQVMsTUFBQSxFQUFBLElBQUksSUFBSSxFQUFFLEVBQUUsQ0FBQyxDQUFDO0FBRTdGLGdCQUFBLE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsRUFBRSxHQUFHLEVBQUUsY0FBYyxFQUFFLENBQUMsQ0FBQztnQkFDckQsSUFBSSxDQUFDLFFBQVEsQ0FBQyxRQUFRLEVBQUUsRUFBRSxJQUFJLEVBQUUsVUFBVSxFQUFFLEdBQUcsRUFBRSxtQ0FBbUMsRUFBRSxDQUFDLENBQUMsT0FBTyxHQUFHLE1BQUssRUFBRyxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDLEVBQUUsQ0FBQztnQkFDbE0sSUFBSSxDQUFDLFFBQVEsQ0FBQyxRQUFRLEVBQUUsRUFBRSxJQUFJLEVBQUUsUUFBUSxFQUFFLEdBQUcsRUFBRSxtQ0FBbUMsRUFBRSxDQUFDLENBQUMsT0FBTyxHQUFHLE1BQWMsU0FBQSxDQUFBLElBQUEsRUFBQSxLQUFBLENBQUEsRUFBQSxLQUFBLENBQUEsRUFBQSxhQUFBLEVBQUEsTUFBTSxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQyxFQUFFLENBQUEsQ0FBQztBQUNqTSxhQUFDLENBQUMsQ0FBQztLQUNOO0FBRUQsSUFBQSxl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
